webpackJsonp([0],[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(90);n.d(t,"accessor",function(){return r.c}),n.d(t,"accessorName",function(){return r.b}),n.d(t,"accessorFields",function(){return r.a});var i=n(358);n.d(t,"id",function(){return i.b}),n.d(t,"identity",function(){return i.c}),n.d(t,"zero",function(){return i.f}),n.d(t,"one",function(){return i.d}),n.d(t,"truthy",function(){return i.e}),n.d(t,"falsy",function(){return i.a});var a=n(865);n.d(t,"logger",function(){return a.f}),n.d(t,"None",function(){return a.d}),n.d(t,"Error",function(){return a.b}),n.d(t,"Warn",function(){return a.e}),n.d(t,"Info",function(){return a.c}),n.d(t,"Debug",function(){return a.a});var o=n(866);n.d(t,"panLinear",function(){return o.a}),n.d(t,"panLog",function(){return o.b}),n.d(t,"panPow",function(){return o.c}),n.d(t,"zoomLinear",function(){return o.d}),n.d(t,"zoomLog",function(){return o.e}),n.d(t,"zoomPow",function(){return o.f});var s=n(210);n.d(t,"array",function(){return s.a});var u=n(867);n.d(t,"compare",function(){return u.a});var c=n(868);n.d(t,"constant",function(){return c.a});var l=n(869);n.d(t,"debounce",function(){return l.a});var f=n(360);n.d(t,"error",function(){return f.a});var d=n(870);n.d(t,"extend",function(){return d.a});var p=n(871);n.d(t,"extentIndex",function(){return p.a});var h=n(872);n.d(t,"fastmap",function(){return h.a});var m=n(359);n.d(t,"field",function(){return m.a});var g=n(873);n.d(t,"inherits",function(){return g.a});var v=n(209);n.d(t,"isArray",function(){return v.a});var y=n(874);n.d(t,"isBoolean",function(){return y.a});var b=n(365);n.d(t,"isDate",function(){return b.a});var w=n(211);n.d(t,"isFunction",function(){return w.a});var O=n(366);n.d(t,"isNumber",function(){return O.a});var x=n(361);n.d(t,"isObject",function(){return x.a});var j=n(875);n.d(t,"isRegExp",function(){return j.a});var _=n(362);n.d(t,"isString",function(){return _.a});var S=n(876);n.d(t,"key",function(){return S.a});var M=n(877);n.d(t,"merge",function(){return M.a});var E=n(878);n.d(t,"pad",function(){return E.a});var k=n(363);n.d(t,"peek",function(){return k.a});var N=n(367);n.d(t,"repeat",function(){return N.a});var A=n(126);n.d(t,"splitAccessPath",function(){return A.a});var P=n(127);n.d(t,"stringValue",function(){return P.a});var C=n(879);n.d(t,"toBoolean",function(){return C.a});var D=n(880);n.d(t,"toDate",function(){return D.a});var T=n(364);n.d(t,"toNumber",function(){return T.a});var R=n(881);n.d(t,"toString",function(){return R.a});var L=n(882);n.d(t,"toSet",function(){return L.a});var I=n(883);n.d(t,"truncate",function(){return I.a});var F=n(884);n.d(t,"visitArray",function(){return F.a})},function(e,t,n){"use strict";n(91);var r=n(212);n.d(t,"h",function(){return r.a}),n.d(t,"l",function(){return r.b});var i=n(885);n.d(t,"a",function(){return i.a});var a=n(369);n.d(t,"b",function(){return a.a});var o=n(368);n.d(t,"e",function(){return o.a});var s=n(130);n.d(t,"f",function(){return s.b});var u=n(378);n.d(t,"c",function(){return u.a});var c=n(128);n.d(t,"d",function(){return c.a});var l=n(914);n.d(t,"g",function(){return l.a});var f=n(213);n.d(t,"j",function(){return f.a}),n.d(t,"n",function(){return f.d}),n.d(t,"k",function(){return f.b}),n.d(t,"m",function(){return f.c}),n.d(t,"o",function(){return f.e}),n.d(t,"r",function(){return f.f});var d=n(915);n.d(t,"i",function(){return d.a}),n.d(t,"p",function(){return d.b}),n.d(t,"q",function(){return d.c})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(438),i=n(0),a=n(230),o=n(0);function s(e,t){return e.indexOf(t)>-1}function u(e,t){return e.filter(function(e){return!s(t,e)})}function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){e=l(e,i[r])}return e}function l(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||i.isArray(t[n])||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=c(i.isArray(t[n].constructor)?[]:{},t[n]):c(e[n],t[n]));return e}function f(e){return JSON.parse(JSON.stringify(e))}t.isArray=o.isArray,t.isObject=o.isObject,t.isNumber=o.isNumber,t.isString=o.isString,t.truncate=o.truncate,t.toSet=o.toSet,t.stringValue=o.stringValue,t.splitAccessPath=o.splitAccessPath,t.pick=function(e,t){for(var n={},r=0,i=t;r<i.length;r++){var a=i[r];e.hasOwnProperty(a)&&(n[a]=e[a])}return n},t.omit=function(e,t){for(var n=f(e),r=0,i=t;r<i.length;r++)delete n[i[r]];return n},t.stringify=r,t.hash=function(e){if(i.isNumber(e))return e;var t=i.isString(e)?e:r(e);if(t.length<100)return t;for(var n=0,a=0;a<t.length;a++)n=(n<<5)-n+t.charCodeAt(a),n&=n;return n},t.contains=s,t.without=u,t.union=function(e,t){return e.concat(u(t,e))},t.some=function(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1},t.every=function(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0},t.flatten=function(e){return[].concat.apply([],e)},t.mergeDeep=c,t.unique=function(e,t){for(var n,r=[],i={},a=0,o=e;a<o.length;a++){var s=o[a];(n=t(s))in i||(i[n]=1,r.push(s))}return r},t.differ=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1},t.hasIntersection=function(e,t){for(var n in e)if(n in t)return!0;return!1},t.isNumeric=function(e){return!isNaN(e)},t.differArray=function(e,t){if(e.length!==t.length)return!0;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(t[n]!==e[n])return!0;return!1},t.keys=Object.keys,t.vals=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},t.flagKeys=function(e){return t.keys(e)},t.duplicate=f,t.isBoolean=function(e){return!0===e||!1===e},t.varName=function(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t},t.logicalExpr=function e(t,n){return a.isLogicalNot(t)?"!("+e(t.not,n)+")":a.isLogicalAnd(t)?"("+t.and.map(function(t){return e(t,n)}).join(") && (")+")":a.isLogicalOr(t)?"("+t.or.map(function(t){return e(t,n)}).join(") || (")+")":n(t)},t.deleteNestedProperty=function(e,n){for(var r=!0;n.length>0&&r;){for(var i=e,a=0;a<n.length-1;a++)i=i[n[a]];delete i[n.pop()],0!==t.keys(i).length&&(r=!1)}},t.titlecase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},t.accessPath=function(e){return"["+i.splitAccessPath(e).map(i.stringValue).join("][")+"]"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(2),a=r.logger(r.Warn),o=a,s=function(){function e(){this.warns=[],this.infos=[],this.debugs=[]}return e.prototype.level=function(){return this},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.warns).push.apply(e,t),this},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.infos).push.apply(e,t),this},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.debugs).push.apply(e,t),this},e}();function u(){return o=a}t.LocalLogger=s,t.wrap=function(e){return function(){o=new s,e(o),u()}},t.set=function(e){return o=e},t.reset=u,t.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.warn.apply(o,arguments)},t.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.info.apply(o,arguments)},t.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.debug.apply(o,arguments)},function(e){e.INVALID_SPEC="Invalid spec",e.FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.',e.CANNOT_FIX_RANGE_STEP_WITH_FIT='Cannot use a fixed value of "rangeStep" when "autosize" is "fit".',e.cannotProjectOnChannelWithoutField=function(e){return'Cannot project a selection on encoding channel "'+e+'", which has no field.'},e.nearestNotSupportForContinuous=function(e){return'The "nearest" transform is not supported for '+e+" marks."},e.selectionNotFound=function(e){return'Cannot find a selection named "'+e+'"'},e.SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",e.noSuchRepeatedValue=function(e){return'Unknown repeated value "'+e+'".'},e.CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views.",e.REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views.",e.cannotSetTitleAnchor=function(e){return'Cannot set title "anchor" for a '+e+" spec"},e.unrecognizedParse=function(e){return'Unrecognized parse "'+e+'".'},e.differentParse=function(e,t,n){return'An ancestor parsed field "'+e+'" as '+n+" but a child wants to parse the field as "+t+"."},e.invalidTransformIgnored=function(e){return"Ignoring an invalid transform: "+i.stringify(e)+"."},e.NO_FIELDS_NEEDS_AS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the the data from the secondary source.',e.primitiveChannelDef=function(e,t,n){return"Channel "+e+" is a "+t+". Converted to {value: "+i.stringify(n)+"}."},e.invalidFieldType=function(e){return'Invalid field type "'+e+'"'},e.invalidFieldTypeForCountAggregate=function(e,t){return'Invalid field type "'+e+'" for aggregate: "'+t+'", using "quantitative" instead.'},e.invalidAggregate=function(e){return'Invalid aggregation operator "'+e+'"'},e.emptyOrInvalidFieldType=function(e,t,n){return'Invalid field type "'+e+'" for channel "'+t+'", using "'+n+'" instead.'},e.emptyFieldDef=function(e,t){return"Dropping "+i.stringify(e)+' from channel "'+t+'" since it does not contain data field or value.'},e.incompatibleChannel=function(e,t,n){return e+' dropped as it is incompatible with "'+t+'"'+(n?" when "+n:"")+"."},e.facetChannelShouldBeDiscrete=function(e){return e+" encoding should be discrete (ordinal / nominal / binned)."},e.discreteChannelCannotEncode=function(e,t){return'Using discrete channel "'+e+'" to encode "'+t+'" field can be misleading as it does not encode '+("ordinal"===t?"order":"magnitude")+"."},e.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",e.unclearOrientContinuous=function(e){return'Cannot clearly determine orientation for "'+e+'" since both x and y channel encode continuous fields. In this case, we use vertical by default'},e.unclearOrientDiscreteOrEmpty=function(e){return'Cannot clearly determine orientation for "'+e+'" since both x and y channel encode discrete or empty fields.'},e.orientOverridden=function(e,t){return'Specified orient "'+e+'" overridden with "'+t+'"'},e.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",e.cannotUseScalePropertyWithNonColor=function(e){return'Cannot use the scale property "'+e+'" with non-color channel.'},e.unaggregateDomainHasNoEffectForRawField=function(e){return"Using unaggregated domain with raw field has no effect ("+i.stringify(e)+")."},e.unaggregateDomainWithNonSharedDomainOp=function(e){return'Unaggregated domain not applicable for "'+e+'" since it produces values outside the origin domain of the source data.'},e.unaggregatedDomainWithLogScale=function(e){return"Unaggregated domain is currently unsupported for log scale ("+i.stringify(e)+")."},e.cannotUseSizeFieldWithBandSize=function(e){return"Using size field when "+e+"-channel has a band scale is not supported."},e.cannotApplySizeToNonOrientedMark=function(e){return'Cannot apply size to non-oriented mark "'+e+'".'},e.rangeStepDropped=function(e){return'rangeStep for "'+e+'" is dropped as top-level '+("x"===e?"width":"height")+" is provided."},e.scaleTypeNotWorkWithChannel=function(e,t,n){return'Channel "'+e+'" does not work with "'+t+'" scale. We are using "'+n+'" scale instead.'},e.scaleTypeNotWorkWithFieldDef=function(e,t){return'FieldDef does not work with "'+e+'" scale. We are using "'+t+'" scale instead.'},e.scalePropertyNotWorkWithScaleType=function(e,t,n){return n+"-scale's \""+t+'" is dropped as it does not work with '+e+" scale."},e.scaleTypeNotWorkWithMark=function(e,t){return'Scale type "'+t+'" does not work with mark "'+e+'".'},e.mergeConflictingProperty=function(e,t,n,r){return"Conflicting "+t+' property "'+e+'" ('+i.stringify(n)+" and "+i.stringify(r)+").  Using "+i.stringify(n)+"."},e.independentScaleMeansIndependentGuide=function(e){return'Setting the scale to be independent for "'+e+'" means we also have to set the guide (axis or legend) to be independent.'},e.conflictedDomain=function(e){return"Cannot set "+e+'-scale\'s "domain" as it is binned. Please use "bin"\'s "extent" instead.'},e.domainSortDropped=function(e){return"Dropping sort property "+i.stringify(e)+" as unioned domains only support boolean or op 'count'."},e.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",e.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",e.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",e.cannotStackRangedMark=function(e){return'Cannot stack "'+e+'" if there is already "'+e+'2"'},e.cannotStackNonLinearScale=function(e){return"Cannot stack non-linear scale ("+e+")"},e.stackNonSummativeAggregate=function(e){return'Stacking is applied even though the aggregate function is non-summative ("'+e+'")'},e.invalidTimeUnit=function(e,t){return"Invalid "+e+": "+i.stringify(t)},e.dayReplacedWithDate=function(e){return'Time unit "'+e+'" is not supported. We are replacing it with '+e.replace("day","date")+"."},e.droppedDay=function(e){return"Dropping day from datetime "+i.stringify(e)+" as day cannot be combined with other units."}}(t.message||(t.message={}))},,,function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(2);!function(e){e.ROW="row",e.COLUMN="column",e.X="x",e.Y="y",e.X2="x2",e.Y2="y2",e.COLOR="color",e.SHAPE="shape",e.SIZE="size",e.OPACITY="opacity",e.TEXT="text",e.ORDER="order",e.DETAIL="detail",e.TOOLTIP="tooltip",e.HREF="href"}(a=t.Channel||(t.Channel={})),t.X=a.X,t.Y=a.Y,t.X2=a.X2,t.Y2=a.Y2,t.ROW=a.ROW,t.COLUMN=a.COLUMN,t.SHAPE=a.SHAPE,t.SIZE=a.SIZE,t.COLOR=a.COLOR,t.TEXT=a.TEXT,t.DETAIL=a.DETAIL,t.ORDER=a.ORDER,t.OPACITY=a.OPACITY,t.TOOLTIP=a.TOOLTIP,t.HREF=a.HREF;var s={x:1,y:1,x2:1,y2:1,size:1,shape:1,color:1,order:1,opacity:1,text:1,detail:1,tooltip:1,href:1},u=r({},s,{row:1,column:1});t.CHANNELS=o.flagKeys(u);u.order,u.detail;var c=i(u,["order","detail"]);t.SINGLE_DEF_CHANNELS=o.flagKeys(c),t.isChannel=function(e){return!!u[e]},t.UNIT_CHANNELS=o.flagKeys(s);var l=i(s,["x","y","x2","y2"]);t.NONPOSITION_CHANNELS=o.flagKeys(l);var f={x:1,y:1};t.POSITION_SCALE_CHANNELS=o.flagKeys(f);l.text,l.tooltip,l.href,l.detail,l.order;var d=i(l,["text","tooltip","href","detail","order"]);t.NONPOSITION_SCALE_CHANNELS=o.flagKeys(d);var p=r({},f,d);function h(e){switch(e){case t.COLOR:case t.DETAIL:case t.TOOLTIP:case t.HREF:case t.ORDER:case t.OPACITY:case t.ROW:case t.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0,geoshape:!0};case t.X:case t.Y:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0};case t.X2:case t.Y2:return{rule:!0,bar:!0,rect:!0,area:!0};case t.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0};case t.SHAPE:return{point:!0,geoshape:!0};case t.TEXT:return{text:!0}}}t.SCALE_CHANNELS=o.flagKeys(p),t.isScaleChannel=function(e){return!!p[e]},t.supportMark=function(e,t){return t in h(e)},t.getSupportedMark=h,t.rangeType=function(e){switch(e){case t.X:case t.Y:case t.SIZE:case t.OPACITY:case t.X2:case t.Y2:return"continuous";case t.ROW:case t.COLUMN:case t.SHAPE:case t.TEXT:case t.TOOLTIP:case t.HREF:return"discrete";case t.COLOR:return"flexible";case t.DETAIL:case t.ORDER:return}throw new Error("getSupportedRole not implemented for "+e)}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(97),o=n(98),s=n(6),u=n(3),c=n(99),l=n(23),f=n(2);function d(e){return!!e&&!!e.condition&&!f.isArray(e.condition)&&p(e.condition)}function p(e){return!(!e||!e.field&&"count"!==e.aggregate)}function h(e){return e&&"value"in e&&void 0!==e.value}function m(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!e.bin;case"latitude":case"longitude":case"temporal":return!1}throw new Error(u.message.invalidFieldType(e.type))}function g(e){return!m(e)}function v(e){return"count"===e.aggregate}function y(e,t){var n=e.field,r=e.bin,i=e.timeUnit,a=e.aggregate;return"count"===a?t.countTitle:r?n+" (binned)":i?n+" ("+c.getTimeUnitParts(i).join("-")+")":a?f.titlecase(a)+" of "+n:n}function b(e,t){var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toUpperCase()+"("+e.field+")":e.field}t.isConditionalSelection=function(e){return e.selection},t.isRepeatRef=function(e){return e&&!f.isString(e)&&"repeat"in e},t.isConditionalDef=function(e){return!!e&&!!e.condition},t.hasConditionalFieldDef=d,t.hasConditionalValueDef=function(e){return!!e&&!!e.condition&&(f.isArray(e.condition)||h(e.condition))},t.isFieldDef=p,t.isStringFieldDef=function(e){return p(e)&&f.isString(e.field)},t.isValueDef=h,t.isScaleFieldDef=function(e){return!(!e||!e.scale&&!e.sort)},t.vgField=function(e,t){void 0===t&&(t={});var n=e.field,r=t.prefix,i=t.suffix;if(v(e))n="count_*";else{var a=void 0;t.nofn||(e.bin?(a=o.binToString(e.bin),i=t.binSuffix||""):e.aggregate?a=String(t.aggregate||e.aggregate):e.timeUnit&&(a=String(e.timeUnit))),a&&(n=a+"_"+n)}return i&&(n=n+"_"+i),r&&(n=r+"_"+n),t.expr&&(n=""+t.expr+f.accessPath(n)),n},t.isDiscrete=m,t.isContinuous=g,t.isCount=v,t.verbalTitleFormatter=y,t.functionalTitleFormatter=b,t.defaultTitleFormatter=function(e,t){switch(t.fieldTitle){case"plain":return e.field;case"functional":return b(e);default:return y(e,t)}};var w=t.defaultTitleFormatter;function O(e){w=e}function x(e,t){if(e.timeUnit)return"temporal";if(e.bin)return"quantitative";switch(s.rangeType(t)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}function j(e,t){if(e.aggregate&&!a.isAggregateOp(e.aggregate)){e.aggregate;var n=i(e,["aggregate"]);u.warn(u.message.invalidAggregate(e.aggregate)),e=n}if(e.timeUnit&&(e=r({},e,{timeUnit:c.normalizeTimeUnit(e.timeUnit)})),e.bin&&(e=r({},e,{bin:_(e.bin,t)})),e.type){var o=l.getFullName(e.type);e.type!==o&&(e=r({},e,{type:o})),"quantitative"!==e.type&&a.isCountingAggregateOp(e.aggregate)&&(u.warn(u.message.invalidFieldTypeForCountAggregate(e.type,e.aggregate)),e=r({},e,{type:"quantitative"}))}else{var s=x(e,t);u.warn(u.message.emptyOrInvalidFieldType(e.type,t,s)),e=r({},e,{type:s})}var f=M(e,t),d=f.compatible,p=f.warning;return d||u.warn(p),e}function _(e,t){return f.isBoolean(e)?{maxbins:o.autoMaxBins(t)}:e.maxbins||e.step?e:r({},e,{maxbins:o.autoMaxBins(t)})}t.setTitleFormatter=O,t.resetTitleFormatter=function(){O(t.defaultTitleFormatter)},t.title=function(e,t){return w(e,t)},t.defaultType=x,t.getFieldDef=function(e){return p(e)?e:d(e)?e.condition:void 0},t.normalize=function(e,t){if(f.isString(e)||f.isNumber(e)||f.isBoolean(e)){var n=f.isString(e)?"string":f.isNumber(e)?"number":"boolean";return u.warn(u.message.primitiveChannelDef(t,n,e)),{value:e}}return p(e)?j(e,t):d(e)?r({},e,{condition:j(e.condition,t)}):e},t.normalizeFieldDef=j,t.normalizeBin=_;var S={compatible:!0};function M(e,t){switch(t){case"row":case"column":return g(e)&&!e.timeUnit?{compatible:!1,warning:u.message.facetChannelShouldBeDiscrete(t)}:S;case"x":case"y":case"color":case"text":case"detail":case"tooltip":case"href":return S;case"opacity":case"size":case"x2":case"y2":return m(e)&&!e.bin?{compatible:!1,warning:"Channel "+t+" should not be used with discrete field."}:S;case"shape":return"nominal"!==e.type&&"geojson"!==e.type?{compatible:!1,warning:"Shape channel should be used with nominal data or geojson only"}:S;case"order":return"nominal"===e.type?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:S}throw new Error("channelCompatability not implemented for channel "+t)}t.channelCompatibility=M,t.isNumberFieldDef=function(e){return"quantitative"===e.type||!!e.bin},t.isTimeFieldDef=function(e){return"temporal"===e.type||!!e.timeUnit}},,,function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(3),o=n(2);!function(e){e.LINEAR="linear",e.BIN_LINEAR="bin-linear",e.LOG="log",e.POW="pow",e.SQRT="sqrt",e.TIME="time",e.UTC="utc",e.SEQUENTIAL="sequential",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.ORDINAL="ordinal",e.BIN_ORDINAL="bin-ordinal",e.POINT="point",e.BAND="band"}(t.ScaleType||(t.ScaleType={}));var s={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position"};t.SCALE_TYPES=o.keys(s),t.scaleCompatible=function(e,t){var n=s[e],r=s[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n};var u={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0};t.scaleTypePrecedence=function(e){return u[e]},t.CONTINUOUS_TO_CONTINUOUS_SCALES=["linear","bin-linear","log","pow","sqrt","time","utc"];var c=o.toSet(t.CONTINUOUS_TO_CONTINUOUS_SCALES);t.CONTINUOUS_DOMAIN_SCALES=t.CONTINUOUS_TO_CONTINUOUS_SCALES.concat(["sequential"]);var l=o.toSet(t.CONTINUOUS_DOMAIN_SCALES);t.DISCRETE_DOMAIN_SCALES=["ordinal","bin-ordinal","point","band"];var f=o.toSet(t.DISCRETE_DOMAIN_SCALES),d=o.toSet(["bin-linear","bin-ordinal"]);function p(e){return e in l}function h(e){return e in c}t.TIME_SCALE_TYPES=["time","utc"],t.hasDiscreteDomain=function(e){return e in f},t.isBinScale=function(e){return e in d},t.hasContinuousDomain=p,t.isContinuousToContinuous=h,t.defaultScaleConfig={textXRangeStep:90,rangeStep:21,pointPadding:.5,bandPaddingInner:.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4},t.isExtendedScheme=function(e){return e&&!!e.name},t.isSelectionDomain=function(e){return e&&e.selection};var m={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1};t.SCALE_PROPERTIES=o.flagKeys(m);var g=r(m,["type","domain","range","rangeStep","scheme"]);t.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=o.flagKeys(g),t.scaleTypeSupportProperty=function(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return o.contains(["sequential","ordinal","bin-ordinal","quantile","quantize"],e);case"interpolate":return o.contains(["linear","bin-linear","pow","log","sqrt","utc","time"],e);case"round":return h(e)||"band"===e||"point"===e;case"padding":return h(e)||o.contains(["point","band"],e);case"paddingOuter":case"rangeStep":return o.contains(["point","band"],e);case"paddingInner":return"band"===e;case"clamp":return h(e)||"sequential"===e;case"nice":return h(e)||"sequential"===e||"quantize"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"zero":return p(e)&&!o.contains(["log","time","utc","bin-linear","threshold","quantile"],e)}throw new Error("Invalid scale property "+t+".")},t.channelScalePropertyIncompatability=function(e,t){switch(t){case"interpolate":case"scheme":return"color"!==e?a.message.cannotUseScalePropertyWithNonColor(e):void 0;case"type":case"domain":case"range":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return}throw new Error('Invalid scale property "'+t+'".')},t.channelSupportScaleType=function(e,t){switch(e){case i.Channel.X:case i.Channel.Y:case i.Channel.SIZE:case i.Channel.OPACITY:return h(t)||o.contains(["band","point"],t);case i.Channel.COLOR:return"band"!==t;case i.Channel.SHAPE:return"ordinal"===t}return!1}},,function(e,t,n){"use strict";n.d(t,"n",function(){return r}),n.d(t,"g",function(){return i}),n.d(t,"o",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return f}),n.d(t,"k",function(){return d}),n.d(t,"h",function(){return p}),n.d(t,"i",function(){return h}),n.d(t,"j",function(){return m}),n.d(t,"l",function(){return g}),n.d(t,"m",function(){return v}),n.d(t,"p",function(){return y});var r="mark",i="frame",a="scope",o="axis",s="axis-domain",u="axis-grid",c="axis-label",l="axis-tick",f="axis-title",d="legend",p="legend-entry",h="legend-gradient",m="legend-label",g="legend-symbol",v="legend-title",y="title"},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(6),u=n(28),c=n(7),l=n(3),f=n(10),d=n(73),p=n(441),h=n(153),m=n(2),g=n(29),v=n(1129),y=n(444),b=n(154),w=n(445),O=n(446),x=n(1133),j=n(1134),_=n(1137),S=n(101),M=n(1139),E=n(30),k=function(){function e(){this.nameMap={}}return e.prototype.rename=function(e,t){this.nameMap[e]=t},e.prototype.has=function(e){return void 0!==this.nameMap[e]},e.prototype.get=function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e},e}();function N(e){return e&&"unit"===e.type}function A(e){return e&&"facet"===e.type}t.NameMap=k,t.isUnitModel=N,t.isFacetModel=A,t.isRepeatModel=function(e){return e&&"repeat"===e.type},t.isConcatModel=function(e){return e&&"concat"===e.type},t.isLayerModel=function(e){return e&&"layer"===e.type};var P=function(){function e(e,t,n,r,i){var s=this;this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=s.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=s.lookupDataSource(e.from.facet.data)),e},this.parent=t,this.config=r,this.name=e.name||n,this.title=o.isString(e.title)?{text:e.title}:e.title,this.scaleNameMap=t?t.scaleNameMap:new k,this.projectionNameMap=t?t.projectionNameMap:new k,this.layoutSizeNameMap=t?t.layoutSizeNameMap:new k,this.data=e.data,this.description=e.description,this.transforms=h.normalizeTransform(e.transform||[]),this.component={data:{sources:t?t.component.data.sources:{},outputNodes:t?t.component.data.outputNodes:{},outputNodeRefCounts:t?t.component.data.outputNodeRefCounts:{},ancestorParse:t?a({},t.component.data.ancestorParse):{},isFaceted:d.isFacetSpec(e)||t&&t.component.data.isFaceted&&!e.data},layoutSize:new E.Split,layoutHeaders:{row:{},column:{}},mark:null,resolve:a({scale:{},axis:{},legend:{}},i||{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object.defineProperty(e.prototype,"width",{get:function(){return this.getSizeSignalRef("width")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getSizeSignalRef("height")},enumerable:!0,configurable:!0}),e.prototype.initSize=function(e){var t=e.width,n=e.height;t&&this.component.layoutSize.set("width",t,!0),n&&this.component.layoutSize.set("height",n,!0)},e.prototype.parse=function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSize(),this.parseSelection(),this.parseProjection(),this.parseData(),this.parseAxisAndHeader(),this.parseLegend(),this.parseMarkGroup()},e.prototype.parseScale=function(){M.parseScale(this)},e.prototype.parseProjection=function(){j.parseProjection(this)},e.prototype.renameTopLevelLayoutSize=function(){"width"!==this.getName("width")&&this.renameLayoutSize(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameLayoutSize(this.getName("height"),"height")},e.prototype.parseLegend=function(){O.parseLegend(this)},e.prototype.assembleGroupStyle=function(){if("unit"===this.type||"layer"===this.type)return"cell"},e.prototype.assembleLayoutSize=function(){if("unit"===this.type||"layer"===this.type)return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},e.prototype.assembleHeaderMarks=function(){for(var e=this.component.layoutHeaders,t=[],n=0,r=y.HEADER_CHANNELS;n<r.length;n++){e[o=r[n]].title&&t.push(y.getTitleGroup(this,o))}for(var i=0,a=y.HEADER_CHANNELS;i<a.length;i++){var o=a[i];t=t.concat(y.getHeaderGroups(this,o))}return t},e.prototype.assembleAxes=function(){return v.assembleAxes(this.component.axes)},e.prototype.assembleLegends=function(){return w.assembleLegends(this)},e.prototype.assembleProjections=function(){return x.assembleProjections(this)},e.prototype.assembleTitle=function(){var e=a({},p.extractTitleConfig(this.config.title).nonMark,this.title);if(e.text)return m.contains(["unit","layer"],this.type)||(e.anchor&&"start"!==e.anchor&&l.warn(l.message.cannotSetTitleAnchor(this.type)),e.anchor="start"),m.keys(e).length>0?e:void 0},e.prototype.assembleGroup=function(e){void 0===e&&(e=[]);var t={};(e=e.concat(this.assembleSelectionSignals())).length>0&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||A(this.parent)?_.assembleScales(this):[];r.length>0&&(t.scales=r);var i=this.assembleAxes();i.length>0&&(t.axes=i);var a=this.assembleLegends();return a.length>0&&(t.legends=a),t},e.prototype.hasDescendantWithFieldOnChannel=function(e){for(var t=0,n=this.children;t<n.length;t++){var r=n[t];if(N(r)){if(r.channelHasField(e))return!0}else if(r.hasDescendantWithFieldOnChannel(e))return!0}return!1},e.prototype.getName=function(e){return m.varName((this.name?this.name+"_":"")+e)},e.prototype.requestDataName=function(e){var t=this.getName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t},e.prototype.getSizeSignalRef=function(e){if(A(this.parent)){var t="width"===e?"x":"y",n=this.component.scales[t];if(n&&!n.merged){var r=n.get("type"),i=n.get("range");if(f.hasDiscreteDomain(r)&&g.isVgRangeStep(i)){var a=n.get("name"),o=S.assembleDomain(this,t),s=S.getFieldFromDomain(o);if(s){var u=c.vgField({aggregate:"distinct",field:s},{expr:"datum"});return{signal:b.sizeExpr(a,n,u)}}return l.warn("Unknown field for ${channel}.  Cannot calculate view size."),null}}}return{signal:this.layoutSizeNameMap.get(this.getName(e))}},e.prototype.lookupDataSource=function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e},e.prototype.getSizeName=function(e){return this.layoutSizeNameMap.get(e)},e.prototype.renameLayoutSize=function(e,t){this.layoutSizeNameMap.rename(e,t)},e.prototype.renameScale=function(e,t){this.scaleNameMap.rename(e,t)},e.prototype.renameProjection=function(e,t){this.projectionNameMap.rename(e,t)},e.prototype.scaleName=function(e,t){return t?this.getName(e):s.isChannel(e)&&s.isScaleChannel(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0},e.prototype.projectionName=function(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0},e.prototype.getScaleComponent=function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0},e.prototype.getSelectionComponent=function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(l.message.selectionNotFound(t));return n},e}();t.Model=P;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.vgField=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);if(n)return c.vgField(n,t)},t.prototype.reduceFieldDef=function(e,t,n){return u.reduce(this.getMapping(),function(t,n,r){var i=c.getFieldDef(n);return i?e(t,i,r):t},t,n)},t.prototype.forEachFieldDef=function(e,t){u.forEach(this.getMapping(),function(t,n){var r=c.getFieldDef(t);r&&e(r,n)},t)},t}(P);t.ModelWithField=C},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.debugName=e,this._children=[],this._parent=null}return e.prototype.clone=function(){throw new Error("Cannot clone node")},e.prototype.producedFields=function(){return{}},e.prototype.dependentFields=function(){return{}},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(e){this._parent=e,e.addChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return this._children.length},e.prototype.addChild=function(e){this._children.push(e)},e.prototype.removeChild=function(e){this._children.splice(this._children.indexOf(e),1)},e.prototype.remove=function(){for(var e=0,t=this._children;e<t.length;e++){t[e].parent=this._parent}this._parent.removeChild(this)},e.prototype.insertAsParentOf=function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this},e.prototype.swapWithParent=function(){for(var e=this._parent,t=e.parent,n=0,r=this._children;n<r.length;n++){r[n].parent=e}this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this},e}();t.DataFlowNode=a;var o=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.type=n,i.refCounts=r,i._source=i._name=t,!i.refCounts||i._name in i.refCounts||(i.refCounts[i._name]=0),i}return i(t,e),t.prototype.clone=function(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e},t.prototype.getSource=function(){return this.refCounts[this._name]++,this._source},t.prototype.isRequired=function(){return!!this.refCounts[this._name]},t.prototype.setSource=function(e){this._source=e},t}(a);t.OutputNode=o},function(e,t,n){"use strict";t.b=function(e){return Object(a.isObject)(e)?e:{value:e}},t.a=function(e,t,n){return null!=n?(e[t]=Object(a.isObject)(n)&&!Object(a.isArray)(n)?n:{value:n},1):0},t.d=function(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=Object(a.extend)(e[r]||{},t[r]));return e},t.c=function(e,t,n,s,u,c){var l,f;for(f in(c=c||{}).encoders={$encode:l={}},e=function(e,t,n,r,s){var u,c,l={};for(u in"legend"!=n&&0!==String(n).indexOf("axis")||(n=null),c=n===i.g?s.group:n===i.n?Object(a.extend)({},s.mark,s[t]):null)o(u,e)||("fill"===u||"stroke"===u)&&(o("fill",e)||o("stroke",e))||(l[u]={value:c[u]});return Object(a.array)(r).forEach(function(t){var n=s.style&&s.style[t];for(var r in n)o(r,e)||(l[r]={value:n[r]})}),(e=Object(a.extend)({},e)).enter=Object(a.extend)(l,e.enter),e}(e,t,n,s,u.config))l[f]=Object(r.a)(e[f],t,c,u);return c},t.e=o;var r=n(1081),i=n(12),a=n(0);function o(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(146),a=n(6),o=n(3),s=n(232),u=n(2),c=n(13),l=n(238),f=n(450),d=n(1142),p=n(1143);function h(e,t){return m(e,function(n,r){t=r.marks?r.marks(e,n,t):t,p.forEachTransform(n,function(r){r.marks&&(t=r.marks(e,n,t))})}),t}function m(e,t){var n=e.component.selection;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];t(i,g(i.type))}}function g(e){switch(e){case"single":return d.default;case"multi":return f.default;case"interval":return l.default}return null}function v(e){for(var t=e.parent;t&&!c.isFacetModel(t);)t=t.parent;return t}t.STORE="_store",t.TUPLE="_tuple",t.MODIFY="_modify",t.SELECTION_DOMAIN="_selection_domain_",t.parseUnitSelection=function(e,t){var n={},a=e.config.selection,o=function(o){if(!t.hasOwnProperty(o))return"continue";var s=t[o],c=a[s.type];for(var l in c)"encodings"===l&&s.fields||"fields"===l&&s.encodings||("mark"===l&&(s[l]=r({},c[l],s[l])),void 0!==s[l]&&!0!==s[l]||(s[l]=c[l]||s[l]));o=u.varName(o);var f=n[o]=r({},s,{name:o,events:u.isString(s.on)?i.selector(s.on,"scope"):s.on});p.forEachTransform(f,function(t){t.parse&&t.parse(e,s,f)})};for(var s in t)o(s);return n},t.assembleUnitSelectionSignals=function(e,n){m(e,function(r,i){var a=r.name,o=i.modifyExpr(e,r);n.push.apply(n,i.signals(e,r)),p.forEachTransform(r,function(t){t.signals&&(n=t.signals(e,r,n)),t.modifyExpr&&(o=t.modifyExpr(e,r,o))}),n.push({name:a+t.MODIFY,on:[{events:{signal:a+t.TUPLE},update:"modify("+u.stringValue(r.name+t.STORE)+", "+o+")"}]})});var r=v(e);if(n.length&&r){var a=u.stringValue(r.getName("cell"));n.unshift({name:"facet",value:{},on:[{events:i.selector("mousemove","scope"),update:"isTuple(facet) ? facet : group("+a+").datum"}]})}return n},t.assembleTopLevelSignals=function(e,t){var n=!1;return m(e,function(r,i){i.topLevelSignals&&(t=i.topLevelSignals(e,r,t)),p.forEachTransform(r,function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}),n=!0}),n&&(t.filter(function(e){return"unit"===e.name}).length||t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})),t},t.assembleUnitSelectionData=function(e,n){return m(e,function(e){n.filter(function(n){return n.name===e.name+t.STORE}).length||n.push({name:e.name+t.STORE})}),n},t.assembleUnitSelectionMarks=h,t.assembleLayerSelectionMarks=function(e,t){return e.children.forEach(function(e){c.isUnitModel(e)&&(t=h(e,t))}),t},t.selectionPredicate=function(e,n,r){var i=[],a=u.logicalExpr(n,function(n){var a=u.varName(n),o=e.getSelectionComponent(a,n),s=u.stringValue(a+t.STORE);if(o.timeUnit){var c=r||e.component.data.raw,l=o.timeUnit.clone();c.parent?l.insertAsParentOf(c):c.parent=l}return"none"!==o.empty&&i.push(s),g(o.type).predicate+"("+s+", datum"+("global"===o.resolve?")":", "+u.stringValue(o.resolve)+")")});return(i.length?"!("+i.map(function(e){return"length(data("+e+"))"}).join(" || ")+") || ":"")+"("+a+")"},t.isRawSelectionDomain=function(e){return e.signal.indexOf(t.SELECTION_DOMAIN)>=0},t.selectionScaleDomain=function(e,n){var r=JSON.parse(n.signal.replace(t.SELECTION_DOMAIN,"")),i=u.varName(r.selection),a=e.component.selection&&e.component.selection[i];return a?(o.warn('Use "bind": "scales" to setup a binding for scales and selections within the same view.'),{signal:"null"}):(a=e.getSelectionComponent(i,r.selection),r.encoding||r.field||(r.field=a.project[0].field,a.project.length>1&&o.warn('A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": '+u.stringValue(r.field)+".")),{signal:g(a.type).scaleDomain+"("+u.stringValue(i+t.STORE)+", "+u.stringValue(r.encoding||null)+", "+u.stringValue(r.field||null)+("global"===a.resolve?")":", "+u.stringValue(a.resolve)+")")})},t.unitName=function(e){var t=u.stringValue(e.name),n=v(e);return n&&(t+=(n.facet.row?" + '_' + facet"+u.accessPath(n.vgField("row")):"")+(n.facet.column?" + '_' + facet"+u.accessPath(n.vgField("column")):"")),t},t.requiresSelectionId=function(e){var t=!1;return m(e,function(e){t=t||e.project.some(function(e){return e.field===s.SELECTION_ID})}),t},t.channelSignalName=function(e,t,n){return u.varName(e.name+"_"+("visual"===n?t:e.fields[t]))},t.positionalProjections=function(e){var t=null,n=null,r=null,i=null;return e.project.forEach(function(e,o){e.channel===a.X?(t=e,n=o):e.channel===a.Y&&(r=e,i=o)}),{x:t,xi:n,y:r,yi:i}}},,,function(e,t,n){"use strict";var r=n(45);n.d(t,"a",function(){return r.a});var i=n(957);n.d(t,"d",function(){return i.a});var a=n(390);n.d(t,"e",function(){return a.a});var o=n(392);n.d(t,"k",function(){return o.a});var s=n(391);n.d(t,"g",function(){return s.a});var u=n(960);n.d(t,"o",function(){return u.a});var c=n(222);n.d(t,"f",function(){return c.a});var l=n(139);n.d(t,"j",function(){return l.a});var f=n(403);n.d(t,"b",function(){return f.a});var d=n(405);n.d(t,"c",function(){return d.a});var p=n(406);n.d(t,"l",function(){return p.a});var h=n(407);n.d(t,"m",function(){return h.a});var m=n(410);n.d(t,"n",function(){return m.a});var g=n(977);n.d(t,"i",function(){return g.a}),n.d(t,"J",function(){return g.b});var v=n(56);n.d(t,"h",function(){return v.a});var y=n(978);n.d(t,"p",function(){return y.a});var b=n(93);n.d(t,"q",function(){return b.a});var w=n(57);n.d(t,"t",function(){return w.a});var O=n(397);n.d(t,"r",function(){return O.a});var x=n(396);n.d(t,"s",function(){return x.a});var j=n(398);n.d(t,"B",function(){return j.a});var _=n(399);n.d(t,"G",function(){return _.a});var S=n(400);n.d(t,"E",function(){return S.a});var M=n(401);n.d(t,"H",function(){return M.a});var E=n(133);n.d(t,"D",function(){return E.a});var k=n(217);n.d(t,"F",function(){return k.a});var N=n(404);n.d(t,"I",function(){return N.a});var A=n(59);n.d(t,"x",function(){return A.d}),n.d(t,"y",function(){return A.e}),n.d(t,"v",function(){return A.b}),n.d(t,"w",function(){return A.c});var P=n(223);n.d(t,"A",function(){return P.b}),n.d(t,"u",function(){return P.a});var C=n(138);n.d(t,"z",function(){return C.a}),n.d(t,"R",function(){return C.c});var D=n(137);n.d(t,"K",function(){return D.b});var T=n(979);n.d(t,"L",function(){return T.b}),n.d(t,"C",function(){return T.a});var R=n(395);n.d(t,"O",function(){return R.b}),n.d(t,"M",function(){return R.a});var L=n(42);n.d(t,"Q",function(){return L.c}),n.d(t,"P",function(){return L.b}),n.d(t,"N",function(){return L.a})},function(e,t,n){"use strict";t.b=i,t.e=a,t.j=function(e,t){return a("operator",e,t)},t.k=function(e){var t={$ref:e.id};e.id<0&&(e.refs=e.refs||[]).push(t);return t},n.d(t,"m",function(){return o}),t.f=s,n.d(t,"h",function(){return u}),t.d=function(e,t){return{$compare:e,$order:t}},t.i=function(e,t){var n={$key:e};t&&(n.$flat=!0);return n},n.d(t,"a",function(){return c}),t.l=function(e){return Object(r.isObject)(e)?(e.order===l?"-":"+")+f(e.op,e.field):""},t.c=f,t.g=function(e){return e&&e.signal},t.n=function(e,t){return null!=e?e:t};var r=n(0);function i(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function a(e,t,n,r){return new i(e,t,n,r)}var o={$tupleid:1,toString:function(){return":_tupleid_:"}};function s(e,t){return t?{$field:e,$name:t}:{$field:e}}var u=s("key");var c="ascending",l="descending";function f(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s});var r="group",i="rect",a="rule",o="symbol",s="text"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(2);!function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.POINT="point",e.RECT="rect",e.RULE="rule",e.TEXT="text",e.TICK="tick",e.CIRCLE="circle",e.SQUARE="square",e.GEOSHAPE="geoshape"}(r=t.Mark||(t.Mark={})),t.AREA=r.AREA,t.BAR=r.BAR,t.LINE=r.LINE,t.POINT=r.POINT,t.TEXT=r.TEXT,t.TICK=r.TICK,t.RECT=r.RECT,t.RULE=r.RULE,t.GEOSHAPE=r.GEOSHAPE,t.CIRCLE=r.CIRCLE,t.SQUARE=r.SQUARE;var a={area:1,bar:1,line:1,point:1,text:1,tick:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function o(e){return e.type}t.isMark=function(e){return!!a[e]},t.PRIMITIVE_MARKS=i.flagKeys(a),t.isMarkDef=o;var s=i.toSet(t.PRIMITIVE_MARKS);t.isPrimitiveMark=function(e){return(o(e)?e.type:e)in s},t.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity"],t.FILL_CONFIG=["fill","fillOpacity"],t.FILL_STROKE_CONFIG=[].concat(t.STROKE_CONFIG,t.FILL_CONFIG),t.VL_ONLY_MARK_CONFIG_PROPERTIES=["filled","color"],t.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={bar:["binSpacing","continuousBandSize","discreteBandSize"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},t.defaultMarkConfig={color:"#4c78a8"},t.defaultBarConfig={binSpacing:1,continuousBandSize:5},t.defaultTickConfig={thickness:1}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.QUANTITATIVE="quantitative",e.ORDINAL="ordinal",e.TEMPORAL="temporal",e.NOMINAL="nominal",e.LATITUDE="latitude",e.LONGITUDE="longitude",e.GEOJSON="geojson"}(r=t.Type||(t.Type={}));var i={quantitative:1,ordinal:1,temporal:1,nominal:1,latitude:1,longitude:1,geojson:1};t.isType=function(e){return!!i[e]},t.QUANTITATIVE=r.QUANTITATIVE,t.ORDINAL=r.ORDINAL,t.TEMPORAL=r.TEMPORAL,t.NOMINAL=r.NOMINAL,t.LATITUDE=r.LATITUDE,t.LONGITUDE=r.LONGITUDE,t.GEOJSON=r.GEOJSON,t.getFullName=function(e){if(e)switch(e=e.toLowerCase()){case"q":case t.QUANTITATIVE:return"quantitative";case"t":case t.TEMPORAL:return"temporal";case"o":case t.ORDINAL:return"ordinal";case"n":case t.NOMINAL:return"nominal";case t.LATITUDE:return"latitude";case t.LONGITUDE:return"longitude";case t.GEOJSON:return"geojson"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(7),a=n(10),o=n(99),s=n(23),u=n(2);function c(e){return[].concat(e.type,e.style||[])}function l(e,t,n){var r=n.mark[e],i=n[t.type];void 0!==i[e]&&(r=i[e]);for(var a=0,o=c(t);a<o.length;a++){var s=o[a],u=n.style[s],l=e;u&&void 0!==u[l]&&(r=u[l])}return r}function f(e,t,n){if(e.type===s.QUANTITATIVE)return t||n.numberFormat}function d(e,t){return"format("+e+', "'+(t||"")+'")'}function p(e,t,n){return d(e,t||n.numberFormat)}function h(e,t,n,r){return e+" === null || isNaN("+e+') ? "null" : '+p(e,n,r)+' + " - " + '+p(t,n,r)}function m(e,t,n,r,i,a){if(!t||n){var s=n||i;return a?"utcFormat("+e+", '"+s+"')":"timeFormat("+e+", '"+s+"')"}return o.formatExpression(t,e,r,a)}t.applyConfig=function(e,t,n){for(var r=0,i=n;r<i.length;r++){var a=i[r],o=t[a];void 0!==o&&(e[a]={value:o})}return e},t.applyMarkConfig=function(e,t,n){for(var r=0,i=n;r<i.length;r++){var a=i[r],o=l(a,t.markDef,t.config);void 0!==o&&(e[a]={value:o})}return e},t.getStyles=c,t.getMarkConfig=l,t.formatSignalRef=function(e,t,n,r){var o=f(e,t,r);if(e.bin)return{signal:h(i.vgField(e,{expr:n}),i.vgField(e,{expr:n,binSuffix:"end"}),o,r)};if("quantitative"===e.type)return{signal:""+d(i.vgField(e,{expr:n}),o)};if(i.isTimeFieldDef(e)){var s=i.isScaleFieldDef(e)&&e.scale&&e.scale.type===a.ScaleType.UTC;return{signal:m(i.vgField(e,{expr:n}),e.timeUnit,t,r.text.shortTimeLabels,r.timeFormat,s)}}return{signal:"''+"+i.vgField(e,{expr:n})}},t.getSpecifiedOrDefaultValue=function(e,t){return void 0!==e?e:t},t.numberFormat=f,t.numberFormatExpr=p,t.binFormatExpression=h,t.timeFormatExpression=m,t.sortParams=function(e,t){return(u.isArray(e)?e:[e]).reduce(function(e,n){return e.field.push(i.vgField(n,t)),e.order.push(n.sort||"ascending"),e},{field:[],order:[]})},t.titleMerger=function(e,t){return{explicit:e.explicit,value:e.value===t.value?e.value:e.value+", "+t.value}},t.binRequiresRange=function(e,t){return e.bin?r.isScaleChannel(t)&&u.contains(["ordinal","nominal"],e.type):(console.warn("Only use this method with binned field defs"),!1)}},function(e,t,n){"use strict";n.d(t,"n",function(){return r}),n.d(t,"g",function(){return i}),n.d(t,"k",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"i",function(){return c}),n.d(t,"j",function(){return l}),n.d(t,"l",function(){return f}),n.d(t,"o",function(){return d}),n.d(t,"p",function(){return p}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return m}),n.d(t,"b",function(){return g}),n.d(t,"h",function(){return v}),n.d(t,"m",function(){return y});var r="top",i="left",a="right",o="bottom",s="index",u="label",c="offset",l="perc",f="size",d="total",p="value",h="guide-label",m="guide-title",g="group-title",v=["shape","size","fill","stroke","strokeDash","opacity"],y={name:1,interactive:1}},,function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return f}),n.d(t,"h",function(){return d}),n.d(t,"i",function(){return p}),n.d(t,"j",function(){return h}),n.d(t,"k",function(){return m}),n.d(t,"l",function(){return g}),n.d(t,"m",function(){return v}),n.d(t,"n",function(){return y}),n.d(t,"o",function(){return b}),n.d(t,"p",function(){return w}),n.d(t,"q",function(){return O}),n.d(t,"r",function(){return x}),n.d(t,"s",function(){return j}),n.d(t,"t",function(){return _}),n.d(t,"u",function(){return S}),n.d(t,"v",function(){return M}),n.d(t,"w",function(){return E}),n.d(t,"x",function(){return k}),n.d(t,"z",function(){return N}),n.d(t,"y",function(){return A});var r=n(20);function i(e){return function(t,n,i){return Object(r.e)(e,n,t||void 0,i)}}var a=i("aggregate"),o=i("axisticks"),s=i("bound"),u=i("collect"),c=i("compare"),l=i("datajoin"),f=i("encode"),d=(i("extent"),i("facet")),p=i("field"),h=i("key"),m=i("legendentries"),g=i("mark"),v=i("multiextent"),y=i("multivalues"),b=i("overlap"),w=i("params"),O=i("prefacet"),x=i("projection"),j=i("proxy"),_=i("relay"),S=i("render"),M=i("scale"),E=i("sieve"),k=i("sortitems"),N=i("viewlayout"),A=i("values")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(7),a=n(3),o=n(2);function s(e,t){var n=e&&e[t];return!!n&&(o.isArray(n)?o.some(n,function(e){return!!e.field}):i.isFieldDef(n)||i.hasConditionalFieldDef(n))}t.channelHasField=s,t.isAggregate=function(e){return o.some(r.CHANNELS,function(t){if(s(e,t)){var n=e[t];if(o.isArray(n))return o.some(n,function(e){return!!e.aggregate});var r=i.getFieldDef(n);return r&&!!r.aggregate}return!1})},t.normalizeEncoding=function(e,t){return o.keys(e).reduce(function(n,s){if(!r.supportMark(s,t))return a.warn(a.message.incompatibleChannel(s,t)),n;if("size"===s&&"line"===t){var u=i.getFieldDef(e[s]);if(u&&u.aggregate)return a.warn(a.message.incompatibleChannel(s,t,"when the field is aggregated.")),n}if("detail"===s||"order"===s)(c=e[s])&&(n[s]=(o.isArray(c)?c:[c]).reduce(function(e,t){return i.isFieldDef(t)?e.push(i.normalizeFieldDef(t,s)):a.warn(a.message.emptyFieldDef(t,s)),e},[]));else{var c=e[s];if(!i.isFieldDef(c)&&!i.isValueDef(c)&&!i.isConditionalDef(c))return a.warn(a.message.emptyFieldDef(c,s)),n;n[s]=i.normalize(c,s)}return n},{})},t.isRanged=function(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)},t.fieldDefs=function(e){var t=[];return r.CHANNELS.forEach(function(n){if(s(e,n)){var r=e[n];(o.isArray(r)?r:[r]).forEach(function(e){i.isFieldDef(e)?t.push(e):i.hasConditionalFieldDef(e)&&t.push(e.condition)})}}),t},t.forEach=function(e,t,n){if(e)for(var r=function(r){o.isArray(e[r])?e[r].forEach(function(e){t.call(n,e,r)}):t.call(n,e[r],r)},i=0,a=o.keys(e);i<a.length;i++)r(a[i])},t.reduce=function(e,t,n,r){return e?o.keys(e).reduce(function(n,i){var a=e[i];return o.isArray(a)?a.reduce(function(e,n){return t.call(r,e,n,i)},n):t.call(r,n,a,i)},n):n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.isVgSignalRef=function(e){return!!e.signal},t.isVgRangeStep=function(e){return!!e.step},t.isDataRefUnionedDomain=function(e){return!r.isArray(e)&&"fields"in e&&!("data"in e)},t.isFieldRefUnionDomain=function(e){return!r.isArray(e)&&"fields"in e&&"data"in e},t.isDataRefDomain=function(e){return!r.isArray(e)&&"field"in e&&"data"in e},t.isSignalRefDomain=function(e){return!r.isArray(e)&&"signal"in e};t.VG_MARK_CONFIGS=r.flagKeys({opacity:1,fill:1,fillOpacity:1,stroke:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,limit:1,dx:1,dy:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,cursor:1,href:1})},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=n(2),o=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.explicit=e,this.implicit=t}return e.prototype.clone=function(){return new e(a.duplicate(this.explicit),a.duplicate(this.implicit))},e.prototype.combine=function(){return r({},this.explicit,this.implicit)},e.prototype.get=function(e){return void 0!==this.explicit[e]?this.explicit[e]:this.implicit[e]},e.prototype.getWithExplicit=function(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}},e.prototype.setWithExplicit=function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)},e.prototype.set=function(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this},e.prototype.copyKeyFromSplit=function(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)},e.prototype.copyKeyFromObject=function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)},e}();function s(e,t,n,r){return e.explicit&&t.explicit&&i.warn(i.message.mergeConflictingProperty(n,r,e.value,t.value)),e}t.Split=o,t.makeExplicit=function(e){return{explicit:!0,value:e}},t.makeImplicit=function(e){return{explicit:!1,value:e}},t.tieBreakByComparing=function(e){return function(t,n,r,i){var a=e(t.value,n.value);return a>0?t:a<0?n:s(t,n,r,i)}},t.defaultTieBreaker=s,t.mergeValuesWithExplicit=function(e,t,n,r,i){return void 0===i&&(i=s),void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:a.stringify(e.value)===a.stringify(t.value)?e:i(e,t,n,r)}},,,,,,function(e,t,n){"use strict";var r=n(25),i=n(15);t.a=function(e,t,n,a,o,s,u){return{type:e,name:u?u.name:void 0,role:t,style:u&&u.style||n,key:a,from:o,interactive:!(!u||!u.interactive),encode:Object(i.d)(s,u,r.m)}}},,function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(7),o=n(3),s=n(100),u=n(2),c=n(29),l=n(24),f=n(16),d=n(63);function p(e){var t=e.config,n=e.markDef.filled?"fill":"stroke",r=h("color",e,{vgChannel:n,defaultValue:e.markDef[n]||e.markDef.color||l.getMarkConfig(n,e.markDef,t)||l.getMarkConfig("color",e.markDef,t)});return!r.fill&&u.contains(["bar","point","circle","square","geoshape"],e.mark())&&(r.fill={value:"transparent"}),r}function h(e,t,n){void 0===n&&(n={});var r=n.defaultValue,i=n.vgChannel,a=n.defaultRef||(void 0!==r?{value:r}:void 0),o=t.encoding[e];return m(t,o,i||e,function(n){return d.midPoint(e,n,t.scaleName(e),t.getScaleComponent(e),null,a)})}function m(e,t,n,o){var u,c,l=t&&t.condition,d=o(t);if(l){var p=(i.isArray(l)?l:[l]).map(function(t){var n=o(t),i=a.isConditionalSelection(t)?f.selectionPredicate(e,t.selection):s.expression(e,t.test);return r({test:i},n)});return(u={})[n]=p.concat(void 0!==d?[d]:[]),u}return void 0!==d?((c={})[n]=d,c):{}}function g(e,t){void 0===t&&(t="text");var n=e.encoding[t];return m(e,n,t,function(t){return d.text(t,e.config)})}function v(e,t,n,r){var i,a=t.encoding,o=t.stack,s=d.stackable(e,a[e],t.scaleName(e),t.getScaleComponent(e),o,n);return(i={})[r||e]=s,i}t.color=p,t.baseEncodeEntry=function(e,t){return r({},function(e,t){return c.VG_MARK_CONFIGS.reduce(function(n,r){return!e[r]||t&&"orient"===r||(n[r]={value:e[r]}),n},{})}(e.markDef,t),p(e),h("opacity",e),g(e,"tooltip"),g(e,"href"))},t.valueIfDefined=function(e,t){if(void 0!==t)return(n={})[e]={value:t},n;var n},t.nonPosition=h,t.text=g,t.bandPosition=function(e,t,n){var i,s,u=n.scaleName(t),c="x"===t?"width":"height";if(n.encoding.size)if(n.markDef.orient){var l=((i={})[t+"c"]=d.fieldRef(e,u,{},{band:.5}),i);if(a.getFieldDef(n.encoding.size))o.warn(o.message.cannotUseSizeFieldWithBandSize(t));else if(a.isValueDef(n.encoding.size))return r({},l,h("size",n,{vgChannel:c}))}else o.warn(o.message.cannotApplySizeToNonOrientedMark(n.markDef.type));return(s={})[t]=d.fieldRef(e,u,{binSuffix:"range"}),s[c]=d.bandRef(u),s},t.centeredBandPosition=function(e,t,n,i){var a="x"===e?"width":"height";return r({},v(e,t,n,"x"===e?"xc":"yc"),h("size",t,{defaultRef:i,vgChannel:a}))},t.binnedPosition=function(e,t,n,r,i){return"x"===t?{x2:d.bin(e,n,"start",i?0:r),x:d.bin(e,n,"end",i?r:0)}:{y2:d.bin(e,n,"start",i?r:0),y:d.bin(e,n,"end",i?0:r)}},t.pointPosition=v,t.pointPosition2=function(e,t,n){var r,i=e.encoding,a=e.markDef,o=e.stack,s="x2"===(n=n||("horizontal"===a.orient?"x2":"y2"))?"x":"y",u=d.stackable2(n,i[s],i[n],e.scaleName(s),e.getScaleComponent(s),o,t);return(r={})[n]=u,r}},,,,function(e,t,n){"use strict";function r(e,t){return e.zindex-t.zindex||e.index-t.index}function i(e){if(!e.zdirty)return e.zitems;var t,n,i,a=e.items,o=[];for(n=0,i=a.length;n<i;++n)(t=a[n]).index=n,t.zindex&&o.push(t);return e.zdirty=!1,e.zitems=o.sort(r)}t.c=i,t.b=function(e,t){var n,r,a=e.items;if(!a||!a.length)return;var o=i(e);if(o&&o.length){for(n=0,r=a.length;n<r;++n)a[n].zindex||t(a[n]);a=o}for(n=0,r=a.length;n<r;++n)t(a[n])},t.a=function(e,t){var n,r,a=e.items;if(!a||!a.length)return null;var o=i(e);o&&o.length&&(a=o);for(r=a.length;--r>=0;)if(n=t(a[r]))return n;if(a===o)for(a=e.items,r=a.length;--r>=0;)if(!a[r].zindex&&(n=t(a[r])))return n;return null}},,,function(e,t,n){"use strict";function r(e){this.clear(),e&&this.union(e)}t.a=r;var i=r.prototype;i.clone=function(){return new r(this)},i.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},i.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},i.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},i.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},i.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},i.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},i.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},i.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,s=this.x1,u=this.x2,c=this.y1,l=this.y2;return this.clear().add(r*s-i*c+a,i*s+r*c+o).add(r*s-i*l+a,i*s+r*l+o).add(r*u-i*c+a,i*u+r*c+o).add(r*u-i*l+a,i*u+r*l+o)},i.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},i.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},i.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},i.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},i.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},i.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},i.width=function(){return this.x2-this.x1},i.height=function(){return this.y2-this.y1}},function(e,t,n){"use strict";t.a=function(e,t){return d.context(e)(t)},t.b=function(e,t){var n=t[0],i=n.interpolate||"linear";return("horizontal"===n.orient?h:p).curve(Object(r.a)(i,n.orient,n.tension)).context(e)(t)},t.c=function(e,t){var n=t[0],i=n.interpolate||"linear";return m.curve(Object(r.a)(i,n.orient,n.tension)).context(e)(t)},t.d=function(e,t,n,r){return g.context(e)(t,n,r)},t.e=function(e,t){return(t.mark.shape||t.shape).context(e)(t)},t.f=function(e,t){return v.context(e)(t)},t.g=function(e,t){return y.context(e)(t)};var r=n(398),i=n(399),a=n(400),o=n(401),s=n(194);function u(e){return e.x||0}function c(e){return e.y||0}function l(e){return e.cornerRadius||0}function f(e){return!(!1===e.defined)}var d=Object(s.a)().startAngle(function(e){return e.startAngle||0}).endAngle(function(e){return e.endAngle||0}).padAngle(function(e){return e.padAngle||0}).innerRadius(function(e){return e.innerRadius||0}).outerRadius(function(e){return e.outerRadius||0}).cornerRadius(l),p=Object(s.b)().x(u).y1(c).y0(function(e){return(e.y||0)+(e.height||0)}).defined(f),h=Object(s.b)().y(c).x1(u).x0(function(e){return(e.x||0)+(e.width||0)}).defined(f),m=Object(s.u)().x(u).y(c).defined(f),g=Object(a.a)().x(u).y(c).width(function(e){return e.width||0}).height(function(e){return e.height||0}).cornerRadius(l),v=Object(s.v)().type(function(e){return Object(i.a)(e.shape||"circle")}).size(function(e){return null==e.size?64:e.size}),y=Object(o.a)().x(u).y(c).defined(f).size(function(e){return e.size||1})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlData=function(e){return!!e.url},t.isInlineData=function(e){return!!e.values},t.isNamedData=function(e){return!!e.name},t.MAIN="main",t.RAW="raw"},,,,,,,function(e,t,n){"use strict";var r=n(917);n.d(t,"a",function(){return r.a});var i=n(918);n.d(t,"b",function(){return i.a});var a=n(383);n.d(t,"c",function(){return a.a});var o=n(55);n.d(t,"d",function(){return o.a}),n.d(t,"j",function(){return o.b});var s=n(919);n.d(t,"e",function(){return s.a});var u=n(920);n.d(t,"f",function(){return u.a});var c=n(921);n.d(t,"g",function(){return c.a});var l=n(384);n.d(t,"h",function(){return l.a});var f=n(922);n.d(t,"i",function(){return f.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),t.b=function(e){r=e};var r=Math.random},function(e,t,n){"use strict";var r=n(961),i=n(964),a=n(965),o=n(966),s=n(967),u=n(968),c=n(969),l=n(970),f=n(971),d=n(972),p=n(973),h=n(974);t.a={arc:r.a,area:i.a,group:a.a,image:o.a,line:s.a,path:u.a,rect:c.a,rule:l.a,shape:f.a,symbol:d.a,text:p.a,trail:h.a}},function(e,t,n){"use strict";t.a=function(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e}},function(e,t,n){"use strict";t.b=a,t.a=o,t.c=function(e){return a(o(e))};var r=n(42),i=function(){return!0};function a(e){return e||(e=i),function(t,n,i,a,o,s){return t.pixelRatio>1&&(i*=t.pixelRatio,a*=t.pixelRatio),Object(r.a)(n,function(n){var r=n.bounds;if((!r||r.contains(o,s))&&r)return e(t,n,i,a,o,s)?n:void 0})}}function o(e,t){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,c=null==t?u.fill:t,l=u.stroke&&n.isPointInStroke;return l&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(c&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}},function(e,t,n){"use strict";function r(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}t.d=r,t.e=function(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]},t.b=function(e,t,n,i){var a,o=e.childNodes[t];o&&o.tagName.toLowerCase()===n.toLowerCase()||(a=o||null,o=r(e.ownerDocument,n,i),e.insertBefore(o,a));return o},t.c=function(e,t){var n=e.childNodes,r=n.length;for(;r>t;)e.removeChild(n[--r]);return e},t.a=function(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}},function(e,t,n){"use strict";var r=n(988);n.d(t,"d",function(){return r.a});var i=n(994);n.d(t,"f",function(){return i.a});var a=n(412);n.d(t,"a",function(){return a.a});var o=n(996);n.d(t,"b",function(){return o.a}),n.d(t,"c",function(){return o.b}),n.d(t,"e",function(){return o.c});var s=n(997);n.d(t,"g",function(){return s.a}),n.d(t,"h",function(){return s.b})},function(e,t,n){"use strict";var r=n(419),i=n(420),a=n(0);t.a=function(e,t,n){var o,s,u={};try{o=Object(i.d)(e)}catch(t){Object(a.error)("Expression parse error: "+Object(a.stringValue)(e))}return o.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,i=r.b.visitors[n];i&&i(n,e.arguments,t,u)}}),(s=Object(r.a)(o)).globals.forEach(function(e){var n="$"+e;!u.hasOwnProperty(n)&&t.getSignal(e)&&(u[n]=t.signalRef(e))}),{$expr:n?n+"return("+s.code+");":s.code,$fields:s.fields,$params:u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(2),a=2006;t.isDateTime=function(e){return!(!e||!(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds))},t.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],t.SHORT_MONTHS=t.MONTHS.map(function(e){return e.substr(0,3)}),t.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t.SHORT_DAYS=t.DAYS.map(function(e){return e.substr(0,3)}),t.dateTimeExpr=function(e,n){void 0===n&&(n=!1);var o=[];if(n&&void 0!==e.day&&i.keys(e).length>1&&(r.warn(r.message.droppedDay(e)),delete(e=i.duplicate(e)).day),void 0!==e.year?o.push(e.year):void 0!==e.day?o.push(a):o.push(0),void 0!==e.month){var s=n?function(e){if(i.isNumber(e))return e-1+"";var n=e.toLowerCase(),a=t.MONTHS.indexOf(n);if(-1!==a)return a+"";var o=n.substr(0,3),s=t.SHORT_MONTHS.indexOf(o);if(-1!==s)return s+"";throw new Error(r.message.invalidTimeUnit("month",e))}(e.month):e.month;o.push(s)}else if(void 0!==e.quarter){var u=n?function(e){if(i.isNumber(e))return e>4&&r.warn(r.message.invalidTimeUnit("quarter",e)),e-1+"";throw new Error(r.message.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;o.push(u+"*3")}else o.push(0);if(void 0!==e.date)o.push(e.date);else if(void 0!==e.day){var c=n?function(e){if(i.isNumber(e))return e%7+"";var n=e.toLowerCase(),a=t.DAYS.indexOf(n);if(-1!==a)return a+"";var o=n.substr(0,3),s=t.SHORT_DAYS.indexOf(o);if(-1!==s)return s+"";throw new Error(r.message.invalidTimeUnit("day",e))}(e.day):e.day;o.push(c+"+1")}else o.push(1);for(var l=0,f=["hours","minutes","seconds","milliseconds"];l<f.length;l++){var d=f[l];void 0!==e[d]?o.push(e[d]):o.push(0)}return e.utc?"utc("+o.join(", ")+")":"datetime("+o.join(", ")+")"}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(7),o=n(10),s=n(23),u=n(2),c=n(24);function l(e,t,n,i){var o={scale:t,field:a.vgField(e,n)};return i?r({},o,i):o}function f(e,t,n,r,f,d){if(t){if(a.isFieldDef(t)){if(u.contains([i.X,i.Y,i.X2,i.Y2],e)&&u.contains([s.LATITUDE,s.LONGITUDE],t.type))return{field:a.vgField(t,{suffix:"geo"})};if(t.bin)return u.contains([i.X,i.Y],e)&&t.type===s.QUANTITATIVE?f&&f.impute?l(t,n,{binSuffix:"mid"}):function(e,t){return{signal:'(scale("'+t+'", '+a.vgField(e,{expr:"datum"})+') + scale("'+t+'", '+a.vgField(e,{binSuffix:"end",expr:"datum"})+"))/2"}}(t,n):l(t,n,c.binRequiresRange(t,e)?{binSuffix:"range"}:{});var p=r.get("type");return o.hasDiscreteDomain(p)?"band"===p?l(t,n,{binSuffix:"range"},{band:.5}):l(t,n,{binSuffix:"range"}):l(t,n,{})}return a.isValueDef(t)?{value:t.value}:void 0}if("zeroOrMin"===d){if(e===i.X||e===i.X2)return function(e,t){if(e&&!u.contains([o.ScaleType.LOG,o.ScaleType.TIME,o.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero"))return{scale:e,value:0};return{value:0}}(n,r);if(e===i.Y||e===i.Y2)return function(e,t){if(e&&!u.contains([o.ScaleType.LOG,o.ScaleType.TIME,o.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero"))return{scale:e,value:0};return{field:{group:"height"}}}(n,r);throw new Error("Unsupported channel "+e+" for base function")}if("zeroOrMax"===d){if(e===i.X||e===i.X2)return function(e,t){if(e&&!u.contains([o.ScaleType.LOG,o.ScaleType.TIME,o.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero"))return{scale:e,value:0};return{field:{group:"width"}}}(n,r);if(e===i.Y||e===i.Y2)return function(e,t){if(e&&!u.contains([o.ScaleType.LOG,o.ScaleType.TIME,o.ScaleType.UTC],t.get("type"))&&!1!==t.get("zero"))return{scale:e,value:0};return{value:0}}(n,r);throw new Error("Unsupported channel "+e+" for base function")}return d}t.stackable=function(e,t,n,r,i,o){return a.isFieldDef(t)&&i&&e===i.fieldChannel?l(t,n,{suffix:"end"}):f(e,t,n,r,i,o)},t.stackable2=function(e,t,n,r,i,o,s){return a.isFieldDef(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?l(t,r,{suffix:"start"}):f(e,n,r,i,o,s)},t.bin=function(e,t,n,r){return l(e,t,{binSuffix:"start"===n?void 0:"end"},r?{offset:r}:{})},t.fieldRef=l,t.bandRef=function(e,t){return void 0===t&&(t=!0),{scale:e,band:t}},t.midPoint=f,t.text=function(e,t){if(e){if(a.isFieldDef(e))return c.formatSignalRef(e,e.format,"datum",t);if(a.isValueDef(e))return{value:e.value}}},t.mid=function(e){return r({},e,{mult:.5})}},,,,,,,,,,function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=n(150),s=n(28),u=n(28),c=n(3),l=n(22),f=n(233),d=n(2);function p(e){return void 0!==e.facet}function h(e){return!!e.mark}function m(e){return void 0!==e.layer}function g(e){return void 0!==e.repeat}function v(e){return y(e)||b(e)}function y(e){return void 0!==e.vconcat}function b(e){return void 0!==e.hconcat}function w(e,t){if(p(e))return function(e,t){var n=e.spec,a=i(e,["spec"]);return r({},a,{spec:w(n,t)})}(e,t);if(m(e))return function e(t,n){var a=t.layer,o=i(t,["layer"]);return r({},o,{layer:a.map(function(t){return m(t)?e(t,n):O(t,n)})})}(e,t);if(g(e))return function(e,t){var n=e.spec,a=i(e,["spec"]);return r({},a,{spec:w(n,t)})}(e,t);if(y(e))return function(e,t){var n=e.vconcat,a=i(e,["vconcat"]);return r({},a,{vconcat:n.map(function(e){return w(e,t)})})}(e,t);if(b(e))return function(e,t){var n=e.hconcat,a=i(e,["hconcat"]);return r({},a,{hconcat:n.map(function(e){return w(e,t)})})}(e,t);if(h(e)){var n=s.channelHasField(e.encoding,a.ROW),o=s.channelHasField(e.encoding,a.COLUMN);return n||o?function(e,t){var n=e.encoding,a=n.row,o=n.column,s=i(n,["row","column"]),u=e.mark,c=e.width,l=e.projection,f=e.height,d=e.selection,p=(e.encoding,i(e,["mark","width","projection","height","selection","encoding"]));return r({},p,{facet:r({},a?{row:a}:{},o?{column:o}:{}),spec:O(r({},l?{projection:l}:{},{mark:u},c?{width:c}:{},f?{height:f}:{},{encoding:s},d?{selection:d}:{}),t)})}(e,t):O(e,t)}throw new Error(c.message.INVALID_SPEC)}function O(e,t){if(function(e){return l.isPrimitiveMark(e.mark)}(e)){if(s.isRanged(e.encoding))return function(e){var t=s.channelHasField(e.encoding,a.X),n=s.channelHasField(e.encoding,a.Y),r=s.channelHasField(e.encoding,a.X2),i=s.channelHasField(e.encoding,a.Y2);if(r&&!t||i&&!n){var o=d.duplicate(e);return r&&!t&&(o.encoding.x=o.encoding.x2,delete o.encoding.x2),i&&!n&&(o.encoding.y=o.encoding.y2,delete o.encoding.y2),o}return e}(e);var n=t&&t.overlay,u=n&&e.mark===l.AREA&&d.contains(["linepoint","line"],n.area),c=n&&(n.line&&e.mark===l.LINE||"linepoint"===n.area&&e.mark===l.AREA);return c||u?function(e,t,n,a){var o,s=e.mark,u=e.selection,c=e.projection,l=e.encoding,d=i(e,["mark","selection","projection","encoding"]),p=[{mark:s,encoding:l}],h=f.stack(s,l,a?a.stack:void 0),m=l;if(h){var g=h.fieldChannel,v=h.offset;m=r({},l,((o={})[g]=r({},l[g],v?{stack:v}:{}),o))}n&&p.push(r({},c?{projection:c}:{},{mark:{type:"line",style:"lineOverlay"}},u?{selection:u}:{},{encoding:m}));t&&p.push(r({},c?{projection:c}:{},{mark:{type:"point",filled:!0,style:"pointOverlay"}},u?{selection:u}:{},{encoding:m}));return r({},d,{layer:p})}(e,c,u,t):e}return o.normalize(e,t)}function x(e,t){return t.forEach(function(t){var n=["field","type","value","timeUnit","bin","aggregate"].reduce(function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e},{}),r=d.hash(n);e[r]=e[r]||t}),e}t.isFacetSpec=p,t.isUnitSpec=h,t.isLayerSpec=m,t.isRepeatSpec=g,t.isConcatSpec=v,t.isVConcatSpec=y,t.isHConcatSpec=b,t.normalize=w,t.fieldDefs=function(e){return d.vals(function e(t,n){return void 0===n&&(n={}),m(t)?t.layer.forEach(function(t){h(t)?x(n,u.fieldDefs(t.encoding)):e(t,n)}):p(t)?(x(n,u.fieldDefs(t.facet)),e(t.spec,n)):g(t)?e(t.spec,n):v(t)?(y(t)?t.vconcat:t.hconcat).forEach(function(t){return e(t,n)}):x(n,u.fieldDefs(t.encoding)),n}(e))},t.isStacked=function(e,t){return t=t||e.config,!!l.isPrimitiveMark(e.mark)&&null!==f.stack(e.mark,e.encoding,t?t.stack:void 0)}},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";t.b=function(e){return null==e?null:e.fname},t.a=function(e){return null==e?null:e.fields},t.c=function(e,t,n){return e.fields=t||[],e.fname=n,e}},function(e,t,n){"use strict";t.a=function(e){var t=e||r.identity,n=[],i={};return n.add=function(e){var r=t(e);return i[r]||(i[r]=1,n.push(e)),n},n.remove=function(e){var r,a=t(e);return i[a]&&(i[a]=0,(r=n.indexOf(e))>=0&&n.splice(r,1)),n},n};var r=n(0)},function(e,t,n){"use strict";var r=n(890);n.d(t,"d",function(){return r.a});var i=n(899);n.d(t,"e",function(){return i.a});var a=n(371);n.d(t,"b",function(){return a.a}),n.d(t,"c",function(){return a.b}),n.d(t,"f",function(){return a.c});var o=n(372);n.d(t,"a",function(){return o.a})},function(e,t,n){"use strict";t.a=s;var r,i=2*Math.PI,a=i/4,o=i-1e-8;function s(e){return r=e,s}function u(){}function c(e,t){r.add(e,t)}s.beginPath=u,s.closePath=u,s.moveTo=c,s.lineTo=c,s.rect=function(e,t,n,r){c(e,t),c(e+n,t+r)},s.quadraticCurveTo=function(e,t,n,r){c(e,t),c(n,r)},s.bezierCurveTo=function(e,t,n,r,i,a){c(e,t),c(n,r),c(i,a)},s.arc=function(e,t,n,r,s,u){if(Math.abs(s-r)>o)return c(e-n,t-n),void c(e+n,t+n);var l,f,d,p,h=1/0,m=-1/0,g=1/0,v=-1/0;function y(e){d=n*Math.cos(e),p=n*Math.sin(e),d<h&&(h=d),d>m&&(m=d),p<g&&(g=p),p>v&&(v=p)}if(y(r),y(s),s!==r)if((r%=i)<0&&(r+=i),(s%=i)<0&&(s+=i),s<r&&(u=!u,l=r,r=s,s=l),u)for(s-=i,l=r-r%a,f=0;f<4&&l>s;++f,l-=a)y(l);else for(l=r-r%a+a,f=0;f<4&&l<s;++f,l+=a)y(l);c(e+h,t+g),c(e+m,t+v)}},function(e,t,n){"use strict";t.a=function(e,t){var n;Object(a.isObject)(t)&&(n=t.step,t=t.interval);Object(a.isString)(t)&&(t="time"===e.type?Object(i.g)(t):"utc"===e.type?Object(i.h)(t):Object(a.error)("Only time and utc scales accept interval strings."),n&&(t=t.every(n)));return t},t.d=function(e,t,n){var r=e.range(),i=r[0],o=Object(a.peek)(r);i>o&&(r=o,o=i,i=r);if(t=t.filter(function(t){return!((t=e(t))<i||t>o)}),n>0&&t.length>1){for(var s=[t[0],Object(a.peek)(t)];t.length>n&&t.length>=3;)t=t.filter(function(e,t){return!(t%2)});t.length<3&&(t=s)}return t},t.c=function(e,t){return e.ticks?e.ticks(t):e.domain()},t.b=function(e,t,n){var i=e.tickFormat?e.tickFormat(t,n):String;return e.type===r.e?(a=i,s=function(e){var t=Object(o.d)(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return n=Object(o.a)(t),r=Object(o.a)(".1f")(1)[1],function(e){var t,i,a=n(e),o=a.indexOf(r);if(o<0)return a;for(t=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(a,o),i=t<a.length?a.slice(t):"";--t>o;)if("0"!==a[t]){++t;break}return a.slice(0,t)+i}}return Object(o.a)(t);var n,r}(n),function(e){return a(e)?s(e):""}):i;var a,s};var r=n(224),i=n(60),a=n(0),o=n(67)},function(e,t,n){"use strict";t.a=o;var r=n(20),i=n(27),a=n(0);function o(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}o.fromEntries=function(e,t){var n=t.length,i=1,a=t[0],s=t[n-1],u=t[n-2],c=null;for(e.add(t[0]);i<n;++i)t[i].params.pulse=Object(r.k)(t[i-1]),e.add(t[i]),"aggregate"===t[i].type&&(c=t[i]);return new o(e,a,u,s,c)};var s=o.prototype;function u(e){return Object(a.isString)(e)?e:null}function c(e,t,n){var i,a=Object(r.c)(n.op,n.field);if(t.ops){for(var o=0,s=t.as.length;o<s;++o)if(t.as[o]===a)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(a))}function l(e,t,n,i,a,o,s){var c,l,f=t[n]||(t[n]={}),d=Object(r.l)(o),p=u(a);if(null!=p&&(e=t.scope,c=f[p+=d?"|"+d:""]),!c){var h=o?{field:r.h,pulse:t.countsRef(e,a,o)}:{field:e.fieldRef(a),pulse:Object(r.k)(t.output)};d&&(h.sort=e.sortRef(o)),l=e.add(Object(r.e)(i,void 0,h)),s&&(t.index[a]=l),c=Object(r.k)(l),null!=p&&(f[p]=c)}return c}s.countsRef=function(e,t,n){var a,o,s,l=this.counts||(this.counts={}),f=u(t);return null!=f&&(e=this.scope,a=l[f]),a?n&&n.field&&c(e,a.agg.params,n):(s={groupby:e.fieldRef(t,"key"),pulse:Object(r.k)(this.output)},n&&n.field&&c(e,s,n),o=e.add(Object(i.a)(s)),a=e.add(Object(i.d)({pulse:Object(r.k)(o)})),a={agg:o,ref:Object(r.k)(a)},null!=f&&(l[f]=a)),a.ref},s.tuplesRef=function(){return Object(r.k)(this.values)},s.extentRef=function(e,t){return l(e,this,"extent","extent",t,!1)},s.domainRef=function(e,t){return l(e,this,"domain","values",t,!1)},s.valuesRef=function(e,t,n){return l(e,this,"vals","values",t,n||!0)},s.lookupRef=function(e,t){return l(e,this,"lookup","tupleindex",t,!1)},s.indataRef=function(e,t){return l(e,this,"indata","tupleindex",t,!0,!0)}},function(e,t,n){"use strict";function r(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}t.d=function(e,t){return r(["_"],e,t)},t.e=function(e,t){return r(["datum","_"],e,t)},t.b=function(e,t){return r(["event"],e,t)},t.c=function(e,t){return r(["_","event"],e,t)},t.a=function(e,t){return r(["item","_"],e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i={values:1,count:1,valid:1,missing:1,distinct:1,sum:1,mean:1,average:1,variance:1,variancep:1,stdev:1,stdevp:1,median:1,q1:1,q3:1,ci0:1,ci1:1,min:1,max:1,argmin:1,argmax:1};t.AGGREGATE_OPS=r.flagKeys(i),t.isAggregateOp=function(e){return!!i[e]},t.COUNTING_OPS=["count","valid","missing","distinct"],t.isCountingAggregateOp=function(e){return e&&r.contains(t.COUNTING_OPS,e)},t.SUM_OPS=["count","sum","distinct","valid","missing"],t.SHARED_DOMAIN_OPS=["mean","average","median","q1","q3","min","max"],t.SHARED_DOMAIN_OP_INDEX=r.toSet(t.SHARED_DOMAIN_OPS)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(2);t.binToString=function(e){return i.isBoolean(e)?"bin":"bin"+i.keys(e).map(function(t){return("_"+t+"_"+e[t]).replace(",","_")}).join("")},t.autoMaxBins=function(e){switch(e){case r.ROW:case r.COLUMN:case r.SIZE:case r.COLOR:case r.OPACITY:case r.SHAPE:return 6;default:return 10}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(62),o=n(3),s=n(2);!function(e){e.YEAR="year",e.MONTH="month",e.DAY="day",e.DATE="date",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.MILLISECONDS="milliseconds",e.YEARMONTH="yearmonth",e.YEARMONTHDATE="yearmonthdate",e.YEARMONTHDATEHOURS="yearmonthdatehours",e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",e.MONTHDATE="monthdate",e.HOURSMINUTES="hoursminutes",e.HOURSMINUTESSECONDS="hoursminutesseconds",e.MINUTESSECONDS="minutesseconds",e.SECONDSMILLISECONDS="secondsmilliseconds",e.QUARTER="quarter",e.YEARQUARTER="yearquarter",e.QUARTERMONTH="quartermonth",e.YEARQUARTERMONTH="yearquartermonth",e.UTCYEAR="utcyear",e.UTCMONTH="utcmonth",e.UTCDAY="utcday",e.UTCDATE="utcdate",e.UTCHOURS="utchours",e.UTCMINUTES="utcminutes",e.UTCSECONDS="utcseconds",e.UTCMILLISECONDS="utcmilliseconds",e.UTCYEARMONTH="utcyearmonth",e.UTCYEARMONTHDATE="utcyearmonthdate",e.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",e.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",e.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",e.UTCMONTHDATE="utcmonthdate",e.UTCHOURSMINUTES="utchoursminutes",e.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",e.UTCMINUTESSECONDS="utcminutesseconds",e.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",e.UTCQUARTER="utcquarter",e.UTCYEARQUARTER="utcyearquarter",e.UTCQUARTERMONTH="utcquartermonth",e.UTCYEARQUARTERMONTH="utcyearquartermonth"}(i=t.TimeUnit||(t.TimeUnit={}));var u={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};t.TIMEUNIT_PARTS=s.flagKeys(u),t.isLocalSingleTimeUnit=function(e){return!!u[e]};var c={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};t.isUtcSingleTimeUnit=function(e){return!!c[e]};var l={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},f=r({},c,l);function d(e){return!!f[e]}t.isUTCTimeUnit=d,t.getLocalTimeUnit=function(e){return e.substr(3)};var p=r({},u,c,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},l);t.TIMEUNITS=s.flagKeys(p),t.isTimeUnit=function(e){return!!p[e]};var h={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null};function m(e,t){var n=h[e];return{setDateMethod:t?"setUTC"+n.substr(3):n,getDateMethod:"get"+(t?"UTC":"")+n.substr(3)}}function g(e,t){var n=e.indexOf(t);return n>-1&&(t!==i.SECONDS||0===n||"i"!==e.charAt(n-1))}t.convert=function(e,n){for(var r=d(e),a=r?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0),o=0,s=t.TIMEUNIT_PARTS;o<s.length;o++){var u=s[o];if(g(e,u))switch(u){case i.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case i.QUARTER:var c=m("month",r),l=c.getDateMethod;a[c.setDateMethod](3*Math.floor(n[l]()/3));break;default:var f=m(u,r),p=f.getDateMethod;a[f.setDateMethod](n[p]())}}return a},t.getTimeUnitParts=function(e){return t.TIMEUNIT_PARTS.reduce(function(t,n){return g(e,n)?t.concat(n):t},[])},t.containsTimeUnit=g,t.fieldExpr=function(e,n){var r="datum"+s.accessPath(n),o=d(e)?"utc":"",u=t.TIMEUNIT_PARTS.reduce(function(t,n){var a;return g(e,n)&&(t[n]=(a=n)===i.QUARTER?"("+o+"quarter("+r+")-1)":""+o+a+"("+r+")"),t},{});return a.dateTimeExpr(u)},t.formatExpression=function(e,t,n,r){if(e){var a=[],o="",s=g(e,i.YEAR);g(e,i.QUARTER)&&(o="'Q' + quarter("+t+")"),g(e,i.MONTH)&&a.push(!1!==n?"%b":"%B"),g(e,i.DAY)?a.push(n?"%a":"%A"):g(e,i.DATE)&&a.push("%d"+(s?",":"")),s&&a.push(n?"%y":"%Y");var u=[];g(e,i.HOURS)&&u.push("%H"),g(e,i.MINUTES)&&u.push("%M"),g(e,i.SECONDS)&&u.push("%S"),g(e,i.MILLISECONDS)&&u.push("%L");var c=[];return a.length>0&&c.push(a.join(" ")),u.length>0&&c.push(u.join(":")),c.length>0&&(o&&(o+=" + ' ' + "),o+=r?"utcFormat("+t+", '"+c.join(" ")+"')":"timeFormat("+t+", '"+c.join(" ")+"')"),o||void 0}},t.normalizeTimeUnit=function(e){return"day"!==e&&e.indexOf("day")>=0?(o.warn(o.message.dayReplacedWithDate(e)),e.replace("day","date")):e}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),a=n(62),o=n(7),s=n(99),u=n(2);function c(e){return e&&e.selection}function l(e){return e&&!!e.field&&void 0!==e.equal}function f(e){return!!(e&&e.field&&u.isArray(e.range)&&2===e.range.length)}function d(e){return e&&!!e.field&&(u.isArray(e.oneOf)||u.isArray(e.in))}function p(e){return d(e)||l(e)||f(e)}function h(e,t){void 0===t&&(t=!0);var n=e.timeUnit?"time("+s.fieldExpr(e.timeUnit,e.field)+")":o.vgField(e,{expr:"datum"});if(l(e))return n+"==="+m(e.equal,e.timeUnit);if(d(e))return"indexof(["+(e.oneOf||e.in).map(function(t){return m(t,e.timeUnit)}).join(",")+"], "+n+") !== -1";if(f(e)){var r=e.range[0],i=e.range[1];if(null!==r&&null!==i&&t)return"inrange("+n+", ["+m(r,e.timeUnit)+", "+m(i,e.timeUnit)+"])";var a=[];return null!==r&&a.push(n+" >= "+m(r,e.timeUnit)),null!==i&&a.push(n+" <= "+m(i,e.timeUnit)),a.length>0?a.join(" && "):"true"}throw new Error("Invalid field predicate: "+JSON.stringify(e))}function m(e,t){if(a.isDateTime(e))return"time("+a.dateTimeExpr(e,!0)+")";if(s.isLocalSingleTimeUnit(t)){var n={};return n[t]=e,"time("+a.dateTimeExpr(n,!0)+")"}return s.isUtcSingleTimeUnit(t)?m(e,s.getLocalTimeUnit(t)):JSON.stringify(e)}t.isSelectionPredicate=c,t.isFieldEqualPredicate=l,t.isFieldRangePredicate=f,t.isFieldOneOfPredicate=d,t.isFieldPredicate=p,t.expression=function(e,t,n){return u.logicalExpr(t,function(t){return u.isString(t)?t:c(t)?i.selectionPredicate(e,t.selection,n):h(t)})},t.fieldFilterExpression=h,t.normalizePredicate=function(e){return p(e)&&e.timeUnit?r({},e,{timeUnit:s.normalizeTimeUnit(e.timeUnit)}):e}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(97),o=n(98),s=n(6),u=n(47),c=n(62),l=n(3),f=n(10),d=n(156),p=n(2),h=n(2),m=n(29),g=n(29),v=n(24),y=n(447),b=n(13),w=n(16);function O(e){b.isUnitModel(e)?function(e){var t=e.specifiedScales,n=e.component.scales;h.keys(n).forEach(function(r){var i=t[r],a=i?i.domain:void 0,o=x(e,r),s=n[r];if(s.domains=o,f.isSelectionDomain(a)&&s.set("domainRaw",{signal:w.SELECTION_DOMAIN+p.hash(a)},!0),e.component.data.isFaceted){for(var u=e;!b.isFacetModel(u)&&u.parent;)u=u.parent;var c=u.component.resolve.scale[r];if("shared"===c)for(var l=0,d=o;l<d.length;l++){var h=d[l];g.isDataRefDomain(h)&&(h.data=y.FACET_SCALE_PREFIX+h.data.replace(y.FACET_SCALE_PREFIX,""))}}})}(e):function(e){for(var t=0,n=e.children;t<n.length;t++){var r=n[t];O(r)}var i=e.component.scales;h.keys(i).forEach(function(t){for(var n,r=0,a=e.children;r<a.length;r++){var o=a[r],s=o.component.scales[t];s&&(n=void 0===n?s.domains:n.concat(s.domains))}i[t].domains=n})}(e)}function x(e,t){var n=e.getScaleComponent(t).get("type"),i=function(e,t,n,r){if("unaggregated"===e){var i=S(t,n),a=i.valid,o=i.reason;if(!a)return void l.warn(o)}else if(void 0===e&&r.useUnaggregatedDomain&&(a=S(t,n).valid))return"unaggregated";return e}(e.scaleDomain(t),e.fieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=r({},e.specifiedScales[t],{domain:i})),"x"===t&&e.channelHasField("x2")?e.channelHasField("x")?j(n,i,e,"x").concat(j(n,i,e,"x2")):j(n,i,e,"x2"):"y"===t&&e.channelHasField("y2")?e.channelHasField("y")?j(n,i,e,"y").concat(j(n,i,e,"y2")):j(n,i,e,"y2"):j(n,i,e,t)}function j(e,t,n,r){var i=n.fieldDef(r);if(t&&"unaggregated"!==t&&!f.isSelectionDomain(t)){if(!i.bin)return c.isDateTime(t[0])?t.map(function(e){return{signal:"{data: "+c.dateTimeExpr(e,!0)+"}"}}):[t];l.warn(l.message.conflictedDomain(r))}var a=n.stack;if(a&&r===a.fieldChannel)return"normalize"===a.offset?[[0,1]]:[{data:p=n.requestDataName(u.MAIN),field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}];var p,m=s.isScaleChannel(r)?_(n,r,e):void 0;if("unaggregated"===t)return[{data:p=n.requestDataName(u.MAIN),field:n.vgField(r,{aggregate:"min"})},{data:p,field:n.vgField(r,{aggregate:"max"})}];if(!i.bin)return m?[{data:h.isBoolean(m)?n.requestDataName(u.MAIN):n.requestDataName(u.RAW),field:n.vgField(r),sort:m}]:[{data:n.requestDataName(u.MAIN),field:n.vgField(r)}];if(f.isBinScale(e)){var g=n.getName(o.binToString(i.bin)+"_"+i.field+"_bins");return[{signal:"sequence("+g+".start, "+g+".stop + "+g+".step, "+g+".step)"}]}return f.hasDiscreteDomain(e)?[{data:h.isBoolean(m)?n.requestDataName(u.MAIN):n.requestDataName(u.RAW),field:n.vgField(r,v.binRequiresRange(i,r)?{binSuffix:"range"}:{}),sort:!0!==m&&d.isSortField(m)?m:{field:n.vgField(r,{}),op:"min"}}]:"x"===r||"y"===r?[{data:p=n.requestDataName(u.MAIN),field:n.vgField(r,{})},{data:p,field:n.vgField(r,{binSuffix:"end"})}]:[{data:n.requestDataName(u.MAIN),field:n.vgField(r,{})}]}function _(e,t,n){if(f.hasDiscreteDomain(n)){var r=e.sort(t);return d.isSortField(r)?r:"descending"===r?{op:"min",field:e.vgField(t),order:"descending"}:!!h.contains(["ascending",void 0],r)||void 0}}function S(e,t){return e.aggregate?a.SHARED_DOMAIN_OP_INDEX[e.aggregate]?"quantitative"===e.type&&"log"===t?{valid:!1,reason:l.message.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:l.message.unaggregateDomainWithNonSharedDomainOp(e.aggregate)}:{valid:!1,reason:l.message.unaggregateDomainHasNoEffectForRawField(e)}}function M(e){var t=h.unique(e.map(function(e){if(g.isDataRefDomain(e)){e.sort;return i(e,["sort"])}return e}),h.hash),n=h.unique(e.map(function(e){if(g.isDataRefDomain(e)){var t=e.sort;return void 0===t||h.isBoolean(t)||("count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}}).filter(function(e){return void 0!==e}),h.hash);if(1===t.length){var a=e[0];if(g.isDataRefDomain(a)&&n.length>0){var o=n[0];return n.length>1&&(l.warn(l.message.MORE_THAN_ONE_SORT),o=!0),r({},a,{sort:o})}return a}var s=h.unique(n.map(function(e){return!0===e?e:"count"===e.op?e:(l.warn(l.message.domainSortDropped(e)),!0)}),h.hash),u=void 0;1===s.length?u=s[0]:s.length>1&&(l.warn(l.message.MORE_THAN_ONE_SORT),u=!0);var c=h.unique(e.map(function(e){return g.isDataRefDomain(e)?e.data:null}),function(e){return e});return 1===c.length&&null!==c[0]?a=r({data:c[0],fields:t.map(function(e){return e.field})},u?{sort:u}:{}):r({fields:t},u?{sort:u}:{})}t.parseScaleDomain=O,t.parseDomainForChannel=x,t.domainSort=_,t.canUseUnaggregatedDomain=S,t.mergeDomains=M,t.getFieldFromDomain=function(e){if(g.isDataRefDomain(e)&&h.isString(e.field))return e.field;if(m.isDataRefUnionedDomain(e)){for(var t=void 0,n=0,r=e.fields;n<r.length;n++){var i=r[n];if(g.isDataRefDomain(i)&&h.isString(i.field))if(t){if(t!==i.field)return l.warn("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),t}else t=i.field}return l.warn("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),t}if(m.isFieldRefUnionDomain(e))return l.warn("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect."),t=e.fields[0],h.isString(t)?t:void 0},t.assembleDomain=function(e,t){return M(e.component.scales[t].domains.map(function(t){return g.isDataRefDomain(t)&&(t.data=e.lookupDataSource(t.data)),t}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=n(29),a=n(30);function o(e){s(e);var t=e.component.layoutSize;t.setWithExplicit("width",u(e,"width")),t.setWithExplicit("height",u(e,"height"))}function s(e){for(var t=0,n=e.children;t<n.length;t++){n[t].parseLayoutSize()}}function u(e,t){for(var n,r="width"===t?"x":"y",i=e.component.resolve,o=0,s=e.children;o<s.length;o++){var u=(d=s[o]).component.layoutSize.getWithExplicit(t),c=i.scale[r];if("independent"===c&&"range-step"===u.value){n=void 0;break}if(n){if("independent"===c&&n.value!==u.value){n=void 0;break}n=a.mergeValuesWithExplicit(n,u,t,"")}else n=u}if(n){for(var l=0,f=e.children;l<f.length;l++){var d=f[l];e.renameLayoutSize(d.getName(t),e.getName(t)),d.component.layoutSize.set(t,"merged",!1)}return n}return{explicit:!1,value:void 0}}function c(e,t){var n="width"===t?"x":"y",a=e.config,o=e.getScaleComponent(n);if(o){var s=o.get("type"),u=o.get("range");return r.hasDiscreteDomain(s)&&i.isVgRangeStep(u)?"range-step":a.view[t]}return"width"===t&&"text"===e.mark()?a.scale.textXRangeStep:a.scale.rangeStep||r.defaultScaleConfig.rangeStep}t.parseLayerLayoutSize=o,t.parseRepeatLayoutSize=o,t.parseConcatLayoutSize=function(e){s(e);var t=e.component.layoutSize,n=e.isVConcat?"width":"height";t.setWithExplicit(n,u(e,n))},t.parseChildrenLayoutSize=s,t.parseUnitLayoutSize=function(e){var t=e.component.layoutSize;if(!t.explicit.width){var n=c(e,"width");t.set("width",n,!1)}if(!t.explicit.height){var r=c(e,"height");t.set("height",r,!1)}}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=t;r.basic=n(125),r.calculus=n(857),r.complex=n(858),r.dsp=n(859),r.matrix=n(860),r.prime=n(861),r.statistic=n(862),r.generate=n(863),r.random=n(864),r.EPSILON=.001},function(e,t){var n=t;n.sum=function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=0,n=0;n<e.length;n++){if("number"!=typeof e[n])throw new Error("All elements in array must be numbers");t+=e[n]}return t}throw new Error("Input must be of type Array")},n.subtraction=function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=e[0];if("number"!=typeof t)throw new Error("All elements in array must be numbers");for(var n=1,r=e.length;n<r;n++){if("number"!=typeof e[n])throw new Error("All elements in array must be numbers");t-=e[n]}return t}throw new Error("Input must be of type Array")},n.product=function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=e[0];if("number"!=typeof t)throw new Error("All elements in array must be numbers");for(var n=1,r=e.length;n<r;n++){if("number"!=typeof e[n])throw new Error("All elements in array must be numbers");t*=e[n]}return t}throw new Error("Input must be of type Array")},n.square=function(e){if("number"!=typeof e)throw new Error("Input must be a number.");return e*e},n.binomial=function(e,t){var n=[];return function e(t,r){if("number"!=typeof t&&"number"!=typeof r)throw new Error("Input must be a number.");return t>=0&&0===r?1:0===t&&r>0?0:n[t]&&n[t][r]>0?n[t][r]:(n[t]||(n[t]=[]),n[t][r]=e(t-1,r-1)+e(t-1,r),n[t][r])}(e,t)},n.factorial=function(e){if("number"!=typeof e)throw new Error("Input must be a number.");if(e<0)throw new Error("Input must not be negative.");for(var t=2,n=1;t<=e;)n*=t++;return n},n.gcd=function(e,t){var n;if(t=+t,(e=+e)!=e||t!=t)return NaN;if(e===1/0||e===-1/0||t===1/0||t===-1/0)return 1/0;if(e%1!=0||t%1!=0)throw new Error("Can only operate on integers");for(;t;)n=e%t,e=t,t=n;return 0<e?e:-e},n.lcm=function(e,t){return Math.abs(e*t)/n.gcd(e,t)},n.random=function(e,t,r){if(0===e.length)throw new Error("Empty array");if(t>e.length&&!r)throw new Error("Quantity requested exceeds size of array");if(!0===r){var i,a=[];for(i=0;i<t;i++)a[i]=e[Math.floor(Math.random()*e.length)];return a}return n.shuffle(e).slice(0,t)},n.shuffle=function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t;return e},n.max=function(e){if(!Array.isArray(e))throw new Error("Input must be of type Array");for(var t,n=-1/0,r=0,i=e.length;r<i;r++)if(n<(t=+e[r])&&(n=t),t!=t)return NaN;return n},n.min=function(e){if(!Array.isArray(e))throw new Error("Input must be of type Array");for(var t,n=1/0,r=0,i=e.length;r<i;r++)if((t=+e[r])<n&&(n=t),t!=t)return NaN;return n},n.range=function(e,t,n){var r,i,a=0;for(arguments.length<=1&&(t=e||0,e=0),n=n||1,t<e&&(n=0-Math.abs(n)),i=Math.max(Math.ceil((t-e)/n)+1,0),r=new Array(i);a<i;)r[a++]=e,e+=n;return r},n.isInt=function(e){return e%1==0},n.divMod=function(e,t){if(t<=0)throw new Error("b cannot be zero. Undefined.");if(!n.isInt(e)||!n.isInt(t))throw new Error("A or B are not integers.");return[Math.floor(e/t),e%t]},n.powerMod=function(e,t,r){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof r)throw new Error("Inputs must be numbers.");if(t<-1)return Math.pow(e,t)%r;if(0===t)return 1%r;if(t>=1){for(var i=1;t>0;)t%2==1&&(i=i*e%r),e=e*e%r,t>>=1;return i}return-1===t?n.modInverse(e,r):t<1?n.powerMod(e,Math.pow(t,-1),r):void 0},n.egcd=function(e,t){if(t=+t,(e=+e)!=e||t!=t)return[NaN,NaN,NaN];if(e===1/0||e===-1/0||t===1/0||t===-1/0)return[1/0,1/0,1/0];if(e%1!=0||t%1!=0)throw new Error("Can only operate on integers");var n,r,i,a,o=e<0?-1:1,s=t<0?-1:1,u=0,c=1,l=1,f=0;for(e=Math.abs(e),t=Math.abs(t);0!==e;)r=t%e,i=u-l*(n=Math.floor(t/e)),a=c-f*n,t=e,e=r,u=l,c=f,l=i,f=a;return[t,o*u,s*c]},n.modInverse=function(e,t){var r=n.egcd(e,t);if(1!=r[0])throw new Error("No modular inverse exists");return r[1]%t},n.numbersEqual=function(e,t,n){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof n)throw new Error("First and Second must be numbers.");return e-t<n&&e-t>-n},n.fallingFactorial=function(e,t){var n=e-t+1,r=1;if(e<0)throw new Error("n cannot be negative.");if(t>e)throw new Error("k cannot be greater than n.");for(;n<=e;)r*=n++;return r},n.permutation=function(e,t){if(e<=0)throw new Error("n cannot be less than or equal to 0.");if(e<t)throw new Error("k cannot be greater than k.");return n.binomial(e,t)*n.factorial(t)}},function(e,t,n){"use strict";var r=n(360);t.a=function(e){var t,n,i,a=[],o=null,s=0,u=e.length,c="";function l(){a.push(c+e.substring(t,n)),c="",t=n+1}for(e+="",t=n=0;n<u;++n)if("\\"===(i=e[n]))c+=e.substring(t,n),t=++n;else if(i===o)l(),o=null,s=-1;else{if(o)continue;t===s&&'"'===i?(t=n+1,o=i):t===s&&"'"===i?(t=n+1,o=i):"."!==i||s?"["===i?(n>t&&l(),s=t=n+1):"]"===i&&(s||Object(r.a)("Access path missing open bracket: "+e),s>0&&l(),s=0,t=n+1):n>t?l():t=n+1}return s&&Object(r.a)("Access path missing closing bracket: "+e),o&&Object(r.a)("Access path missing closing quote: "+e),n>t&&(n++,l()),a}},function(e,t,n){"use strict";t.a=function e(t){return Object(r.a)(t)?"["+t.map(e)+"]":Object(i.a)(t)||Object(a.a)(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t};var r=n(209),i=n(361),a=n(362)},function(e,t,n){"use strict";t.a=u;var r=n(368),i=n(91),a=n(0),o=0,s=new r.a;function u(e,t,n,r){this.id=++o,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}var c=u.prototype;function l(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}c.targets=function(){return this._targets||(this._targets=Object(i.a)(a.id))},c.set=function(e){return this.value!==e?(this.value=e,1):0},c.skip=l(1),c.modified=l(2),c.parameters=function(e,t){t=!1!==t;var n,i,o,s,c=this,l=c._argval=c._argval||new r.a,f=c._argops=c._argops||[],d=[];function p(e,n,r){r instanceof u?(r!==c&&(t&&r.targets().add(c),d.push(r)),f.push({op:r,name:e,index:n})):l.set(e,n,r)}for(n in e)if(i=e[n],"pulse"===n)Object(a.array)(i).forEach(function(e){e instanceof u?e!==c&&(e.targets().add(c),d.push(e)):Object(a.error)("Pulse parameters must be operator instances.")}),c.source=i;else if(Object(a.isArray)(i))for(l.set(n,-1,Array(o=i.length)),s=0;s<o;++s)p(n,s,i[s]);else p(n,-1,i);return this.marshall().clear(),d},c.marshall=function(e){var t,n,r,i,a,o=this._argval||s,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)a=(i=(t=u[n]).op).modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);return o},c.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},c.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,this.pulse=t,t||e);var t}},function(e,t,n){"use strict";var r=n(214);t.a=function(e,t){return function(n,i){var a=Object(r.a)(n).mimeType(e).response(t);if(null!=i){if("function"!=typeof i)throw new Error("invalid callback: "+i);return a.get(i)}return a}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),t.b=o;var r=n(213),i=n(0),a={};function o(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var s=o.prototype;function u(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function c(e,t){var n=[];return Object(i.visitArray)(e,t,function(e){n.push(e)}),n}function l(e,t){var n={};return e.visit(t,function(e){n[Object(r.f)(e)]=1}),function(e){return n[Object(r.f)(e)]?null:e}}s.StopPropagation=a,s.ADD=1,s.REM=2,s.MOD=4,s.ADD_REM=3,s.ADD_MOD=5,s.ALL=7,s.REFLOW=8,s.SOURCE=16,s.NO_SOURCE=32,s.NO_FIELDS=64,s.fork=function(e){return new o(this.dataflow).init(this,e)},s.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?((e=new o(this.dataflow).init(this)).add=e.source,e):e},s.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},s.runAfter=function(e){this.dataflow.runAfter(e)},s.changed=function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},s.reflow=function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,l(this,1))),this},s.modifies=function(e){var t=Object(i.array)(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},s.modified=function(e){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?Object(i.isArray)(e)?e.some(function(e){return t[e]}):t[e]:!!t)},s.filter=function(e,t){var n=this;return 1&e&&(n.addF=u(n.addF,t)),2&e&&(n.remF=u(n.remF,t)),4&e&&(n.modF=u(n.modF,t)),16&e&&(n.srcF=u(n.srcF,t)),n},s.materialize=function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=c(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=c(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=c(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},s.visit=function(e,t){var n,r,a=this,o=t;return 16&e?(Object(i.visitArray)(a.source,a.srcF,o),a):(1&e&&Object(i.visitArray)(a.add,a.addF,o),2&e&&Object(i.visitArray)(a.rem,a.remF,o),4&e&&Object(i.visitArray)(a.mod,a.modF,o),8&e&&(n=a.source)&&((r=a.add.length+a.mod.length)===n.length||(r?Object(i.visitArray)(n,l(a,5),o):Object(i.visitArray)(n,a.srcF,o))),a)}},function(e,t,n){"use strict";t.d=function(e,t,n){return n||e+(t?"_"+t:"")},n.d(t,"a",function(){return a}),t.c=function(e,t){return i[e](t)},t.b=function(e,t){var n=t||r.identity,a=function(e,t){var n,r=e.reduce(function e(n,r){function a(t){n[t]||e(n,n[t]=i[t]())}r.req&&r.req.forEach(a);t&&r.str&&r.str.forEach(a);return n},e.reduce(function(e,t){return e[t.name]=t,e},{})),a=[];for(n in r)a.push(r[n]);return a.sort(s)}(e,!0),o="var cell = this.cell; this.valid = 0; this.missing = 0;",u="this.cell = cell; this.init();",c="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",l="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",f="var cell = this.cell;";return a.forEach(function(e){o+=e.init,c+=e.add,l+=e.rem}),e.slice().sort(s).forEach(function(e){f+="t['"+e.out+"']="+e.set+";"}),f+="return t;",(u=Function("cell",u)).prototype.init=Function(o),u.prototype.add=Function("v","t",c),u.prototype.rem=Function("v","t",l),u.prototype.set=Function("t",f),u.prototype.get=n,u.fields=e.map(function(e){return e.out}),u};var r=n(0);var i={values:o({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:o({name:"count",set:"cell.num"}),missing:o({name:"missing",set:"this.missing"}),valid:o({name:"valid",set:"this.valid"}),sum:o({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:o({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:o({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:o({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:o({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:o({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:o({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:o({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:o({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:o({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:o({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:o({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:o({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:o({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:o({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:o({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:o({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:o({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},a=Object.keys(i);function o(e){return function(t){var n=Object(r.extend)({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function s(e,t){return e.idx-t.idx}},function(e,t,n){"use strict";t.a=function(e,t){return Object(r.a)(e,t)||Object(i.a)(e,t)||null},t.b=function(){return Object(r.b)()||Object(i.b)()||null};var r=n(393),i=n(394)},function(e,t,n){"use strict";var r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];t.a=function(e){var t,n,a,o,s,u,c,l,f,d,p,h=[];for(l=0,d=(t=e.slice().replace(i[0],"###$1").split(i[1]).slice(1)).length;l<d;++l){for(a=(n=t[l]).slice(1).trim().replace(i[2],"$1###$2").split(i[3]),o=[u=n.charAt(0)],f=0,p=a.length;f<p;++f)(s=+a[f])===s&&o.push(s);if(c=r[u.toLowerCase()],o.length-1>c)for(f=1,p=o.length;f<p;f+=c)h.push([u].concat(o.slice(f,f+c)));else h.push(o)}return h}},function(e,t,n){"use strict";t.a=function(e){return function(t,n,r){Object(a.b)(n,function(n){r&&!r.intersects(n.bounds)||o(e,t,n,n)})}},t.b=function(e){return function(t,n,r){!n.items.length||r&&!r.intersects(n.bounds)||o(e,t,n.items[0],n.items)}};var r=n(219),i=n(135),a=n(42);function o(e,t,n,a){var o=null==n.opacity?1:n.opacity;0!==o&&(e(t,a)||(n.fill&&Object(r.a)(t,n,o)&&t.fill(),n.stroke&&Object(i.a)(t,n,o)&&t.stroke()))}},function(e,t,n){"use strict";var r=n(402),i=[];t.a=function(e,t,n){var a=null!=(a=t.strokeWidth)?a:1;return!(a<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=Object(r.a)(e,t,t.stroke),e.lineWidth=a,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||i),e.lineDashOffset=t.strokeDashOffset||0),!0))}},function(e,t,n){"use strict";var r=n(220);t.a=function(e){return Object(r.a)(e.x||0,e.y||0)}},function(e,t,n){"use strict";t.b=function(){i=1};var r=n(0),i=1;t.a=function(e,t,n){var a=t.clip,o=e._defs,s=t.clip_id||(t.clip_id="clip"+i++),u=o.clipping[s]||(o.clipping[s]={id:s});return Object(r.isFunction)(a)?u.path=a(null):(u.width=n.width||0,u.height=n.height||0),"url(#"+s+")"}},function(e,t,n){"use strict";n.d(t,"c",function(){return o}),t.d=p,t.a=h,t.b=function(e){var t=e.baseline,n=f(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)};var r,i,a=n(132),o={height:f,measureWidth:c,estimateWidth:s,width:s,canvas:d};function s(e){return i=f(e),u(p(e))}function u(e){return~~(.8*e.length*i)}function c(e){return r.font=h(e),l(p(e))}function l(e){return r.measureText(e).width}function f(e){return null!=e.fontSize?e.fontSize:11}function d(e){r=e&&(r=Object(a.a)(1,1))?r.getContext("2d"):null,o.width=r?c:s}function p(e){var t=e.text;return null==t?"":e.limit>0?function(e){var t,n=+e.limit,a=e.text+"";r?(r.font=h(e),t=l):(i=f(e),t=u);if(t(a)<n)return a;var o,s=e.ellipsis||"",c="rtl"===e.dir,d=0,p=a.length;if(n-=t(s),c){for(;d<p;)o=d+p>>>1,t(a.slice(o))>n?d=o+1:p=o;return s+a.slice(d)}for(;d<p;)o=1+(d+p>>>1),t(a.slice(0,o))<n?d=o:p=o-1;return a.slice(0,d)+s}(e):t+""}function h(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/"/g,"'")),(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+f(e)+"px "+(n||"sans-serif")}d(!0)},function(e,t,n){"use strict";t.a=i;var r=n(392);function i(e){this._el=null,this._bgcolor=null,this._loader=new r.a(e)}var a=i.prototype;a.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},a.element=function(){return this._el},a.scene=function(){return this._el&&this._el.firstChild},a.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},a.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},a.dirty=function(){},a.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},a._render=function(){},a.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},a._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return r},a.sanitizeURL=function(e){return this._load("sanitizeURL",e)},a.loadImage=function(e){return this._load("loadImage",e)}},function(e,t,n){"use strict";var r=n(1011);n.d(t,"b",function(){return r.b}),n.d(t,"c",function(){return r.c}),n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}Object(i.inherits)(a,r.g).transform=function(e,t){t.source&&t.source.root||Object(i.error)(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,a=t.source.root,o=e.as||r;e.field&&a.sum(e.field),e.sort&&a.sort(e.sort),function(e,t,n){for(var r,i=0,a=t.length;i<a;++i)(r=t[i])in n&&e[r](n[r])}(n,this.params,e);try{this.value=n(a)}catch(e){Object(i.error)(e)}return a.each(function(e){!function(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,o)}),t.reflow(e.modified()).modifies(o).modifies("leaf")}},function(e,t,n){"use strict";function r(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function i(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function a(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}t.d=r,t.a=i,t.b=a,t.c=function(e){var t=a(e),n=r(e),o=i(e);e._renderer.background(e._background),e._renderer.resize(n,o,t),e._handler.origin(t),e._resizeListeners.forEach(function(e){e(n,o)})}},function(e,t,n){"use strict";var r=n(418),i=n(1077),a=n(1078),o=n(1079),s=n(226),u=n(1097),c=n(1098),l=n(149),f=n(1099),d=n(0);t.a=function(e,t,n){var p=Object(d.array)(e.signals),h=Object(d.array)(e.scales);return n||p.forEach(function(e){Object(s.a)(e,t)}),Object(d.array)(e.projections).forEach(function(e){Object(a.a)(e,t)}),h.forEach(function(e){Object(i.a)(e,t)}),Object(d.array)(e.data).forEach(function(e){Object(c.a)(e,t)}),h.forEach(function(e){Object(i.b)(e,t)}),p.forEach(function(e){Object(r.a)(e,t)}),Object(d.array)(e.axes).forEach(function(e){Object(f.a)(e,t)}),Object(d.array)(e.marks).forEach(function(e){Object(l.a)(e,t)}),Object(d.array)(e.legends).forEach(function(e){Object(o.a)(e,t)}),e.title&&Object(u.a)(e.title,t),t.parseLambdas(),t}},function(e,t,n){"use strict";t.e=s,t.i=function(e,t,n,i){if(t[0].type===r.b)u(n,i,t[0].value);else if(t[0].type===r.a)for(e in n.scales)u(n,i,e)},t.g=function(e,t){var n=s(e,(t||this).context);return n&&n.range?n.range():[]},t.d=function(e,t){var n=s(e,(t||this).context);return n?n.domain():[]},t.b=function(e,t){var n=s(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},t.a=function(e,t,n){return Object(a.a)(e||0,t||0,n||0)},t.c=function(e,t){var n=s(e,(t||this).context);return n?n.copy():void 0},t.h=function(e,t,n){var r=s(e,(n||this).context);return r?r(t):void 0},t.f=function(e,t,n){var r=s(e,(n||this).context);return r?Object(o.isArray)(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0};var r=n(227),i=n(145),a=n(60),o=n(0);function s(e,t){var n;return Object(o.isFunction)(e)?e:Object(o.isString)(e)?(n=t.scales[e])&&n.value:void 0}function u(e,t,n){var r=i.c+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(e){}}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a});var r="@",i="%",a=":"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1076);n.d(t,"selector",function(){return r.a})},function(e,t,n){"use strict";var r=n(1083),i=n(426),a=n(427),o=n(1084),s=n(1085),u=n(148),c=n(0);t.a=function(e,t,n,l,f){if(null!=t.gradient)return Object(o.a)(t,n,l,f);var d=t.signal?Object(u.a)(t.signal,n,l,f):t.color?Object(r.a)(t.color,n,l,f):null!=t.field?Object(i.a)(t.field,n,l,f):void 0!==t.value?Object(c.stringValue)(t.value):void 0;return null!=t.scale&&(d=Object(a.a)(t,d,n,l,f)),void 0===d&&(d=null),null!=t.exponent&&(d="Math.pow("+d+","+Object(s.a)(t.exponent,n,l,f)+")"),null!=t.mult&&(d+="*"+Object(s.a)(t.mult,n,l,f)),null!=t.offset&&(d+="+"+Object(s.a)(t.offset,n,l,f)),t.round&&(d="Math.round("+d+")"),d}},function(e,t,n){"use strict";var r=n(61),i=n(0);t.a=function(e,t,n,a){var o=Object(r.a)(e,t);return o.$fields.forEach(function(e){a[e]=1}),Object(i.extend)(n,o.$params),o.$expr}},function(e,t,n){"use strict";var r=n(1091),i=n(1092),a=n(1093),o=n(1094),s=n(1095),u=n(1096),c=n(430),l=n(21),f=n(12),d=n(15),p=n(229),h=n(431),m=n(143),g=n(95),v=n(20),y=n(0),b=n(27);t.a=function(e,t){var n,w,O,x,j,_,S,M,E,k,N,A,P,C=Object(c.a)(e),D=e.type===l.a,T=e.from&&e.from.facet,R=e.layout||C===f.o||C===f.g,L=C===f.n||R||T,I=e.overlap;O=Object(o.a)(e.from,D,t),w=t.add(Object(b.f)({key:O.key||(e.key?Object(v.f)(e.key):void 0),pulse:O.pulse,clean:!D})),E=Object(v.k)(w),w=x=t.add(Object(b.d)({pulse:E})),w=t.add(Object(b.l)({markdef:Object(i.a)(e),interactive:Object(a.a)(e.interactive,t),clip:Object(r.a)(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Object(v.k)(w)})),k=Object(v.k)(w),(w=t.add(Object(b.g)(Object(d.c)(e.encode,e.type,C,e.style,t,{pulse:k})))).params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=Object(p.a)(e,t);(n.metadata.generates||n.metadata.changes)&&Object(y.error)("Mark transforms should not generate new data."),n.params.pulse=Object(v.k)(w),t.add(w=n)}),e.sort&&(w=t.add(Object(b.x)({sort:t.compareRef(e.sort,!0),pulse:Object(v.k)(w)}))),N=Object(v.k)(w),(T||R)&&(R=t.add(Object(b.z)({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:k,pulse:N})),A=Object(v.k)(R)),j=t.add(Object(b.c)({mark:k,pulse:A||N})),P=Object(v.k)(j),D&&(L&&((n=t.operators).pop(),R&&n.pop()),t.pushState(N,A||P,E),T?Object(s.a)(e,t,O):L?Object(u.a)(e,t,O):Object(m.a)(e,t),t.popState(),L&&(R&&n.push(R),n.push(j))),I&&(w={method:!0===I.method?"parity":I.method,pulse:P},I.order&&(w.sort=t.compareRef({field:I.order})),I.bound&&(w.boundScale=t.scaleRef(I.bound.scale),w.boundOrient=I.bound.orient,w.boundTolerance=I.bound.tolerance),P=Object(v.k)(t.add(Object(b.o)(w)))),_=t.add(Object(b.u)({pulse:P})),S=t.add(Object(b.w)({pulse:Object(v.k)(_)},void 0,t.parent())),null!=e.name&&(M=e.name,t.addData(M,new g.a(t,x,_,S)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&Object(y.error)("Marks only support modify triggers."),Object(h.a)(e,t,M)}))}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),a=n(1119),o=n(1121),s={};function u(e,t){s[e]=t}t.add=u,t.remove=function(e){delete s[e]},t.COMPOSITE_MARK_STYLES=a.BOXPLOT_STYLES,t.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=r({},a.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX),u(a.BOXPLOT,a.normalizeBoxPlot),u(o.ERRORBAR,o.normalizeErrorBar),t.normalize=function(e,t){var n=i.isMarkDef(e.mark)?e.mark.type:e.mark,r=s[n];if(r)return r(e,t);throw new Error("Unregistered composite mark "+n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(73),a=n(1128),o=n(1149),s=n(1150),u=n(1165),c=n(462);t.buildModel=function(e,t,n,l,f,d,p){if(i.isFacetSpec(e))return new o.FacetModel(e,t,n,f,d);if(i.isLayerSpec(e))return new s.LayerModel(e,t,n,l,f,d,p);if(i.isUnitSpec(e))return new c.UnitModel(e,t,n,l,f,d,p);if(i.isRepeatSpec(e))return new u.RepeatModel(e,t,n,f,d);if(i.isConcatSpec(e))return new a.ConcatModel(e,t,n,f,d);throw new Error(r.message.INVALID_SPEC)}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(47),o=n(62),s=n(3),u=n(100),c=n(153),l=n(2),f=n(13),d=n(16),p=n(234),h=n(451),m=n(452),g=n(14),v=n(157),y=n(453),b=n(235),w=n(236),O=n(454),x=n(455),j=n(456),_=n(457),S=n(158),M=n(237),E=n(159);function k(e){var t,n,r=null,a=0;function f(e){r?e.parent?n.insertAsParentOf(e):e.parent=n:r=e.parent||e,n=e}return e.transforms.forEach(function(n){if(c.isCalculate(n))t=new m.CalculateNode(n);else if(c.isFilter(n)){var r={},g=n.filter,v=null;if(u.isFieldEqualPredicate(g)?v=g.equal:u.isFieldRangePredicate(g)?v=g.range[0]:u.isFieldOneOfPredicate(g)&&(v=(g.oneOf||g.in)[0]),v&&(o.isDateTime(v)?r[g.field]="date":i.isNumber(v)?r[g.field]="number":i.isString(v)&&(r[g.field]="string")),l.keys(r).length>0)f(new w.ParseNode(r));t=new y.FilterNode(e,n.filter)}else if(c.isBin(n))t=h.BinNode.makeFromTransform(n,{model:e});else if(c.isTimeUnit(n))t=E.TimeUnitNode.makeFromTransform(n);else if(c.isAggregate(n))t=p.AggregateNode.makeFromTransform(n),d.requiresSelectionId(e)&&(f(t),t=new j.IdentifierNode);else{if(!c.isLookup(n))return void s.warn(s.message.invalidTransformIgnored(n));t=_.LookupNode.make(e,n,a++)}f(t)}),{first:r,last:t}}t.parseTransformArray=k,t.parseData=function(e){var t=function(e,t){if(e.data||!e.parent){var n=new S.SourceNode(e.data),r=n.hash();return r in t?t[r]:(t[r]=n,n)}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources),n=e.component.data.outputNodes,i=e.component.data.outputNodeRefCounts,o=t;d.requiresSelectionId(e)&&!e.parent&&((I=new j.IdentifierNode).parent=o,o=I);var s=e.parent&&f.isLayerModel(e.parent);if((f.isUnitModel(e)||f.isFacetModel(e))&&s&&(y=h.BinNode.makeBinFromEncoding(e))&&(y.parent=o,o=y),e.transforms.length>0){var u=k(e),c=u.first,l=u.last;c.parent=o,o=l}var m=w.ParseNode.make(e);if(m&&(m.parent=o,o=m),f.isUnitModel(e)||f.isFacetModel(e)){var y;s||(y=h.BinNode.makeBinFromEncoding(e))&&(y.parent=o,o=y);for(var _=0,N=O.GeoJSONNode.makeAll(e);_<N.length;_++){var A=N[_];A.parent=o,o=A}for(var P=0,C=x.GeoPointNode.makeAll(e);P<C.length;P++){var D=C[P];D.parent=o,o=D}var T=E.TimeUnitNode.makeFromEncoding(e);T&&(T.parent=o,o=T)}var R=e.getName(a.RAW),L=new g.OutputNode(R,a.RAW,i);if(n[R]=L,L.parent=o,o=L,f.isUnitModel(e)){var I,F=p.AggregateNode.makeFromEncoding(e);F&&(F.parent=o,o=F,d.requiresSelectionId(e)&&((I=new j.IdentifierNode).parent=o,o=I));var q=M.StackNode.make(e);q&&(q.parent=o,o=q)}if(f.isUnitModel(e)){var U=b.FilterInvalidNode.make(e);U&&(U.parent=o,o=U)}var z=e.getName(a.MAIN),B=new g.OutputNode(z,a.MAIN,i);n[z]=B,B.parent=o,o=B;var V=null;if(f.isFacetModel(e)){var H=e.getName("facet");V=new v.FacetNode(e,H,B.getSource()),n[H]=V,V.parent=o,o=V}var G=r({},e.component.data.ancestorParse,m?m.parse:{});return r({},e.component.data,{outputNodes:n,outputNodeRefCounts:i,raw:L,main:B,facetRoot:V,ancestorParse:G})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(230),i=n(100);function a(e){return void 0!==e.filter}t.isFilter=a,t.isLookup=function(e){return void 0!==e.lookup},t.isCalculate=function(e){return void 0!==e.calculate},t.isBin=function(e){return!!e.bin},t.isTimeUnit=function(e){return void 0!==e.timeUnit},t.isAggregate=function(e){return void 0!==e.aggregate},t.normalizeTransform=function(e){return e.map(function(e){return a(e)?{filter:r.normalizeLogicalOperand(e.filter,i.normalizePredicate)}:e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=n(29),a=n(13);function o(e,t){var n="width"===t?"x":"y",o=e.component.layoutSize.get(t);if(!o||"merged"===o)return[];var c=e.getSizeSignalRef(t).signal;if("range-step"===o){var l=e.getScaleComponent(n);if(l){var f=l.get("type"),d=l.get("range");if(r.hasDiscreteDomain(f)&&i.isVgRangeStep(d)){var p=e.scaleName(n);if(a.isFacetModel(e.parent))if("independent"===e.parent.component.resolve.scale[n])return[s(p,d)];return[s(p,d),{name:c,update:u(p,l,"domain('"+p+"').length")}]}}throw new Error("layout size is range step although there is no rangeStep.")}return[{name:c,value:o}]}function s(e,t){return{name:e+"_step",value:t.step}}function u(e,t,n){var r=t.get("type"),i=t.get("padding"),a=t.get("paddingOuter");a=void 0!==a?a:i;var o=t.get("paddingInner");return"bandspace("+n+", "+(o="band"===r?void 0!==o?o:i:1)+", "+a+") * "+e+"_step"}t.assembleLayoutSignals=function(e){return[].concat(o(e,"width"),o(e,"height"))},t.sizeSignals=o,t.sizeExpr=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(3),a=n(2),o=n(13);t.defaultScaleResolve=function(e,t){if(o.isLayerModel(t)||o.isFacetModel(t))return"shared";if(o.isConcatModel(t)||o.isRepeatModel(t))return a.contains(r.POSITION_SCALE_CHANNELS,e)?"independent":"shared";throw new Error("invalid model type for resolve")},t.parseGuideResolve=function(e,t){var n=e.scale[t],o=a.contains(r.POSITION_SCALE_CHANNELS,t)?"axis":"legend";return"independent"===n?("shared"===e[o][t]&&i.warn(i.message.independentScaleMeansIndependentGuide(t)),"independent"):e[o][t]||"shared"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSortField=function(e){return!(!e||"count"!==e.op&&!e.field||!e.op)}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),s=n(3),u=n(10),c=n(29),l=n(101),f=function(e){function t(t,n,r){var i=e.call(this)||this;return i.model=t,i.name=n,i.data=r,t.facet.column&&(i.columnFields=[t.vgField(o.COLUMN)],i.columnName=t.getName("column_domain"),t.fieldDef(o.COLUMN).bin&&i.columnFields.push(t.vgField(o.COLUMN,{binSuffix:"end"}))),t.facet.row&&(i.rowFields=[t.vgField(o.ROW)],i.rowName=t.getName("row_domain"),t.fieldDef(o.ROW).bin&&i.rowFields.push(t.vgField(o.ROW,{binSuffix:"end"}))),i.childModel=t.child,i}return i(t,e),Object.defineProperty(t.prototype,"fields",{get:function(){var e=[];return this.columnFields&&(e=e.concat(this.columnFields)),this.rowFields&&(e=e.concat(this.rowFields)),e},enumerable:!0,configurable:!0}),t.prototype.getSource=function(){return this.name},t.prototype.getChildIndependentFieldsWithStep=function(){for(var e={},t=0,n=["x","y"];t<n.length;t++){var r=n[t],i=this.childModel.component.scales[r];if(i&&!i.merged){var a=i.get("type"),o=i.get("range");if(u.hasDiscreteDomain(a)&&c.isVgRangeStep(o)){var f=l.assembleDomain(this.childModel,r),d=l.getFieldFromDomain(f);d?e[r]=d:s.warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e},t.prototype.assembleRowColumnData=function(e,t,n){var r={},i="row"===e?"y":"x";return n[i]&&(r=t?{fields:["distinct_"+n[i]],ops:["max"],as:["distinct_"+n[i]]}:{fields:[n[i]],ops:["distinct"]}),{name:"row"===e?this.rowName:this.columnName,source:t||this.data,transform:[a({type:"aggregate",groupby:"row"===e?this.rowFields:this.columnFields},r)]}},t.prototype.assemble=function(){var e=[],t=null,n=this.getChildIndependentFieldsWithStep();if(this.columnName&&this.rowName&&(n.x||n.y)){t="cross_"+this.columnName+"_"+this.rowName;var r=[].concat(n.x?[n.x]:[],n.y?[n.y]:[]),i=r.map(function(){return"distinct"});e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.columnFields.concat(this.rowFields),fields:r,ops:i}]})}return this.columnName&&e.push(this.assembleRowColumnData("column",t,n)),this.rowName&&e.push(this.assembleRowColumnData("row",t,n)),e},t}(n(14).DataFlowNode);t.FacetNode=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n(47),u=n(2),c=function(e){function t(t){var n=e.call(this)||this;if(t=t||{name:"source"},s.isInlineData(t))n._data={values:t.values};else if(s.isUrlData(t)){if(n._data={url:t.url},t.format||(t.format={}),!t.format||!t.format.type){var r=/(?:\.([^.]+))?$/.exec(t.url)[1];u.contains(["json","csv","tsv","topojson"],r)||(r="json"),t.format.type=r}}else s.isNamedData(t)&&(n._name=t.name,n._data={});if(!s.isNamedData(t)&&t.format){var i=t.format,a=(i.parse,o(i,["parse"]));n._data.format=a}return n}return i(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.hasName=function(){return!!this._name},Object.defineProperty(t.prototype,"dataName",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{set:function(e){throw new Error("Source nodes have to be roots.")},enumerable:!0,configurable:!0}),t.prototype.remove=function(){throw new Error("Source nodes are roots and cannot be removed.")},t.prototype.hash=function(){return s.isInlineData(this._data)?(this._hash||(this._hash=u.hash(this._data)),this._hash):s.isUrlData(this._data)?u.hash([this._data.url,this._data.format]):this._name},t.prototype.assemble=function(){return a({name:this._name},this._data,{transform:[]})},t}(n(14).DataFlowNode);t.SourceNode=c},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),s=n(99),u=n(2),c=function(e){function t(t){var n=e.call(this)||this;return n.formula=t,n}return i(t,e),t.prototype.clone=function(){return new t(u.duplicate(this.formula))},t.makeFromEncoding=function(e){var n=e.reduceFieldDef(function(e,t){if(t.timeUnit){var n=o.vgField(t);e[n]={as:n,timeUnit:t.timeUnit,field:t.field}}return e},{});return 0===u.keys(n).length?null:new t(n)},t.makeFromTransform=function(e){return new t(((n={})[e.field]={as:e.as,timeUnit:e.timeUnit,field:e.field},n));var n},t.prototype.merge=function(e){this.formula=a({},this.formula,e.formula),e.remove()},t.prototype.producedFields=function(){var e={};return u.vals(this.formula).forEach(function(t){e[t.as]=!0}),e},t.prototype.dependentFields=function(){var e={};return u.vals(this.formula).forEach(function(t){e[t.field]=!0}),e},t.prototype.assemble=function(){return u.vals(this.formula).map(function(e){return{type:"formula",as:e.as,expr:s.fieldExpr(e.timeUnit,e.field)}})},t}(n(14).DataFlowNode);t.TimeUnitNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(10),a=n(2),o=n(16),s={has:function(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function(e,t,n){var a=n.scales=[];n.project.forEach(function(t){var s=t.channel,u=e.getScaleComponent(s),c=u?u.get("type"):void 0;u&&i.hasContinuousDomain(c)&&!i.isBinScale(c)?(u.set("domainRaw",{signal:o.channelSignalName(n,s,"data")},!0),a.push(s)):r.warn(r.message.SCALE_BINDINGS_CONTINUOUS)})},topLevelSignals:function(e,t,n){if(!e.parent)return n;var r=t.scales.filter(function(e){return!n.filter(function(n){return n.name===o.channelSignalName(t,e,"data")}).length});return n.concat(r.map(function(e){return{name:o.channelSignalName(t,e,"data")}}))},signals:function(e,t,n){return e.parent&&t.scales.forEach(function(e){var r=n.filter(function(n){return n.name===o.channelSignalName(t,e,"data")})[0];r.push="outer",delete r.value,delete r.update}),n}};t.default=s,t.domain=function(e,t){return"domain("+a.stringValue(e.scaleName(t))+")"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}},function(e,t,n){(function(e){var n,r,i=function(e){"use strict";var t=new be,n=e.bigInt,r={},a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083],o={},s={init_primes:1e3,exclude:[],suppress_errors:!1,PARSE2NUMBER:!1,SAFE:!1,IMAGINARY:"i",FUNCTION_MODULES:[Math],ALLOW_CHARS:[""],USE_MULTICHARACTER_VARS:!0,POWER_OPERATOR:"^",VALIDATION_REGEX:/^[a-z_ABEZHIKMNoOPTX][a-z\d\_ABEZHIKMNoOPTX]*$/i,ALIASES:{"":"pi"},POSITIVE_MULTIPLIERS:!1,CACHE:{},SILENCE_WARNINGS:!1,PRECISION:40},u={},c=r.N=1,l=r.P=2,f=r.S=3,d=r.EX=4,p=r.FN=5,h=r.PL=6,m=r.CB=7,g=r.CP=8,v=s.CONST_HASH="#",y=s.PARENTHESIS="parens",b=(s.VECTOR="vector",s.SQRT="sqrt"),w=s.ABS="abs",O=s.FACTORIAL="factorial",x=s.DOUBLEFACTORIAL="dfactorial",j=[],_={},S=[],M=[],E=o.isReserved=function(e){return-1!==S.indexOf(e)},k=o.allSame=function(e){for(var t=e[0],n=1,r=e.length;n<r;n++)if(!e[n].equals(t))return!1;return!0},N=function(e,t){if(!s.suppress_errors)throw t?new t(e):new Error(e)},A=o.warn=function(e){M.push(e),!s.SILENCE_WARNINGS&&console&&console.warn&&console.warn(e)},P=o.validateName=function(e,t){if((t=t||"variable",-1===s.ALLOW_CHARS.indexOf(e))&&!s.VALIDATION_REGEX.test(e))throw new Error(e+" is not a valid "+t+" name")},C=(o.intersection=function(e,t,n){var r=[];if(e.length>t.length){var i=e;e=t,t=i}t=t.slice();for(var a=e.length,o=t.length,s=0;s<a;s++)for(var u=e[s],c=0;c<o;c++){var l=t[c];if(void 0!==l)(n?n(u,l):u===l)&&(t[c]=void 0,r.push(u))}return r},o.scientificToDecimal=function(e){if(/\d+\.?\d*e[\+\-]*\d+/i.test(e)){var t=String(e).toLowerCase().split("e"),n=t.pop(),r=Math.abs(n),i=n/r,a=t[0].split(".");if(-1===i)e="0."+new Array(r).join("0")+a.join("");else{var o=a[1];o&&(r-=o.length),e=a.join("")+new Array(r+1).join("0")}}return e}),D=o.isPrime=function(e){for(var t=Math.floor(Math.sqrt(e)),n=2;n<=t;n++)if(e%n==0)return!1;return!0},T=o.isFraction=function(e){return R(e)?T(e.multiplier.toDecimal()):e%1!=0},R=o.isSymbol=function(e){return e instanceof fe},L=o.isExpression=function(e){return e instanceof ce},I=o.separate=function(e,n){e=t.expand(e),n=n||{};var r=function(e,r){n[e]||(n[e]=new fe(0)),n[e]=t.add(n[e],r.clone())};return e.each(function(e){if(e.isConstant("all"))r("constants",e);else if(e.group===f)r(e.value,e);else if(e.group!==p||e.fname!==w&&""!==e.fname){if(e.group===d||e.group===p)throw new Error("Unable to separate. Term cannot be a function!");r(J(e).join(" "),e)}else I(e.args[0])}),n},F=(o.fillHoles=function(e,t){t=t||e.length;for(var n=0;n<t;n++){e[n]||(e[n]=new fe(0))}return e},o.isVector=function(e){return e instanceof xe}),q=o.isMatrix=function(e){return e instanceof je},U=o.isNumericSymbol=function(e){return e.group===c},z=(o.isVariableSymbol=function(e){return e.group===f&&e.multiplier.equals(1)&&e.power.equals(1)},o.isArray=function(e){return e instanceof Array}),B=o.isInt=function(e){return e%1==0},V=o.isNegative=function(e){return R(e)&&(e=e.multiplier),e.lessThan(0)},H=o.inBrackets=function(e){return"("+e+")"},G=(o.stringReplace=function(e,t,n,r){return e.substr(0,t)+r+e.substr(n,e.length)},o.customType=function(e){return void 0!==e&&e.custom},o.sameSign=function(e,t){return e<0==t<0},o.format=function(){var e=[].slice.call(arguments);return e.shift().replace(/{(\d+)}/g,function(t,n){var r=e[n];return"function"==typeof r?r():r})}),W=o.keys=Object.keys,X=o.firstObject=function(e,t){for(var n in e)break;return t?n:e[n]},Y=(o.compare=function(e,n,r){for(var i,a={},o=0;o<r.length;o++)a[r[o]]=new fe(Math.floor(5*Math.random())+1);return re("PARSE2NUMBER",function(){i=t.parse(e,a).equals(t.parse(n,a))}),i},o.arrayMax=function(e){return Math.max.apply(void 0,e)},o.arrayMin=function(e){return Math.min.apply(void 0,e)}),$=(o.arrayClone=function(e){for(var t=[],n=e.length,r=0;r<n;r++)t[r]=e[r].clone();return t},o.comboSort=function(e,t){for(var n=e.length,r=[],i=0;i<e.length;i++)r.push([e[i],t[i]]);r.sort(function(e,t){return e[0]-t[0]});var a=[],o=[];for(i=0;i<n;i++)a.push(r[i][0]),o.push(r[i][1]);return[a,o]},o.decompose_fn=function(e,n,r){var i,a,o,s;if(e.group===g){var u=t.expand(e.clone()).stripVar(n);i=t.subtract(e.clone(),u.clone()),s=u}else i=e.clone();return a=i.stripVar(n),o=t.divide(i.clone(),a.clone()),s=s||new fe(0),r?{a:a,x:o,ax:i,b:s}:[a,o,i,s]}),J=(o.round=function(e,t){return t=void 0===t?14:t,Math.round(e*Math.pow(10,t))/Math.pow(10,t)},o.variables=function(e,t,n){if(n=n||{c:[],add:function(e){-1===this.c.indexOf(e)&&isNaN(e)&&this.c.push(e)}},R(e)){var r=e.group,i=e.previousGroup;if(r===d&&J(e.power,t,n),r===g||r===m||i===g||i===m)for(var a in e.symbols)J(e.symbols[a],t,n);else if(r===f||i===f)"e"!==e.value&&"pi"!==e.value&&n.add(e.value);else if(r===h||i===h)J(X(e.symbols),t,n);else if(r===d)isNaN(e.value)||n.add(e.value),J(e.power,t,n);else if(r===p&&!t)for(var o=0;o<e.args.length;o++)J(e.args[o],t,n)}return n.c.sort()}),Q=(o.getU=function(e){for(var t="u",n=0,r=J(e);-1!==S.indexOf(t)||-1!==r.indexOf(t);)t="u"+n++;for(var i=0,a=S.length;i<=a;i++)if(!S[i]){S[i]=t;break}return t},o.clearU=function(e){var t=S.indexOf(e);-1!==t&&(S[t]=void 0)},o.each=function(e,t){if(z(e))for(var n=e.length,r=0;r<n;r++)t.call(e,r);else for(var i in e)e.hasOwnProperty(i)&&t.call(e,i)}),K=o.even=function(e){return e%2==0},Z=o.evenFraction=function(e){return 1/(e%1)%2==0},ee=o.arrayUnique=function(e){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];-1===n.indexOf(i)&&n.push(i)}return n},te=o.reserveNames=function(e){var t=function(e){-1===S.indexOf(e)&&S.push(e)};"string"==typeof e?t(e):Q(e,function(e){t(e)})},ne=o.remove=function(e,t){var n;return z(e)?n=e.splice(t,1)[0]:(n=e[t],delete e[t]),n},re=o.block=function(e,t,n,r){var i=s[e];s[e]=void 0===n||!!n;var a=t.call(r);return s[e]=i,a},ie=(o.arguments2Array=function(e){return[].slice.call(e)},o.getCoeffs=function(e,n){var r=[];e.each(function(e){if(e.contains(n))var i=e.stripVar(n),a=t.divide(e.clone(),i.clone()).power.toDecimal();else i=e,a=0;var o=r[a];r[a]=o?t.add(o,i):i},!0);for(var i=0;i<r.length;i++)r[i]||(r[i]=new fe(0));return r},o.generatePrimes=function(e){for(var t=a[a.length-1]||2;t<e;t++)D(t)&&a.push(t)}),ae=o.evaluate=function(e){return re("PARSE2NUMBER",function(){return t.parse(e)},!0)},oe=o.convertToVector=function(e){if(z(e)){for(var n=new xe([]),r=0;r<e.length;r++)n.elements.push(oe(e[r]));return n}return R(e)?e:t.parse(e)},se={csc:function(e){return 1/Math.sin(e)},sec:function(e){return 1/Math.cos(e)},cot:function(e){return 1/Math.tan(e)},erf:function(e){var t=1/(1+.5*Math.abs(e)),n=1-t*Math.exp(-e*e-1.26551223+t*(1.00002368+t*(.37409196+t*(.09678418+t*(t*(.27886807+t*(t*(1.48851587+t*(.17087277*t-.82215223))-1.13520398))-.18628806)))));return e>=0?n:-n},bigpow:function(e,t){e instanceof le||(e=le.create(e)),t instanceof le||(t=le.create(t));var n=new le(0);if(t.isInteger())n.num=e.num.pow(t.toString()),n.den=e.den.pow(t.toString());else{var r=le.create(Math.pow(e.num,t.num)),i=le.create(Math.pow(e.den,t.num));n.num=se.nthroot(r,t.den.toString()),n.den=se.nthroot(i,t.den)}return n},gamma:function(e){var t=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*se.gamma(1-e));e-=1;for(var n=t[0],r=1;r<9;r++)n+=t[r]/(e+r);var i=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,e+.5)*Math.exp(-i)*n},bigfactorial:function(e){for(var t=new le(1),n=2;n<=e;n++)t=t.multiply(new le(n));return t},bigLog:function(e){var t=["-253631954333118718762629409109262279926288908775918712466601196032/39970093576053625963957478139049824030906352922262642968060706375","0","24553090145869607172412918483124184864289170814122579923404694986469653261608528681589949629750677407356463601998534945057511664951799678336/35422621391945757431676178435630229283255250779216421054188228659061954317501699707236864189383591478024245495110561124597124995986978302375","369017335340917140706044240090243368728616279239227943871048759140274862131699550043150713059889196223917527172547/335894053932612728969975338549993764554481173661218585876475837409922537622385232776657791604345125227005476864000","24606853025626737903121303930100462245506322607985779603220820323211395607931699126390918477501325805513849611930008427268176602460462988972957593458726734897129954728102144/17750092415977639787139561330326170936321452137635322313122938207611787444311735251389066106937796085669460151963285086542745859461943369606018450213014148175716400146484375","399073568781976806715759409052286641738926636328983929439450824555613704676637191564699164303012247386095942144825603522401740680808466858044/247958349743620302021733249049411604982786755454514947379317600613433680222511897950658049325685140346169718465773927872179874971908848116625","1468102989495846944084741146947295378041808701256909016224309866143294556551407470861354311593351276612463858816796714569499021375899793849136855085849133702029337910502448189055357182595424959360/819363879309286303497217527375463120404739098260200279520788950777458900438307356738082930586032462601215802636320993648007907724899611296693997216938989854861043298494990214825163523387600982777","5896704855274661767824574093605344871722790278354431422729640950821239030785642943033153793245906863203822369276271050164634206965056233097479117980782641839669/3030306850569309344013726745100070601277982132543905537366562638553198167007159067544789592089960911065181606283478843359856123992707598685058297067179343872000","76631772943534985713873427262830314617912556928476573358548256872141516989538374761909611879922349479420014771499018155447198112155515453671128814488139633810493264352294560043912066253026059140653027326566801398784/36852092933388988649396042883218509607503204211148493545892849595498822817623842579026942621098851631842754395231561679671400197056377380063233740202370686144673585955581403046886083948450136247134308381940165804875","3159076083816399509754948610929467278257473888282947311280653574634802580912280940686954763313882823327077171624015737719617373932318151594325834524000275847475866299387913048/1437757485694188822758304467756419845842037623148461107362957994816554782989250555362514354661961482939226272309026092009962414616417412938087494467254146002233028411865234375","22266067259907364984531611601870291368272674573653403965630628996687370994139884833897773468149149664829922302484782423514167405397665098388400450149078982462318781750661005833037235183394221496186539779712428265837926417581952/9670030144664428565128962309657100138096047028794689249320859276197340398920725569428532293373676415359965773460364494998334259893079003125373872108770534788283842907318071170285038777091588292539102269617376180390982915567375","14604654564989239958569331443385369522850975185358647132770022716433280072271007767111036877803328768910274400515590151934676819262085211828028638417329558229123989556376108454497813055/6090614019162516693013973409650613208227889078878781039105047015752493519149314227721984436973374032279421344818329285207124280297611253861173835238379831004010748379874393292231671808","1901241885407696031217292877862925220917660047127261026827869027159993239567933534052663335498281439239753018507182016153657409777749792228538380379703411298411623469292891476969894084838876001545818141543890273256985768690847587711270930688/765116019778838839812655402103512685695769161212360553099732689795578904762091216998790589926057819838537805856579109910198553330075924857419395160755642371550113347465300208422126945265887065434116781678702741657275181694851670325469434625","139459806786604751793737926146840623607010208216289543036026206208962059593900745886202214788747453279179283344350478734275973878932538430194363355795823581315329311220701640235653288975569812161436/54371368534412517053056101353618694718215711767266376573138772968257303578467926450212293233332401067673270853953399269852376592855992724934941173346260129257754416412476202526978443681584633116375","1045669091124493070709683241190022970908640501171378776604126771144008324358233819560649021940145166254659028524319517244711645162132513416238958170819347361185944945680269442845829390112062101255500836072082817820950448463314034677353723256969344/396228259004446234921310936915931611736815598535963504660076315228798989932959459406702091180060429080345146735173591749448509810270759531977278642135591672189002006272326131885315743181289970885337574780897529347356567086535505950450897216796875","9912919238915437302006264477931031611447467070103973106567538528951878797932559935860738745374437522819124347510590800370471910492338584284092534264608801221235029062881964101996762011296996851893455828946521/3660537472668264151218961634689665210933936249986285290553357254224360417386515311493310199319523687171757653216994741150377508234317025158302057758196429623723072084157928224798322861732880034847243894784000","9263710175433181746575186369318246002919895649622127410824041370079225200282403368319370743363303164313395723904510539050157032684710468364067204876434546848634842333436957245275217583248805993142227630297924119330553308466662488683624783307023014909360640/3341177182697517248552428837661919299725031035849865632511882688786226888137634168024976033652753689210700218163621739078534353578510364301481093730054725078138658805025014615651043313990684347632166030359086885561104034510990826655289288319840595753002771","5116082230713622171832327542439052727465114322479570603905499496221224653983960598946033081212909066917137546065542953865612718836914393275681318667667521726785633638189373998191090501201427906618075889744489190209584/1805752553736060443820406101277706970767657006346276183748749630179442318063568286372320188433843729960294965366346522303898609655762491623098453269916163621089005711823488749297418113474056676109581110715068124438875","246569125619713282434448566970352231845414317018379160824176638351574938993535464763890962336882760882398479702237564384291290459961036068916857265499633061660562532011248501476114401629839742058389195725393702000011860799793778295606988057303225493814005789533570432/85307063020836305797178273029353623060860009152114361453434032434699636078115114412588719432277441055049132559782203988387794711585368296817222565434951256788867244687081233632650953850383220864394261763844194948389861147622944651546912394593164406926489862036343375","133672026303452911046163998480860917119290576658330909785707604886881155606725822685088929236266583416708668502760907677019598002175122453170574729028452721476464728566191464897928696630979863154661704374206171469014225143/45398130975270785045482567762871405072140548998125471025451666500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","6041693953360002800224091673336562508913199995987479264605216252220579740134601435770085920869376641180763419907442721705887169884230643795126568815123647603047739799302562095542459344811429882053086550900803768964612193941424128649976704727183797495759082741166938351872/2016766992122395667828553277997478570503475626107286343497917705446132017125079612756035254750822860815515899557855166824523851779156336235294914777307802256439645525835223691751931866188957324792276149549076500784191791380803500156776088683900346065830066370370083309875","705868391597244582764749229356331441978820024796066870551110486625729826111158236686696326058778874201639006234449557592353247542995871491078308187261304930042019640830629526023972693107193897009168955674240659026247094657679060/231848642748474339277532000336338632910990823562381469441716922006107433404523316252618490265927265734670539384485699132080062215196462178933963957679882342083893417545858074378754089719547920901917516016346211301054206383643383","101832160604157943093944673541651013907278188571533075311673249923948856034633446617630054761681006062910980371900782781226979391765818325065031889334563981235894369036439929651260587335544056975715076598739977065390678221999918899003881778449092038750712969437519295878491018112/32944277910571666002449086492515464541550138004002141571670657643770713783329063548790202120805341989608877739811787937782240802963962520261844114327432160788193314874913687387269408387417806176202979244637915812905426565263196954203487934225589622864145960079736633434831996625","10655703119271468913597640479490594180964700448340778168715956712130636958373270202484276402718566314881119559090842449610957974112230306343486091910217340665146602598568991520563987490686996746558858366002301982443029430290679385551/3398412687366638541233365137084722368200311117891192348532156645374786104142009695796409107380345795998400850838706661851176885183144928701608654514812261697598380070746520197171576610572921007069104300695592751543563472456384512000","1903039332876763837419920240543738799531131775028971323439870868730321221615515008394327723508670975623498588291298064320786970626232668956372004004897872810230178526101184611242511193415796638694370503100219710864543168952682617801833318493436174387568067811938490953495819438108686336/598806534367503338307287246320963280558134937382149405305466709787179429317914803617527827862441615350396864359976273212272586892074799651088317544101755361439294687323233086696182687664637422796995789967075271448560870681210580691574924544896656175563265378514188341796398162841796875","525573915563826130963525826191411949262846916750432019596028344808298471293378917508549164993368392834023782480702893643486699787870059946429810070222126260200026332874480239090370088123833491499400991181659445914352500247596757005142623368/163278727324937389095822405034435687776345799835442022795533783889356344755225815267819508608559076191292900367982490827396869405536484846115955581043091229202052407483776587687967125885665493681707461345895999542381476164157058393971431375","9263815657177858787273494705338516861045771674838057329170239610953039987023429736752079544014780707408666628475997291124805562998227296677616204140605356257712022384368492575381355563976330347792504605666631512343447560301417325154003481040250148561839861837778597346623630046623751094400/2843321709948499955095590862256744532227698001408929142548057792217790532624003190447363578048562448168721539177458065482170148482375585867230123873178100117094533143052886527452665480614620123764036974180917207421482431983407742154634391264619615289225747664532332469783301704643254076601","407959339726114455622180187758753007349209016396248763075759257357925636039752474207685682218422721827857994768023399625060206708378433960993946156803948655098667156937949174400873748557248801874735834957795040139401560494087476967548060208243867/123780218751812156744401121690996305978134694678934447237402511116731459214498784497436358160964198336874043702652746834763131444030185151143987331404604087778514863973633941401826334750268416015224906056576641018962863645043976537664227639296000","2547676391598917379516698439971914695230548782904479778605691338364453606537643088857116141939170899135026552016969320061900926954008522781162186995856580955090548471448276736878300717869625651893741316530109438876067419826217901657017506157997588944233677467357220316084583383623602865379325184/764562034757392298786420374672266498815021229519853724850874576419885380830752931701831256959159800764672605004880389358601658343203513177084389490286723240185146570925957286083025676875197029662038213216541352875570101363668917766225709569356861275434470568767077844675593176178611021135573625","186545352286463730559933346565311535598243666022232037054735807289501173444103692309735768703898330430135399033529355360391658728987379385732098960609744313878477967971557204207043802935782878745271859468248704012618254203101767841517569443555143252/55399179641621656233589820996143825959365789093262978988289445625153099592463372579496245442338653053662134699646413817866770218574795378644415019944304868289119443774932782235638737888469746745621382139263856603239588594078668393194675445556640625","664884440164786473344854955309049113269357314957985265728106924238588705533437169796551912202931185746193155801905841712503407258166135075966280435780812714252670362202091663287095423712596462690753468682634261029392794173636943978404002804413009590005984736612421172979101972556772005594499779860608/195485517776407145286424460448995460754674039560651791192647586550615878988380153730602665795647187884543361218962125172808792176382956599256188706636727418572541254480798303566840010217729386905041217793614214518363859058348249961790104618910877813067510758225302884815410347238200133693756493703875","2614957283934314904315471338485451166053664494383241929385424599389309215073267052860464009981063483440201193771607520572077231889699858482582363845275452280606276949653970992719332472370351170732899676316967244504534154616036371979031399425846100527685/761493664432749089312665480773496290658029971027686543404885407644062485746072719559288231362060149626237939029641098328278650939665665969011529293869562636656650999759724704272743235210867676873525147820749560155294022488994426729939894753293900972032","124843380518493746761140367283007507854364503961156704095198010255465940085534099747297600085903814014415830785663764373057896014399822131175202342399536439284123918855893825207202244831315575594886675813256448846863723093240955901916229136393454605455444105444987028391748121054399538064686074523506176/36022228212051654395480210378626648518430280334458144892889271272122662467638331091863215146548048144675657239846337165813938424387499358852301016926312083940212100001220180762189978024821166744964908871443681332664798940660421469519997746775275873085770018269706847741064037876137315001228315806659875","827992369063043155578730871896750570951766628472810506926098505028264552046829097082095665194000002802661600196840639204300804225352337632259980703832713031790922485730615305441309917696044954289187837653933158950774246017223571461858939407386087081525130831392/236805932823686534991153393869288530368011574665859226704279685567723830696754821658770176385138917722808377962346690757191122309876922069867472518117628639913077442806147910884267694879089753138429767401700283014143248445966474839193628309668702223994071394625","17347276886878323736540051321582548724378497839789943634071026331001588645519865992773157565595886250230140452154269197770615097377486013097979087647774513500701793885978192218455687078883766086309728287172567466406449372659680040183273634701092561727514713494914793425407149186041796935055187281744386432/4919325621804683623339606849970832094714371903709195539440424738973575902329797546592497378000858196173718145883783709223158260700365224756081275272021856393735663399552166737690038832550853145831185979094979556715294990257315369124065787473707136464772247917156232366320267601622617803514003753662109375","137984231830526866236186357461458917020538108058615632801298091031540729111527734872044790487396302545910108285921421417358113055522725197998483383380192391312304647004240060970929072498293210057120617332323445379424867965764749534125081131327565507524502163460761/38810445792642817561168950890315210470940006613819790543653745327778579787694809782601777514116858514049585074667085399925278459138508514838268321349069481334967221455722811414399738756151414906092225265355449011152267068726417045644222323488445626292574879744000","746567120547823334914136339633766098626636643449144032626270358619125402826113269699709721071135471625588981126637674402048519990010499180844665151971356149292818375448504122545400227696621572263621729512461528550588108384619064912224884465737417596190735966915167530332762203074440688676123756162572829692160/208334337057923929636884170505570363171441147899816815785150954417598643614152856767186132467069365605496210036171429712485182162940460120834349006784956522600679357307849981862006710239311750261522832996877712350330290831638640913932265004107623954913155144975252743257846945609734368518424172846119306643431","64649371728330695076928013661001819989330953381731372450140483779536126948957993261299287753791770622512248630224724990234903928056275080682537641377393210728546364176267034339221558641084730052304770498929958838997239635790469536857863963589118888238069738647239076/17903951498200212327802847425913723358452100686246224008745414214690047078122925247086521362329833307849817944645647750649290248110509395628305970523384831671737569872597295947593410067364379687588919135621621162007748635920864926867870502568935739725312687094047375","2454918942158003099688922026016393688092399295166304634317616773083386087532869193458590448918958337530406410803840837646465522656670050113548208618655070231274778592766244282964463702354872753657766121825196898916725498553882689210280080206627916046484942827487726300822318764058084323314109595329304407466188383616/674880185931325925966586583820010578979699141814417326552629206140252348822939845006845669570885271576698771404162512001549922909048916000017837898649100825976232784446638776021483802989797501705685620612986771521390439936066527738682396560462899753657942715306792783283782238662155922082005591512296007820682995125","74018558041066162916454010680594042518462756234254788158141115244349044958441521749277686851928706433556285971088455226217644009628399441967508838553345152310730562224910795446341601049647392069373970101491741830623078126344928804029524181578945586663110848142571149861/20204153620006780689923328634586091101021423979622170579036140596085566172775051595588438592742563923428900864000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","2127032036758045513335690185608563023954009095206088224487365541995326714285119384743928987635752931664240752323937321097955456543854943206092931247498833001499955456190701695430459583885125382086777607021670447795321669948733328973350279846928613949120929250312666393359442423066212311060931469017737106028339882830848/576612418511902928757340062840968526862381326698309578771238715462180282212422302261044980131594522407066369222998903808960617461164985318633518680304995784614308979881735537678182134128319596636920719106506829571072447362052319438091347699720147003209417806230149598345068078717948025207635448205253184540936478445125","35289653975561083576641954928762116897061274899517309102784750384002335187117263273488751066569234386120759866204372398611196356888479036949053282301027789530999737306501029700128744408015642211359442183943916106790666114870974212159410284751571905275610921784716184508440/9503006066880728386808143045924119024212377150217533250562188228062174064693375135306438120385877320162710918716613546077156389583384656340709638430674364232343609717735574035535102953482366914421205216675248471695111720986346092738728929878538430662191272737183832556131","102633551023964794485575491065909467125458972250222581133681080524371507544152979467328048718122409841060527545925136196267751819689935599599321090571687632103850847605493223603751038996548520557330016046032671961857623066292962260173840972332108111505971231021442896036760967107060309991355545554631003681544611731245475968/27459658121882266328752886605529964804078316737648012166874496015808620265471203512606463219297059547428855195782384236337998738233668399173746663289852416697917397644234441300570212555870401420579737973722145663287124151049692290432756231390864184491891697469874600345958989433125942336757049639797225309327019275689074625","10034393558388390065766795008210457368713365491566387292163814915435906649268119060550511145023450790393353937124495488860451123302412204483570913557762460385297770427946219119911920640306914453207097103853766023934602534502476962159682750262143380527529536498215384467975023/2667919902603322771586358077760621955455470781865624844984169443739075976572061827709528710108877015489050369589117491611045518221354793418884447632063538994046714401229510497599783726376490260140723032102883617341970952663947646017489439179953454964374887388652792446976000","248528145263843375390386172800048509380966183384567983242213959113927668429802237067505890436957693495616107089384741585283620097982859345081736730899912519273262934785992235852866637878831878448348444611412764161078458068549719800733237024285525816723480868704742804077255242682077291713092790250511567621735004237450946304/65676865669148624809340872151906045781446981664561196686217551358486802274698228825404698950974939545099727242259547145392352658637333562345477931951890984276718673618736565926663528625796412420753961231404680876558659735251469326707567479071881966875336951133475135427640218972722939427821842173216282390058040618896484375","7805448718805635696495809414501206964843262114470109146341305656318015059743127114324245035489577134938579856003956861881125856595981500593426840968087618241785931128978516340812066502964561231235073012672356530509663384739132686548934288703179479011016719045530855033205271548/2050525178024039744126592505352202216905491833360272553169520915020715464206141942151086176509423406413311520838568324134077402841030113427309725873344806030836314500267104070131451720947531994814710189000076651895520222646974590481497382830325485174899169093049299764813276375","3355325071293197839434119105039673324264765809771192815982246040415580387729382404624613875653005261578877047405365032178619450963731719777167015959920645055600439987161800547901539269321100559393048973255388860193948274255340335876890491746900991668165565729269698196233805991206691196045182214641935483083662356666996922240/876402579119117579582569839757462461050855174353108858954282915644790659429341853404829661899850841645529640454766173209897510988090318303454542547519850473808789222552969933222203420847859171250332350076509996295844203965564448154484566493395403967626596213792922784509892086361572955175655987334882030766001799867659814117","218871061991045868372866381545267589365410350294028138778572466235486397478028823720846191998825628156716190463263492304639890659254282445466806224943413446008645087186307985343574807361972238230520975439736199291019544576443791916302825193643774360055545186783819367378492631806297/56849560726416896431557940314760680962653658127458002233782028041537121216487790008085876994020812492987733987414743604239935223783349870516284048368761617736127892160849065895223288023531930411718807065209903593668117085505482007061969339237404945180379460053180570404846043136000","5008685108365226931582937964451700746853986170633433728409171904803795018146152804690759530990140552460596075588463394200510044617816085275660078502126507209302951286606953039953843685800941558212440519542602092919776366067720586295390886070120828199562643208637974347390938772070049344991272621102622931576339988103674070876518912/1293888539680354282541277646947380627241979967611883341823378331667976045287311988103163380651334828012840330710760757271860219584371109472132211215957402251594055009937397184768184517621978947384029376766290498101728971145633139541827544539988344772578184316843734267915665730981857376872622787627370859411909330227080697966353375","15388340113525711660227566446101909585796746979396093776960989868457211684028149502578116456785221720682202816140911944661051001675127262774824593420825587319436537346311831003212424497488485098543512314062112948777572038731823948224734505930748371522309451168088057190162878224801232/3954220582960831691377435160890656173654063611768428458807273708040518769541211737927975894584024448193835165167801976423275767590502552964407494549049777006346189436817215329891530811451811864579644894987864267389290848598289794977382504890216219362031324635609053075313568115234375","5099039333987561374222193551155323470675617979816941646196895589439391685938046865391119484510329634015275893520725135141878751153360264368353595348921951280561029028912953500944814771064409611917475818956659775131751121312316084465321917769679881052144364834485866477379437705913911371481828140817759401117780199246301705600020671104/1303503600297679371136943454060319958680553228879031326679449263682048703103464872914972900105569835004878963701599765030590097739639045890060548760692125546754294514068052902543220382104483822438283040090444827980927544440984823535260277595466339403795403200720622852069244768910603820007632395190204569927612348189089161551951106625","4902837141334073026145827027361937996261324349722726869116185158777439337041263482852376194988371853413467559557923410949898048139830183335197992754748294810838187068126867611615800383834975563313220497573778480109264178673389149671194149749735833378557143135481387904961537942569904075/1247045310545991266291285730016853118981099516935251861146038369985109288084420528171217942065832292739130145780833406014673689119563698528225048800794718789218267628507713621235056538202070171596177775095071513194885568843375526804796016261173388452184505503341132236719484809714335744","38114743522716832107917466438257616720476488812538316101658139632867788464381862291240727309611460187159930652186486096300862388591521625093237019662273764387591494074792574929490381910446287947994150655077877204446864004067956087975012773988833339521775463977233068498404144221045837190392670308437391686081418318624745039402145439223552/9647001083383999453668111809775451078976046488746916070976218645431946648087171586252172936600115032316383427265217993193444199863138429602138841976586190525451324093772097241349417938578878934577091671046050326087898259692917931230974174799815198493279413438192301437068820185757869608523761456160341754512329264442115351926967120404125","573695055225225727008803730767518906490704995929177617646275646884555707960986625481944101622708415415988844740028718027554452662358957933526173824325955904005404113684003841990198157072540659184995738719040024647370869010473254071681533880576462368600901824622431045529064651675640055917092/144509482511118816399089096021290587489594541280398871255876563615464628718527634679330291741479135415168539765887291789615790513527330600394937614433502341116068305347468133950204152174094704092402978083370792135432486240914953928188835819767755172666693219213868545854371103120604946200875","23876960329653589647925126180903391687666378233201794403339630995420215267415575142266707357255726330536094448314199602616026935251126469221925945960901748679919435908556550271504767784553484434363646489174587463466333864577705745452492395785557425904735048180164697040313528831173448025400634629163795223739061661461986923675833880378496/5986312408594306954013526197465608559068621248896320652512228238115589875514604632230098997609482248000888567135685167138762172475788060284232459813998201719590208742091697294562538265829954186149162974972471533202880368317237508987477069872431064075005305838801862900501819963793062041081601844759452202282545840716920793056488037109375","58168289917567723171226992383559866214094157894992327555495441698028867727845766488121900626912848698952863438654895252811583144479300382761129433911280049009362667380001406579175563745824368613319103673817094498117944856004415812877213722455299491145649879676787079744410765053845551958756701/14517067289347903655500020160671113450349743650636953726251191692074385521975132268313263723831804150872238173602847065423463131917373356798750100313145228608894881457107689499956903046984443545789053438946050974567665049237414588435796381674590098629779384355275820782532479708807512981504000","728621890568281859295409481422447012528302594365693410763821707074444799793690738137592101239862736313347273167450056625929591960610208335290882047413011571781161008296084630072829079783328937418641417642857196346026366370059522990813537731394823630207433267854616768658990289454635793326766697884798538576055949457122067828153655416688640/181030730759516991863708593747964787874073354051675597050399087612142539517308720603687322924426591889179726492403913356461908748733972707460063017057809060190437917851790767968877215795679844983288935075688219234885360839984681619084834228226744165610073685719017596630302462070188937998558312507638434329299017584329479516410907786681093","86855946923438322218622470067224691860808273886184997065663554841573982963995340977083049132518812923329423480393306918856650577072525633920456721265953575424233701929892019410099166322511413146891121248381648145391642571638857576890568882512129960291171866772665863159474602604647289052079991768/21485753507365901947528588896402264670781310878547726104482740647554738151100954835784115119035980523529677083504495839730499664052882400915208251594384038810917282207449860876251558307288700200910747338758723324686939379138206117634546981163355060740270734146780942696291669461182599512320099625","2158989152301022938148680102142188531448821359505188055264665167313418619665693092337665573150374231484840948447637297247277576415460889296724813940128955070240137590073233263168835678714131062764247434144994737610229909964847568491446606012581370840699582055341626266533733744293929658949697805855362114229666626620766245630122333733703618176/531794915405164005613733454597931482878479882704956110685223892325074211694837836221759995948610212818642789132749082430059593652854659130217225506942675608692701447738732031302987802196501895840510235161825501235133794449421919927396142470196961877376701957829921152848178076410141813926924749057304222282687697297216661687583257901415465125","139432548574396829074586704387656697097760057897628994548358619815052936481650396157428747411173567801047221928593253479330480454469358220685854351236980383914223693722868233819483137401339800304943891968050399345430243790898955416907228948287367356990263740207046902209563417267686591994743547621/34201151688775214071963206765436083445901621442002061707492082843232231754829227303539041286301398668437202547003300396162741375435703188500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","11008517174872833286150985180322584448162884832099344969609291070844193524816852920942383850580217443209402836100467940651581092350600329145627967515818684442171571156446321228596914355704205623857871497315955269266498229823278800717909321269179839084452384509142712677235552103459737790674103994445173074670347080506698168482564009465276165824768/2689223396936080856855299215659204161946704205931885125148201643087176556822542895325191478283706585400237901215485150928036895428721912118467760766508162631903585126377676412573187912443878232521444786090510891599171741773242011017926658231638022943018461086517502584854390836347781674626615709751386455292026775663545470794167629144456268750125","16108638074211260588800537540680707641986073914251424878121255234668558067988171568946079848860335948991834525552515669040163026131919804987340113244760738846884911038097907756220945883750502673899084880578229601870882631165510396775126850307838505063922101682333806284668762825609556049426829531780/3919363961344261777100658318137884299575193089462944554282218278496298610828757650104922583359642384253066896538203596057302203635134833545580869871333892935330950583664400555463557735723364497947986885146043017010159347046389604172186788902608216894094289769850517098027486468084407618748895626853","34420755849180279597302103726180110022640946692592540634353734157479505420320000324260530767186132260970572450489530034440214259559325114511265075416512316229177952140217732655405289808326341696986755141965043719344169685611217958619102774617224847284122901023774956887687026904767714958090256282893003000752947427857703259704682455375442735857024/8342030311716679826889917494957593165464748884572298173556257652389845294530325764837124998293398445804458613956489096007564811101361266196542129764287084823604897187311540561857741285793447174119667215803837719660675298308873496219385226998078648428368061868944322478384684509466965129972030932418920415308276430355882329457342937549162000252625","345888075261020004071220843714060353763382280664960929903544964118831237876694384053904571498830068831026644303797377762345709976595360421502594656308937649239978525713471393570536680412814805076323426256584504251728507416368609420882442293831684681071553766603478479006495757222912500012444787804577811/83505703731469734628961395063481893801938371516752417759131774530720075262459158384433785006689548434701904106312038822969658455364219435022841597243178757423598248565463985786213156556523685666430799283870548238467817226915680747412191245046634279766450629886904716776719219698922088211154187845632000","1061717830619177527082296723099890392273896386613997004874669053445943252046748251883532634529759169500795452576392700472771365240996842610207274128102329096619028487369622001737128463631016494371635687841733644339636164570819431573829173533941056258744442930643735587780907310433371453992062647737259587563398111688659657406089003293576961475848704/255359631537215747979895955806995352799574790340218399351168178555478073997876110889483456972687438702262017800167048243754141722496276537685853311434069991222324039005160057724073156957530106623908696241268268096879569794431919729620178375212905203484165745866913773304319069321426245521467122472046370356725530914587807274074293673038482666015625","274122944106300296738399632684955400761495830361663966466225652918683099779465438024846903286816813856490888796372134557295699980528187779624865098445756013563535339056233912394908544185885547842235097677765325396255649207317018754967666450708249125316192200151505568416495274671679500594656671785202496/65687592621976546250581560102201535533608158256953087745856906437400149205693427285162333502528793675585022025602144243543064185647792948495372442630333800126269123531636800213405254045262127593759539706750242430153456891792533267948231185296091297979933562727112487057234422009426868531651634706262125","7842680480716516803148821198697967237136721860017131244266974996267074742248599085253569637183007740566941125452215834642683053334607896723447140851344501084122965014242091312411884985569341166545074688756440728922408743841592658677792796881188604773469108807869960161395759837407978596679911066586626885830991556090978327508459276025943279064965688960/1872528612245648675720382138045071131304652050696842872529163720558126655075937845539792108048310219395746259570506175902206215101518698490144716531697689534559827422735649881381597761684154409796315455445459537515308174919488497154409643876490472215352056502193150125644288086294418253309947229151074464928874881827227706992859640236086417889990541889","5300824422251242070074569186825929119848111723012841627275830216301188228660779008353049603527567784119877706984722171178137272986345560485784907345500893648715341273841147320288851034078863843374665850852481747000237834238703248634174397792745914847774297223176674917912406659831206869442510948965571661/1261140476013707338477604677428573831791396352814802149994640617701773078174882455512668089072441176857892331468691160991310474734143842336092636848492066592397892638052212250229129355009939118431643425836944282456647571558383755315238500832868535816144280088644939696339160092963629012001958205063168000","2220223718762215584659309059880106334425515875615107369399767892051551634000614327272260081056973863669004224981561870246078120862256383581012183852291444462730018546753183156982897386563561418424093883164027305254176874653780425452987066512563140531367766900610414277825262239199580925879453806414860409441845631158680721091621460775043562065815179617536/526383206607841251253861841374779803798480623722760367843070466043030228662340154304405180907941079883976168609082254331465595267209149963786388600028701073430773581228212441424400748220833542964971495005714483235359479470452593264280645360131482713147116366500300066771223383007216182988263355451923333319170174755334598973202740108032097242475554128875","521891797109626296684891455959263713257353500867652268541535940159815152120871142196535233326890353914761242025931373491906127275561002910157909306979093246574207104081108188995072105948138299097848175016082947174156278439986705241571619793059501724269644447572323501261424770743329858038040685313621446524/123310256826873923765604825413207481739886340225713108649758575106598510022338480189649787216845041382860899099250547657534972156328080736149239332330143771138115695598493059325064119176038137294863053148618656356436332991079150723235214278848602671333076219529535123842212129829931654967367649078369140625","66086044538329677372986118727999622900471937619891337714357792768200341519193500393739322894033303245376225584865369486696276607060432449792893028061817203932068085863800494054274423512956136695211796751845295921015953538329385253280866669403169919614982155350899648626481405781514434761541281229159396787287553493046927448595964103589100429722948913403008/15562137339474350565671240515273666798063901504051979980452491653975250630723677279081058884163396938548780856293034775459223871281049026140999055923743471466471830572672766633086347312178711643724485955576579988182546105048041649947277672869613992334541438784737993706482731696809943027528882927942967419447250586964258807454003775693567366165507144866375","335377615394100148751647837967017467711612297170079949298328061159559939969228226474615711044891085626519877634842694983669611974807129333052471799687426665556738316626171408219730853872410792831871526174987402129691897433888027072807302411474690613948951673562473758814664346259109886876538510453475290967835/78715592752271462306588358880337347638000605031000575876214116610339827495261512281635361568951675037834544811575026718101166562072917855004822606752296233435017284127594847656529606648345533195437635894948829857913798336356647286032372695130461573940500785137424365840081503133157308796505622439791698116608","20090879701618729602554170716780970848925039917987945471322994867171660307998603515745066411687983450400412739285577269751603921163835619296822801840348319742203974023505186187060251544248644338412667631232247108675504629538319425769464277309915502144443973397371136256151336255138506001292355330875114245901820438821732843540725116728866301271466614762497024/4700223519410528857298732096729483544820841497820611795617923063440946097326817340637303431283005509904481323205480729806879570430868897342398783028649633951362398196137429076844504529051072393709154483678349272930361110568616112723747726853614661953537957117231900032044221535502745676310313569997665352252492568100075191900969170979460298189170486601502625","2904778979985524171206573028445379872240558084236464200857594814631031581387804621371822074061289363372523364167184697785570324832815972970658633551879143187709707164796663015180877412717910872234647704536817108676736661804878068078543241390828229923424191204586313620612539678930999769543756218765870513049986792/677408099044823641581658869221044375312077929976719183424865834811543737800956896926637625166844372424044003929341361734886232742770909683021563822987505236295727478159938135467975522336774471915167606673489722102077041330652185811196423400701795791669780695158730756241178262962515917389382302757366325768069625","31270155809329751863885224732454397292230969002004953832354065319735530624996254695453061851449600345977646455072512400760539747054003851289540339425848681804190284451253462663731135337775088379954403740058084949675460445909826322297817535400604180338201322667139062500269285493417563095365899631360901732684124930296643108551710704785906431324876072470231424/7269578038000504017073007978844992319987411732848567116655821196644382777088703228960020894756722675887473977480537577509061256138261063926845643360849217556370868752909531088361229374467207196928745673402380473721018157327193509586295879051411183657185176812738231456253321187419224704301236205478184115996135940848503487199394612616742961108684539794921875","432538822079707760382094121020421735679118830363764570640789368235407853152380328891350816400541189148550353337874309885334920995713154225799660601389784410911658967499100610376065640785585342035058364676314084595283850213942576431310823836792440218271879354669291052589804956435743500204185107215929849054782893113/100246574739326291035824954677502591279343311051719151327066341370995390423713403739043396503785261917771859220535505691760472395306543276314938287868734009582906895763073519374099272340577921671298878837400921045252035507925021904954445172372479744465666760762909731237634082051855588025732494461939980856983552000","1914333673689206389116942789116917579088664511118582610293383428712902211612554212779880638065888518488492298586641997844141510832940409501694726851666478650414191249534733087933879981733561565249818572204932715347752949087800778646065986244657260832234479202201129845117955957242616947361016603702640821256099895469088229339240402478576285854783063612307200/442333801076281757298117784528962837115323835962460661601905131618341609371649347131724700192551574625400701487125984359494804828935577124602622582550626336986871791407398609915208114339012374456785705161994343348351473385887949809051796407340988735853810174589261300681030826392672282630613354461927208579993042968520650313621522933214063366558703422757071","5704691626402072213006354545292364761246893919997531024861408248746241619817955824682639582830486790618668221530365426203424888737658778881721063941495350237419723855000515747725926735319471480027293210991869255971365522170749568996651406002311020883635577590045650037569906001924971041810547543163363976464780729932/1314240362076792592671773873754757443276256223533339004339330559325754574023619698171225777585408160438834449576526997055649849875516310105297894855264038450585295422343454458568152668980131977005808840141079502436391909349182185596381509091427752151860204235071122788499996991078935216686010888734471173124487937875","451219364084386208718456142329444023337343409261545444643031014769484085278440612677813682892926852469540118625738238137458321112005189595703619178533263706811689687213128887082197330137502064260105387500552856851972124172206996205919556553246133218441769325133725631665593372188755090094541462474970525820334385058333756591222492801647110594428922046641945259392/103648250172203340865458115839764297558925693061798169434516001775068769911768281084188883278842546791612199025413573394167639925287068809631958006622842716869211374513136766899877504136929177267362862319748507372147243911522667591375015611312165464514308451222180272935398828092646393830572838772085366567154646425598388620105539619174837489536378605144891769625","1591076564577634575701791393842535460875733974464805197283632670013516183281542903377750304419996681222758401497321278555686661981435637461350320471258386388843198706277657208526372100698700615835733712519332548607115875288787602084336341594576426630670911478276101702119972195558314357975365863803265163991961173/364433108410193393847203348728981296285742202617988970384277162225847256295865554341611171460436362780497179090329831885853324392923449579538286804729856000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","5307507148709435807261229345132535134848030343901300324623409721698217134932866488937772986386501538026693956121121771089740095760486362654754229904633476234090792827930433598453200536551779789049352131005222659995845427680686677324963223653949277037520711609343166926627713758990384011274777087968799793410506391884872456420041494598273703914689586637995139580794368/1212244290381524115082005575105703496583315188540177702780216570265159923654197746388568151706509243638302707511238539845531608313334248788980188054651601536067740709977678222790481348003085034888244447626347312094586389347535167903408519024105748523384932942441843118813819781347089702286481924493361058339731949844620763272778960860509570622673048786968660129650125","3046577098843580578619955603029073328361298436129791931304665777036152915858575282362742008136721284817899542475666054101957899858138590963789072530710775790433466847100422875906866496318804986202089528198912098377828580031852152997907433335176267300286466072997014023120087988748396598176622765923059385876855303940720/693911859077752895978833241338902695755528613729508555938416419864772385336777924892434701804078893822446727762077537955240605927550548046309823051841326355655848406646248595628715185413852040295631448250459076043816328082561248420925930431777502622148019371383254316636979070731427737764160145097293260938978413488819","155310926743873343426312607182060072939030765297630534544899230213054714482456829198485999782086944271490229412707980997432528653509945301574794242118433868747172279224118534460563400440670015323324602117517342201640016853927923976796453577048995243600967202462466681112804476672348206491490513419336308575442086511015101999847896197546900512764233674747415844045184/35278162986589659300679088538176070649273991865663041616088851923111175518405117391134863644540911005782372831496121355954470744169969774540892096320978686548284501139861783292226140413769665461494668479430833892857992401391262903582109993838728281915806394747833588629467613308837196269424421131934859079260185052081536487462257809987002198437182539441349474426375","46729591025621874782758519074451728476386657576036360734358719976400940301493939192083339293779149127132651616972817165172116269307276487158069293114860391502484125554406945249728802484128756924044633825692779783425628292959170597009935305429239702926898931975023598456207165067568919757902764815108751735753431153581849/10585868084079030838651390738371141142245086465033459640458366146849314274285871375459898014414833295804139979016362796357043372316321872357817727821559232353993714062535883074661734509440994664726425399880995133711038483607773782532430879196405793694658185175583691180757783597895616920432527125993118171361116684288000","3736372348124144720852190769710129461145889011598636925228657393934132828633132357232883470466940330848177425542748100211498184494252714616379450272611850068867816250209867530921278645286769418080018709947826876461419654782341309127709703626401211996255743831998918894661053669189312375159058718767082163156988766821194002596331826150321864927832618126580509732359424/844176851007504003627016945212023239308348428094023437269532743221937069345682900884618378849283002998220513307273333096775669556093005637615012750733216460458689282791632437851364674879152695438589692227159038555722539345972833161146108367329370564838671791241431125003401861887477969954740544092178721327724620450947646209914621007186497081420384347438812255859375","1258774755828991281578968023382624723772927642002016270484090409043454336040857926581316994594109169123354553321469500848146015719851609220423736153365139804086413284787598253618361769125996755159571523632747129480387254164008968993734442164892486441152227433281625391753702577143985047832519062595123255569172968685060844/283659859661671181526547833415653453506477950678651675193210969173130116121017723360258249430884213011988678011357458727603413521688184521573094783291496368005697481333739504490647194454695504722542014845706216224432373442438242355188461951883454664693262684873988061018976711201351382163527093784753398257094429403691625","84932063355292829988908961192574710493098897148701473172754949846455626381329456661808566365329266898990829247446356970454502007127269708487563279536825277374133681167235811080298134899629580318813382668399644553111080625918213250223197440426147821225593304993621451053135332451997633132772608233430131400186571793929377129211228689703376067763625568623535588709576320/19089978133324852910950469658566458037096027722326716800113107848115231563787455584278193954518442601810776347091253561956877155673550458955562102935555510392954425196165785410319126098393353878286400877305164869548380670204577544630353859009177051698096136470072137579698473017257397949994722015089768745013713383769765609613514021200888647472804720456494757423299627","802638881530832431828249604040579750916118423833791608589560402449036920165704012070349537114920882938466635598602387718300074733476150548724726460209016834416094317724261857969955414000155807312852092720310159572547644569797512233899495300028159721348599816083166712365215075728968005941610056018023633235372936903015771583/179951197386119079732438617407921535065140503043429174394605652913879982486051627760652197484142547447000508189455126493868229565647284332735552462525598465192073558793335913005459266977086104359621022691931002488052727597513413492393525660272900161375677499228252863529934576881596384036401784035248649026076581302370304000","25208742399375362881099811032135575360109715964024747212026245529087599633280142314962581193303683759605084995818253124445773115574470717199218828756449187055537877478033129862600982068782249943150019637186466260707552416433010545437321814115233841687700051830170191107127799355485920046505591193770164750886037885397478191534797655616745528343172318318678405576430544896/5637713398995569614196397857525646325234056219513202928587580534159596897880731043336790273040813044077153051260989730372846713618900145444802234629922717464041261370803598799826604841654608724727320798324006129524610666235998113655193642594744544226880944882342204407750193512869672849910003246504052298022468012594459974209940607450480609190841893267203392880360823875","732332637178584560220688900268566130246820235956768724845747830959547501950765063982943061181526237061809052444110437930100210105274824607344902764184151030827266142225894655531497849161692760385938786736436977268616029862577293984376170905024712952813234949508186306774257035535805330366742322777611063402455261391021097128/163377988152179636922409938163005948596822656868040662831003991395905185823836089887990201522673196719628247106777881741843786365701135555917263285268753605514812568258179391272113405920369587922702002732667842511108732068683407168090725712401954314293193572654347237716691784386690948494003094992876867763698101043701171875","22391374854299462107923583267570593886002658786775211597896252879708753450794332301142909715845151746786016535157797023153041007263258732991465037648536702217273897876864351559736449481285518249846264600935543582562018874574655740660800634883403597181876364712521253650744197321080655028374602772696770227741610874399454362583980465225235674816785988164157351243193265401728/4983275997188967758382167867656806681565521964135131710678447245984239733544941881418957694612909599261843693554043504855207170782744518943778096768859337980470219783210191765678908537645270392500777411134164918803949155037581108678968701961544979451081836872425574123683574475790997414488641534074873248802450108535183413970057319247033379016606809226547805269752123746375","21252344995592269775107236774689012760750850598567799560343535731251766780016530978663079386453430272698006977668063208502408607227544322945446079708000304179073184745623740466334127867464883762843346619853325415963062181018736410570113171387891518398846617197097407612852037905687899800932343156979591740310928257766081697645/4718515378484509142377558412184183991357747235892194234377932213613746008373918923611236346330189287336493794499188640380975364991548794341177060325509698404571318037298112293926833877103554546466055612498927474225619680186119313129604319096374924037870803554153458104225741255753314955115645304948564151765516183663634546688","76703085666560609319365659209445044957052359500745196718269665234646121134787807938680787341023203786904308047981099228357850016602203539979246579454229078497537148799349353250167621935384193502383187510928609818011142642954550330069991570983902841318203794113898871515702445720207144863877026526025447819537396146822201819435536435835285098485990260677737192230985069824/16989892821104122916312992616665764943723222199277412857053896319814438961475117951904867066845412639236790762432996309717924037467863024360211163971190006272168845197000304328480920483651558672879967350982199768255256753110375467976246339260326422891913564151453729285191351273342206198366624882195135056176502724912849575385576554208844814085228696838834665339811027625","40153831166521391225489894857551838468150576827129133168972859441122728710165233865309084872159583787083130713473702296122465319276461991457173085312407612757280915853584698420083436946976844240063731333638150599017886937783470942007376523947840104246927580254612991191040951001539641947153847776050138532219595746056076776809812/8873576113581065493273519627544307418139908640325227196912114520903505426722086265723900326735989771660987609604507503750212298754414472822477243293638486047313990878348820573874809636084574108909615044524663712495422565151340037564156235745628465172219286664653343193162657374410926171153516871765680561505768223660055617934625","200736374277835272485186523480177159453030082779872429648449412313247640312479214261681899286513818912991945046297334418102711629933437654377760028476767482162031641781499114859553677502002901248124750539270235098492377826240319766677856465093871367817683734079621359186477306173620331748496369122143019303740252461824523590096923561928354020960176605008889579578495073283712/44259440065125442964014453739391594153290923937737136823355312892557975399035370631521014554980129291582486968083228888083079118116286312583989433037097397252506140224404130371160608365777625538148303917306340620019882928744151294738308047800711028158277500317134537540772759486365658024194428796846364486187105343266398338060080611643110071184992193593643605709075927734375","488459049325494693259159444507437983381645757291858092983371672334043029615965882574409808932509285079401239403272414271652617474184321852388397021836909585659327974611273820676128650810907598106588433939541654215766888212287311943387232664417347883717203611092450971786083806323404432266197250919880225892099146722474124874256523/107455855466267410923480140898552598306699341366032095904938430084768624148829473848763761936703072253841751966906142283640379336131083461646777390874405323298406517250231389493084918065243079819898691146841695350589992171102939046740169198394671965069747042621265775948217054519855346617967866614303497258042439052681849864192000","8430374068596413768975326329313648683222744787097373111477788794692418932056901235174019333392845529821722488982447683794746518712070635063397464904489452840169472596494433874412726723065560358405027764015273789053064830528919091414531400589850704395887250756457780868677553068164933299802944396576360356896758745030955907258232257358056931680617626606715393885378887657377280/1850480358582748412767893656294669486390769246349349706200869446679212812264400876685764762211659843658541567071977813110496329850010288179702589501255367345935389050373021591572539260951149696801665953123597521983257852207280970577287472932167362521740230973547070264273850381896786822127290397075758780174083415923482640313277341120938690594859118603017930500014640169211239","58273615882491925540881784328370957720539797010816130007322211512070634295154626813477498607761260613353633996451797686143131893884559909668805628269959901044961666535533876340116728982072626875010391195372759135469446048394835148654407846242721443845351855234347422256700864370273092971804207514736924787577569355949601385705517152/12763172138328432984573837529764902730448666594097466544652830703737195804747682450548488162227364538052585484418491914323658215406327363805353540266048943197822838925184942600367647278764952826664684839953902567694832690683467635727409976388280092262839126779730168889686628630302519063225007497707028600865624133968363921915016625","2685278694947152969468407055109959900160804835228466214479525891103128459065131221736713585038130737099067040196326815283171857977706979990467444622550497565521863441617001097354649972660183038850033950647594754644997436624623325003537308428828750008305464174443210079059253920383411910911594636045517662796811001285984447671371943267419151220518726940455756833040934506414133888/586864816044968996825907488721678304211296267371936463272955488077666796280028127333229453342355554450708284934221461946991556216095213627059047984199091625921432110913096253352065238765240063555347292393427726758010888546427415276046238297382474708612526770055488323003698641493939145624184943388159614111350839555141202024991876221874110644879676602924730506882384603409121625","27700345710264347957758638741952394530538598225904772664391173119594616680996031886665218221392453628824570256438960349220263575741495285780845399187013582169907518462437966962923592601721119258663490655013419675469864809004562272799012227293974254329929404036071055528766397079743200179924243479370594973626764330855493789112414191/6040997839051213541001279276287478343874107660287651711609067205111574718442229224212245187655300348484144001298428958025052162253854676210451657425437588244676589965820312500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","80160269787574270953020489212619791839643207793889009503234879683494928396231769167082355143564723274576166638869430572977442020236299319718643894871736539109822173538266278165276591962215927816541165548699380129014840956895931285215480350321259054359835472320394089646764361802445068798451796525897304221529850133401768027469126408090577121172238802281079916258951770135485696/17444957084936455555074876721808241311651668802091828589911310253709517226715880722948267977560381436307152342821304525073651379763144281678911047276389231713860392794975453518107055568765009486973017341479560154792340888780337029481646046233967923289468141293699236815196553819373828280398488966665994092877680860643266914861837639322607761804740256920429518434353839878280875","2352816897072623416220002134476921108405735955266703519252095150412419264317091785317803024028565851487861978477208755211589867803009700996828082850796103789009194767813611798769297617674631277847910238088040257037678126316866517601388289837575778165301828137259948173292658462765645645868094197736382683775415645307647043205988394700/510973411316690313485681833991645423802776865720580280058344111363363091616558230182669376841383375321912553771027107891991318313938505988903735114191313214327683449514676737796942389784957658395806951715454372568523597420866050825822028817422805046287798054682484158011143949412956697442991898914560191411624040490122951328364833797","6403295584873165688372907494046202150046769667837790834896334486679541887567517050446119511695248926941383207478170182650927368177009669717288184903306689332746127845953193587519575304974203099873732502605739219028995266139383163062837007982999189114810534856227848568800302527760100163350814120545587074865568436789021082619398126713943637898657861949091545516403987546145915409024/1387794272010111535893205703999712437783041553900341112488641528986385462810448493444968969845352401058333929711237978223214186693177251566069419805757440174840170213159651962686467523533938145629444468366235554597245713128812532716616087753947246800626006504878203666972651384731498770435755225220796872155249202960801768048854869001310722927230237083418017482134588865244642658875","82993247683514419570466529457059660634483860665557779709153549045427987672829778520201315148149878525274005978368939092115193636113741972236218502664881450367443614971109677363668874484696543982239492409231870942414193419634675024621942196087473557914167832058111113476295926250739099284241826553737074679953551191767148712684157318697/17950946423927357725787689855263532224005643859095168852729513034456208872420513601894508438640531171097082516559962755244698695622824386001219435651555513795509616906355363573638916895074349491513539093024980575852693293474288638209680085037286354050958859425647536735341886663074581909148323105020337857959651624760873736590065664000","584891611376763781852144397260140844977346305541197362434227194779766612939978629636198589818106137319267243431810481928639442343946346034433828599323416877248326356345631611148749005937144684862502198147087702668524450709118588741606955966569427636630159793409544653944608958808602551061186799401212712216156799273254257486955348236914237644151956226336750212957092204830385441792/126256710861549838395499078249922986417488985866522660521294610280820007499099176190820291214370699289977888813109514854178180265382471972583921477022411657285850911270389720508719377071949050253246021921916685716353393018411683757067093259101151481189635423399611625009617884983318141463140199839724797412514785751549277231259345923662499623640886881048572831787168979644775390625","4743054867460856425399742072925732465660626340183690464743217147109403130730445842673866624947360862438925194786600531200056131309608642363389833474026007798643235346104937733349791667694862514383520689594596660275306247615314272223660862212527346572811422915223417783887717426641317921972456913534338708745549252254865615725859881457906376/1021840037832289788284691535543138164288462770384961802287250236519983887262771944174557087207566030730743075334169628971336358708580124427857321953981475719503574867471090607795242192417162791762511940848493176847925838738242153177311649130718886794249673254183907621449520415060660496225939963471753122766421338241291756892571824984344625","3784664074155769467702999785016514468281913375341134899878893061325465790589101335015569840325786070795267055386681356241209412947116340524588831510768864231937929260236754881829005065056310226407358204278658699999612596866156294195316867934035877283950841910726224355461522065773816109849107487214275801829843762482082803559183694631856772777313673086715631547326400170962722842240/813783281473223559981291694175087508812520505931454895884442580280342455516154674683217348039336712901850738745276445107477919518905155156380620466135946654952837573797479076027688866326359448543065305071605591497778941561986579230698384305536224430794233462949056326864499827444363206162251104552740175503996670997705423888382328014210171324376593090187604268086334796245552762333","1946671258536842642381655747294621776070051525209940130115769153666368932042152311477746728678182920842238801763565726086459485050237860693394471644023999467670017470376746609892484192072297938254898880354014176373253875722410186683852253828299669530022166361304397631667133689128358365296701757782382475692465977794960109690362462330857/417774039698408581013003883929127512062321623871486379101498968145670269174833505080260389860863417408848209525427705249526516766731427603641806256289098209429110794311660844125377702016056984573671024035213045475132134896835814746425864304907974005950155657789157496389234919107772201305672421982198984613601511388413381215220924416000","328578487723377153600821813410631465225159589727320893988991729306688663770697528156625398176929288628930496338036815910669579019719633124832162035588583242320537435554101841406566009219059042888412893352417446437227440076869427577701706713564212185163005644118869496869980925214424591264870388237079776503547314587137721633918824664946974571838634860386893404364499977966899068777016064/70382695927096628347637455030970644630942872888311870124896575877585692281624151103204551947776906510366521972834357031777287506848887607457751667816514216907338309372900327919413372044625602555866294337672022362865161523684052940126509854895320132828009551012639156341878073682501185688461720664801829933689280752623773789373199210473995823367199793407048741191786377993390965297664875","2617201476921368517857942326432090876874414269689140439151907982631768946799200744678055980827789859579196832718849393046147656447672531861353456343821196812881882023188898815179947651274131166835133965629115749368441605680383605331300030886676081418867305170012032824011912531673468215561506423833911621270680104083533917562622600478548/559567121085534865189976875600841717161617153776904752351231210970240323460800785728739412474960421770806162360125774000625035522428160837855944215417821324758873127567654244465281354654299068546570789547691342609793050301258532586131013585959164719533123826201937801986942606844854123769532447570107525081084531848318874835968017578125","636225736038986537559880265988431731529837451289737542395494683393492040808565905376235074534207026537145408562785279823547657299565440309510931336394031904920056464959974743525662459433889398003683078967642651812081450227654478095420306880762753401111260630654049389197602389949892636943971690212484981672010398108426002137114819838399222096538921225458913266993881960732663394566024064/135776510176793971074115131648637508758953050390591773574951317807919051619690313331192027871176160424663811116849856489187562728496099757910540362703888937768555824513740118941387831822900198029266206334350448626733139136083404404120210893986654422850183837974770675600952078956326317698998103770833069712616832650406225828969036781514645731022616236082175582937900731419575337473384125","266695771933124633677367149389643417608461366874310588884377151539325854547826373711099517873721616543570605935954334944030816383858485296542260152894035979141266909050267414072982042090341712035518685997484257326212454742816979806460287972757626105526907510197321350895873473656215941034605746494172316089636216915825022339855304925515685/56811706665210352283362623728191218698295056176625217939528332247537278605113496147630185544004654583441448319260578659922931798845493756189402805173037491645434052737405379674607517658118427614090338938517963215812444779184193933749520313676564187507594274551791388039139409235056119788261689087831209441779870873305232021728002651979776","3511806683161697708497547617957719390189982761002154386881580160856792742952365159764830433511949678304281539875366378131195670004345568047690216126001067194904446295336734931691743477531830892015690816210752795806120303198745685394015161323982229908105397857791180342330098240702332072396030780386362735967021055250450666535422528637737695053315137238368787607412459874094164027214953984/746741569878639983491390741637813989978804202898438708743258000150996080386381281307609038830698579358879333079215327202911977568726258527646560497079622703052765164031089590965199628534477381843079892123440214378949632707668935001371616475282883095939750704292616758568964786737752325652839226013335092148777788733453702438432279149298482004122593243860829060557386699231448957232420125","499543951252504651717279461487337168721376180441322735807713499521878076780205427598086756686061009718016175215146305489885835839673419698751530207404115002383180054704927695269921072232395828258826213554806570423602966743337801741633869267620843626804016742412046844770601322513184123515405692795346790813502805238635003099976693786012816/106032986203682550514602969462803214831559442358811656484036951559991322084935692953211120289352600484987931812632505499612220494311324679562152078883141464406938524087376964935494245010636163705698220308243980789514815579319533341929989455211613890905485981353837321342730307819060825125980500975023479813757024395422041501208805339176375","8540849722242122835873311629952985285477986765819584558233324868363310302206006773828897816547299245727087876984857726652932481899766510637403577175623031467933486823994040576431755172220921921877192006685053572215922347418846423419683723609799729359551828522978186208983138345476801247634773975311405913274552616037005854836040162212761099347518242200807692224460514057530656658616850816/1809694575992816440924165741094996511361288430727981159314194000585536832192004274726651828760263522962868944612215633976203596150606503849595633388319338251977160257979846235995654357082321611719654136058257458753105122024859078420173515189641515736029725847315662215778251370398007468665986604529263071981040014321717598469319370651877296085250322599247141397427185438573360443115234375","51377057693118720457387330519321684810411289582445982078756989158447711080414032055843805733348558621949380554029375294451303430269197115810494758213980833379214402452992657502777067850631862453239349835215260705131864911194740832694498014048717871429797341104227759557199716944554347879767916801106279081864127192611546757627038037780244683/10867246748205139797826516105458406878398263495890048637741584969144406206902037615496936724683237700974333817527350121106320991054058406504571347680049945745432432384570515723033245430148177097144850158758462968940525568041926860856763884474605057056550146491001458649244094211354153171337463406192651150028767064600270112838159624568832000","2517199821548153657910904242290029026229621935918771922146425373057248090467388430999870036608278542449661971830076845113363443421757278612394167195431759807908413353743377586893872930828548256216510734912027450642648789925142482023713336937258932978503310551945630359646777080073329099268529064437120002567758664419443374110941824106727218341795100740316967386497091058915066147604481280/531524260324016969370728057738851340792702640911631807178654723224511108065633433027773388768889035083734041289308124943130099580765995149865288328550751289346866467755881013217287175392101334538392596956248952430438673292186779006015549928829953979591250274457658042926539541422697852390294886719770034058916886894408015624288115732154492554105512936468520265305162358665491880968652687","937159485027553069020805864547349554547661693803137696125140510201297417077233061462068930061915381468160677500445535971818609631674361074587732183297775728389124966713749450996643183965795829780345678634356741756033039293590264355732129789110416943789326482663579413229893878422643110852069225671783017610387570935863228248464396615988222968188/197552642195166614912991396771845374656891854357948006221100585931656016640982345159207601253599235265353060942313995345483862152489766993442419668492877390774016299878943454249209917002169480134131612530977452579520564400124908392339263545911443803619972765231094502745980083350567509014991735227390978850048088378721210219321877150756855372125","5119346675109082499980756672052066247676641510661024682574296075659671743397880591881419516307292610449161239233139088348510165442597278965718490070997173182184417648987611422446347235659085092530927312760229499083348217392125906851921500360553758600756698605047197529446594606336369425040236883171542367713951500007600355406492128741649090501989105696576697387613035366083536629358444229248/1077349190930018641197987339365056771667455373500846354778079878558146320193384166982231171317419356136237346389570422332278447217033773023556383420372685049620361481309067017697564760747047839930422553324681218253359586320952896352245366885171583221864112040038531116947187482413031483309534553461613717398523132176948321964066833901215878133594739833910960843185464241840039390204295097875","58469980853327028628854378052548435225264353747414624620847476036979290604604988637469977624105451959796142112200285366199247075503424204044884512269071061176877225315884188402954249683107639777479663275428465242905314418930053869461904934138752031124685541853599407727446896558064252696813370692668496452783003306386669962110734257851955001481/12284458784412533668960387046583440199646081362484321078872891438551639470826582933879934711861551014258493898870867541349962531447724393381011633785884743889445407749238183080941846528000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","632694338036291086868292541736272151517212971647680989553388199374739841494700315711180961760384484042159533979873604395621016272772109619401112452105475906812313548587880899058905419220497456502543971131226430775692744506047039958551641270070996110661036371362526401525207493270590999387476275629412687473362310414634469788979236895300129227082421021999210841384596617452097273320509348159488/132710874087075221626157136110978536488168313127228703025408943153782802265472978945703742152954881438058373686972477195846162708986982742647038014147903817539418442869011995988024638278746664230046452545499722614320284478925059527086663455478374200352375121910000967044366831275681254530914306064535110528723482282501358749001657608122307686482720926189537227492041135055090784059994118192625","2022422468242151190347511883185841333968390991430363660248687284021524206079162212007263606819387821055183192871951076644707111802972354128011904720586729919826758651167984507804867954970064938022106484656560866447290934136610214175516487579122328055482392137619829739560923807880779865442016530712986750711199998190148885726144596663143651240/423528009127070458603837580844559347493775236970253513203186912091140251858605354218715508091394564000304400858761758838182654201653901408046974668599216804223721114331085507752600832390227068985693006017591304916519540245902645712532993889000048992026931475754508248265356181099817467608863068068953756055334213584649136541490530849577363647","150542201776735231618709653388506394887777837646651406023174643241783006776019388336318216053045300417086929061565868663031237502137150880313922488106751241006715449458736723129545400133450376339156062387859536289694727635468338235084533552501618659272047966040838509286942825414463511175531001410923014751124732748099355476332649458471135027773371541572374016038525336728276024676601778299264/31475618522527975728853391146702172347290819252268551219771201846701658848754300838383637247014705706066050673096278897933831272607774110183488615338021656923433335661890414740664480671162459271850877855521869741833030384682549648626038314686632195158507693321505500888988183270276134667071014075017317692121986144742473139078857816578133693776368882596780120407949076129685719314703426278875","162664351499283182546788129866259011542529017155637405328005084357078048074065548349602626724265307733005745244338982661090506394708170105916177679714664432754153795772811389612700051002336719842784098507498286260450939289109123759859710248621544296008356071415713931721102824434964336667980062728653562369697289761913925215639430496443820411811651/33956433298509232632327667206936379248172049619640091186698677954874297837764235300806836350019565970550533206216590639008637925266405524715041372407701947953283803854153876844320283735281209725651036513491246238622967031979233265136280687995181375582844780830517825595245506321879177965868747546127685256867456319112247572348416655367667187712000","27228583713734183629451808889147559240254570554044667607519238865891084165382075658707675405673276615039702916443152954157535195508033284355580742761569101934821088036084480297442018005972653124248838420021440899368869744141698556359295489470499243402799483082406238128875386939389123336303631993557844565927960009744780823166462314116039469622216263221278402673028225214534859076857413557466368/5675134787340359276387085910732530678163604187009567576895331134521132071092293139167824957253050637085885426100206370974479279292804959049999647539684766632278449357893560561608633329561385765035738071726214510832066885156767060324427330401967034889966727638276371320401053302413136551142103678412692111973028587922399670456670380189570979581674699102934733563330382821732200682163238525390625","1340937726818688387636018677960518622106989311577445614347061615417831160296369500704524022869612973331444242000788110133157689786976834913297544087249593601420972111789552905846168933014570399562460789075871112224533723259660967481288525220689577290386781169316008987012566216235876842757183233207943071523447855623001920854571597886491163165150556/279054368814522483241446594911968519760869180429079780837994812436395792594449929617293503975169489945136244602350941695478861584261665582123038340824700224583170270427163469762789603657025958695551448477050958557681299495041994050951692916032501884523150972841782658389836059236040091605838583126400660344344601879969354053137568588338096589095875","8910951660339249479517731530773509037034977353457185453617569046885132434552771722727442649095007828468878374139001808825741829728375370140505088133244952288239619141544661695065318568074863317054989982620944602245967155400712702259180443238473885690297281525960618905625084639870407113029712510345262279507055197024677292523214467306898573956604928730377318210588837126450942086527893437954864000/1851573255256476362977604759655284263358595254392797078730401113550522214182030016660458780180636930591149034499142464357511158868625309442843792189394292787657774627425816694628839987456477799348874853555586931850788645677998004186437300173080088839930384424797706381282430208961565555953254145002318893188197561315855286173276564036402546798318351229978103276843822345004757661005876638005274037","84997663352987536417038496128111159210386455419431137931308301989414462311135708114322046234708053448098538629166672456703651524480738219822858469100454933583774404032968304328859365484249897913676382909050450855222567147661842184538302991526635974158862033287154321908483007506326807469239745851379559259262425675035790574846229470041596801343087041/17634687575122715507915388096857069366146981156897230620371714518707518105157483283253374797127075689236298114335734874553183291806268149747826050838089931351158483980735336772879045027213982661634865556129548356487722537193914986994283729746578044621115589195066212043187229606921062007047940293972381121200723292297716621231320254309060321476608000","1648849257486312935416274009474520589799750757877252390543329851029437452988499485179026845292068377957697884739052491455807688429630524210823560524122596610276957537756142278585091315141096146341773982302888007751632401090642472506538817998043326415693840862261701364114923327286462650797963969289743571514890723145251583881752876340628073395708716735192690808352188867334842743895738955762067968/341580411902962140529547622267381834425264893226447658723654120920549166416114849731588552578626041597847002946105459812230979900480135423787717825697955152193526724029890829615845314765605770060975538542976523177976182401820926854406945392167140347444433885786340415437006775075196031433365827874254477351374236932624514469241634422312990555534789607377023339236417434574755566856489013828206625","4899626659231633406569362199187192352933567344960498139854460545644210119722856870634652562532083546344965166340063297647520613455037240144734014575196764021102614748218834054157165781057405100578668000290493431869797883155764963238760612333048336953434663867580862692267574574465371615023999531030446250351305046572267686566999209229202587258144318592/1013522377571209303732207048597964555261512342860326827024786500686692475697570284120359840724596444209277948648863014479460188496587721578075151793081823795161404110811480269106846359964436993190293615381593756076515012514100289406862487971220020752628653845345780766244842386136740768474703009091552043945843632199999007070800871588289737701416015625","362903847358088423032098939589019598036593525722040887883164115981767777873860799955715587436566233010543937498922435963385091400670303956612881974450548904906949032005878241638546734597308786514086678561900713741746905742866635779432216761799371793260025549698865319760786921444505323758235164807966277024031605673481480590193724980659448692487108892154809490199414370023696404259691299614147712/74959603173756091922435708504751461448318819548943586676159545028063979695880930926805574951275602951047845904770828900645717477098988124553474616764040938121171776556999069351772286262529729056288451037717198273521810585868307402693261479298923209587143468206907278220909447483738730657438961435587752873879244136801168836767273934997417156543866722171766794171623224855358640156858606843576125","8521348154958613550574095745596657249924328336262127244827955886474742319277424381360677655239017583606851483318951440691757875270001283229585075137091617073509041644097526047127618954293881264113694362598157456878784814696577083997902588926421675843291157049153701100218784481406086810264243143337016042301806376864424632290226377881206765051896745/1757584673254145109614914862134217345456065873908262753169404848658913774363650863904627183104777337461445063704655164325930891269843669860409763569362863600932267319335889540453302785099532688264425988677082044905948179153286276609910158854349711054144968131934713419772852663860893241364433872853338630216232313607969790083448433666334742108176384","1802461420562646993856730082999823508145602238125054717836501201545920604020389361370931345491160549787411668288359013059160331370751496329806488246135100776263777863399096485894306306621852596694700845918608199329091852956315870664531614358379176680326508877329862713333336188556181470928613423972314983964578645688876556351433429494008513812136152576866650152623510296911708111085518974142728903424/371238439252064016214448115231139360835481920731625321084601566992497057371416121407293286027832357816257507287295719261141426130159269433199862002841433235955835172774430690352481806933860390015899973299268361513643524088242973968537595085600335021120523852420135081643310663869327371821064862449426404044951571585406092523478861879148545678639697679215289523234342337347529225543852787599016265125","88795280670112240977945082069219541902481768504536167808816453021962616596410396813316064685579412429940019071114917828928080181638058444302439626425155946562362550070187433083541414569447612195370911498321149367969974762244140788494955146280201020345849385865084095189982291190135293114489407801749533448443222584092575861096946605418438181411489276/18262596223069549313969288693970246663726147886364354584825624311486557881239003216971630599389642752648815377795018130449384513824927138566203714891090017787258920529990523519479383032564209629983810866231367438270859421572641494420831435563580050954867101292568399107965982704216434467243223964964535464624988344342084084237484262612100980519602625","752911409358158070688133336918078236438086521781731735123294741731669530734909563155732092406099003582749182967246236657021875488130304108082404134004381196925042617909108654109138702993903561036987511410396567636331465803949049946947888490287210013788802287247422993384874670368649616782837096233384279817294778916419067404863458318451722971117669642134894906235066332205740872938406767767019265664/154635332883086377656813458754577288834216641577439356891585125701020579768315520324293435008561626926046988056302745604248220408154454267643222328696606367409715369481567213640103076112146615938180089303294709009813772509602954514391675152597458428326644988225555987883250642389550531163153338541870029415077982539614784206119074702022117790679351778993541426110436276530890609137713909149169921875","15286089077439918584953144558775765002061832952090847117286473868694909713791678395221438112006475047633028543501632631679316850512797978594476229228325228403849089079675681042224057234415951253954044235099139983386056610384489202589484570852048157272551098909455253037561994944665563291526597323199530997923272894119350512727802414680772513760081360291/3135161418037836259442831302977219750614726139657718770206960776514822107155928800694375522572523712277389679035632531727155957120566617736817225541673148354829212969778664144907503411589126111888917929495106029890532891919001138770210977012708107496187227751496980000137223047079127096028939624830654227758737339725345681745847598157538483308068864000","17723482381737693269787076798246423310802126092500438681864673375704464394105734049099094818738115345706100191580982712146882034618103161268453808819471603805345990162762722549964406042295355916458624836894291267553138041035528315839108252422478610879301656207772491548742981990469454529537049123948604931661837539943536878260665617524824604291547373872716194154198824107266275716083848262625068958720/3630091565725887087605600771358216927099748013831912080380983545872077197366172619225751217619097657405660172801849926220948413919823038425519006413005998509677472226729295278652284861834178791332630676772284971762683579047508016687969040658592436230062049051143001484384767836353233324570686249824980508520186643477313941054900197268584495128610811273834192099099592687485176400539748616360799518357","39160514032490258389003214587901781721548011632821053230881239001436341012396166857515197251499460842954863342641015306304854226194551189224721257664420778416733889030680295206179109679627522113592373938602737416822981698362363553492610842201005420727750505681358595340127099855823746410663750133019743170700888375554918213182862789028531284364877435896/8009919337434786244380818390213546866794958389603666737562053423775386173149395943310276429895991903753441584557917565343673605019989336264748588735390182130334278887642569515202100870042209261561001627386525182096090194076839370589780431326097965428311786635366819094633651297179987340498215947144870164066409654464551017761658775207392803825996394875","18188388167811476762477659006849121912679763597132233588170406666718758511478154418948855160838212151370453213943784067796172102916618102024199200086478021533171984254799008541948973652219533819511807681148179806051835318645591102296256347927018942348574774821478499092054497390790734798143983945096982240517058861467440217558586822663985584775920517755909444876443211404222400335500608733284461685888/3715278241795087610941547133490827711133909145414878217965273061493740719983191775105550559905283733134189195190321643965858771461560130864714477448011225816210219450040558581571206711791272284197614810026220745160693898421068168630870850392739817340370146186703867097982858560347971281142766235850971837330222970900661653800041795020382847588362774677568059355238174402415384788280852059532958121625","46353430636874284402376008361176880938798775506236714098123916668545331718677407145199311191108199195405139575147933283523305343027297808443653460575141799729554209181454676876263582758919969948546918471128299522715691694855904535448703118221685887195383025133924852224568922999317583667985459047407473419196367812949579858081181660610155317911318937349/9455890179897829052705408931064120820559254220394152447502395298827357144081378513080398823188243663943177539817982481713456798757563952162598464929784370305696420245648035222083207596797327498500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","13607414211126412689435920170832779523235279308039712294681570127241403406455725064605210473923965685858012114332021572088551127762628892611459785625407107300355287623761046438724706918300976102581928643740596336865698485838431972050267114940079353996100620311097561405192365496385584164725035842307146351211183443267583872067352881387294766804298681841402861626441205037637282007810811602289501477350144/2772205947240095684743358245950494400934136973845543049938212403703005150954425087866758842625041409060217562878157900197951382737615822655863548356735553650755342108183641353142157728364469706919993519071329069805875834057743793434164720370026073143626055293058601124362130539040404491770346043977106988100969901297669523170508321703496903672333781306743488573086901583022550356345156457496396749797875","23264350093315690507131500726914401771633259602904894387312742275462601574788485574913195967854009886824436237740789910851843045306673524324611130536719802717912615609109285261163220007241492964833933975789257681755002054890453747803418465119567389315754801791950553304034666399677630030683759466627797123971742061866928213780452325847848901682792886840980/4733430508316851445525799359992627142007028326865116523033957869609125212251136452396410236930025876982265915963089597825393317909648054808274488356887197933393799241941120691826916741647173843634076299630884655997401370400734954098249519111198509015387869462198674657171808841005212058822254513429836457539629035675822719720295352508916898476137111981397","538960934807826161927564251064896730663918579817797131801326848839524373936888402762331254883505157846659830555799909822861853145306547699817986010353774500545305596630924815657016569444824389893996399550343022444937690798126189162954188680257730893424775303801562327757655350002001080811866451425665301674688928515041429654624970707803336800125648742168380676815769457467038849213225206824671025803392/109517448833211208909213522579666376007937648875042608355810687327424621469323788799169718267715808580775296460944943658428295481347915131091297305260674731651980547668762317138753250458639043477453950774629862540017034566407286963562574188172753764978963685535201028286359818524519980885827473904574840285411260037264057197155527809916623487144493019982419606308144576939532055057697567269576800542875","24451481554350251656598350124163983489544445991992661049829014268366250968046589127810466483349378560701491445658725080497078590986743512397927747885285095846398852574219367580068049729894667374214861939897557930527646930793431512683750733092448862551580494245486308114129295467976874843852138144539250235632985676953662288536669286915983261820949386845806781/4962240683851186225340479316959605207278948397833849899236383273145853045488131674290332609876751222112917095096150531825255611911377071887145019702433883343849119017643117746273523770961304609989779231048095665388209125939879595509516490230961558353074751312876252070889983946768175488341370453053495319823381943793679003096504200440997908071027962806272000","166591964685609920525429719961758335887941461052357297159523350448241484106515158310298216150030768812873781356326923214637847449893575074813991141092681107583183275003570804134461187213143832123628701876041315736048451374824101256980832991214945762266748755723551899001458245164317581617731332466039757786839492869211248064662857987111284518155462148044812626055842061283907063784492325693994911811072/33765943466859756347231737285768516240749714264564410814839966011490233598006227246396923594069488496368994857718734549787000213944990695920130591750377483911116845697231074543526982580529937081378303555262933800375576494067959129682770065443667091668104132884375840812635624862495548888467575848428463895756394050252457592540570490061561616914443009224917652440212112452400106121785938739776611328125","142464729519206642943985715465196065680101634264787375740459792619754842396453535646509170066091478069799080172299369994438836484938378991283020978342879057271045033903518255546705211647900945143546293360496661466657600494787228476009216508124736254967761901224547269496682078470378676865981855568197705507111970901389105723589666709580851611656838285777566736/28839643075889294346635430272525349651555039807615358795334663734940126053968249608601725991946342449660829847322517564370606746964714098508298705743689729306507554363954348780144675937510900983622836770223945538844314468550644543502501484521561567788992156632892028591678742014134130878101553633195551605796158103033794695984958987367799607407626319024034625","380457154857422076784416625436182734840012277442496600178664323821064977485271288502806124740204295811759917468598315932331219906040253463960961995849761235911145436552991677050565022181516596464968316292789048809559129516930574340710998611088996508613850407294743457197519091160170604426002924022923388338999324182261954685794522778833029950214443271526469607532589775916381786492089432407550224137344640/76922142291839859196033215395526448408989799722090330866256930898223012427332209054699494033511478050536463051459450844520020426942553107946282832072826069342120835351421637970462054707566481086202287686453371483126873188020538661871147778312986131920021929455276187425940666580158173676284545586944833678819622895550345083175685846944633982680908505900099388037050135210936852210263717185637166725605577","79999800708369666670693340813609265988600461251844239982904928629083975986385235816587497657678297663151298709076884516168798694292862559083730259839524968813932151813233366175091317046758260934357096757322369138747731224414176608247605314668045838769433811781490030635374856042786947109101585097035794969502111354126773165391577217071956928171336060247633607/16154850265413610119312596299635391433380319311682208755390341659152160578366244774029302281068833963848811596545791104919556346810193385001196395489740571188884873246131813864782581356887110499639544662322008824704830818136660544673293865921754569356583698951612797219776290835161780326945625621758204931298948625885081325268123344406261740843197232316416000","26517014004241498798848003208133111307300592620947908933072661812816683085261359696887064436611747292468717739609776825664344064024535028242737616786238200200498291226984541942836459188328346609549239724653950302145388877472274074665166631509490297630344351573245265440164082334092997307729007429218385933622623935704482371360985836659823269511115937443161532987660855490906546130131716829909388620539153152/5348257529530073524280989257577050878033239486885664777340947102417077875628238501791711336803418503616042922880218860266611595594400020206192599559925169589023339295256084579966533260861249529670141854632965231468533448709363477120437277477668173149958267956654411822360053335695956270719680086524322530514249891157439878407417971839744392044064720476417844056346174795601710447583861127956455406902139625","71197348290771978405602732839537012310626009318133570890482364371056186523989330157966045289127980687764218363064941391483781008265266963537623770685390148810455244349859354857421474277963009857011653865476081389968122418691934354122230780300833008753686234433642072919923583176333668289998661499146617277981691372057042930131717336250309680764289256080895092/14342680993892886303954853579883363225921109635079605392320944523109187641283117181461662846411912306480691901515655220490850586434947504504317080144378185989596578890875561336496479576651516902048606328604696610314441229321219627021610788398730173161473456954861916116391687748151443335513249810808309201830214153565966339609616397865465842187404632568359375","342401018754023891059352629509715357053454506037284788725127073168445189422181540408896452651232759821766616850264122591225331120588918865882061344322996688880669665450231982002597398732201789017495427566260651180470635467002453249479483900268320570004293679361696197905823690145326531180324429318916092471863347575533714871355651558610515931373080997536792242278529575700808878786732127630024064418468916608/68894647682461956089382461406499759613691148650738957016015844830333168307020284281532026442272618372290646283794122772122665531108484704223311663270836645399554940741928358317884620420886609705267248656765357348477857852684140561714900614303731786621656041881975328169543884661780531057279582784036689401206706069028229798913082362331334839997133771880514515972024899408556517159759907883793675672065360125","190286571838805495686895463752492174798162827967490343625540320679760700551286395956241059969689020885714190883323266375067607282890063444652926151862650426323339187596278760962390404656342309737428214493422028545912504503974763216230927196187743439226243880933947417760147785405444976177822143722569696182520826218120595298059020305548681823408268556482981325/38242608291912408815838081993045123864617058390583394828737640036167893859507494091864963383596867701436244007905770284939991912884465101575490548813894148831966132970730263562113961685364216989999844961688441914455435934703797359360780356482629495214859917249465567846934284121032247250332634283689409883499295469118485912489058982596725212975311140618764288","15345379701153714436938289567639102307887273898834051456693981514956329731572600026866162286097662958712922836383881840211072389867463987895894067288699955858337488812343674818565432780224654423872618380928462939482247900055572079914753652915184313685270722583926261499687728814560680092231526501970431280783177357735398580700300402036873780385926225005561766822479878280891130232036389707452005183370152749056/3080426623087819678602049171756961824196425548529619576972793653585089380165862889092832375934535464160425580449193072125955685099151500755278763306599307218302635233595329082702148677300945556130106197481236122437978375963261172524503625593066102601042060541617791008722569799735202779005407381267021641545644264334109052258081225159748043792288699674153722046659880085850980843460715080965607434114275256125","36443601662144279337033484452272105547257065463167427418525882851507989449375452076227652634440476502702584889057376829320548464677623038648843251719168810701744338735202853412651160681259533015293997501525430222870696235141468274274064390273214484922080219643095978640300874086585386991338440415203863901714217818222666715642467237183267303214471854472286478344/7307237990148312451155090506264642657872224684879860008436735430879314349554023096366846856470375025555139219961666754780864835035902856314981482268319886395881809659368275720375576152008289949085453326722156553603358879420820012964006978808113307340321824660484441618487292138631579616351777191144073820686595597986548374588839763719082323114663844043046087375","1575294930860663922843149113097927168024893739962464327016763741314068438447271326302129681931564068796631337571133444163024224071270063174829664848259482066723104251718808936762938249028582992557822551950212098797718627418782376027133576209718376784834456568694813577764300716139817031545408608110880973380162736536313173329973171844528083756524804574267826691156368696436273087171467254161930265910972517504/315498546654512047637461608750018349421492986465373840347519942494904200733840189483934245529561231604050629653992944140351106887747105945984325466452136415067807666316202346895657914393512001212656936450425268507235863153258769360296536050028695266363553141327896064944506216017933135251875087069031098099192325817395958019524956320840925176589616439477134480262100237057953933117460110224783420562744140625","7692057599553133417225997786980128299372439542315125030077404519679450372805989755158000864378924877036225189784045171045139667691524763609840822628706422918926410377185494048355128046783294954373197082851501927410350313585640237550107070936498164597231431242858771457898152684298047446530220873884022213114819556822050178579707210264243087257050468000092842761/1538814487241112760739561704846381585063002784795057066438330325566843108114787083741788078680861495340026117682606689156065008672344707615420501964123121620401073675430690541617930520947170306763541251152854304975131871537939618684186766168376514664494488691311397307418298556185724993104760692216619178358268934740746932420562664234738576394742559349407744000","15190836470550557926140012263310230378455340797095100474720776113765300081463960235506950799869073894127884189857505951314428810423734978025409205413789025720642609035117121385453856877706229778165533034683130064865256448444765902482146676668197546098809055341050873494446231793312407516463576380102073171090898973046611572020564659042146465345334273595086941562425006763960197801018796906114925005810069684480/3035556598829526968124942916297025416522606357010637652635799096498208643970273828496655227572100159414352020909846298817521082538898702393916708804775798552206401718323929157863173504795127180177622667376867235806208021329981136637175570409791442328468473111768140746895005561471574356889047981458002257872092408771959478275534098789982899056118498417649167444480913552548249005268380838457505944462494874581","2923754549090941424546974281011770689534961442264350984393235983189168024079617848190236639328676436485460311093391982825027512234467853098757486086492333410753919927528867817406389678461354257841007722472106464785557179844602277350411593959136520732862935740433163383885526249897183805981219416420390137516812715245569037561966929572448247077578419534651990827044/583599691615378545100950777601104007812792435102945248411439102112424251478512952087517463400054567832353967731887062349496616445419782499817548928078665212077449420216892583997505908858360011413290038645573504472422610780073975450391707084016931661068694024023083417126286468909117254531307085545768412513447197205482285022417611018126886491416133665625891075125","441922815213568908489589193556560586318864326425397702047965372289295962228254658331201274291697626694859414786292266008476137667843874780506886929181835469302142365772763129838217316953835831059616268288399119642314758261677639945004547833810080700127847214666763863338091523753898362699222880772298183760217731228628442782431573977490761665091005756534420789258276075174436091798475838370152192077494553263232/88113527373573049332749294663402406454524640221866407165839162576979477138694653404281889227416977618913249275712917582743426231744980461918772793673202077716234026090308791893409200158969108910565467273725064769890443408324386897017825489615600787634985397885230455168591240328585041836771921929567914891379235573982442311269392541694564675053636078990836491104116280492254795616055818375774141667319774630875","91197133767962483852278456285591810579974783077874307589555559715577599604626819245000672929518645004771085106770784762994476973842713035791487204122653245797126906189270204029735872508462106527240320932458036231707311992868347221176460407003487373754014365881209649632547685657666691589606571865740595829983849941049450471212387808617247938941417000965198123059467/18163679611214677813643455199979098261849405189805364986036911945012016248297645596270602508015864371788974684317239728239847888960155365342460843559658233069613218442910226128113196984801126248862273503232000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","733396724434554481470656964167233690851279923085197144879644750437402627936723531635898542414136943003236478432848965516925891956615111678444586384493883113385335463639674699443808084827715994137410743992130712903997815471369201406683862985677774155704267039224546352414417632475628136460919900347977754644214725932476856018335195927604771408949980634142255497812566866795799230501026066145434755838336990365184/145912495644159810313026420025053989609942265686388630266226856650796088768164358961644113076809511566125145395699271530802891523741636707532676065833327082092521989958971154798465784847092870457944857590623097781956884297103961713362268264159015928554707158239398721416218953003215109202771651993622244788505649098445109438104466256408060944298437033058380804126574878377874459371251056800895394904459469832875","167606423853658713615749101123336326908381619586838606922565378505211386185130407423587264776519589295420758009764678759213587906216543160801059029133457062067529468464636376639307690657945597847080706144898920305379653754920571797771178341550808041652360635584401789901525709166172283390177673009483341826911179861584213314395893323035527116283758445038413646757280/33310364848744488727470761889861069993071965180756187311178124887286133554324042422503263994717993129539448310743598138364172889305532401505890384806078790034557049074169245078416704866867380089103064821732673967120808611636618526737138435792818828990403374766228037003927569643972203993263329403469747342204808360947840103843317533210523853631711601450617095736473","22466735478643771803624909352181817912387732117378538284107485621001246177152644141853604633676939694208131243081227668237716194316732125445041260568403752325416203858329469477774720998849334961751541191761521224644520742691981372782009394826739249604257098248751626957528543558542443122470657230835176462612530464044652140581367666271771882198747182114685116336512604038833327707163107207664705120728068987996560512/4460342260599110071819142535903990817893424192972341872394014748315090430999224107274777695306032783105944721337053156074851240201179902835353097683269298594190456286888326067932777720561181760369783486872666974623910515795208353605697065447942804414120030678603538761538385793829787734830129764152263691296719726909633580318897787729004972323599773548689272008712427926734258913271101899780538635213826239542884125","1972862002066252798837977155272535342727415329632252213508267781390870646909686724955861608046325765650407340102472833428905279473185818898693854344138403744757857928883601637909604082588338869612221777263582365745419719805587946558326048087138197694016224613118304623864709183681172362693106460535117459192992832969130895829916210933710820035479169562970982784580861/391262854245936198649509275719624152305206807261382621390946060636032376057385723427601113233050260359684153963520782285097664628279596618521963444574543409076428660874564026651742234728997339844161514273669735686516761239076529088145208958938384732800586298943281728435207452253170935715239392534815683367114290676180839217919539381651841151674859715992309727232000","25408691426286653276004556426513401767718328640048945917745783225459709487487356095164164652218100925888847689099153320777389381851598236046402124684511968385325107497047025485302333503075085562533472482645023963717347867696861885363417595298751490212495932766872748125111115039311507374363000062513977436921772096443948159289707996749061007112458126301618769295162649600673247799961118662602756889448152517364992/5033870770817104909025512331238419776407331281944565644457345507262881100618908405924951559853352841154730802006750688581603270849880756026262217651685813584900300357685874044482329601894134443542753690048962260914642678445058891387041919581376195543193199307524572671344323361282633828144708683536721118910549933336800461248338059209853766305058943888965279863852107507075916981165164543199352920055389404296875","616565940481577765011174617619124841631603944267256178093555235591208387588894068005162766513720546626399308168923904625210748051788652328072241494243040185611373035059619136712559505023703153194815611268503291295059648269772663939137446253437248541496631852986499688052678961495116210133458596866684413931188348798244969797973846568160999564540652111599082181871436/122025682149627484528651507368051367620578469392233875493556828623437869650284356703295836998178256875766319508797903923638967073687991229708051285605187358616531926112736402511567721889845693991963610192161413692928378708223712791930113386840109729368772998347036090902364801014045328348830748307179590755723160142468563977011700764517880467116766150322736003147125","979882056834583241477188686550561625289337025747787132773853690143359657519481397575561812727394470125172272246774578404543257210124412718725081536309818383310896102958167337333430555168671327992395916735022711297435263157670501117734412587691271084981140167017421900852550822579410636184333142944411060788723653596377015359036101170054828623669169047118551010102258802465554033173968468183492058271365801755986560/193732066620504775981759812703028757608600125742477178751189607602983198559778039141192492589734277739017909889924488699372940787977794555519474807920198944109549023547259912324279741006975129518191081373554817584214941629021088206977532599055014150433581544599721903881284581257812850697423350805715586436114842183295730680490110793225514602133304729484547181740290534056445482186430729398701311563285494964645419","1138059441890428903336718712159907364975959482163004276901676063186939296217569849990951930955270849692775077813359573394435924934540269310629731801376134549169322946310756738187834128956671195358413024062230774111935109203207768898525882417078119314003162592087920755572050993355843681931139257303484526223461840939880759908449181135029327442039666513325916729112853/224777393704985303260433439401503507705148576727364388720387174977154204629336985298082893443205223017966145098064861566754244624732671470935725326043491911142467178027013112527668183783450932992534517827863293825061296257420183669383719043873666284378647952385401303733274771042385666436214517205678674213118374889121542369996042313879258622144464565403138392064000","614262617634904509410555695398092190166323289787703954329113412647342230855826568873946233136303566178604275296873234926652080462259552775254755109931312516616838091852915397846984381183732773411263828600108443070778861986849272794442105107285234729077818614332155890946804257724112143631642663084660012362691100872465148864413343598067567142977134846266425075195546265101720326272502009234689388355365794889444257557504/121200854655310345878069155190734381476914416893031941761756379148622591310152793328910334357724762079139509813381997287954319983165971628429295803162563856219211627796200599196263868781937234015821367575512548522790158101892507996780675863234181700253545912643548466256938936835469646114659598727592390628209362096738343417775009361678599075671154405137663077798419897932404104579113056038271753988669813988076515476125","106893445531995430131837569895703697604978445859412739331042151546083234373443601923983714252801103551874986033841637079479794895452077803182698291822629713500021995241940133037200268381793282318691568234728329378829301282121562652452936297422136961147432559766896143081059518238234777055931999714973999553456547746825617168005650221542417216291412324174772893635832/21070287546583154895102927029203125577385528350171457634203261197137238923923245382493868134869009844094435068284335909266152042903157700510534904847257436666980671067329084409346149729385625108233234542133838924281113454526471855573271066865534480974484196644173270141056470857666632902827625475719738076524047736123182255306429677688129231682978570461273193359375","1112742798776748551928744983308584493817112400536084744850969025063360679785378789764875076529575583792571198510306186417773101346425704969671256564494135750783642910394213727189639661184379341961737135764570942961692159177189753139209638929302928699705042832922774012622017270172331722295881412111812933593370743210214549038212395941675257558442878012136484052827439007483777859391215222647499741572327725689840850048/219121905514652575155579185322367175400669386131891843382447432851122462422992147756333729893028362013318264155489537138133372703295804002840920402482110260590055749843170064921843460498824128274420925357547023876488939786863662801268798987685503391058250902634999352652063668663245829496836853509616873246554292796823779397317819134891873583857621623143253788854530146303641400986028503534408870194989478421253057625","983995170259637497940121707857673268620603982844439610076334749792119502557380361624096960070148627663305171311646851566811683351232268240169848810658089698606409195744471343416197434926513684882439596141368794175162315633192028977211909698595778839497844847281262559899914504080092844816319298286511436690429175757804604673752838786852277255064434365401871903307643705/193579499709739777577893639665643417521924510242119561765932078835121983190401762561436208758210519231103767232899529457440602166918701550386152070813526760823513884391055054076485295945972185402977095815609448651316824455250005505410192101148149284756928250258632031981439345164037318129987999546683113483700660879431801728391911161900686707231543216283304182063038464","30691013076836380319652884848585431917439358375118437035944950498156836885409110087616602043242747413728866747975631727566613593257623099549583001362246649928075859944695060947434885707102684568632559339383409378997568182445019183928058902445738702610436187907199482604867148445903921474846103586253320950728989228898324829144701782792767763794895137313050381112872972806712570559942583906619373159053654481250809168128/6031936190594376585238407905469035598668211679521553144958053099463931217856780171872253258738635531385711702176347575597387389685526098889278278029314982721284691198967204664771178761416891317672705719303088746953644978471289001577698554025410820041497108311270431130911021653860874238212040640737171103823631718483572464361276703378587106311153455557896527384426327053165214814954154328483257657424873929502112904625","33633002641218571027682690377239300567277297301791434890431645909447040830457253186262970747405514897340315490970846553666201190386457221846694126637998462873786334837901001833771510353365825087187582807843940479192544772559118293851131234910638705258664901225494129023244916125545283621607920983287799648992632814461828998517949449887522866259724675318233522060729654796/6603800575190864815125307817934327053530311915572323544225173935830559756077637251538096164499112411672913910767032482188570876526606118068929913515497400397562722669603861813453418621246538114872330536044519242663538662076583511078523573320035084744399535581216815034837553165853576616422592790103728141443697362408727056813977234078214386771115586436985105038873998875","9090550743395453237608373761422705922989356346696677314277463900103283296889488490217663400349361962695279888433677856471792856853109469433355422802663947305503479561493033851081993247556828544308258821557994512133708656174864544457143793106703578476914924328960109390350040954158797845288786321215010324565010420734044059968931558099077932776525974187717655105951506223649947806568984848883258144616897526257038550656/1783219994432430133950472014582130883873515063182143523712063859964133099770763874744121895885645346884371273930727450069430704145915261127061538288702855011220545530326588799412076879985026006593893648911637986337776174555198865379578424838210466703683642106934154603710587408512357351455891557594977191641529451749437270208258072920514602243985184744955476557012910446023911358037761232253615162335336208343505859375","396226087129511787616470716244996965529391571019620342657409150252952330537366537352182763477820160355931003174946109480036915624974500187179367618457008802667089004678925595775249725629495848146669773574395699032785024522882892752987825063933573399691764866816284097232869198405981830106568826923407996367321353003569052419999880089180418759265274331299787468134974811/77651132902382550540201641628906752945078964002822585000619340261128555048628863996784740469908853602590877726845475670110127527874088625214912598995012971630852593597027649154487264595100300180591016581254965295280089902497540043916128232871685159131211213497239568483141031137909208031392464815187505714066235868748950184065923236670418822911614780061752905170944000","1288523130900767412477856952035690867153496584747510253984686336382980221603917538996138294311274357713893956725672062832264871415025750136690143411884111580335458539824573239771267043414225271729141508235839982033182605445173050590151912297720800168687369852280323356691345317649445843078291369394324862039143247087442309135074453265658730028145500871559458519282433012494054724678302957276371418936282902434203225600/252284450515080370603949213084529993395050575951188044032908270470514999880554862449223347761507020354321422785760279154913310488296485989979706208254206974075438570521939826124860483842758137231373182496438568202110337751291106165654945352183167578675508602832478752400011567482434301614269579368882858973850914513870297071866544875650189106576672289734326492492059816669288907018095832842249738081022227281715919357","559506782175368748187145067236900803925823792088293851453005882621173124590368101213652371965740365119375069053747415415684193092607523211636912074219215053809881814859129515591479780669511533619258835199715146655774919418434080807837587396115955105126806762961292429904380132116986984435528307613054828929294602185927322238461491059740342387266084431988727321711184308176/109446188216864405154936682374609448082436347600301765944233278303643744736544109262794383069197271409398615846380701459882784547857821831816863216080069944818453908760476475874319791512782445408136169878207358663250499628002971644430164185578966399908622640732411885568638054229180673755690889471388585521113862492432946110902070139679164884208988489955874131206343597375","365842109776085256207829452385781129402656684569922320812625438296958174120084800064669048017227033185969596458778213306152397766619692644694641677223213185977626940193107608138827771259334379895020377700759789774994800008933137569543592829220611543060189849601828342989023692876182148818363689293009174358168826340010491728715549904988196347316703985894355217235339548078187164176255405596310602921647203428200269666176/71497266937783826306774367225149833789788300609530680399994804704196212252148324552193149332755057982662844988588678159610516634667597707204818296457616315484973288944637139939912166034691155272078609876888919170894915224022982785138928008133003473320018151370486895637936102520353951511525996197267572355782608352075229547764732602557133494648237258900273354364050662921889937355682486287799239363976556848320046933875","59378684894605773397070783936113244261297966863668546282887298999811950599772732377979382620766180662159460666220894896896564357533604962977968843474062092083279165837424210591042655271577974272394203253875965589611493384384257117088518521598379301169916060951350650621757237206805037261878212424267780312614942173870651684587166691539909068452932891649554575072205080763/11593916877920131260484148322810317629326850763057953025674154928920977965095141485536566217873796019006709247938019404840440511433467040918770165456925609124166970862430104329357419669175323763143377917913760028500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","440706629842402075137926797732405268015915199334341565218443748798479563505125605478061664327658137598204192554352688830679475840386882350034150077506804799859586772904929402683276898098601814091430598259347980573084686932949502809068565420937301632494387691284902026088950093888426872222813857928092871267130505744095697172494119689779474840037266295586359244899477781345249657455186847452249040895151288114085352974933708544/85971876318334010542313048056773419567285701852816309711738644074302467763075671531248793080425349570584102078764464196653843973936119037322000695949209283327606280423406302517302874806092835694196353778161663338667091195199032831587897410329509487165187753418615356836636352319310103639079123698118997500068644500893282438137614420288839230827096109835206605385673197123994357393257304049093683934224826006704198171592304125","13220371178312284248107863849287558696210741535280184003301555188086761767176560823174196915070378763091889333203635784037294769747641959860810039816533609140662043493962707445564057197150603226797446933532133956054671103942520142568674339411250001585991743608723150284270101326419464088290151483823061613403673956918458456165552482913079283537536214967294211244361353060/2576683013797055224377707713704899315377379548630511095136568220145808780162671473907260623503552385384482723173913562423316997528913651044277418227616447815609873991028073011738113927961824632868956802271260292075825561646156680740323686126811928372672670917332613490241615850953660246271541592056143611581223295045062157404996958100136358649109693659623847024011265147","1538372578072246705266078247950089219881197139399081643650271348770110178217959856819170325400476655944115553238940541695152110949081675985299189913515975242840473616169775880272489805123124548256666658584129873597192213080038937409046114908719298170078476325423466734429870048697383304265342125425087105698152643145531760853127801123272389134514333752173173161562273487752064850461823726948588221913540799816489566883798912/299566102446745552813544808169323270315327122249327394279467999308669285416179486075255023523726449428151807672528368606071047812907935426406886253284580296349349558797128593446316786243666290649442956134448480598303527795996222703837663605600624271807461605295956674925277658331760000117761013381199880905748188151556184620779667670278558839116983636972680749836497346863752662521197700717702790359162307617024566689271625","281696937222363685333688097915539146272117417024070728031063821781398985795813333650547982965341298894634762289669256129805545549280355643122501181852136332529515756074502902204877664395456278205770206019663082511098956468724829475220996427130295010430751942126263620206886404244432409164651524408198286831329682605959881993845189585640874220032515465014097345759490750307207/54806274927935495596891312029173862473687610099325998583092091915101265393157631244775387832621032230434007486602816972765210205596482942091518459849775458089575743699797096697542306049628939919466378189656065461708686421130956996965004776108499273871055615413566043083634090083096967567965373203683231171594922347812966905149873265654962896456451681332216735396249206784000","228506238533410805238253122961471637501498406104430046727793420497895852412513560203475440156216063574654372726194215013407325207763369075250819386897086702757125418327084312933061738392406321003231853349865003322697360659712771167066453430309997639548320673279964210730701373707765051246595806673865646607841876463608039111252607452843372970797479959213447237540830563469297144446069689149549515457318899981763489792/44418759813188470246596822974281932219088697005123285598909329328419879212164564561558656547678211265529803086702843380128457744445765859393426675396393053094588240457569380155526179040891009717323059641035189017918495485630657360525410506453554255734005459614858972904374739673834145083512160883402151636664208253116362089211658645312778404886460203600762546810897889629330022309705583438699250109493732452392578125","2396110297187570506257836426251930521245117960980667897194680897478996322590925380310917400763581787981992131769075961259393685331523600287377841990678117113566991100720996059187144934569703045966210306282348527729533806882408323961336166190162075154579344185244957673138372347997134388801085788353482276257401005734929059700346687783400772331280644647089520646562669857652648/465370154262863030800729180763091967573522779260407615567563274096037297593764955820626213827962697601334935773802201919483657310282236100250543992334865461800976838791035335861420892967699843608855185710753433852279737724446294443337363478679601049432404435672469098850676302728116369979460222148206944323730586138087862719386327396334468302608499235112520318322763857676375","1188272888075247520453568790651819187486389546755745961952033150576243575862120569399808467067800830890874391487822723879717525264875722720416173276963170672622214121308038530968291758445510982186014289745026439477197148445087614813262170975056866881909056450023324743409114115141145340480846088869807540798073417035168139476153897066325127540609756310068558610112731607522096096821938163134080426356894899245575410494080/230586762395914863625709048789913840511134004337945700368117795195769576856434588144361459740833007125516905017415184787078710001969815416281381427387949263792200577791644278234661952852149216540491852757174842146376788280677956350901082838474705227642420261641783722891948710833898248566893322144435457967452449965772543077421407816225704952270697016152452032506898311260979594550143344971416786595888053149375287120733","1072184299258468249004114536023934869518152618369895613271618698908405514630154819453979477077738526673716264830106745031385951736108376866253955319711026042389282009348594845497252059906901748860111986811345742998968284077119165082435598381810306691078037018432766116865792677955520465319184311529667642995217214507658693259694586107847099911341219913576038605872218680562047/207882129535607118520818565811162643811811563516006836924341123976848022970024793004700710992938987476728640943834012473687892481059618823520721737479364352887178017866425027953255856440099446112508663603319745066750522936408781591578321031173620445865113295407603090322283539974563690157418931060565698315406021569491751612761888641141446406531645379264720684248398299136000","158094023904374464057702010126993231151433474361820266584020400101533651587072432728050776506672527718975042616651177034635188178967462982926261516748842073587981953038445977514446838733557926696939591069712397947055261777416704028506441173540338327591514650398349069348381309688677335132100441905603664282735310299686268721634369502296867409514777359935022301425165750780988231639828675424239931533849896744198012747670272/30626384366513923671063955469537776291182594080083494737341604579575446319190916924682809546024369330706012653799783122328775875399363759308193432327358837772825609356553955350401725689682838701996446404559005896479618311357573203081153855961484398360670837599853294627153740224543175497655414585918231215639906924313779933211774291565425360415684556655021031131349317390382320286092667852173815259422737956767922154798375","12216278924286401897470540169822542417611356797676160128176706721343511598951866107858729405615631246003458062949723290192242594609994613705183460814797527214549142043573863947658832694800184691222426521703728394203722420336773310908687071670107794543022567943478843065246011544888390757810534211554666736239506503613750756246364621509359804902243487113673014588325806249988332/2364584127734680580481708368927921125934330000162935118371174269642831409084634375654239735054363928748162229294829526339927907778510530444646754603322373712788147193691037688552857183116332292048731726305451516954679277320777955342295564000586923227775208580772868590742136150431152495718132142742153643081187691849828217592954519485869135930755646768375299870967864990234375","578939195017447864385837341975558679292903716580114421030538728778491606282153588930983966100514147976321305616196463174070345884292672842497715966933722088536619333912687108737657068701352918582656105418491672377271304970407730786932913490869797471081081431072836814581099271832696990064828717287258860166842791984158634684078346453202928137987930328826212011774670396356151265781053547412633310327737900786639842674288716416/111966291649651600701875186827360807558960817589719096407887999108024557254221008849510152469119211567152616745769256123968832250104006560061907741567034087109512483357851919402017950812795426393415409198268246337542639470834168040295134130657073201020340432236723824670803498949071870597039309004562024033656488150406105175401372709011082725359382691270659245312133919518760328422827067578306005644825927050994860723405473375","8041514821545833865350873212853873042112343327573364523948780030849543753072688526717886590013028227714585965095216381829914996539132359247488639692828639170075726301411777307168737667077730792892326979446426349813642680537699905651125068091362135055902152994216233622733424128982011248923051410141033146604688083721413402395290842738021365861670415833356403364696759583009635/1553937833499559104910551811592138833189892464446761247731330672284191313590708439680460540329836344767557599746234213006493842842879398684745864919973051635127080738612248150108793397855113122368507483429209127035263504194847798809612278864438287815470711036548695032421148125849669175729331459149833945183228413961985381338162155596008680906676498435954178226973272371625984","12059659399309169167301353842123191409306995788633965680414620302285606896146667751472818541537183787935352700725982053536032930866708413010971856856768384974849695774437178790890015242323873769697407411558706626105140596160049735605389301414460825674631122462760014451298494875244754354054447697502521388381253293175367558014453865905104467382184997528879171136492277222127399012368677604910497789360212571238146627048080568400384/2328494054002703067219004484782931471919751585969487160602269605916676223315055450845942763690581877771159615428854802721943114463834992106300185328876910271612375509166975628540839858771078495267566008071532876816826751069408153323840515037497664871689085370699991860738368371510578076683395101062439493831773194498579620513073693022191702398601471237166387045790480861932005012807234071429628725981935147069738988682858417182625","683009426705008850682549700382901603742691705123356866338951397347368059105140826655486518416578697931244347554322654428162554903861783227680935341690740579867651545205562690172425016836559678937794312287639193745517811234257062356826622207475918293015140472942579713388671782202262396642735640315948612572908444501108579457520714632371056288874351015666995549139003946314085696/131769214246522869780429817236150406548549044658474416909806179734873399109656411633488099249198882165279745627038984487365589625562901914030850178330133080409420340227179447548044572594184601425691821617928130423410997853384425373999967759499571890326740433081063424903098252502791477854302204200941376983295622430177445507316706609802292121282957519571162158620971952084486375","1418116259749091420309271913909337143756589314597557128553117870573928055109322864794169592355058370891251425125187770724828108988587888087023982451205475980371440423992838481547236638456717520835668859093413956339261802305597694403381021863258753441889536361061407579332570493634254542013337999844407181346815549594836374497512447969751514466481466717590255369810506813543577735080228718660747940956248427356785784199073569408/273368882980516556922532339653303822104510203916024760371844491705599093435133738774975538364241630079468712981056336655766117378160822393876348755370711942273876284944422610974149712212944211513462921649872232656449940987552227525504529710373144228818606127541937831103642415534318303187393593236209298242574677293352798419428712873685798636474667204083938875672934235816396371477146089168375198141802684403955936431884765625","546411077581845999248238069684194831621691193366466972898628141511422317954477211865167402284211971296286346492698354214043840080181702652132835681239302798339667835439189275457116051279366194551632712819028177402221815140045210690908631767786711675029194359998826252332434573121740830827417293557234891406021102083555472155479148332697839972702631641910213821827820374586459319/105246945889799140338072754365901705544530661781295362563214285953881890233987516230568663143342952799036341701952267011236663118111226623815975847494372076420199418712941018288738590264475520229651370015377608638075866459684692488079223686296541020897904588347083045723167762682959422858996673894180805702299907478685374065593161226849447131100462022089783265346597553176576000","2398330640958841474772606439916070050977544535580605737383995160447105736276950196885906408317628083110923322157113892928963237845914017845444295040924101784423382681801754191301860383927129006953354739240926643562987838836997453985855576402628166875869041032631651591871962852884189548538272285387092843044669499688035134181859376665409767886188304314888753894905317929877238322615838524354191263502347881033855441181420399360/461588070868590122892265681879734295007029130965626060552783760068897000195207878227714842617470320231527222074701444349530952699708435668339712860464533455345665068841333232359698449088497137068713309811942968433868609329301082001752617420002377892756821532220676085014874112083615054550278903960627185675459015343606391094523511117705747842645927349130302549554534056269331809016770715819934970200483161548527932617036185253","6041015879424725383006424536130409209607854044642113747266098198777011981328765528361630516108680392500990580908509403483891763219659726090675140672989657743882183951954294745396417829943469201306594018454995862321821016087416840247422350906412007336103086620396467456181771583200365740253389107968122850063607085957109965406634738740996318415514360956028575560979203447735121436/1161752799109428422288020947061281540989708937450568100764830251908850596717606701047413407636907934320789870175907792017513896999208892282137299070761467096211814586909598705615312819596495636017728313513520193786266452836805291464826226833593878504804389728477191170027729963773716267868284479768397603444919008915279522376004326398403851684761808785381609370767169521034383625","13240077436443988749179508462267267187169441948722358165090554769250505713747934643200804819418670147225695324432684266924694524337920816452346599774452681831320005286326986675907899608537972384924882996757503264622991355949039882526389342174307168805166215838138277557052303430492669193939212362638263582899713198716541723383138016564027766560215944409353427176135895982596327685665844815618402881202645610620284792793420780517248/2544223084468158291883698813309541801455311468982232546872485444308211415529998472787377800559884210837213042932180479090277285630234238711851480232520137856848809986631784843528381778520727465146661792797924458540957133423665746229799675650290296217658444899605236550972043549278128087645211909479009099766619355677984218929672461506691980442071860591767266913041147587815452007726513853820116629482732060593116624596368806566625","1953999166296955830935495158735359200362904181792947794529339487489730042568305997099959302322956898299616194932283060554261566410988618045107398092345476532371402134206635235570281738377188438407703089325315446371127042537576093536896282955524842632708645655481028161471313608974238110718242273935956977555610147714316158486553633871312187084618154014921190595222799283957140353/375191165084882521037046014569185165885459082629136124177286500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"];if(t[e])return le.quick.apply(null,t[e].split("/"));e=new le(e);for(var n=new le(0),r=e.subtract(new le(1)),i=e.add(new le(1)),a=0;a<80;a++){var o=new le(2*a+1),s=se.bigpow(r.divide(i),o),u=o.clone().invert().multiply(s);n=n.add(u)}return n.multiply(new le(2))},factorial:function(e){if(e<0)throw new Error("factorial not defined for negative numbers");for(var t=1,n=2;n<=e;n++)t*=n;return t},dfactorial:function(e){var t=e%2==0,n=t?e/2:(e+1)/2,r=new le(1);if(t)for(var i=1;i<=n;i++)r=r.multiply(new le(2).multiply(new le(i)));else for(i=1;i<=n;i++)r=r.multiply(new le(2).multiply(new le(i)).subtract(new le(1)));return r},GCD:function(){for(var e=ee([].slice.call(arguments).map(function(e){return Math.abs(e)})).sort(),t=Math.abs(e.shift()),n=e.length;n-- >0;)for(var r=Math.abs(e.shift());;){if(0===(t%=r)){t=r;break}if(0===(r%=t))break}return t},QGCD:function(){for(var e=[].slice.call(arguments),t=e[0],n=1;n<e.length;n++){var r=e[n],i=t.isNegative()&&r.isNegative()?-1:1;t=r.gcd(t),i<0&&t.negate()}return t},LCM:function(e,t){return e*t/se.GCD(e,t)},pow:function(e,t){return e<0&&Math.abs(t)<1?1/t%2==0?NaN:-Math.pow(Math.abs(e),t):Math.pow(e,t)},factor:function(e){var t=se.ifactor(e),n=new fe;for(var r in n.symbols={},n.group=m,t){var i=new fe(1);i.group=l,i.value=r,i.power=new fe(t[r]),n.symbols[r]=i}return n.updateHash(),n},sfactor:function(e,t){t=t||{};var n=Math.floor(Math.sqrt(e));n>a[a.length-1]&&e<1e6&&ie(n);for(var r=a.length,i=0;i<r;i++)for(var o=a[i];e%o==0;)e/=o,t[o]=(t[o]||0)+1;return e>1&&(t[e]=1),t},ifactor:function(e){if("0"===(e=String(e)))return{0:1};var t=(e=new n(e)).sign?-1:1;e=e.abs();var r={};if(e.lt("65536"))r=se.sfactor(e,r);else for(var i=function(e){e.isPrime()?r[e]=(r[e]||0)+1:r=se.sfactor(e,r)};!e.abs().equals(1);){if(e.isPrime()){i(e);break}for(var a=new n(2),o=new n(2),s=new n(2),u=new n(1);u.abs().equals(1);){for(var c=0;c<=o&&u<=1;c++)s=s.pow(2).add(1).mod(e),u=n.gcd(s.minus(a),e);o=o.times(2),a=s}i(u),e=e.divide(u)}if(-1===t){var l=Y(W(r));r["-"+l]=r[l],delete r[l]}return r},boxfactor:function(e,t){t=t||200;for(var n,r,i=Math.floor(5/12*e),a=0,o=!1;n=Math.floor(e/i),0!=(r=e%i);){if(o)return[e,1];i=Math.max(r,i-r),o=++a>t}return[n,i,a]},fib:function(e){var t=Math.sign(e);e=Math.abs(e),t=K(e)?t:Math.abs(t);for(var n=0,r=1,i=1,a=2;a<=e;a++)i=n+r,n=r,r=i;return i*t},mod:function(e,t){return e%t},num_integrate:function(e,t,n,r,i){return o.round(function(e,t,n,r,i){var a={maxDepthCount:0,nanEncountered:!1};void 0===r&&(r=1e-9),void 0===i&&(i=45);var o=e(t),s=e(.5*(t+n)),u=e(n),c=function e(t,n,r,i,a,o,s,u,c,l,f){if(f.nanEncountered)return NaN;var d,p,h,m,g,v,y,b,w,O;if(p=t(n+.25*(d=r-n)),h=t(r-.25*d),isNaN(p))f.nanEncountered=!0;else{if(!isNaN(h))return O=((v=(m=d*(i+4*p+a)/12)+(g=d*(a+4*h+o)/12))-s)/15,l>c?(f.maxDepthCount++,v+O):Math.abs(O)<u?v+O:(b=e(t,n,y=n+.5*d,i,p,a,m,.5*u,c,l+1,f),isNaN(b)?(f.nanEncountered=!0,NaN):(w=e(t,y,r,a,h,o,g,.5*u,c,l+1,f),isNaN(w)?(f.nanEncountered=!0,NaN):b+w));f.nanEncountered=!0}}(e,t,n,o,s,u,(o+4*s+u)*(n-t)/6,r,i,1,a);if(a.maxDepthCount>0&&A("integrate-adaptive-simpson: Warning: maximum recursion depth ("+i+") reached "+a.maxDepthCount+" times"),a.nanEncountered)throw new ve("Function does not converge over interval!");return c}(e,t,n,r,i),12)},Ci:function(e){for(var t=0,n=1;n<20;n++){var r=2*n;t+=Math.pow(-1,n)*Math.pow(e,r)/(r*se.factorial(r))}return Math.log(e)+.5772156649015329+t},Si:function(e){for(var t=0,n=0;n<20;n++){var r=2*n;t+=Math.pow(-1,n)*Math.pow(e,r+1)/((r+1)*se.factorial(r+1))}return t},Ei:function(e){if(e.equals(0))return-1/0;for(var t=0,n=1;n<30;n++)t+=Math.pow(e,n)/(n*se.factorial(n));return.5772156649015329+Math.abs(Math.log(e))+t},Shi:function(e){for(var t,n,r=0,i=0;i<30;i++)n=(t=2*i)+1,r+=Math.pow(e,n)/(n*n*se.factorial(t));return r},Chi:function(e){var t;return.001,.5772156649015329,t=function(e){return(Math.cosh(e)-1)/e},Math.log(e)+.5772156649015329+se.num_integrate(t,.002,e,.001)},gamma_incomplete:function(e,t){for(var n=e-1,r=0,i=(t=t||0,0);i<n;i++)r+=Math.pow(t,i)/se.factorial(i);return se.factorial(n)*Math.exp(-t)*r},step:function(e){return e>0?1:e<0?0:.5},rect:function(e){return.5===(e=Math.abs(e))?e:e>.5?0:1},sinc:function(e){return e.equals(0)?1:Math.sin(e)/e},tri:function(e){return(e=Math.abs(e))>=1?0:1-e},nthroot:function(e,t){if(e instanceof le||(e=new le(e.toString())),t instanceof le||(t=new le(t.toString())),t.equals(1))return e;var n,r,i,a=e.divide(new le(2)),o=new le(1e-15),s=t.clone().invert(),u=t.subtract(new le(1));do{var c=se.bigpow(a,u),l=s.multiply(e.divide(c).subtract(a)).toDecimal(25);if(n=le.create(l),i)break;a=a.add(n);l=n.toDecimal();i=!!r&&r===l,r=l}while(n.abs().gte(o));return a}};s.FUNCTION_MODULES.push(se);function ue(e,t,n){var r="hash"===t,i="decimals"===t||"decimal"===t,a=r?void 0:t;if(R(e)){var o="",v="",b="",w=e.group||n,O=e.value;if(!r){var x=i?e.multiplier.valueOf():e.multiplier.toString();"-1"==x&&(b="-",x="1"),"1"!=x&&(o=x);var j=e.power?i?e.power.valueOf():e.power.toString():"";"1"!=j&&(v=R(j)?ue(j,a):j)}switch(w){case c:o="",O="-1"==e.multiplier?"1":i?e.valueOf():e.multiplier.toString(),v="";break;case h:case g:O=e.collectSymbols(ue,a).join("+").replace(/\+\-/g,"-");break;case m:O=e.collectSymbols(function(e){var t=e.group;return(t===h||t===g)&&e.power.equals(1)&&e.multiplier.equals(1)?H(ue(e,a)):ue(e,a)}).join("*");break;case d:var _=e.previousGroup,S=e.power.group;_===h&&(O=e.collectSymbols(ue,a).join("+").replace("+-","-")),_===c||_===f||_===p||r||(O=H(O)),S!==g&&S!==m&&S!==h&&"1"==e.power.multiplier.toString()||!v||(v=H(v))}if(w===p&&i&&(O=e.fname+H(e.args.map(function(e){return ue(e,a)}).join(","))),w===p&&e.fname in u){var M=ue(e.args[0]),E=ue(e.args[1]);e.args[0].isComposite()&&(M=H(M)),e.args[1].isComposite()&&(E=H(E)),O=M+u[e.fname]+E}!v||B(v)||w===d||i||(v=H(v)),((w===g||w===h)&&(o&&"1"!=o||"-"===b)||(w===m||w===g||w===h)&&v&&"1"!=v||!r&&w===l&&-1==O||e.fname===y)&&(O=H(O));var k=b+o;!o||B(o)||i||(k=H(k)),v<0&&(v=H(v)),o&&(k+="*"),v&&(v=s.POWER_OPERATOR+v),w===d&&"-"===O.charAt(0)&&(O=H(O));var N=k+O;return e.parens&&(N=H(N)),N+v}if(F(e)){for(var A=e.elements.length,P=(k=[],0);P<A;P++)k.push(e.elements[P].text(t));return"["+k.join(",")+"]"}try{return e.toString()}catch(e){return""}}function ce(e){this.symbol=e}function le(e){if(e instanceof le)return e;if(void 0===e)return this;try{if(B(e))try{this.num=n(e),this.den=n(1)}catch(t){return le.simple(e)}else{var t=we.convert(e);this.num=new n(t[0]),this.den=new n(t[1])}}catch(t){return le.simple(e)}}function fe(e){var t="Infinity"===e;return this instanceof fe?(isNaN(e)||t||!isFinite(e)?(this.group=f,P(e),this.value=e,this.multiplier=new le(1),this.imaginary=e===s.IMAGINARY,this.isInfinity=t):(this.group=c,this.value=v,this.multiplier=new le(e)),this.power=new le(1),this):new fe(e)}function de(e,t,n,r,i,a,o){this.val=e,this.fn=t,this.precedence=n,this.left_assoc=r,this.is_prefix=i,this.is_postfix=a||!1,this.operation=o,this.is_operator=!0}function pe(e,t,n,r,i){this.val=e,this.bracket_id=t,this.open=!!n,this.fn=r,this.type=i}function he(e){this.operation=e.operation,this.val=e.val,this.is_prefix_operator=!0}function me(e){this.message=e||""}function ge(e){this.message=e||""}function ve(e){this.message=e||""}function ye(e){this.message=e||""}function be(){var e=this,t={},r=this.constants={PI:Math.PI,E:Math.E},i={e:Math.E,pi:Math.PI},u={prec:void 0,cos:function(t,n){var r,i;return r=e.parse(Math.cos(t)*Math.cosh(n)),i=e.parse(Math.sin(t)*Math.sinh(n)),e.subtract(r,e.multiply(i,fe.imaginary()))},sin:function(t,n){var r,i;return r=e.parse(Math.sin(t)*Math.cosh(n)),i=e.parse(Math.cos(t)*Math.sinh(n)),e.subtract(r,e.multiply(i,fe.imaginary()))},tan:function(t,n){var r,i;return r=e.parse(Math.sin(2*t)/(Math.cos(2*t)+Math.cosh(2*n))),i=e.parse(Math.sinh(2*n)/(Math.cos(2*t)+Math.cosh(2*n))),e.add(r,e.multiply(i,fe.imaginary()))},sec:function(t,n){var r=this.removeDen(this.cos(t,n));return e.subtract(r[0],e.multiply(r[1],fe.imaginary()))},csc:function(t,n){var r=this.removeDen(this.sin(t,n));return e.add(r[0],e.multiply(r[1],fe.imaginary()))},cot:function(t,n){var r=this.removeDen(this.tan(t,n));return e.subtract(r[0],e.multiply(r[1],fe.imaginary()))},acos:function(t,n){var r,i,a,o;return r=this.fromArray([t,n]),i=e.expand(e.pow(r.clone(),new fe(2))),a=e.multiply(Q(e.subtract(new fe(1),i)),fe.imaginary()),o=ne(e.expand(e.add(r.clone(),a))),e.expand(e.multiply(fe.imaginary().negate(),o))},asin:function(t,n){return e.subtract(e.parse("pi/2"),this.acos(t,n))},atan:function(t,n){var r,i,a,o;return o=u.fromArray([t,n]),r=e.expand(e.multiply(fe.imaginary(),o.clone())),i=ne(e.expand(e.subtract(new fe(1),r.clone()))),a=ne(e.expand(e.add(new fe(1),r.clone()))),e.expand(e.multiply(e.divide(fe.imaginary(),new fe(2)),e.subtract(i,a)))},asec:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.acos.apply(this,n)},acsc:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.asin.apply(this,n)},acot:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.atan.apply(this,n)},cosh:function(t,n){var r,i;return r=e.parse(Math.cosh(t)*Math.cos(n)),i=e.parse(Math.sinh(t)*Math.sin(n)),e.add(r,e.multiply(i,fe.imaginary()))},sinh:function(t,n){var r,i;return r=e.parse(Math.sinh(t)*Math.cos(n)),i=e.parse(Math.cosh(t)*Math.sin(n)),e.add(r,e.multiply(i,fe.imaginary()))},tanh:function(t,n){var r,i;return r=e.parse(Math.sinh(2*t)/(Math.cos(2*n)+Math.cosh(2*t))),i=e.parse(Math.sin(2*n)/(Math.cos(2*n)+Math.cosh(2*t))),e.subtract(r,e.multiply(i,fe.imaginary()))},sech:function(t,n){var r=this.removeDen(this.cosh(t,n));return e.subtract(r[0],e.multiply(r[1],fe.imaginary()))},csch:function(t,n){var r=this.removeDen(this.sinh(t,n));return e.subtract(r[0],e.multiply(r[1],fe.imaginary()))},coth:function(t,n){var r=this.removeDen(this.tanh(t,n));return e.add(r[0],e.multiply(r[1],fe.imaginary()))},acosh:function(t,n){var r,i,a;return a=this.fromArray([t,n]),r=Q(e.add(a.clone(),new fe(1))),i=Q(e.subtract(a.clone(),new fe(1))),e.expand(ne(e.add(a,e.expand(e.multiply(r,i)))))},asinh:function(t,n){var r,i;return i=this.fromArray([t,n]),r=Q(e.add(new fe(1),e.expand(e.pow(i.clone(),new fe(2))))),e.expand(ne(e.add(i,r)))},atanh:function(t,n){var r,i,a;return a=this.fromArray([t,n]),r=ne(e.add(a.clone(),new fe(1))),i=ne(e.subtract(new fe(1),a)),e.expand(e.divide(e.subtract(r,i),new fe(2)))},asech:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.acosh.apply(this,n)},acsch:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.asinh.apply(this,n)},acoth:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.atanh.apply(this,n)},sqrt:function(t){var n,r,i,a,o;return n=t.realpart(),r=t.imagpart(),i=fe.hyp(n,r),a=e.add(n.clone(),i),o=Q(e.multiply(new fe(2),a.clone())),e.add(e.divide(a.clone(),o.clone()),e.multiply(e.divide(r,o),fe.imaginary()))},log:function(t,n){var r,i;return r=ne(fe.hyp(t,n)),i=e.parse(Math.atan2(n,t)),e.add(r,e.multiply(fe.imaginary(),i))},removeDen:function(t){var n,r,i;return z(t)?(r=t[0],i=t[1]):(r=t.realpart(),i=t.imagpart()),n=Math.pow(r,2)+Math.pow(i,2),[e.parse(r/n),e.parse(i/n)]},fromArray:function(t){return e.add(t[0],e.multiply(fe.imaginary(),t[1]))},evaluate:function(t,n){var r,i,a;if(a=t.power.sign(),t.power=t.power.abs(),t.power.greaterThan(1)&&(t=e.expand(t)),a<0){var o=this.removeDen(t);r=o[0],i=o[1]}else r=t.realpart(),i=t.imagpart();return r.isConstant("all")&&i.isConstant("all")?this[n].call(this,r,i):e.symfunction(n,[t])}},v=this.Trig={cos:function(t){if(t.equals("pi")&&t.multiplier.den.equals(2))return new fe(0);if(s.PARSE2NUMBER){if(t.equals(new fe(Math.PI/2)))return new fe(0);if(t.isConstant())return new fe(Math.cos(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"cos")}if(t.equals(0))return new fe(1);var n,r=!1,i=ie(t.multiplier.toDecimal()),a=t.multiplier.abs();if(t.multiplier=a,t.isPi()&&t.isLinear())if(B(a))n=new fe(K(a)?1:-1);else{Number(a.num);var o=Number(a.den);2===o?n=new fe(0):3===o?(n=e.parse("1/2"),r=!0):4===o?(n=e.parse("1/sqrt(2)"),r=!0):6===o?(n=e.parse("sqrt(3)/2"),r=!0):n=e.symfunction("cos",[t])}return!r||2!==i&&3!==i||n.negate(),n||(n=e.symfunction("cos",[t])),n},sin:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.sin(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"sin")}if(t.equals(0))return new fe(0);var n,r=!1,i=ie(t.multiplier.toDecimal()),a=t.multiplier.sign(),o=t.multiplier.abs();if(t.multiplier=o,t.equals("pi"))n=new fe(0);else if(t.isPi()&&t.isLinear())if(B(o))n=new fe(0);else{o.num;var c=o.den;2==c?(n=new fe(1),r=!0):3==c?(n=e.parse("sqrt(3)/2"),r=!0):4==c?(n=e.parse("1/sqrt(2)"),r=!0):6==c?(n=e.parse("1/2"),r=!0):n=e.symfunction("sin",[t])}return n||(n=e.multiply(new fe(a),e.symfunction("sin",[t]))),!r||3!==i&&4!==i||n.negate(),n},tan:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.tan(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"tan")}var n,r=!1,i=ie(t.multiplier.toDecimal()),a=t.multiplier;if(t.multiplier=a,t.isPi()&&t.isLinear())if(B(a))n=new fe(0);else{a.num;var o=a.den;if(2==o)throw new ve("tan is undefined for "+t.toString());3==o?(n=e.parse("sqrt(3)"),r=!0):4==o?(n=new fe(1),r=!0):6==o?(n=e.parse("1/sqrt(3)"),r=!0):n=e.symfunction("tan",[t])}return n||(n=e.symfunction("tan",[t])),!r||2!==i&&4!==i||n.negate(),n},sec:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(se.sec(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"sec")}var n,r=!1,i=ie(t.multiplier.toDecimal()),a=t.multiplier.abs();if(t.multiplier=a,t.isPi()&&t.isLinear())if(B(a))n=new fe(K(a)?1:-1);else{a.num;var o=a.den;if(2==o)throw new ve("sec is undefined for "+t.toString());3==o?(n=new fe(2),r=!0):4==o?(n=e.parse("sqrt(2)"),r=!0):6==o?(n=e.parse("2/sqrt(3)"),r=!0):n=e.symfunction("sec",[t])}return!r||2!==i&&3!==i||n.negate(),n||(n=e.symfunction("sec",[t])),n},csc:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(se.csc(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"csc")}var n,r=!1,i=ie(t.multiplier.toDecimal()),a=t.multiplier.abs();if(t.multiplier=a,t.isPi()&&t.isLinear()){if(B(a))throw new ve("csc is undefined for "+t.toString());a.num;var o=a.den;2==o?(n=new fe(1),r=!0):3==o?(n=e.parse("2/sqrt(3)"),r=!0):4==o?(n=e.parse("sqrt(2)"),r=!0):6==o?(n=new fe(2),r=!0):n=e.symfunction("csc",[t])}return n||(n=e.symfunction("csc",[t])),!r||3!==i&&4!==i||n.negate(),n},cot:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(se.cot(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"cot")}var n,r=!1,i=ie(t.multiplier.toDecimal()),a=t.multiplier;if(t.multiplier=a,t.isPi()&&t.isLinear()){if(B(a))throw new ve("cot is undefined for "+t.toString());a.num;var o=a.den;2==o?n=new fe(0):3==o?(n=e.parse("1/sqrt(3)"),r=!0):4==o?(n=new fe(1),r=!0):6==o?(n=e.parse("sqrt(3)"),r=!0):n=e.symfunction("cot",[t])}return n||(n=e.symfunction("cot",[t])),!r||2!==i&&4!==i||n.negate(),n},acos:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.acos(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"acos")}return e.symfunction("acos",arguments)},asin:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.asin(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"asin")}return e.symfunction("asin",arguments)},atan:function(t){var n;if(t.equals(0))n=new fe(0);else if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.atan(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"atan")}else n=t.equals(-1)?e.parse("-pi/4"):e.symfunction("atan",arguments);return n},asec:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.acos(t.invert().valueOf()));if(t.isImaginary())return u.evaluate(t,"asec")}return e.symfunction("asec",arguments)},acsc:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.acos(t.invert().valueOf()));if(t.isImaginary())return u.evaluate(t,"acsc")}return e.symfunction("acsc",arguments)},acot:function(t){var n;if(s.PARSE2NUMBER)if(t.isImaginary())n=u.evaluate(t,"acot");else{var r=e.parse("pi/2");t.equals(0)?n=r:(t.lessThan(0)&&r.negate(),n=e.subtract(r,v.atan(t)))}else n=e.symfunction("acot",arguments);return n},atan2:function(t,n){if(t.equals(0)&&n.equals(0))throw new ve("atan2 is undefined for 0, 0");return s.PARSE2NUMBER&&t.isConstant()&&n.isConstant()?new fe(Math.atan2(t,n)):e.symfunction("atan2",arguments)}};this.trig=v;var j=this.Trigh={cosh:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.cosh(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"cosh")}return e.symfunction("cosh",arguments)},sinh:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.sinh(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"sinh")}return e.symfunction("sinh",arguments)},tanh:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.tanh(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"tanh")}return e.symfunction("tanh",arguments)},sech:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.sech(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"sech")}return e.symfunction("sech",arguments)},csch:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.csch(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"csch")}return e.symfunction("csch",arguments)},coth:function(t){if(s.PARSE2NUMBER){if(t.isConstant())return new fe(Math.coth(t.valueOf()));if(t.isImaginary())return u.evaluate(t,"coth")}return e.symfunction("coth",arguments)},acosh:function(t){return s.PARSE2NUMBER&&t.isImaginary()?u.evaluate(t,"acosh"):s.PARSE2NUMBER?ae(e.parse(G("log(({0})+sqrt(({0})^2-1))",t.toString()))):e.symfunction("acosh",arguments)},asinh:function(t){return s.PARSE2NUMBER&&t.isImaginary()?u.evaluate(t,"asinh"):s.PARSE2NUMBER?ae(e.parse(G("log(({0})+sqrt(({0})^2+1))",t.toString()))):e.symfunction("asinh",arguments)},atanh:function(t){return s.PARSE2NUMBER&&t.isImaginary()?u.evaluate(t,"atanh"):s.PARSE2NUMBER?ae(e.parse(G("(1/2)*log((1+({0}))/(1-({0})))",t.toString()))):e.symfunction("atanh",arguments)},asech:function(t){return s.PARSE2NUMBER&&t.isImaginary()?u.evaluate(t,"asech"):s.PARSE2NUMBER?ae(ne(e.add(t.clone().invert(),Q(e.subtract(e.pow(t,new fe(-2)),new fe(1)))))):e.symfunction("asech",arguments)},acsch:function(t){return s.PARSE2NUMBER&&t.isImaginary()?u.evaluate(t,"acsch"):s.PARSE2NUMBER?ae(e.parse(G("log((1+sqrt(1+({0})^2))/({0}))",t.toString()))):e.symfunction("acsch",arguments)},acoth:function(t){return s.PARSE2NUMBER&&t.isImaginary()?u.evaluate(t,"acoth"):s.PARSE2NUMBER?t.equals(1)?fe.infinity():ae(e.divide(ne(e.divide(e.add(t.clone(),new fe(1)),e.subtract(t.clone(),new fe(1)))),new fe(2))):e.symfunction("acoth",arguments)}};this.trigh=j;var S=this.operators={"^":new de("^","pow",6,!1,!1),"**":new de("**","pow",6,!1,!1),"!!":new de("!!","dfactorial",5,!1,!1,!0,function(t){return e.symfunction(x,[t])}),"!":new de("!","factorial",5,!1,!1,!0,function(e){return Y(e)}),"*":new de("*","multiply",4,!0,!1),"/":new de("/","divide",4,!0,!1),"%":new de("%","percent",4,!0,!1,!0,function(t){return e.percent(t)}),"%+":new de("%+","percent_add",2,!0,!1),"%-":new de("%-","percent_subtract",3,!0,!1),"+":new de("+","add",3,!0,!0,!1,function(e){return e}),"-":new de("-","subtract",3,!0,!0,!1,function(e){return e.negate()}),"!+":new de("!+","factadd",3,!0,!0,!1),"!!+":new de("!!+","dfactadd",3,!0,!0,!1),"!-":new de("!-","factsub",3,!0,!0,!1),"!!-":new de("!!-","dfactsub",3,!0,!0,!1),"=":new de("=","equals",2,!1,!1),"==":new de("==","eq",1,!1,!1),"<":new de("<","lt",1,!1,!1),"<=":new de("<=","lte",1,!1,!1),">":new de(">","gt",1,!1,!1),">=":new de(">=","gte",1,!1,!1),",":new de(",","comma",0,!0,!1)},M={"(":new pe("(",0,!0,null,"round"),")":new pe(")",0,!1,null,"round"),"[":new pe("[",1,!0,function(){var e=new fe("vector");return e.is_function=!0,e},"square"),"]":new pe("]",1,!1,null,"square")},E=this.functions={cos:[v.cos,1],sin:[v.sin,1],tan:[v.tan,1],sec:[v.sec,1],csc:[v.csc,1],cot:[v.cot,1],acos:[v.acos,1],asin:[v.asin,1],atan:[v.atan,1],asec:[v.asec,1],acsc:[v.acsc,1],acot:[v.acot,1],atan2:[v.atan2,2],acoth:[j.acoth,1],asech:[j.asech,1],acsch:[j.acsch,1],sinh:[j.sinh,1],cosh:[j.cosh,1],tanh:[j.tanh,1],asinh:[j.asinh,1],sech:[j.sech,1],csch:[j.csch,1],coth:[j.coth,1],acosh:[j.acosh,1],atanh:[j.atanh,1],log10:[,1],exp:[,1],min:[function(){var t=[].slice.call(arguments);return k(t)?t[0]:T(t)?new fe(Math.min.apply(null,t)):s.SYMBOLIC_MIN_MAX&&L(t)?te("min",t):e.symfunction("min",t)},-1],max:[function(){var t=[].slice.call(arguments);return k(t)?t[0]:T(t)?new fe(Math.max.apply(null,t)):s.SYMBOLIC_MIN_MAX&&L(t)?te("max",t):e.symfunction("max",t)},-1],erf:[,1],floor:[,1],ceil:[,1],trunc:[,1],Si:[,1],step:[,1],rect:[,1],sinc:[,1],tri:[,1],sign:[function(t){return t.isConstant(!0)?new fe(Math.sign(ae(t))):e.symfunction("sign",arguments)},1],Ci:[,1],Ei:[,1],Shi:[,1],Chi:[,1],fib:[,1],fact:[Y,1],factorial:[Y,1],dfactorial:[,1],gamma_incomplete:[,[1,2]],round:[function(t,n){var r=n&&n.isConstant()||void 0===n;if(t.isConstant()&&r){var i,a,s,u;return i=t,n&&n.lessThan(0)&&(n=W(n),a=Number(t).toExponential().toString().split("e"),i=a[0],s=a[1]),u=new fe(o.round(i,Number(n||0))),e.multiply(u,e.pow(new fe(10),new fe(s||0)))}return e.symfunction("round",arguments)},[1,2]],mod:[J,2],pfactor:[function t(n){if(n.equals(Math.PI))return new fe(Math.PI);n=ae(n.clone());if(n.isConstant()){var r=new fe(1),i=n.toString();if(B(i)){var a=se.ifactor(i);for(var o in a){var s=a[o];r=e.multiply(r,e.symfunction("parens",[new fe(o).setPower(new le(s))]))}}else{var u=t(new fe(n.multiplier.num)),c=t(new fe(n.multiplier.den));r=e.multiply(e.symfunction("parens",[u]),e.symfunction("parens",[c]).invert())}}else r=e.symfunction("pfactor",arguments);return r},1],vector:[ge,-1],matrix:[ye,-1],imatrix:[function(e){return je.identity(e)},-1],parens:[H,-1],sqrt:[Q,1],nthroot:[ee,2],log:[ne,[1,2]],expand:[ce,1],abs:[W,1],invert:[Se,1],determinant:[be,1],size:[function(e){if(q(e))return[new fe(e.cols()),new fe(e.rows())];N("size expects a matrix or a vector")},1],transpose:[_e,1],dot:[we,2],cross:[function(e,t){if(F(e)&&F(t))return e.cross(t);N("function cross expects 2 vectors")},2],vecget:[function(e,t){return e.elements[t]},2],vecset:[function(e,t,n){return e.elements[t]=n,e},3],matget:[function(e,t,n){return e.elements[t][n]},3],matset:[function(e,t,n,r){return e.elements[t][n]=r,e},4],matgetrow:[function(e,t){return new je(e.elements[t])},2],matsetrow:[function(e,t,n){if(e.elements[t].length!==n.elements.length)throw new Error("Matrix row must match row dimensions!");var r=e.clone();return r.elements[t]=n.clone().elements,r},3],matgetcol:[function(e,t){t=Number(t);var n=je.fromArray([]);return e.each(function(e,r,i){i===t&&n.elements.push([e.clone()])}),n},2],matsetcol:[function(e,t,n){if(t=Number(t),e.rows()!==n.elements.length)throw new Error("Matrix columns must match number of columns!");return n.each(function(n,r){e.set(r-1,t,n.elements[0].clone())}),e},3],IF:[function(e,t,n){"boolean"!=typeof e&&U(e)&&(e=!!Number(e));return e?t:n},3],realpart:[function(e){return e.realpart()},1],imagpart:[function(e){return e.imagpart()},1],conjugate:[function(t){var n=t.realpart(),r=t.imagpart();return e.add(n,e.multiply(r.negate(),fe.imaginary()))},1],arg:[function(t){var n=t.realpart(),r=t.imagpart();return n.isConstant()&&r.isConstant()?new fe(Math.atan2(r,n)):e.symfunction("atan2",[r,n])},1],polarform:[function(t){var n,r,i,a;return n=fe.toPolarFormArray(t),a=n[1],r=n[0],i=e.parse(G("e^({0}*({1}))",s.IMAGINARY,a)),e.multiply(r,i)},1],rectform:[function(t){var n=t.clone();try{var r,i,a,o,s;return r=$(t,"e",!0),i=e.divide(r.x.power,fe.imaginary()),a=ae(v.tan(i)),e.pow(r.a,new fe(2)),o=a.getDenom(!0),s=a.getNum(),fe.hyp(s,o).equals(r.a)?e.add(o,e.multiply(fe.imaginary(),s)):n}catch(e){return n}},1],sort:[function(e,t){t=t?t.toString():"asc";var n=function(e){return e.group===c?e.multiplier:e.group===p?""===e.fname?n(e.args[0]):e.fname:e.group===f?e.power:e.value};return new xe((F(e)?e.elements:e.collectSymbols()).sort(function(e,r){var i=n(e),a=n(r);return"desc"===t?a-i:i-a}))},[1,2]]};this.error=N;var A,T=function(e){for(var t=0;t<e.length;t++)if(e[t].group!==c)return!1;return!0},L=function(e){for(var t=0;t<e.length;t++)if(!e[t].isPi()&&!e[t].isE()&&!e[t].isConstant(!0))return!1;return!0};this.override=function(e,n){t[e]||(t[e]=[]),t[e].push(this[e]),this[e]=n},this.restore=function(e){this[e]&&(this[e]=t[e].pop())},this.extend=function(e,t,n){var r=this;if("function"==typeof this[e]&&"function"==typeof t){var i=this[e];this[e]=function(e,a){return R(e)&&R(a)&&!n?i.call(r,e,a):t.call(r,e,a,i)}}},this.symfunction=function(e,t){var n=new fe(e);return n.group=p,"object"==typeof t&&(t=[].slice.call(t)),n.args=t,n.fname=e===y?"":e,n.updateHash(),n},this.callfunction=function(t,n,r){var i=E[t];i||N("Nerdamer currently does not support the function "+t);var a,o=i[1]||r,u=i[0];if(n instanceof Array||(n=void 0!==n?[n]:[]),-1!==o){var c=z(o),l=c?o[0]:o,f=c?o[1]:o,d=n.length,p=t+" requires a {0} of {1} arguments. {2} provided!";d<l&&N(G(p,"minimum",l,d)),d>f&&N(G(p,"maximum",f,d))}return u?a=u.apply(i[2],n):(u=function(e){for(var t=s.FUNCTION_MODULES,n=t.length,r=0;r<n;r++){var i=t[r];if(e in i)return i[e]}N("The function "+e+" is undefined!")}(t),a=s.PARSE2NUMBER&&T(n)?oe(u.apply(u,n)):e.symfunction(t,n)),a},this.operator_filter_regex=(A="^\\"+Object.keys(S).filter(function(e){if(1===e.length)return e}).join("\\"),new RegExp("(["+A+"])\\s+(["+A+"])")),this.parseTree=function(t,n){for(var i=[],a=t.length,o=0;o<a;o++){var u=t[o];if(u.is_prefix_operator||u.is_postfix)i.push(u.operation(i.pop()));else if(u.is_operator){var c=i.pop(),l=i.pop();z(c)&&e.error('Unrecognized function "'+l.value+'"'),void 0!==l||u.is_postfix||e.error(u+" is not a valid postfix opertor"),i.push(this[u.fn](l,c))}else if(u.value in E)i.push(e.callfunction(u.value,i.pop()));else if(""===u)i.push(new fe(0));else{var f=u;u in s.ALIASES&&(u=e.parse(s.ALIASES[u])),u in r?u=new fe(r[u]):u in n?u=n[u].clone():u in _&&(u=_[u].clone()),u.unsubbed=f,i.push(u)}}return i[0]||new fe(0)},this.parse=function(t,n,r){if(n){for(var a in n)n[a]=e.parse(n[a]);i=n}else i={};s.PARSE2NUMBER&&(i.e=new fe(Math.E),i.pi=new fe(Math.PI));for(var o,u=String(t);o=this.operator_filter_regex.exec(u);)try{var c=o[1],l=o[2];P(c),P(l),u=u.replace(o[0],c+"*"+l)}catch(u){break}for(u=u.split(" ").join("").replace(/\d+\.*\d*e\+?\-?\d+/gi,function(e){return C(e)}).replace(/([\+\-\/\*]*[0-9]+)([a-z_ABEZHIKMNoOPTX]+[\+\-\/\*]*)/gi,function(){var e=arguments[4],t=arguments[1],n=arguments[2],r=arguments[3],i="",a="*";return e.charAt(r).match(/[\+\-\/\*]/)||(i=e.charAt(r-1)),i.match(/[a-z]/i)&&(a=""),t+a+n}).replace(/([a-z0-9_]+)/gi,function(e,t){return!1!==s.USE_MULTICHARACTER_VARS||t in E?t:isNaN(t)?t.split("").join("*"):t}).replace(/\)\(/g,")*(")||"0";;){if(u===(u=u.replace(/([a-z0-9_]+)(\()|(\))([a-z0-9]+)/gi,function(e,t,n,r,i){var a=t||r,o=n||i;return a in E?a+o:a+"*"+o})))break}var f,d,p=u.length,h=[],m=[],g=0,v=[0,0],y=[],b=!0,w=function(e){e!==g&&(f=new fe(u.substring(g,e)),h.push(f),b=!1)},O=function(e){e.is_prefix||N(e+" is not a valid prefix operator")},x=function(e,t){return t?e.val===t.val?new he(S["+"]):new he(S["-"]):e},j=function(e){var t=m.length;t&&m[t-1].is_prefix_operator&&m.push(x(e,m.pop())),m.push(e)},_=function(e){if(y.length){for(var t=y.pop();y.length;)t=x(t,y.pop());e?h.push(t):m.push(t)}},k=0;for(k=0;k<p;k++){var A=u.charAt(k);if(A in S){w(k);for(var D=k;u.charAt(k+1)in S;)k++;for(var T=k+1,R=u.substring(D,T);!(R in S);){var L=R.length-1,I=S[R.charAt(L)];R=R.substring(0,L);try{O(I),y.push(new he(I))}catch(u){for(var F,q=R.length,U=0;U<q;U++)(!(F=S[R.charAt(U)])||F&&!F.is_postfix)&&N(u.message);for(var z="";;){if(""===R)break;if(R in S)h.push(S[R]),R=z,z="";else{L=R.length-1;z+=R.charAt(L),R=R.substring(0,L)}}R=I.val;break}}for(d=S[R],g=T;;){for(var B=m.length,V=m[B-1];void 0!==V&&V.is_prefix_operator;)V=m[--B-1];if(0===B||!(d.left_assoc&&d.precedence<=V.precedence||!d.left_assoc&&d.precedence<V.precedence))break;h.push(m.pop())}if(b){O(d);for(I=new he(d);y.length;)I=x(I,y.pop());j(I)}else{(B=m.length)&&m[B-1].is_prefix_operator&&d.left_assoc&&h.push(m.pop()),m.push(d),_()}}else if(A in M){var H=M[A];if(H.open){if(v[H.bracket_id]++,g!==k){var G=new fe(u.substring(g,k));G.is_function=!0,m.push(G)}H.fn&&m.push(H.fn()),b=!0,m.push(H),g=k+1}else{for(v[H.bracket_id]--,w(k);;){var W=m.pop();if(void 0===W&&N("Missing open bracket for bracket '"+H+"'!"),W.bracket_id===H.bracket_id)break;h.push(W)}(B=m.length)&&m[B-1].is_function&&h.push(m.pop()),g=k+1}}}for(w(p);m.length;)h.push(m.pop());for(k=0;k<v.length;k++)if(v[k]>0){var X;for(H in M)M[H].bracket_id!==k||M[H].open||(X=M[H]);N('Missing close bracket. Expected "'+X+'"!')}return r?h:this.parseTree(h,i)},this.toObject=function(t){for(var n=[[]],r=t.split(" ").join(""),i=[],a=0,o=n[0],s=function(e){""!==e&&o.push(new fe(e))},u=0,c=r.length;u<c;u++){var l=r.charAt(u);if(l in S)s(r.substring(a,u)),o.push(l),a=u+1;else if(l in M){var f=M[l];if(f.open)i.push(r.substring(a,u)),o=[],n.push(o),a=u+1;else{s(r.substring(a,u));var d,p=n.pop(),h=i.pop();h in E?d=e.symfunction(h,p):""===h?(d=p).type=f.type:d=h,(o=n[n.length-1]).push(d),a=u+1}}}return s(r.substring(a,u)),n[0]};var I=function(e){for(var t=0,n=[[]],r=0,i=e.length;r<i;r++)","===e[r]?n[++t]=[]:n[t].push(e[r]);return n},V=function(e){return e.replace(/^\\left\((.+)\\right\)$/g,function(e,t){return t||e})};function H(t){return s.PARSE2NUMBER?t:e.symfunction("parens",[t])}function W(t){if(t.multiplier.lessThan(0)&&t.multiplier.negate(),t.isImaginary()){var n=t.realpart(),r=t.imagpart();if(n.isConstant()&&r.isConstant())return Q(e.add(e.pow(n,new fe(2)),e.pow(r,new fe(2))))}else if(U(t)||K(t.power))return t;if(t.isComposite()){var i=[];t.each(function(e){i.push(e.multiplier)}),se.QGCD.apply(null,i).lessThan(0)&&(t.multiplier=t.multiplier.multiply(new le(-1)),t.distributeMultiplier())}return e.symfunction(w,[t])}function Y(t){return s.PARSE2NUMBER&&t.isConstant()?oe(B(t)?se.bigfactorial(t):se.gamma(t.multiplier.add(new le(1)).toDecimal())):t.equals(.5)?e.parse("sqrt(pi)/2"):e.symfunction(O,[t])}function J(t,n){if(t.isConstant()&&n.isConstant()){var r=new fe(1);return r.multiplier=r.multiplier.multiply(t.multiplier.mod(n.multiplier)),r}var i=e.divide(t.clone(),n.clone());return B(i)?new fe(0):e.symfunction("mod",[t,n])}function Q(t){if(""===t.fname&&t.power.equals(1)&&(t=t.args[0]),s.PARSE2NUMBER){if(t.isConstant()&&!t.multiplier.lessThan(0))return new fe(Math.sqrt(t.multiplier.toDecimal()));if(t.isImaginary())return u.sqrt(t)}var n,r,i=t.isConstant();if(t.group===m&&t.isLinear()){var a=Q(fe(t.multiplier));for(var o in t.symbols){var c=t.symbols[o];a=e.multiply(a,Q(c))}r=a}else if(t.fname===b){o=t.args[0];var l=t.multiplier;o.setPower(t.power.multiply(new le(.25))),r=o,l.equals(1)||(r=e.multiply(Q(e.parse(l)),r))}else if(t.power.isInteger()){i&&t.multiplier.lessThan(0)&&(n=fe.imaginary(),t.multiplier=t.multiplier.abs());var f=t.multiplier.toDecimal(),d=Math.abs(f),p=Math.sqrt(d);if(B(p))a=new fe(p);else if(B(f)){var h=se.ifactor(f),g=1;for(var c in h){var v=(w=h[c])-w%2;if(v){var y=Math.pow(c,v);g*=Math.pow(c,v/2),f/=y}}a=e.multiply(e.symfunction(b,[new fe(f)]),new fe(g))}else{var w=t.multiplier.num.toString(),O=t.multiplier.den.toString(),x=Math.sqrt(w),j=Math.sqrt(O);a=e.multiply("1"===w?new fe(1):B(x)?new fe(x):e.symfunction(b,[new fe(w)]),"1"===O?new fe(1):B(j)?new fe(j).invert():e.symfunction(b,[new fe(O)]).invert())}r=(t=t.toUnitMultiplier(!0)).isOne()?t:K(t.power.toString())?e.pow(t.clone(),new fe(.5)):e.symfunction(b,[t]),a&&(r=e.multiply(a,r)),n&&(r=e.multiply(n,r))}else t.setPower(t.power.multiply(new le(.5))),r=t;return r}function ee(t,r,i,a){if(void 0===a&&(a=!0),i=i||25,R(r)||(r=e.parse(r)),B(t)&&r.isConstant()){var o,u=t.sign(),c=(t=W(t))+"-"+r;if(c in s.CACHE.roots?(o=new n(s.CACHE.roots[c]),K(r)||(o=o.multiply(u))):o=t<0x10000000000000000?le.create(Math.pow(t,1/r)):se.nthroot(t,r),B(o)||s.PARSE2NUMBER)return new fe(a?o:o.toDecimal(i))}return 2===Number(r)?e.sqrt(t):e.symfunction("nthroot",arguments)}function te(e,t){var n,r,i;for(t.map(function(e){e.numVal=ae(e).multiplier});;){if((n=t.length)<2)return t[0];r=t.pop(),i=t[n-2],("min"===e?r.numVal<i.numVal:r.numVal>i.numVal)&&(t.pop(),t.push(r))}}function ne(t,n){var r;if(t.fname===b&&t.multiplier.equals(1))return e.divide(ne(t.args[0]),new fe(2));if(t.equals(0))throw new ve("log(0) is undefined!");if(t.isImaginary())return u.evaluate(t,"log");if(t.isConstant()&&void 0!==n&&n.isConstant())r=new fe(Math.log(t)/Math.log(n));else if(t.group===d&&t.power.multiplier.lessThan(0)||"-1"===t.power.toString())t.power.negate(),r=ne(t).negate();else if("e"===t.value&&t.multiplier.equals(1)){var i=t.power;r=R(i)?i:new fe(i)}else if(t.group===p&&"exp"===t.fname){var a=t.args[0];r=t.multiplier.equals(1)?e.multiply(a,new fe(t.power)):e.symfunction("log",[t])}else if(s.PARSE2NUMBER&&U(t)){var o;t.multiplier.lessThan(0)&&(t.negate(),o=e.multiply(new fe(Math.PI),new fe("i"))),r=new fe(Math.log(t.multiplier.toDecimal())),o&&(r=e.add(r,o))}else{t.power.equals(1)||(a=t.group===d?t.power:new fe(t.power),t.toLinear()),r=arguments.length>1&&k(arguments)?new fe(1):e.symfunction("log",arguments),a&&(r=e.multiply(a,r))}return r}function ie(e){var t=e%2;return t<0&&(t=2+t),t>=0&&t<=.5?1:t>.5&&t<=1?2:t>1&&t<=1.5?3:4}function oe(e){if(!isFinite(e)){var t=Math.sign(e),n=new fe(String(Math.abs(e)));return n.multiplier=n.multiplier.multiply(new le(t)),n}if(R(e))return e;if("number"==typeof e)try{e=le.simple(e)}catch(t){e=new le(e)}var r=new fe(0);return r.multiplier=e,r}function ce(t){if(t.group===p&&""===t.fname)return e.expand(t.args[0]);if(!t.symbols)return t;var n=t.clone();try{var r=t.power,i=t.multiplier,a=Number(r);if(!t.symbols)return t;for(var o in t.symbols){var s=t.symbols[o];t.symbols[o]=ce(s)}if(t=e.parse(t),B(a)&&a>0&&t.isComposite()){var u=new fe(0);for(var s in t.symbols){var c=t.symbols[s];c.power.greaterThan(1)&&(c=e.expand(c)),u=e.add(u,c)}for(var l=a-1,f=u.clone(),h=0;h<l;h++){var g=new fe(0);for(var s in u.symbols){var v=u.symbols[s];for(var y in f.symbols){var b=e.multiply(v.clone(),f.symbols[y]);b.group===m&&(b=e.expand(b)),g=e.add(g,b)}}f=g}if(!i.equals(1))for(var o in f.symbols){(s=f.symbols[o]).multiplier=s.multiplier.multiply(i),s.isComposite()&&s.distributeMultiplier(),t.symbols[o]=s}return f}if(t.group===m){var w=!1,O=t.power.clone(),x=t.power.sign();for(var s in t.symbols){var j=t.symbols[s];if(j.isComposite()){w=!0;break}R(j.power)||R(O)?(j.power=e.multiply(j.power,fe(O)),j.group=d):j.power=j.power.multiply(O)}if(t.toLinear(),t=e.parse(t.text()),!w)return t;f=new fe(0);var _=[],S=new fe(t.multiplier);for(var o in t.symbols){if((s=t.symbols[o]).group!==d)if(s.isComposite()){r=s.power;var M=!1;B(r)&&r<0&&(s.power.negate(),M=!0),M?(s.power.negate(),S=e.multiply(S,s)):_.push(s)}else S=e.multiply(S,s)}var E=_.length;f=_[0];for(h=1;h<E;h++){g=new fe(0),o=_[h];for(var k in f.symbols){s=f.symbols[k];for(var N in o.symbols){y=o.symbols[N];var A=e.multiply(s.clone(),y.clone());g=e.add(g,A)}}f=g}var P=new fe(0);for(var o in f.symbols){s=f.symbols[o];P=e.add(P,ce(e.multiply(S,s)))}P.power=P.power.multiply(O.abs()),t=e.expand(P),x<0&&t.invert()}}catch(e){return n}return t}function ge(){return new xe([].slice.call(arguments))}function ye(){return je.fromArray(arguments)}function be(e){return q(e)?e.determinant():e}function we(e,t){if(F(e)&&F(t))return e.dot(t);N("function dot expects 2 vectors")}function _e(e){if(q(e))return e.transpose();N("function transpose expects a matrix")}function Se(e){if(q(e))return e.invert();N("invert expects a matrix")}function Me(e){if(!R(e.power)&&e.power.absEquals(.5)){var t=e.power.sign();return Q(e.group===l?new fe(e.value):e.toLinear()).setPower(new le(t))}return e}function Ee(e){if(e.group===l){var t=e.group===c?e.multiplier.toDecimal():e.value,n=function(e){if(D(e))return[e];for(var t=e,n=1,r=[];n<t;){var i=e/n,o=Math.floor(i);i-o<=2.220446049250313e-16&&n>1&&(-1!==a.indexOf(n)&&r.push(n),t=o),n++}return r.sort(function(e,t){return e-t})}(t)[0],r=new le(Math.log(t)/Math.log(n)).multiply(e.power);if(r.den>e.power.den)return e;e=B(r)?fe(Math.pow(n,r)):new fe(n).setPower(r)}return e}this.toTeX=function(e){var t="string"==typeof e?this.toObject(e):e,n=[];if(z(t)){for(var r,i,a=[],o=0;o<t.length;o++)r=t[o],"^"===t[o+1]?(i=t[o+2],a.push(Oe.braces(this.toTeX([r]))+"^"+Oe.braces(this.toTeX([i]))),o+=2):a.push(r);t=a}o=0;for(var s=t.length;o<s;o++){var u=t[o];if("*"===u&&(u="\\cdot"),R(u))if(u.group===p){var c,l=u.fname;if(l===b)c="\\sqrt"+Oe.braces(this.toTeX(u.args));else if(l===w)c=Oe.brackets(this.toTeX(u.args),"abs");else if(l===y)c=Oe.brackets(this.toTeX(u.args),"parens");else if("log10"===l)c="\\log_{10}\\left( "+this.toTeX(u.args)+"\\right)";else if("integrate"===l){var f=I(u.args);c="\\int "+(d=Oe.braces(this.toTeX(f[0])))+"\\, d"+(h=this.toTeX(f[1]))}else if("defint"===l){f=I(u.args);var d=Oe.braces(this.toTeX(f[0])),h=this.toTeX(f[1]);c="\\int\\limits_{"+this.toTeX(f[2])+"}^{"+this.toTeX(f[3])+"} "+d+"\\, d"+h}else if("diff"===l){f=I(u.args),h="",d=Oe.braces(this.toTeX(f[0]));if(1==f.length){var m=[];for(v=0;v<f[0].length;v++)3===f[0][v].group&&m.push(f[0][v].value);h=(m=m.sort()).length>0?"\\frac{d}{d "+m[0]+"}":"\\frac{d}{d x}"}else h=2==f.length?"\\frac{d}{d "+f[1]+"}":"\\frac{d^{"+f[2]+"}}{d "+this.toTeX(f[1])+"^{"+f[2]+"}}";c=h+"\\left("+d+"\\right)"}else if("sum"===l||"product"===l){var g=[[],[],[],[]],v=0;for(o=0;o<u.args.length;o++)","!==u.args[o]?g[v].push(u.args[o]):v++;c=("sum"===l?"\\sum_":"\\prod_")+Oe.braces(this.toTeX(g[1])+" = "+this.toTeX(g[2])),c+="^"+Oe.braces(this.toTeX(g[3]))+Oe.braces(this.toTeX(g[0]))}else c=l===O||l===x?this.toTeX(u.args)+(l===O?"!":"!!"):Oe.latex(u);n.push(c)}else n.push(Oe.latex(u));else z(u)?n.push(Oe.brackets(this.toTeX(u))):"/"===u?n.push(Oe.frac(V(n.pop()),V(this.toTeX([t[++o]])))):n.push(u)}return n.join(" ")},this.sqrt=Q,this.nthroot=ee,this.expand=ce,this.clean=function t(n){var r,i=n.group;if(i===g){var a=n.getNum(),o=n.getDenom()||new fe(1),s=Number(n.power),u=new fe(1);if(1===Math.abs(s)){o.each(function(n){n.group===m?u=e.multiply(u,t(n.getDenom())):n.power.lessThan(0)&&(u=e.multiply(u,t(n.clone().toUnitMultiplier())))});var c,l=new fe(0);o.each(function(t){l=e.add(e.divide(t,u.clone()),l)}),u.invert(),a.isComposite()?(c=new fe(0),a.each(function(n){c=e.add(e.multiply(t(n),u.clone()),c)})):c=e.multiply(u,a),r=e.divide(c,l)}}else i===m?(r=new fe(1),n.each(function(t){r=e.multiply(r,e.clean(t))})):i===p&&1===n.args.length&&n.args[0].isConstant()&&(r=re("PARSE2NUMBER",function(){return e.parse(n)},!0));return r||(r=n),r},this.ext={log:ne,sqrt:Q,abs:W,vector:ge,matrix:ye,parens:H,determinant:be,dot:we,invert:Se,transpose:_e},this.mapped_function=function(){for(var t={},n=this.params,r=0;r<n.length;r++)t[n[r]]=arguments[r];return e.parse(this.body,t)},this.add=function(t,n){var r=R(t),i=R(n);if(r&&i){if(t.isInfinity||n.isInfinity){var a=t.multiplier.lessThan(0),o=n.multiplier.lessThan(0);if(t.isInfinity&&n.isInfinity&&a!==o)throw new ve("("+t+")+("+n+") is not defined!");var u=fe.infinity();return o&&u.negate(),u}if(t.isComposite()&&t.isLinear()&&n.isComposite()&&n.isLinear()&&(t.distributeMultiplier(),n.distributeMultiplier()),t.multiplier.equals(0))return n;if(n.multiplier.equals(0))return t;if(t.isConstant()&&n.isConstant()&&s.PARSE2NUMBER)return S=new fe(t.multiplier.add(n.multiplier).toDecimal(s.PRECISION));var v=t.group,y=n.group,w=t.power.toString(),O=n.power.toString();if(v<y||v===y&&w>O&&O>0)return this.add(n,t);if(v===m&&y===h&&t.value===n.value){var x=t;t=n,n=x,v=t.group,y=n.group,w=t.power.toString(),O=n.power.toString()}var j,_,S,M=w===O,E=t.value,k=n.value,A=t.isComposite(),P=n.isComposite();if(A&&(j=ue(t,"hash")),P&&(_=ue(n,"hash")),v===g&&y===g&&n.isLinear()&&!t.isLinear()&&j!==_)return this.add(t,n);v===h&&y===h&&(E=j,k=_);var C=v===l&&y===c,D=t.value===n.multiplier.toString(),T=E===k||j===_&&void 0===!j||C&&D;if(T&&M&&v===y)if(C&&(n=n.convert(l)),v!==h||y!==f&&y!==l)if(S=t,t.multiplier.isOne()&&n.multiplier.isOne()&&v===g&&t.isLinear()&&n.isLinear())for(var L in n.symbols){var I=n.symbols[L];S.attach(I)}else S.multiplier=S.multiplier.add(n.multiplier);else t.distributeMultiplier(),S=t.attach(n);else if(T&&v!==h)(S=fe.shell(h).attach([t,n])).value=v===h?j:E;else if(A&&t.isLinear()){var U=v===y,z=v===h&&y===h;if(z&&(U=t.value===n.value),t.distributeMultiplier(),n.isComposite()&&n.isLinear()&&U){for(var L in n.distributeMultiplier(),n.symbols){I=n.symbols[L];t.attach(I)}S=t}else z&&t.value!==_||v===h&&!T?(S=fe.shell(g).attach([t,n])).updateHash():S=t.attach(n)}else{if(v===p&&t.fname===b&&y!==d&&n.power.equals(.5)){var B=n.multiplier.clone();(n=Q(n.toUnitMultiplier().toLinear())).multiplier=B}2===t.length&&2===n.length&&K(t.power)&&K(n.power)?S=e.add(ce(t),ce(n)):(S=fe.shell(g).attach([t,n])).updateHash()}if(S.multiplier.equals(0)&&(S=new fe(0)),1===S.length){B=S.multiplier;(S=X(S.symbols)).multiplier=S.multiplier.multiply(B)}return S}if(i&&!r){x=t;t=n,n=x,x=i,i=r,r=x}var V=q(n);if(r&&V)n.eachElement(function(n){return e.add(t.clone(),n)});else if(q(t)&&V)n=t.add(n);else if(r&&F(n))n.each(function(r,i){i--,n.elements[i]=e.add(t.clone(),n.elements[i])});else if(F(t)&&F(n))n.each(function(r,i){i--,n.elements[i]=e.add(t.elements[i],n.elements[i])});else{if(F(t)&&q(n))return e.add(n,t);if(q(t)&&F(n)){if(n.elements.length===t.rows()){var H=new je,G=t.cols();return n.each(function(n,r){for(var i=[],a=0;a<G;a++)i.push(e.add(t.elements[r-1][a].clone(),n.clone()));H.elements.push(i)}),H}N("Dimensions must match!")}}return n},this.subtract=function(t,n){var r,i=i=R(t),a=R(n);if(i&&a)return this.add(t,n.negate());if(a&&(r=n,n=t,t=r,i=a),i&&F(n))n=n.map(function(n){return e.subtract(n,t.clone())});else if(F(t)&&F(n))t.dimensions()===n.dimensions()?n=t.subtract(n):e.error("Unable to subtract vectors. Dimensions do not match.");else if(q(t)&&F(n)){if(n.elements.length===t.rows()){var o=new je,s=t.cols();return n.each(function(n,r){for(var i=[],a=0;a<s;a++)i.push(e.subtract(t.elements[r-1][a].clone(),n.clone()));o.elements.push(i)}),o}N("Dimensions must match!")}else{if(F(t)&&q(n)){o=n.clone().negate();return e.add(o,t)}q(t)&&q(n)&&(n=t.subtract(n))}return n},this.multiply=function(t,n){var r=R(t),i=R(n);if(r&&i){if(t.isInfinity||n.isInfinity){if(t.equals(0)||n.equals(0))throw new ve(t+"*"+n+" is undefined!");if(n.power.lessThan(0))throw new ve("Infinity/Infinity is not defined!");var a=t.multiplier.multiply(n.multiplier).sign(),o=fe.infinity();if(t.isConstant()||n.isConstant()||t.isInfinity&&n.isInfinity)return a<0&&o.negate(),o}if(t.isConstant()&&n.isConstant()&&s.PARSE2NUMBER)return new fe(t.multiplier.multiply(n.multiplier).toDecimal());if(t.isOne())return n.clone();if(n.isOne())return t.clone();if(t.multiplier.equals(0)||n.multiplier.equals(0))return new fe(0);if(n.group>t.group&&n.group!==g)return this.multiply(n,t);if(t.group===m&&n.group===h&&t.value===n.value){var u=t;t=n,n=u}var v=t.group,y=n.group,w=n.multiplier.num,O=n.multiplier.den;if(v===p&&t.fname===b&&!n.isConstant()&&t.args[0].value===n.value){var x=t.power;(t=t.args[0].clone()).setPower(new le(.5).multiply(x)),v=t.group}var j=t.value,_=n.value,S=(a=new le(t.multiplier.lessThan(0)?-1:1),v===l&&y===c&&n.multiplier.equals(t.value)),M=S?new le(1).multiply(t.multiplier).abs():t.multiplier.multiply(n.multiplier).abs(),E=t.clone().toUnitMultiplier();if(n=n.clone().toUnitMultiplier(!0),j===_&&v===h&&v===y&&(j=t.text("hash"),_=n.text("hash")),y===d&&n.previousGroup===h&&v===h&&(j=ue(t,"hash",d)),j!==_&&!S||v===h&&(y===f||y===l||y===p)||v===h&&y===m)if(v===m&&t.isLinear())if(y===m&&n.distributeExponent(),y===m&&n.isLinear()){for(var k in n.symbols){var A=n.symbols[k];E=E.combine(A)}E.multiplier=E.multiplier.multiply(n.multiplier)}else E.combine(n);else if(v!==c){if(v===m)E.distributeExponent(),E.combine(n);else if(!n.isOne()){var P=n.multiplier.clone();n.toUnitMultiplier(),(E=fe.shell(m).combine([E,n])).multiplier=E.multiplier.multiply(P)}}else E=n.clone().toUnitMultiplier();else{var C=t.power,D=n.power,T=R(C),L=R(D),I=T||L;if(v===h&&y!==h&&n.previousGroup!==h&&C.equals(1))E=new fe(0),t.each(function(t){E=e.add(E,e.multiply(t,n.clone()))},!0);else{if(E.power=I?e.add(R(C)?C:new fe(C),R(D)?D:new fe(D)):v===c?C:C.add(D),E.power.equals(0)&&(E=E.convert(c)),I&&E.convert(d),t.imaginary&&n.imaginary)K(E.power%2)&&(E=new fe(1),M.negate());E.group!==d&&E.previousGroup&&(E.previousGroup=void 0),E.multiplier=E.multiplier.multiply(n.multiplier)}}if(E.group===l){var U=Math.log(E.value),z=Math.log(w)/U,V=Math.log(O)/U,H=M.num/w,G=M.den/O;0!==z&&B(z)&&B(H)&&(E.power=E.power.add(new le(z)),M.num/=w),0!==V&&B(V)&&B(G)&&(E.power=E.power.subtract(new le(V)),M.den/=O)}if(1===E.length){u=E.multiplier;(E=X(E.symbols)).multiplier=E.multiplier.multiply(u)}var W=E.power.toString();if(K(W)&&E.fname===b){var Y=E.power;E=E.args[0],E=e.multiply(new fe(M),e.pow(E,new fe(Y.divide(new le(2)))))}else E.multiplier=E.multiplier.multiply(M).multiply(a),E.group===g&&E.isImaginary()&&E.distributeMultiplier();return E.group===l&&B(E.power.toDecimal())&&(E=E.convert(c)),E}i&&!r&&(u=t,t=n,n=u,u=i,i=r,r=u);var $=q(n),J=q(t);if(r&&$)n.eachElement(function(n){return e.multiply(t.clone(),n)});else if(J&&$)n=t.multiply(n);else if(r&&F(n))n.each(function(r,i){i--,n.elements[i]=e.multiply(t.clone(),n.elements[i])});else if(F(t)&&F(n))n.each(function(r,i){i--,n.elements[i]=e.multiply(t.elements[i],n.elements[i])});else{if(F(t)&&q(n))return this.multiply(n,t);if(q(t)&&F(n)){if(n.elements.length===t.rows()){var Q=new je,Z=t.cols();return n.each(function(n,r){for(var i=[],a=0;a<Z;a++)i.push(e.multiply(t.elements[r-1][a].clone(),n.clone()));Q.elements.push(i)}),Q}N("Dimensions must match!")}}return n},this.divide=function(t,n){var r=R(t),i=R(n);if(r&&i){var a;if(n.equals(0))throw new me("Division by zero not allowed!");return t.isConstant()&&n.isConstant()?(a=t.clone()).multiplier=a.multiplier.divide(n.multiplier):(n.invert(),a=e.multiply(t,n)),a}var o=F(t),s=F(n);if(r&&s)n=n.map(function(n){return e.divide(t.clone(),n)});else if(o&&i)n=t.map(function(t){return e.divide(t,n.clone())});else if(o&&s)t.dimensions()===n.dimensions()?n=n.map(function(n,r){return e.divide(t.elements[--r],n)}):e.error("Cannot divide vectors. Dimensions do not match!");else{var u=q(t),c=q(n);u&&i?(t.eachElement(function(t){return e.divide(t,n.clone())}),n=t):u&&c?t.rows()===n.rows()&&t.cols()===n.cols()?t.eachElement(function(t,r,i){return e.divide(t,n.elements[r][i])}):e.error("Dimensions do not match!"):u&&s&&(t.cols()===n.dimensions()?(t.eachElement(function(t,r,i){return e.divide(t,n.elements[r].clone())}),n=t):e.error("Unable to divide matrix by vector."))}return n},this.pow=function(t,n){var r=R(t),i=R(n);if(r&&i){if(t.isInfinity||n.isInfinity){if(t.isInfinity&&n.isInfinity)throw new ve("("+t+")^("+n+") is undefined!");if(t.isConstant()&&n.isInfinity){if(t.equals(0)){if(n.lessThan(0))throw new ve("0^Infinity is undefined!");return new fe(0)}if(t.equals(1))throw new ve("1^"+n.toString()+" is undefined!");if(n.lessThan(0))return new fe(0);if(!t.lessThan(0))return fe.infinity()}if(t.isInfinity&&n.isConstant()){if(n.equals(0))throw new ve(t+"^0 is undefined!");return n.lessThan(0)?new fe(0):e.multiply(fe.infinity(),e.pow(new fe(t.sign()),n.clone()))}}var a=t.equals(0);if(a&&n.equals(0)&&N("0^0 is undefined!"),a&&n.isConstant()&&n.multiplier.greaterThan(0))return new fe(0);var o,u,l,f,h,m=n.isConstant(),g=t.isConstant(),O=n.isInteger(),x=t.multiplier,j=t.clone();if(g&&m&&t.equals(0)&&n.lessThan(0))throw new ve("Division by zero is not allowed!");if(s.PARSE2NUMBER&&g&&m&&t.sign()<0&&Z(n))return o=Math.PI*n,D=new fe(Math.cos(o)),T=e.multiply(fe.imaginary(),new fe(Math.sin(o))),e.add(D,T);if(s.PARSE2NUMBER&&t.isImaginary()&&m)if(D=t.realpart(),T=t.imagpart(),D.isConstant("all")&&T.isConstant("all"))return u=new fe(Math.atan2(T,D)*n),C=e.pow(fe.hyp(D,T),n),l=e.multiply(C.clone(),e.trig.cos(u.clone())),f=e.multiply(C,e.trig.sin(u)),e.add(l,e.multiply(fe.imaginary(),f));if(j.toUnitMultiplier(),j.group!==p||j.fname!==b||m){var _=x.sign();Z(n)&&_<0&&(j.negate(),(j=e.symfunction(y,[j])).negate()),j.multiplyPower(n)}else{(X=j.args[0]).multiplyPower(new fe(.5)),X.multiplier.multiply(j.multiplier),X.multiplyPower(n),j=X}if(g&&m&&s.PARSE2NUMBER)_<0&&(t.negate(),n.multiplier.den.equals(2)?h=new fe(s.IMAGINARY):B(n.multiplier)?h=K(n.multiplier)?new fe(1):new fe(-1):K(n.multiplier.den)?h=e.pow(e.symfunction(y,[new fe(_)]),n.clone()):(_=Math.pow(_,n.multiplier.num),h=new fe(Math.pow(t,n)*_))),j=new fe(Math.pow(t.multiplier.toDecimal(),n.multiplier.toDecimal())),h&&(j=e.multiply(j,h));else if(O&&!x.equals(1)){var S=n.multiplier.toDecimal(),M=Math.sign(S);S=Math.abs(S);var E=new le(1);E.num=x.num.pow(S),E.den=x.den.pow(S),M<0&&E.invert(),j.multiplier=j.multiplier.multiply(E)}else{_=t.sign();if(n.isConstant()&&t.isConstant()&&!n.multiplier.den.equals(1)&&_<0)if(n.multiplier.den.equals(2)){var k=new fe(s.IMAGINARY);t.negate(),n.lessThan(0)&&(k.negate(),n.negate()),j=e.multiply(e.pow(t,n),k)}else{(L=t.clone()).multiplier.negate(),j=e.pow(e.symfunction(y,[new fe(-1)]),n.clone());var A=e.pow(new fe(L.multiplier.num),n.clone()),P=e.pow(new fe(L.multiplier.den),n.clone()),C=e.divide(A,P);j=e.multiply(j,C)}else if(s.PARSE2NUMBER&&n.isImaginary()){var D,T,L,I,U,z;L=t.clone().toLinear(),D=n.realpart(),T=n.imagpart(),I=e.pow(L.clone(),D),U=v.cos(e.multiply(T.clone(),ne(L.clone()))),z=e.multiply(v.sin(e.multiply(T,ne(L))),fe.imaginary()),j=e.multiply(I,e.add(U,z)),j=e.expand(e.parse(j))}else{var V=t.group===c&&_<0,H=Me(new fe(V?x.num:Math.abs(x.num)).setPower(n.clone())),G=Me(new fe(x.den).setPower(n.clone()).invert());if(t.imaginary)if(O){var X;X=Math.sign(n),S=W(n),j=new fe(K(ee=S%4)?-1:s.IMAGINARY),(0===ee||X<0&&1===ee||X>0&&3===ee)&&j.negate()}else{var Y=n.multiplier.multiply(le.quick(1,2)),$=Math.pow(-1,Y.num);j=K(Y.den)?new fe(-1).setPower(Y,!0):new fe($)}if(_<0&&!V&&j.negate(),m&&t.group!==d){var J=K(n.multiplier.den),Q=K(t.power),ee=j.power.toDecimal(),te=K(ee);if(J&&Q&&!te){if(1===ee)j=e.symfunction(w,[j]);else if(B(ee))j=e.multiply(e.symfunction(w,[j.clone().toLinear()]),j.clone().setPower(new le(ee-1)));else{S=j.power;j=e.symfunction(w,[j.toLinear()]).setPower(S)}s.POSITIVE_MULTIPLIERS&&j.fname===w&&(j=j.args[0])}}}}if(j=Me(j),H&&G&&(j=e.multiply(j,Ee(e.multiply(H,G)))),j.fname===b){var re=j.group===d,ie=re?j.power.multiplier.toString():j.power.toString();if(K(ie)){var ae=re?e.divide(j.power,new fe(2)):new fe(j.power.divide(new le(2)));x=j.multiplier;(j=e.pow(j.args[0],ae)).multiplier=j.multiplier.multiply(x)}}else if(!s.IGNORE_E&&j.isE()&&j.group===d&&j.power.contains("pi")&&j.power.contains(s.IMAGINARY)){var oe=j.multiplier,se=j.power.multiplier;j=new fe(K(se.num)?oe:oe.negate()),j=e.pow(j,new fe(se.den).invert())}return j}return F(t)&&i?t=t.map(function(t){return e.pow(t,n.clone())}):q(t)&&i&&t.eachElement(function(t){return e.pow(t,n.clone())}),t},this.comma=function(e,t){var n=e instanceof Array,r=t instanceof Array,i=n&&e[0]instanceof Array;return n&&i||n&&!r?e.push(t):e=[e,t],e},this.equals=function(e,t){return e.group===f||e.isLinear()||N("Cannot set equality for "+e.toString()),_[e.value]=t.clone(),t},this.mod_or_percent=function(t,n){return t&&n?J(t,n):e.percent(n)},this.percent=function(t){return e.divide(t,new fe(100))},this.percent_add=function(t,n){return e.add(e.percent(t),n)},this.percent_subtract=function(t,n){return e.subtract(e.percent(t),n)};var ke=function(e){return new fe(!0===e?1:0)};this.eq=function(e,t){return ke(e.equals(t))},this.gt=function(e,t){return ke(e.gt(t))},this.gte=function(e,t){return ke(e.gte(t))},this.lt=function(e,t){return ke(e.lt(t))},this.lte=function(e,t){return ke(e.lte(t))},this.factorial=function(e){return this.symfunction(O,[e])},this.dfactorial=function(e){return this.symfunction(x,[e])},this.factadd=function(t,n){return e.add(this.symfunction(O,[t]),n)},this.dfactadd=function(t,n){return e.add(this.symfunction(x,[t]),n)},this.factsub=function(t,n){return e.subtract(this.symfunction(O,[t]),n)},this.dfactsub=function(t,n){return e.subtract(this.symfunction(x,[t]),n)}}!function(){s.CACHE.roots={};for(var e=2;e<=40;e++)for(var t=2;t<=40;t++){var r=n(e).pow(t);s.CACHE.roots[r+"-"+t]=e}}(),Math.sign=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1},Math.cosh=Math.cosh||function(e){var t=Math.exp(e);return(t+1/t)/2},Math.sech=Math.sech||function(e){return 1/Math.cosh(e)},Math.csch=Math.csch||function(e){return 1/Math.sinh(e)},Math.coth=Math.coth||function(e){return 1/Math.tanh(e)},Math.sinh=Math.sinh||function(e){var t=Math.exp(e);return(t-1/t)/2},Math.tanh=Math.tanh||function(e){if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)},Math.asinh=Math.asinh||function(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))},Math.acosh=Math.acosh||function(e){return Math.log(e+Math.sqrt(e*e-1))},Math.atanh=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},Math.log10=Math.log10||function(e){return Math.log(e)*Math.LOG10E},Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)},te(se),o.text=ue,ce.getExpression=function(e,t){"last"!==e&&e||(e=j.length),"first"===e&&(e=1);var n=j[e-1];return n?new ce(n):n},ce.prototype={text:function(e){return e=e||"decimals",this.symbol.text_?this.symbol.text_(e):ue(this.symbol,e)},latex:function(e){return this.symbol.latex?this.symbol.latex(e):Oe.latex(this.symbol,e)},valueOf:function(){return this.symbol.valueOf()},evaluate:function(){var e,n=arguments[0],r=1;"string"==typeof n?e="%"===n.charAt(0)?ce.getExpression(n.substr(1)).text():n:n instanceof ce||R(n)?e=n.text():(e=this.symbol.text(),r--);var i=arguments[r]||{};return new ce(re("PARSE2NUMBER",function(){return t.parse(e,i)},!0))},buildFunction:function(e){return _e(this.symbol,e)},isNumber:function(){return U(this.symbol)},isInfinity:function(){return Math.abs(this.symbol.multiplier)===1/0},variables:function(){return J(this.symbol)},toString:function(){try{return z(this.symbol)?"["+this.symbol.toString()+"]":this.symbol.toString()}catch(e){return""}},toDecimal:function(e){s.precision=e;var t=ue(this.symbol,"decimals");return s.precision=void 0,t},isFraction:function(){return T(this.symbol)},isPolynomial:function(){return this.symbol.isPoly()},sub:function(e,n){return new ce(this.symbol.sub(t.parse(e),t.parse(n)))},operation:function(e,n){return L(n)?n=n.symbol:R(n)||(n=t.parse(n)),new ce(t[e](this.symbol.clone(),n.clone()))},add:function(e){return this.operation("add",e)},subtract:function(e){return this.operation("subtract",e)},multiply:function(e){return this.operation("multiply",e)},divide:function(e){return this.operation("divide",e)},pow:function(e){return this.operation("pow",e)},expand:function(){return new ce(t.expand(this.symbol))},each:function(e,t){if(this.symbol.each)this.symbol.each(e,t);else if(z(this.symbol))for(t=0;t<this.symbol.length;t++)e.call(this.symbol,this.symbol[t],t);else e.call(this.symbol)},eq:function(e){R(e)||(e=t.parse(e));try{return t.subtract(this.symbol.clone(),e).equals(0)}catch(e){return!1}},lt:function(e){R(e)||(e=t.parse(e));try{return ae(t.subtract(this.symbol.clone(),e)).lessThan(0)}catch(e){return!1}},gt:function(e){R(e)||(e=t.parse(e));try{return ae(t.subtract(this.symbol.clone(),e)).greaterThan(0)}catch(e){return!1}},gte:function(e){return this.gt(e)||this.eq(e)},lte:function(e){return this.lt(e)||this.eq(e)},numerator:function(){return new ce(this.symbol.getNum())},denominator:function(){return new ce(this.symbol.getDenom())}},ce.prototype.toTeX=ce.prototype.latex,le.create=function(e){if(e instanceof le)return e;var t="-"===(e=e.toString()).charAt(0);t&&(e=e.substr(1,e.length-1));var n=new le(e);return t&&n.negate(),n},le.isFrac=function(e){return e instanceof le},le.quick=function(e,t){var r=new le;return r.num=new n(e),r.den=new n(t),r},le.simple=function(e){for(var t=String(C(e)).split("."),n=t.join(""),r=1,i=(t[1]||"").length,a=0;a<i;a++)r+="0";return le.quick(n,r).simplify()},le.prototype={multiply:function(e){if(this.isOne())return e.clone();if(e.isOne())return this.clone();var t=this.clone();return t.num=t.num.multiply(e.num),t.den=t.den.multiply(e.den),t.simplify()},divide:function(e){if(e.equals(0))throw new me("Division by zero not allowed!");return this.clone().multiply(e.clone().invert()).simplify()},subtract:function(e){return this.clone().add(e.clone().neg())},neg:function(){return this.num=this.num.multiply(-1),this},add:function(e){var t=this.den,n=e.den,r=this.clone(),i=r.num,a=e.num;return t.equals(n)?r.num=i.add(a):(r.num=i.multiply(n).add(a.multiply(t)),r.den=t.multiply(n)),r.simplify()},mod:function(e){var t=this.clone(),n=e.clone();return t.num=t.num.multiply(n.den),t.den=t.den.multiply(n.den),n.num=n.num.multiply(this.den),n.den=n.den.multiply(this.den),t.num=t.num.mod(n.num),t.simplify()},simplify:function(){var e=n.gcd(this.num,this.den);return this.num=this.num.divide(e),this.den=this.den.divide(e),this},clone:function(){var e=new le;return e.num=new n(this.num),e.den=new n(this.den),e},toDecimal:function(e){if(e||s.PRECISION){var t=this.num.isNegative()?"-":"";if(this.num.equals(this.den))return"1";e=e||s.PRECISION,e++;for(var n=[],r=this.num.abs(),i=this.den,a=0;a<e;a++){var o=r.divide(i),u=r.subtract(o.multiply(i));if(n.push(o),u.equals(0))break;r=u.times(10)}var c=n.shift();if(0===n.length)return t+c.toString();if(a===e){var l=[];for(a=0;a<2;a++)l.unshift(n.pop());n.push(Math.round(l.join(".")))}return t+(c.toString()+"."+n.join(""))}return this.num/this.den},qcompare:function(e){return[this.num.multiply(e.den),e.num.multiply(this.den)]},equals:function(e){isNaN(e)||(e=new le(e));var t=this.qcompare(e);return t[0].equals(t[1])},absEquals:function(e){isNaN(e)||(e=new le(e));var t=this.qcompare(e);return t[0].abs().equals(t[1])},greaterThan:function(e){isNaN(e)||(e=new le(e));var t=this.qcompare(e);return t[0].gt(t[1])},gte:function(e){return this.greaterThan(e)||this.equals(e)},lte:function(e){return this.lessThan(e)||this.equals(e)},lessThan:function(e){isNaN(e)||(e=new le(e));var t=this.qcompare(e);return t[0].lt(t[1])},isInteger:function(){return this.den.equals(1)},negate:function(){return this.num=this.num.multiply(-1),this},invert:function(){var e=this.den,t=this.num.isNegative();return this.den=this.num.abs(),this.num=e,t&&(this.num=this.num.multiply(-1)),this},isOne:function(){return this.num.equals(1)&&this.den.equals(1)},sign:function(){return this.num.isNegative()?-1:1},abs:function(){return this.num=this.num.abs(),this},gcd:function(e){return le.quick(n.gcd(e.num,this.num),n.lcm(e.den,this.den))},toString:function(){return this.den.equals(1)?this.num.toString():this.num.toString()+"/"+this.den.toString()},valueOf:function(){return this.num/this.den},isNegative:function(){return this.toDecimal()<0}},fe.imaginary=function(){var e=new fe(s.IMAGINARY);return e.imaginary=!0,e},fe.infinity=function(){return new fe("Infinity")},fe.shell=function(e,t){var n=new fe(t);return n.group=e,n.symbols={},n.length=0,n},fe.unwrapSQRT=function(e,t){var n=e.power;if(e.fname===b&&(e.isLinear()||t)){var r=e.args[0].clone();r.power=r.power.multiply(new le(.5)),r.multiplier=r.multiplier.multiply(e.multiplier),e=r,t&&(e.power=n.multiply(new le(.5)))}return e},fe.hyp=function(e,n){return e.equals(0)?n.clone():n.equals(0)?e.clone():t.sqrt(t.add(t.pow(e.clone(),new fe(2)),t.pow(n.clone(),new fe(2))))},fe.toPolarFormArray=function(e){var n,r;return n=e.realpart(),r=e.imagpart(),[fe.hyp(n,r),n.equals(0)?t.parse("pi/2"):t.trig.atan(t.divide(r,n))]},fe.unwrapPARENS=function(e){if(""===e.fname){var t=e.args[0];return t.power=t.power.multiply(e.power),t.multiplier=t.multiplier.multiply(e.multiplier),""===e.fname?fe.unwrapPARENS(t):t}return e},fe.create=function(e,n){return n=void 0===n?1:n,t.parse("("+e+")^("+n+")")},fe.prototype={powSimp:function(){if(this.group===m){var e=[],n=this.multiplier.sign();this.each(function(t){var n=t.power;if(R(n)||n.equals(1))return this.clone();e.push(n)});var r=new le(Y(e)),i=(n=this.multiplier.sign(),this.multiplier.clone().abs()),a=se.ifactor(i),o=new le(1),s=new le(1);for(var u in a){var c=new le(a[u]);c.lessThan(r)||(c=c.divide(r).subtract(new le(1)),s=s.multiply(new le(u))),o=o.multiply(t.parse(H(u)+"^"+H(c)).multiplier)}var l=new fe(s);this.each(function(e){(e=e.clone()).power=e.power.divide(r),l=t.multiply(l,e)});var f=t.symfunction(y,[l]);return f.power=r,f.multiplier=n<0?o.negate():o,f}return this.clone()},equals:function(e){return R(e)||(e=new fe(e)),this.value===e.value&&this.power.equals(e.power)&&this.multiplier.equals(e.multiplier)},gt:function(e){return R(e)||(e=new fe(e)),this.isConstant()&&e.isConstant()&&this.multiplier.greaterThan(e.multiplier)},gte:function(e){return R(e)||(e=new fe(e)),this.equals(e)||this.isConstant()&&e.isConstant()&&this.multiplier.greaterThan(e.multiplier)},lt:function(e){return R(e)||(e=new fe(e)),this.isConstant()&&e.isConstant()&&this.multiplier.lessThan(e.multiplier)},lte:function(e){return R(e)||(e=new fe(e)),this.equals(e)||this.isConstant()&&e.isConstant()&&this.multiplier.lessThan(e.multiplier)},isPoly:function(e){var t=this.group,n=this.power;if(!B(n)||n<0)return!1;if(t===c||t===f||this.isConstant(!0))return!0;var r=J(this);if(t===m&&1===r.length){var i=r[0];if(!i)return!0;for(var a in this.symbols){var o=this.symbols[a];if(o.group===p&&o.fname===b&&!o.args[0].isConstant())return!1;if(!o.contains(i)&&!o.isConstant(!0))return!1}return!0}if(this.isComposite()||t===m&&e){if(!e&&r.length>1)return!1;for(var a in this.symbols)if(!this.symbols[a].isPoly(e))return!1;return!0}return!1},stripVar:function(e){var n;return this.group!==h&&this.group!==f||this.value!==e?this.group===m&&this.isLinear()?(n=new fe(1),this.each(function(r){r.contains(e,!0)||(n=t.multiply(n,r.clone()))}),n.multiplier=n.multiplier.multiply(this.multiplier)):this.group!==g||this.isLinear()?this.group===g&&this.isLinear()?(n=new fe(0),this.each(function(r){if(!r.contains(e)){var i=r.clone();i.multiplier=i.multiplier.multiply(this.multiplier),n=t.add(n,i)}}),n.equals(0)&&(n=new fe(this.multiplier))):n=this.group===d&&this.power.contains(e,!0)?new fe(this.multiplier):this.group===p&&this.contains(e)?new fe(this.multiplier):this.clone():n=new fe(this.multiplier):n=new fe(this.multiplier),n},toArray:function(e,n){n=n||{arr:[],add:function(e,n){var r=this.arr[n];this.arr[n]=r?t.add(r,e):e}};var r=this.group;if(r===f&&this.contains(e))n.add(new fe(this.multiplier),this.power);else if(r===m){var i=this.stripVar(e),a=t.divide(this.clone(),i.clone()),o=a.isConstant()?0:a.power;n.add(i,o)}else if(r===h&&this.value===e)this.each(function(t,r){n.add(t.stripVar(e),r)});else if(r===g)this.each(function(t){t.toArray(e,n)});else{if(this.contains(e))throw new Error("Cannot convert to array! Exiting");n.add(this.clone(),0)}n=n.arr;for(var s=0;s<n.length;s++)n[s]||(n[s]=new fe(0));return n},hasFunc:function(e){var t=this.group===p||this.group===d;if(t&&!e||t&&this.contains(e))return!0;if(this.symbols)for(var n in this.symbols)if(this.symbols[n].hasFunc(e))return!0;return!1},sub:function(e,n){e=R(e)?e.clone():t.parse(e),n=R(n)?n.clone():t.parse(n),e.group!==c&&e.group!==l||N("Cannot substitute a number. Must be a variable");var r,i=!1,a=e.multiplier.equals(1),o=this.multiplier.clone();if(this.value===e.value&&(this.group!==h&&e.group!==h||this.group===h&&e.group===h))(a||e.multiplier.equals(this.multiplier))&&(e.isLinear()?r=n:e.power.equals(this.power)&&(r=n,i=!0),e.multiplier.equals(this.multiplier)&&(o=new le(1)));else if(this.group===m||this.previousGroup===m)r=new fe(1),this.each(function(i){r=t.multiply(r,i.sub(e,n))});else if(this.isComposite())r=new fe(0),this.each(function(i){r=t.add(r,i.sub(e,n))});else if(this.group===d)r=t.parse(this.value).sub(e,n);else if(this.group===p){for(var s=[],u=0;u<this.args.length;u++){var f=this.args[u];R(f)||(f=t.parse(f)),s.push(f.sub(e,n))}r=t.symfunction(this.fname,s)}if(r){if(!i){var g=this.group===d?this.power.sub(e,n):t.parse(this.power);r=t.pow(r,g)}return r.multiplier=r.multiplier.multiply(o),r}return this.clone()},isMonomial:function(){if(this.group===f)return!0;if(this.group!==m)return!1;for(var e in this.symbols)if(this.symbols[e].group!==f)return!1;return!0},isPi:function(){return this.group===f&&"pi"===this.value},sign:function(){return this.multiplier.sign()},isE:function(){return"e"===this.value},isSQRT:function(){return this.fname===b},isConstant:function(e){if("all"===e&&(this.isPi()||this.isE()))return!0;if(e&&this.group===p){for(var t=0;t<this.args.length;t++)if(!this.args[t].isConstant())return!1;return!0}return this.value===v},isImaginary:function(){if(this.imaginary)return!0;if(this.symbols)for(var e in this.symbols)if(this.symbols[e].imaginary)return!0;return!1},realpart:function(){if(this.isConstant())return this.clone();if(this.imaginary)return new fe(0);if(this.isComposite()){var e=new fe(0);return this.each(function(n){e=t.add(e,n.realpart())}),e}return this.isImaginary()?new fe(0):this.clone()},imagpart:function(){if(this.group===f&&this.isImaginary())return new fe(this.multiplier);if(this.isComposite()){var e=new fe(0);return this.each(function(n){e=t.add(e,n.imagpart())}),e}return this.group===m?this.stripVar(s.IMAGINARY):new fe(0)},isInteger:function(){return this.isConstant()&&this.multiplier.isInteger()},isLinear:function(e){if(e){if(this.isConstant())return!0;if(this.group===f)return this.value!==e||this.power.equals(1);if(this.isComposite()&&this.power.equals(1)){for(var t in this.symbols)if(!this.symbols[t].isLinear(e))return!1;return!0}return!(this.group!==m||!this.symbols[e])&&this.symbols[e].isLinear(e)}return this.power.equals(1)},containsFunction:function(e){if("string"==typeof e&&(e=[e]),this.group===p&&-1!==e.indexOf(this.fname))return!0;if(this.symbols)for(var t in this.symbols)if(this.symbols[t].containsFunction(e))return!0;return!1},multiplyPower:function(e){if(this.group===c&&this.multiplier.equals(1))return this;var n=this.power;if(this.group!==d&&e.group===c){var r=e.multiplier;this.group!==c||r.isInteger()||this.convert(l),this.power=n.equals(1)?r.clone():n.multiply(r),this.group===l&&B(this.power)&&(this.value=Math.pow(this.value,this.power),this.toLinear(),this.convert(c))}else this.group!==d&&(n=new fe(n),this.convert(d)),this.power=t.multiply(n,e);return this},setPower:function(e,t){if(this.group===c&&this.multiplier.equals(1))return this;if(this.group!==d||R(e)){var n=!1;R(e)&&(e.group===c?e=e.multiplier:n=!0);var r=n?d:l;this.power=e,this.group===c&&r&&this.convert(r,t)}else this.group=this.previousGroup,delete this.previousGroup,this.group===c?(this.multiplier=new le(this.value),this.value=v):this.power=e;return this},isInverse:function(){return this.group===d?this.power.multiplier.lessThan(0):this.power<0},clone:function(e){var t,n=e||new fe(0),r=["value","group","length","previousGroup","imaginary","fname","args","isInfinity"],i=r.length;if(this.symbols)for(var a in n.symbols={},this.symbols)n.symbols[a]=this.symbols[a].clone();for(t=0;t<i;t++)void 0!==this[r[t]]&&(n[r[t]]=this[r[t]]);return n.power=this.power.clone(),n.multiplier=this.multiplier.clone(),n},toUnitMultiplier:function(e){return this.multiplier.num=new n(this.multiplier.num.isNegative()&&e?-1:1),this.multiplier.den=new n(1),this},toLinear:function(){return this.setPower(new le(1)),this},each:function(e,t){if(this.symbols)for(var n in this.symbols){var r=this.symbols[n];if(r.group===h&&t)for(var i in r.symbols)e.call(n,r.symbols[i],i);else e.call(this,r,n)}else e.call(this,this,this.value)},valueOf:function(){return this.group===c?this.multiplier.valueOf():0===this.power?1:0===this.multiplier?0:ue(this,"decimals")},contains:function(e,t){var n=this.group;if(this.value===e)return!0;if(this.symbols)for(var r in this.symbols)if(this.symbols[r].contains(e,t))return!0;if(n===p||this.previousGroup===p)for(var i=0;i<this.args.length;i++)if(this.args[i].contains(e,t))return!0;if(n===d){if(t&&this.power.contains(e,t))return!0;if(this.value===e)return!0}return this.value===e},negate:function(){return this.multiplier.negate(),this.group!==g&&this.group!==h||this.distributeMultiplier(),this},invert:function(e,t){return e||(this.multiplier=this.multiplier.invert()),R(this.power)?this.power.negate():this.group===m&&t?this.each(function(e){return e.invert()}):this.power&&this.group!==c&&this.power.negate(),this},distributeMultiplier:function(e){var t=e?this.power.absEquals(1):this.power.equals(1);if(this.symbols&&t&&this.group!==m&&!this.multiplier.equals(1)){for(var n in this.symbols){var r=this.symbols[n];r.multiplier=r.multiplier.multiply(this.multiplier),r.distributeMultiplier()}this.toUnitMultiplier()}return this},distributeExponent:function(){if(!this.power.equals(1)){var e=this.power;for(var n in this.symbols){var r=this.symbols[n];r.group===d?r.power=t.multiply(r.power,new fe(e)):this.symbols[n].power=this.symbols[n].power.multiply(e)}this.toLinear()}return this},convert:function(e,t){if(e>p){var n=this.clone();this.symbols={},e===m?n.toUnitMultiplier():this.toUnitMultiplier(),this.group===p&&(n.args=this.args,delete this.args,delete this.fname),this.isImgSymbol&&delete this.isImgSymbol,this.toLinear(),this.symbols[n.keyForGroup(e)]=n,this.group=e,this.length=1}else if(e===d)this.group===c&&this.multiplier.equals(1)||(this.group!==d&&(this.previousGroup=this.group),this.group===c?(this.value=this.multiplier.num.toString(),this.toUnitMultiplier()):this.value=ue(this,"hash"),this.group=d);else if(e===c){var r=this.multiplier.toDecimal();this.symbols&&(this.symbols=void 0),new fe(this.group===l?r*Math.pow(this.value,this.power):r).clone(this)}else e===l&&this.group===c&&(this.value=t?this.multiplier.num.toString():Math.abs(this.multiplier.num.toString()),this.toUnitMultiplier(!t),this.group=l);return this},insert:function(e,n){if(R(e)||N("Object "+e+" is not of type Symbol!"),this.symbols){var r=this.group;if(r>p){var i=e.keyForGroup(r),a=i in this.symbols&&this.symbols[i];if("add"===n){var o=i;a?(this.symbols[o]=t.add(a,e),this.symbols[o].multiplier.equals(0)&&(delete this.symbols[o],this.length--,0===this.length&&(this.convert(c),this.multiplier=new le(0)))):(this.symbols[i]=e,this.length++)}else e.group===l&&B(e.power)&&e.convert(c),e.group!==d?(this.multiplier=this.multiplier.multiply(e.multiplier),e.toUnitMultiplier()):(e.parens=e.multiplier.lessThan(0),this.multiplier=this.multiplier.multiply(e.multiplier.clone().abs()),e.toUnitMultiplier(!0)),a&&((e=t.multiply(ne(this.symbols,i),e)).isConstant()&&(this.multiplier=this.multiplier.multiply(e.multiplier),e=new fe(1)),this.length--),e.isOne(!0)?e.multiplier.lessThan(0)&&this.negate():(this.symbols[i]=e,this.length++);0===this.length&&this.convert(c),this.group!==g&&this.group!==m||this.updateHash()}}return this},attach:function(e){if(z(e)){for(var t=0;t<e.length;t++)this.insert(e[t],"add");return this}return this.insert(e,"add")},combine:function(e){if(z(e)){for(var t=0;t<e.length;t++)this.insert(e[t],"multiply");return this}return this.insert(e,"multiply")},updateHash:function(){if(this.group!==c)if(this.group===p){for(var e="",t=this.args,n=this.fname===y,r=0;r<t.length;r++)e+=(0===r?"":",")+ue(t[r]);var i=n?"":this.fname;this.value=i+(n?e:H(e))}else this.group!==f&&this.group!==h&&(this.value=ue(this,"hash"))},keyForGroup:function(e){var t,n=this.group;if(n===c)t=this.value;else if(n===f||n===l)t=e===h?this.power.toDecimal():this.value;else if(n===p)t=e===h?this.power.toDecimal():ue(this,"hash");else{if(n===h)return t=e===m?ue(this,"hash"):e===g?this.power.equals(1)?this.value:H(ue(this,"hash"))+s.POWER_OPERATOR+this.power.toDecimal():e===h?this.power.toString():this.value;n===g?(e===g&&(t=ue(this,"hash")),t=e===h?this.power.toDecimal():this.value):n===m?t=e===h?this.power.toDecimal():ue(this,"hash"):n===d&&(t=e===h?ue(this.power):ue(this,"hash"))}return t},collectSymbols:function(e,t,n,r){var i=[];if(this.symbols)for(var a in this.symbols){var o=this.symbols[a];!r||o.group!==h&&o.group!==g?i.push(e?e(o,t):o):i=i.concat(o.collectSymbols())}else i.push(this);return null===n&&(n=void 0),i.sort(n)},latex:function(e){return Oe.latex(this,e)},text:function(e){return ue(this,e)},isOne:function(e){var t=e?"absEquals":"equals";return this.group===c?this.multiplier[t](1):this.power.equals(0)},isComposite:function(){var e=this.group,t=this.previousGroup;return e===g||e===h||t===h||t===g},isCombination:function(){var e=this.group,t=this.previousGroup;return e===m||t===m},lessThan:function(e){return this.multiplier.lessThan(e)},greaterThan:function(e){return this.multiplier.greaterThan(e)},getDenom:function(){var e,n;if(n=this.clone(),this.group===m&&this.power.lessThan(0)&&(n=t.expand(n)),n.power.lessThan(0)){var r=t.parse(n.multiplier.den);(e=n.toUnitMultiplier()).power.negate(),e=t.multiply(r,e)}else if(n.group===m)for(var i in e=t.parse(n.multiplier.den),n.symbols)n.symbols[i].power<0&&(e=t.multiply(e,n.symbols[i].clone().invert()));else e=t.parse(n.multiplier.den);return e},getNum:function(){var e,n;if((n=this.clone()).group===m&&n.power.lessThan(0)&&(n=t.expand(n)),n.power.greaterThan(0)&&n.group!==m)e=t.parse(n.multiplier.num),e=t.multiply(e,n.toUnitMultiplier());else if(n.group===m)for(var r in e=t.parse(n.multiplier.num),n.symbols)n.symbols[r].power>0&&(e=t.multiply(e,n.symbols[r].clone()));else e=t.parse(n.multiplier.num);return e},toString:function(){return this.text()}},de.prototype.toString=function(){return this.val},pe.prototype.toString=function(){return this.val},he.prototype.toString=function(){return"`"+this.val},me.prototype=Object.create(Error.prototype),ge.prototype=Object.create(Error.prototype),ve.prototype=Object.create(Error.prototype),ye.prototype=Object.create(Error.prototype);var we={convert:function(e,t){var n;if(0===e)n=[0,1];else if(e<1e-6||e>1e20){var r=this.quickConversion(Number(e));if(r[1]<=1e20){var i=Math.abs(e),a=e/i;(n=this.fullConversion(i.toFixed((r[1]+"").length-1)))[0]=n[0]*a}else n=r}else n=this.fullConversion(e);return n},quickConversion:function(e){var t=(e.toExponential()+"").split("e"),n=t[0].split(".")[1],r=n?n.length:0;return[Math.round(Math.pow(10,r)*t[0]),Math.pow(10,Math.abs(t[1])+r)]},fullConversion:function(e){for(var t=!1,n=0,r=1,i=1,a=0,o=0,s=e;!t;){++o>1e4&&(t=!0);var u=Math.floor(s),c=n+u*i,l=r+u*a,f=s-u;f<1e-16&&(t=!0),s=1/f,n=i,r=a,i=c,a=l,(Math.abs(c/l-e)<1e-16||o>30)&&(t=!0)}return[c,l]}},Oe={space:"~",dot:" \\cdot ",latex:function(e,n){if(e.clone&&(e=e.clone()),z(e)){for(var r=[],i=0;i<e.length;i++){var a=e[i];R(a)||(a=t.parse(a)),r.push(this.latex(a))}return this.brackets(r.join(", "),"square")}if(q(e)){var o="\\begin{pmatrix}\n";for(i=0;i<e.elements.length;i++){for(var s=[],u=e.elements[i],c=0;c<u.length;c++)s.push(this.latex(u[c]));o+=s.join(" & "),i<e.elements.length-1&&(o+="\\\\\n")}return o+="\\end{pmatrix}"}if(F(e)){for(o="\\left[",i=0;i<e.elements.length;i++)o+=this.latex(e.elements[i])+" "+(i!==e.elements.length-1?",\\,":"");return o+="\\right]"}var f,d="decimal"===n,p=(e=e.clone()).power,h=V(p),g=e.multiplier.lessThan(0);if(e.group===l&&d)return String(e.multiplier.toDecimal()*Math.pow(e.value,e.power.toDecimal()));if(e.multiplier=e.multiplier.abs(),d){var v=String(e.multiplier.toDecimal());"1"!=v||d||(v=""),f=[v,""]}else f=[e.multiplier.num,e.multiplier.den];var y,b=this.value(e,h,n,g);h&&p.negate(),d?"1"==(y=R(p)?Oe.latex(p,n):String(p.toDecimal()))&&(y=""):y=R(p)?this.latex(p,n):this.formatFrac(p,!0);var w=["",""];return w[h?1:0]=y,((g?"-":"")+this.set(f,b,w,e.group===m)).replace(/\+\-/gi,"-")},greek:{alpha:"\\alpha",beta:"\\beta",gamma:"\\gamma",delta:"\\delta",epsilon:"\\epsilon",zeta:"\\zeta",eta:"\\eta",theta:"\\theta",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",mu:"\\mu",nu:"\\nu",xi:"\\xi",omnikron:"\\omnikron",pi:"\\pi",rho:"\\rho",sigma:"\\sigma",tau:"\\tau",upsilon:"\\upsilon",phi:"\\phi",chi:"\\chi",psi:"\\psi",omega:"\\omega",Gamma:"\\Gamma",Delta:"\\Delta",Epsilon:"\\Epsilon",Theta:"\\Theta",Lambda:"\\Lambda",Xi:"\\Xi",Pi:"\\Pi",Sigma:"\\Sigma",Phi:"\\Phi",Psi:"\\Psi",Omega:"\\Omega"},value:function(e,t,n,r){var i=e.group,a=e.previousGroup,o=["",""],s=t?1:0;if(e.isInfinity)o[s]="\\infty";else if(i===f||i===l||a===f||a===l||a===c){(L=e.value).replace&&(L=L.replace(/(.+)_$/,"$1\\_"));var u=String(L).split("_"),h=this.greek[u[0]];h&&(u[0]=h,L=u.join("_")),o[s]=L}else if(i===p||a===p){for(var v=[],j=e.fname,_=0;_<e.args.length;_++){var S;S="string"==typeof(M=e.args[_])?M:this.latex(M,n),v.push(S)}if(j===b)o[s]="\\sqrt"+this.braces(v.join(","));else if(j===w)o[s]=this.brackets(v.join(","),"abs");else if(j===y)o[s]=this.brackets(v.join(","),"parens");else if("limit"===j)o[s]=" \\lim\\limits_{"+v[1]+" \\to "+v[2]+"} "+v[0];else if("integrate"===j)o[s]="\\int"+this.braces(v[0])+this.braces("d"+v[1]);else if("defint"===j)o[s]="\\int\\limits_"+this.braces(v[1])+"^"+this.braces(v[2])+" "+v[0]+" d"+v[3];else if(j===O||j===x){var M;(M=e.args[0]).power.equals(1)&&(M.isComposite()||M.isCombination())&&(v[0]=this.brackets(v[0])),o[s]=v[0]+(j===O?"!":"!!")}else if("floor"===j)o[s]="\\left \\lfloor"+this.braces(v[0])+"\\right \\rfloor";else if("ceil"===j)o[s]="\\left \\lceil"+this.braces(v[0])+"\\right \\rceil";else if("log"===j&&v.length>1)o[s]="\\mathrm"+this.braces("log")+"_"+this.braces(v[1])+this.brackets(v[0]);else if("log10"===j)o[s]="\\mathrm"+this.braces("log")+"_"+this.braces(10)+this.brackets(v[0]);else if("sum"===j){var E=v[0],k=v[1],N=v[2],A=v[3];o[s]="\\sum\\limits_{"+this.braces(k)+"="+this.braces(N)+"}^"+this.braces(A)+" "+this.braces(E)}else if("product"===j){E=v[0],k=v[1],N=v[2],A=v[3];o[s]="\\prod\\limits_{"+this.braces(k)+"="+this.braces(N)+"}^"+this.braces(A)+" "+this.braces(E)}else if("nthroot"===j)o[s]="\\sqrt["+v[1]+"]"+this.braces(v[0]);else if("mod"===j)o[s]=v[0]+" \\bmod "+v[1];else if("realpart"===j)o[s]="\\operatorname{Re}"+this.brackets(v[0]);else if("imagpart"===j)o[s]="\\operatorname{Im}"+this.brackets(v[0]);else{var P=""!==j?"\\mathrm"+this.braces(j.replace(/_/g,"\\_")):"";o[s]=P+this.brackets(v.join(","),"parens")}}else if(e.isComposite()){var C=e.collectSymbols().sort(i===g||a===g?function(e,t){return t.group-e.group}:function(e,t){var n=R(e.power)?-1:e.power;return(R(t.power)?-1:t.power)-n}),D=[],T=C.length;for(_=0;_<T;_++)D.push(Oe.latex(C[_],n));var L=D.join("+");o[s]=e.isLinear()&&e.multiplier.equals(1)&&!r?L:this.brackets(L,"parens")}else if(i===m||a===d||a===m){i===m&&e.distributeExponent();var I=[],F=[],q=[],U=[],z=0,B=0,H=function(e,t,n){if(n>1&&t.length>0)for(var r=t.length,i=0;i<r;i++){var a=t[i],o=e[a];/^\\left\(.+\\right\)\^\{.+\}$/g.test(o)||/^\\left\(.+\\right\)$/g.test(o)||(e[a]=Oe.brackets(o,"parens"))}return e};e.each(function(t){var r;V(t.power)?(r=Oe.latex(t.invert(),n),B++,t.isComposite()&&(1!=e.multiplier.den&&1==Math.abs(t.power)&&(r=Oe.brackets(r,"parens")),q.push(I.length)),I.push(r)):(r=Oe.latex(t,n),z++,t.isComposite()&&(1!=e.multiplier.num&&1==Math.abs(t.power)&&(r=Oe.brackets(r,"parens")),U.push(F.length)),F.push(r))}),H(F,U,z),o[0]=F.join(this.dot),H(I,q,B),o[1]=I.join(this.dot)}return o},set:function(e,t,n,r){var i=function(e){return/^\\left\(.+\\right\)$/.test(e)};if(n&&(n=this.formatP(n)),r){var a=n[0];n[0]=""}t=this.merge(t,n);var o=e[0],s=e[1],u=t[0],c=t[1];u&&1==o&&(o=""),1==s&&(s="");var l=this.join(o,u,i(u)?"":this.dot),f=this.join(s,c,i(c)?"":this.dot);if(l&&f){var d=this.frac(l,f);return r&&a&&(d=this.brackets(d)+a),d}return l},merge:function(e,t){for(var n=[],r=0;r<2;r++)n[r]=e[r]+t[r];return n},join:function(e,t,n){return e||t?e&&!t?e:t&&!e?t:e+n+t:""},formatP:function(e){for(var t=0;t<2;t++){var n=e[t];n&&(e[t]="^"+this.braces(n))}return e},formatFrac:function(e,t){var n=e.num.toString(),r=e.den.toString();return t&&"1"===n&&"1"===r?"":"1"===r?n:this.frac(n,r)},frac:function(e,t){return"\\frac"+this.braces(e)+this.braces(t)},braces:function(e){return"{"+e+"}"},brackets:function(e,t){var n={parens:["(",")"],square:["[","]"],brace:["{","}"],abs:["|","|"],angle:["\\langle","\\rangle"]}[t=t||"parens"];return"\\left"+n[0]+e+"\\right"+n[1]}};function xe(e){F(e)?this.elements=e.items.slice(0):z(e)?this.elements=e.slice(0):this.elements=[].slice.call(arguments)}function je(){var e,t,n,r,i=arguments,a=i.length,o=[];if(q(i))for(e=0;e<a;e++)o.push(i[e].slice(0));else for(e=0;e<a;e++)t=i[e],F(t)&&(t=t.elements),z(t)||(t=[t]),r=t.length,n&&n!==r&&N("Unable to create Matrix. Row dimensions do not match!"),o.push(t),n=r;this.elements=o}xe.arrayPrefill=function(e,t){var n=[];t=t||0;for(var r=0;r<e;r++)n[r]=t;return n},xe.fromArray=function(e){var t=new xe;return t.elements=e,t},xe.prototype={custom:!0,e:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]},set:function(e,t){this.elements[e]=new fe(t)},dimensions:function(){return this.elements.length},modulus:function(){return re("SAFE",function(){return t.pow(this.dot(this.clone()),new fe(.5))},void 0,this)},eql:function(e){var n=this.elements.length,r=e.elements||e;if(n!==r.length)return!1;do{if(Math.abs(t.subtract(this.elements[n-1],r[n-1]).valueOf())>PRECISION)return!1}while(--n);return!0},clone:function(){for(var e=new xe,t=this.elements.length,n=0;n<t;n++)e.elements.push(this.elements[n].clone());return e},map:function(e){var t=[];return this.each(function(n,r){t.push(e(n,r))}),new xe(t)},each:function(e){var t,n=this.elements.length,r=n;do{t=r-n,e(this.elements[t],t+1)}while(--n)},toUnitVector:function(){return re("SAFE",function(){var e=this.modulus();return 0===e.valueOf()?this.clone():this.map(function(n){return t.divide(n,e)})},void 0,this)},angleFrom:function(e){return re("SAFE",function(){var n=e.elements||e;if(this.elements.length!==n.length)return null;var r=new fe(0),i=new fe(0),a=new fe(0);this.each(function(e,o){r=t.add(r,t.multiply(e,n[o-1])),i=t.add(i,t.multiply(e,e)),a=t.add(a,t.multiply(n[o-1],n[o-1]))}),i=t.pow(i,new fe(.5)),a=t.pow(a,new fe(.5));var o=t.multiply(i,a);if(0===o.valueOf())return null;var s=t.divide(r,o),u=s.valueOf();return u<-1&&(s=-1),u>1&&(s=1),new fe(Math.acos(s))},void 0,this)},isParallelTo:function(e){var t=this.angleFrom(e).valueOf();return null===t?null:t<=PRECISION},isAntiparallelTo:function(e){var t=this.angleFrom(e).valueOf();return null===t?null:Math.abs(t-Math.PI)<=Sylvester.precision},isPerpendicularTo:function(e){var t=this.dot(e);return null===t?null:Math.abs(t)<=Sylvester.precision},add:function(e){return re("SAFE",function(){var n=e.elements||e;return this.elements.length!==n.length?null:this.map(function(e,r){return t.add(e,n[r-1])})},void 0,this)},subtract:function(e){return re("SAFE",function(){var n=e.elements||e;return this.elements.length!==n.length?null:this.map(function(e,r){return t.subtract(e,n[r-1])})},void 0,this)},multiply:function(e){return this.map(function(t){return t.clone()*e.clone()})},x:function(e){return this.multiply(e)},dot:function(e){return re("SAFE",function(){var n=e.elements||e,r=new fe(0),i=this.elements.length;if(i!==n.length)return null;do{r=t.add(r,t.multiply(this.elements[i-1],n[i-1]))}while(--i);return r},void 0,this)},cross:function(e){var n=e.elements||e;if(3!==this.elements.length||3!==n.length)return null;var r=this.elements;return re("SAFE",function(){return new xe([t.subtract(t.multiply(r[1],n[2]),t.multiply(r[2],n[1])),t.subtract(t.multiply(r[2],n[0]),t.multiply(r[0],n[2])),t.subtract(t.multiply(r[0],n[1]),t.multiply(r[1],n[0]))])},void 0,this)},max:function(){var e,t=0,n=this.elements.length,r=n;do{e=r-n,Math.abs(this.elements[e].valueOf())>Math.abs(t.valueOf())&&(t=this.elements[e])}while(--n);return t},indexOf:function(e){var t,n=null,r=this.elements.length,i=r;do{t=i-r,null===n&&this.elements[t].valueOf()===e.valueOf()&&(n=t+1)}while(--r);return n},text:function(e){return ue(this)},toString:function(){return this.text()},latex:function(e){for(var t=[],n=0;n<this.elements.length;n++)t.push(Oe.latex.call(Oe,this.elements[n],e));return"["+t.join(", ")+"]"}},je.identity=function(e){for(var t=new je,n=0;n<e;n++){t.elements.push([]);for(var r=0;r<e;r++)t.set(n,r,new fe(n===r?1:0))}return t},je.fromArray=function(e){function t(e){return je.apply(this,e)}return t.prototype=je.prototype,new t(e)},je.zeroMatrix=function(e,t){for(var n=new je,r=0;r<e;r++)n.elements.push(xe.arrayPrefill(t,new fe(0)));return n},je.prototype={custom:!0,get:function(e,t){if(this.elements[e])return this.elements[e][t]},set:function(e,t,n){this.elements[e]||(this.elements[e]=[]),this.elements[e][t]=R(n)?n:new fe(n)},cols:function(){return this.elements[0].length},rows:function(){return this.elements.length},row:function(e){return!e||e>this.cols()?[]:this.elements[e-1]},col:function(e){var t=this.rows(),n=[];if(e>this.cols()||!e)return n;for(var r=0;r<t;r++)n.push(this.elements[r][e-1]);return n},eachElement:function(e){var t,n,r=this.rows(),i=this.cols();for(t=0;t<r;t++)for(n=0;n<i;n++)this.elements[t][n]=e.call(this,this.elements[t][n],t,n)},determinant:function(){if(!this.isSquare())return null;var e,n=this.toRightTriangular(),r=n.elements[0][0],i=n.elements.length-1,a=i;do{e=a-i+1,r=t.multiply(r,n.elements[e][e])}while(--i);return r},isSquare:function(){return this.elements.length===this.elements[0].length},isSingular:function(){return this.isSquare()&&0===this.determinant()},augment:function(e){var t=this.rows();t!==e.rows()&&N("Cannot augment matrix. Rows don't match.");for(var n=0;n<t;n++)this.elements[n]=this.elements[n].concat(e.elements[n]);return this},clone:function(){for(var e=this.rows(),t=this.cols(),n=new je,r=0;r<e;r++){n.elements[r]=[];for(var i=0;i<t;i++){var a=this.elements[r][i];n.elements[r][i]=R(a)?a.clone():a}}return n},invert:function(){return this.isSquare()||N("Matrix is not square!"),re("SAFE",function(){var e,n,r,i,a,o,s,u=this.elements.length,c=u,l=je.identity(u),f=this.augment(l).toRightTriangular(),d=f.elements[0].length,p=[];do{a=[],r=d,p[e=u-1]=[],o=f.elements[e][e];do{i=d-r,s=t.divide(f.elements[e][i],o.clone()),a.push(s),i>=c&&p[e].push(s)}while(--r);for(f.elements[e]=a,n=0;n<e;n++){a=[],r=d;do{i=d-r,a.push(t.subtract(f.elements[n][i].clone(),t.multiply(f.elements[e][i].clone(),f.elements[n][e].clone())))}while(--r);f.elements[n]=a}}while(--u);return je.fromArray(p)},void 0,this)},toRightTriangular:function(){return re("SAFE",function(){var e,n,r,i,a,o=this.clone(),s=this.elements.length,u=s,c=this.elements[0].length;do{if(r=u-s,0===o.elements[r][r].valueOf())for(var l=r+1;l<u;l++)if((n=o.elements[l][r])&&0!==n.valueOf()){e=[],i=c;do{a=c-i,e.push(t.add(o.elements[r][a].clone(),o.elements[l][a].clone()))}while(--i);o.elements[r]=e;break}if(0!==o.elements[r][r].valueOf())for(l=r+1;l<u;l++){var f=t.divide(o.elements[l][r].clone(),o.elements[r][r].clone());e=[],i=c;do{a=c-i,e.push(a<=r?new fe(0):t.subtract(o.elements[l][a].clone(),t.multiply(o.elements[r][a].clone(),f.clone())))}while(--i);o.elements[l]=e}}while(--s);return o},void 0,this)},transpose:function(){var e,t,n,r=this.elements.length,i=this.elements[0].length,a=new je,o=i;do{e=i-o,a.elements[e]=[],t=r;do{n=r-t,a.elements[e][n]=this.elements[n][e].clone()}while(--t)}while(--o);return a},canMultiplyFromLeft:function(e){var t=q(e)?e.elements.length:e.length;return this.elements[0].length===t},sameSize:function(e){return this.rows()===e.rows()&&this.cols()===e.cols()},multiply:function(e){return re("SAFE",function(){var n=e.elements||e;if(!this.canMultiplyFromLeft(n)){if(this.sameSize(e)){for(var r=new je,i=this.rows(),a=0;a<i;a++){var o=t.multiply(new xe(this.elements[a]),new xe(e.elements[a]));r.elements[a]=o.elements}return r}return null}var s,u,c,l,f,d=this.elements.length,p=d,h=n[0].length,m=this.elements[0].length,g=[];do{g[a=p-d]=[],s=h;do{u=h-s,c=new fe(0),l=m;do{f=m-l,c=t.add(c,t.multiply(this.elements[a][f],n[f][u]))}while(--l);g[a][u]=c}while(--s)}while(--d);return je.fromArray(g)},void 0,this)},add:function(e){var n=new je;return this.sameSize(e)&&this.eachElement(function(r,i,a){n.set(i,a,t.add(r.clone(),e.elements[i][a]))}),n},subtract:function(e){var n=new je;return this.sameSize(e)&&this.eachElement(function(r,i,a){n.set(i,a,t.subtract(r.clone(),e.elements[i][a]))}),n},negate:function(){return this.each(function(e){return e.negate()}),this},toVector:function(){if(1===this.rows()||1===this.cols()){var e=new xe;return e.elements=this.elements,e}return this},toString:function(e){var t=this.rows(),n=[];e=void 0===e?"\n":e;for(var r=0;r<t;r++)n.push("["+this.elements[r].map(function(e){return void 0!==e?e.toString():""}).join(",")+"]");return"matrix"+H(n.join(","))},text:function(){return"matrix("+this.toString("")+")"},latex:function(e){var t=this.cols(),n=this.elements;return G("\\begin{vmatrix}{0}\\end{vmatrix}",function(){var r=[];for(var i in n){for(var a=[],o=0;o<t;o++)a.push(Oe.latex.call(Oe,n[i][o],e));r.push(a.join(" & "))}return r.join(" \\cr ")})}},je.prototype.each=je.prototype.eachElement;var _e=o.build=function(e,n){e=re("PARSE2NUMBER",function(){return t.parse(e)},!0);var r=J(e),i=[],a=function(e,n){n=n||[];var r,o=[],s=e.group,u="",h=function(t){var r=t===m?"*":"+",i=[];for(var o in e.symbols){var s=e.symbols[o],u=a(s,n)[0];s.isComposite()&&(u=H(u)),i.push(u)}var c=i.join(r);return c=c&&!e.multiplier.equals(1)?H(c):c},g=function(t){var r;return t in Math?r="Math."+t:(-1===i.indexOf(t)&&(n.push("var "+t+" = "+se[t].toString()+"; "),i.push(t)),r=t),r+=H(e.args.map(function(e){return a(e,n)[0]}).join(","))};if(s===c?o.push(e.multiplier.toDecimal()):e.multiplier.equals(-1)?u="-":e.multiplier.equals(1)||o.push(e.multiplier.toDecimal()),s===f||s===l)r=e.value;else if(s===p)r=g(e.fname);else if(s===d){var v=e.previousGroup;r=v===c||v===f?e.value:v===p?g(e.fname):h(e.previousGroup)}else r=h(e.group);if(e.group!==c&&!e.power.equals(1)){var y=a(t.parse(e.power));n.push(y[1]),r="Math.pow"+H(r+","+y[0])}return r&&o.push(u+r),[o.join("*"),n.join("").replace(/\n+\s+/g," ")]};if(n){for(var o=0;o<r.length;o++){var s=r[o];-1===n.indexOf(s)&&N(s+" not found in argument array")}r=n}var u=a(e);return new Function(r,u[1]+" return "+u[0]+";")};te(t.constants),te(t.functions);var Se={Operator:de,groups:r,Symbol:fe,Expression:ce,Frac:le,Vector:xe,Matrix:je,Parser:be,Fraction:we,Math2:se,LaTeX:Oe,Utils:o,PARSER:t,PARENTHESIS:y,Settings:s,err:N,bigInt:n,exceptions:{DivisionByZero:me,ParseError:ge,UndefinedError:ve,MaximumIterationsReached:ye}};Se.Utils.importFunctions=function(){var e={};for(var n in t.functions)e[n]=t.functions[n][0];return e},t.error||(t.error=N);var Me=function(e,n,r,a){var o=/^([a-z_][a-z\d\_]*)\(([a-z_,\s]*)\):=(.+)$/gi.exec(e);if(o)return i.setFunction(o[1],o[2].split(","),o[3]);e instanceof ce&&(e=e.toString());var u=z(r),c=u?-1!==r.indexOf("numer"):"numer"===r;(u?-1!==r.indexOf("expand"):"expand"===r)&&(e=G("{0}({1})","expand",e));var l=re("PARSE2NUMBER",function(){return t.parse(e,n)},c||s.PARSE2NUMBER);return a?j[a-1]=l:j.push(l),new ce(l)};return Me.rpn=function(e){return t.parse(e,null,!0)},Me.convertToLaTeX=function(e){return t.toTeX(e)},Me.version=function(e){if(e)try{return Se[e].version}catch(t){return"No module named "+e+" found!"}return"0.7.16"},Me.getWarnings=function(){return M},Me.setConstant=function(e,n){if(P(e),!E(e))if("delete"===n||""===n)delete t.constants[e];else{if(isNaN(n))throw new Error("Constant must be a number!");t.constants[e]=n}return this},Me.getConstant=function(e){return String(t.constant[e])},Me.setFunction=function(e,n,r){return P(e),!E(e)&&(n=n||J(t.parse(r)),t.functions[e]=[t.mapped_function,n.length,{name:e,params:n,body:r}],!0)},Me.getCore=function(){return Se},Me.getExpression=Me.getEquation=ce.getExpression,Me.reserved=function(e){return e?S:S.join(", ")},Me.clear=function(e,t){if("all"===e)j=[];else if("last"===e)j.pop();else if("first"===e)j.shift();else{var n=e?e-1:j.length;!0===t?j[n]=void 0:ne(j,n)}return this},Me.flush=function(){return this.clear("all"),this},Me.expressions=function(e,t,n){for(var r=e?{}:[],i=0;i<j.length;i++){var a=t?Oe.latex(j[i],n):ue(j[i],n);e?r[i+1]=a:r.push(a)}return r},Me.register=function(e){var n=this.getCore();if(z(e))for(var r=0;r<e.length;r++)e&&this.register(e[r]);else if(e&&-1===s.exclude.indexOf(e.name)){if(e.dependencies)for(r=0;r<e.dependencies.length;r++)if(!n[e.dependencies[r]])throw new Error(G("{0} requires {1} to be loaded!",e.name,e.dependencies[r]));var i=e.parent,a=e.build.call(n);if(i)n[i]||(n[e.parent]={}),("nerdamer"===i?this:n[i])[e.name]=a;e.visible&&(t.functions[e.name]=[a,e.numargs])}},Me.validateName=P,Me.validVarName=function(e){try{return P(e),-1===S.indexOf(e)}catch(e){return!1}},Me.supported=function(){return W(t.functions)},Me.numEquations=Me.numExpressions=function(){return j.length},Me.setVar=function(e,n){return P(e),e in t.constants&&N("Cannot set value for constant "+e),"delete"===n||""===n?delete _[e]:_[e]=R(n)?n:t.parse(n),this},Me.getVar=function(e){return _[e]},Me.clearVars=function(){return _={},this},Me.load=function(e){return e.call(this),this},Me.getVars=function(e,t){var n={};if("object"===(e=e||"text"))n=_;else for(var r in _)"latex"===e?n[r]=_[r].latex(t):"text"===e&&(n[r]=_[r].text(t));return n},Me.set=function(e,t){if("object"==typeof e)for(var n in e)Me.set(n,e[n]);-1!==["SAFE"].indexOf(e)&&N("Cannot modify setting: "+e),s[e]=t},Me.get=function(e){return s[e]},Me.api=function(e){var n=function(e){return function(){for(var n=[].slice.call(arguments),r=0;r<n.length;r++)n[r]=t.parse(n[r]);return new ce(re("PARSE2NUMBER",function(){return t.callfunction(e,n)}))}};for(var r in t.functions)r in Me&&!e||(Me[r]=n(r))},Me.replaceFunction=function(e,n,r){var i=t.functions[e],a=void 0===r?i[1]:r;t.functions[e]=[n.call(void 0,i[0],Se),a]},Me.setOperator=function(e,n,r,i,a,o,s){t.operators[e]=new de(e,n,r,i,a,o,s),t.name=n,u[n]=e},Me.getOperator=function(e){return t.operators[e]},Me.api(),Me}({bigInt:(r=function(e){"use strict";var t=1e7,n=7,i=9007199254740992,a=f(i),o=Math.log(i);function s(e,t){return void 0===e?s[0]:void 0!==t?10==+t?W(e):z(e,t):W(e)}function u(e,t){this.value=e,this.sign=t,this.isSmall=!1}function c(e){this.value=e,this.sign=e<0,this.isSmall=!0}function l(e){return-i<e&&e<i}function f(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function d(e){p(e);var n=e.length;if(n<4&&k(e,a)<0)switch(n){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function p(e){for(var t=e.length;0===e[--t];);e.length=t+1}function h(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function m(e){return e>0?Math.floor(e):Math.ceil(e)}function g(e,n){var r,i,a=e.length,o=n.length,s=new Array(a),u=0,c=t;for(i=0;i<o;i++)u=(r=e[i]+n[i]+u)>=c?1:0,s[i]=r-u*c;for(;i<a;)u=(r=e[i]+u)===c?1:0,s[i++]=r-u*c;return u>0&&s.push(u),s}function v(e,t){return e.length>=t.length?g(e,t):g(t,e)}function y(e,n){var r,i,a=e.length,o=new Array(a),s=t;for(i=0;i<a;i++)r=e[i]-s+n,n=Math.floor(r/s),o[i]=r-n*s,n+=1;for(;n>0;)o[i++]=n%s,n=Math.floor(n/s);return o}function b(e,n){var r,i,a=e.length,o=n.length,s=new Array(a),u=0,c=t;for(r=0;r<o;r++)(i=e[r]-u-n[r])<0?(i+=c,u=1):u=0,s[r]=i;for(r=o;r<a;r++){if(!((i=e[r]-u)<0)){s[r++]=i;break}i+=c,s[r]=i}for(;r<a;r++)s[r]=e[r];return p(s),s}function w(e,n,r){var i,a,o=e.length,s=new Array(o),l=-n,f=t;for(i=0;i<o;i++)a=e[i]+l,l=Math.floor(a/f),a%=f,s[i]=a<0?a+f:a;return"number"==typeof(s=d(s))?(r&&(s=-s),new c(s)):new u(s,r)}function O(e,n){var r,i,a,o,s=e.length,u=n.length,c=h(s+u),l=t;for(a=0;a<s;++a){o=e[a];for(var f=0;f<u;++f)r=o*n[f]+c[a+f],i=Math.floor(r/l),c[a+f]=r-i*l,c[a+f+1]+=i}return p(c),c}function x(e,n){var r,i,a=e.length,o=new Array(a),s=t,u=0;for(i=0;i<a;i++)r=e[i]*n+u,u=Math.floor(r/s),o[i]=r-u*s;for(;u>0;)o[i++]=u%s,u=Math.floor(u/s);return o}function j(e,t){for(var n=[];t-- >0;)n.push(0);return n.concat(e)}function _(e,n,r){return new u(e<t?x(n,e):O(n,f(e)),r)}function S(e){var n,r,i,a,o=e.length,s=h(o+o),u=t;for(i=0;i<o;i++){a=e[i];for(var c=0;c<o;c++)n=a*e[c]+s[i+c],r=Math.floor(n/u),s[i+c]=n-r*u,s[i+c+1]+=r}return p(s),s}function M(e,n){var r,i,a,o,s=e.length,u=h(s),c=t;for(a=0,r=s-1;r>=0;--r)a=(o=a*c+e[r])-(i=m(o/n))*n,u[r]=0|i;return[u,0|a]}function E(e,n){var r,i,a=W(n),o=e.value,l=a.value;if(0===l)throw new Error("Cannot divide by zero");if(e.isSmall)return a.isSmall?[new c(m(o/l)),new c(o%l)]:[s[0],e];if(a.isSmall){if(1===l)return[e,s[0]];if(-1==l)return[e.negate(),s[0]];var g=Math.abs(l);if(g<t){i=d((r=M(o,g))[0]);var v=r[1];return e.sign&&(v=-v),"number"==typeof i?(e.sign!==a.sign&&(i=-i),[new c(i),new c(v)]):[new u(i,e.sign!==a.sign),new c(v)]}l=f(g)}var y=k(o,l);if(-1===y)return[s[0],e];if(0===y)return[s[e.sign===a.sign?1:-1],s[0]];i=(r=o.length+l.length<=200?function(e,n){var r,i,a,o,s,u,c,l=e.length,f=n.length,p=t,m=h(n.length),g=n[f-1],v=Math.ceil(p/(2*g)),y=x(e,v),b=x(n,v);for(y.length<=l&&y.push(0),b.push(0),g=b[f-1],i=l-f;i>=0;i--){for(r=p-1,y[i+f]!==g&&(r=Math.floor((y[i+f]*p+y[i+f-1])/g)),a=0,o=0,u=b.length,s=0;s<u;s++)a+=r*b[s],c=Math.floor(a/p),o+=y[i+s]-(a-c*p),a=c,o<0?(y[i+s]=o+p,o=-1):(y[i+s]=o,o=0);for(;0!==o;){for(r-=1,a=0,s=0;s<u;s++)(a+=y[i+s]-p+b[s])<0?(y[i+s]=a+p,a=0):(y[i+s]=a,a=1);o+=a}m[i]=r}return y=M(y,v)[0],[d(m),d(y)]}(o,l):function(e,n){for(var r,i,a,o,s,u=e.length,c=n.length,l=[],f=[],h=t;u;)if(f.unshift(e[--u]),p(f),k(f,n)<0)l.push(0);else{a=f[(i=f.length)-1]*h+f[i-2],o=n[c-1]*h+n[c-2],i>c&&(a=(a+1)*h),r=Math.ceil(a/o);do{if(k(s=x(n,r),f)<=0)break;r--}while(r);l.push(r),f=b(f,s)}return l.reverse(),[d(l),d(f)]}(o,l))[0];var w=e.sign!==a.sign,O=r[1],j=e.sign;return"number"==typeof i?(w&&(i=-i),i=new c(i)):i=new u(i,w),"number"==typeof O?(j&&(O=-O),O=new c(O)):O=new u(O,j),[i,O]}function k(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var n=e.length-1;n>=0;n--)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function N(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(25)||void 0))}u.prototype=Object.create(s.prototype),c.prototype=Object.create(s.prototype),u.prototype.add=function(e){var t=W(e);if(this.sign!==t.sign)return this.subtract(t.negate());var n=this.value,r=t.value;return t.isSmall?new u(y(n,Math.abs(r)),this.sign):new u(v(n,r),this.sign)},u.prototype.plus=u.prototype.add,c.prototype.add=function(e){var t=W(e),n=this.value;if(n<0!==t.sign)return this.subtract(t.negate());var r=t.value;if(t.isSmall){if(l(n+r))return new c(n+r);r=f(Math.abs(r))}return new u(y(r,Math.abs(n)),n<0)},c.prototype.plus=c.prototype.add,u.prototype.subtract=function(e){var t=W(e);if(this.sign!==t.sign)return this.add(t.negate());var n=this.value,r=t.value;return t.isSmall?w(n,Math.abs(r),this.sign):function(e,t,n){var r;return k(e,t)>=0?r=b(e,t):(r=b(t,e),n=!n),"number"==typeof(r=d(r))?(n&&(r=-r),new c(r)):new u(r,n)}(n,r,this.sign)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(e){var t=W(e),n=this.value;if(n<0!==t.sign)return this.add(t.negate());var r=t.value;return t.isSmall?new c(n-r):w(r,Math.abs(n),n>=0)},c.prototype.minus=c.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},c.prototype.negate=function(){var e=this.sign,t=new c(-this.value);return t.sign=!e,t},u.prototype.abs=function(){return new u(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},u.prototype.multiply=function(e){var n,r,i,a=W(e),o=this.value,c=a.value,l=this.sign!==a.sign;if(a.isSmall){if(0===c)return s[0];if(1===c)return this;if(-1===c)return this.negate();if((n=Math.abs(c))<t)return new u(x(o,n),l);c=f(n)}return r=o.length,i=c.length,new u(-.012*r-.012*i+15e-6*r*i>0?function e(t,n){var r=Math.max(t.length,n.length);if(r<=30)return O(t,n);r=Math.ceil(r/2);var i=t.slice(r),a=t.slice(0,r),o=n.slice(r),s=n.slice(0,r),u=e(a,s),c=e(i,o),l=v(v(u,j(b(b(e(v(a,i),v(s,o)),u),c),r)),j(c,2*r));return p(l),l}(o,c):O(o,c),l)},u.prototype.times=u.prototype.multiply,c.prototype._multiplyBySmall=function(e){return l(e.value*this.value)?new c(e.value*this.value):_(Math.abs(e.value),f(Math.abs(this.value)),this.sign!==e.sign)},u.prototype._multiplyBySmall=function(e){return 0===e.value?s[0]:1===e.value?this:-1===e.value?this.negate():_(Math.abs(e.value),this.value,this.sign!==e.sign)},c.prototype.multiply=function(e){return W(e)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,u.prototype.square=function(){return new u(S(this.value),!1)},c.prototype.square=function(){var e=this.value*this.value;return l(e)?new c(e):new u(S(f(Math.abs(this.value))),!1)},u.prototype.divmod=function(e){var t=E(this,e);return{quotient:t[0],remainder:t[1]}},c.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(e){return E(this,e)[0]},c.prototype.over=c.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(e){return E(this,e)[1]},c.prototype.remainder=c.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(e){var t,n,r,i=W(e),a=this.value,o=i.value;if(0===o)return s[1];if(0===a)return s[0];if(1===a)return s[1];if(-1===a)return i.isEven()?s[1]:s[-1];if(i.sign)return s[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&l(t=Math.pow(a,o)))return new c(m(t));for(n=this,r=s[1];!0&o&&(r=r.times(n),--o),0!==o;)o/=2,n=n.square();return r},c.prototype.pow=u.prototype.pow,u.prototype.modPow=function(e,t){if(e=W(e),(t=W(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var n=s[1],r=this.mod(t);e.isPositive();){if(r.isZero())return s[0];e.isOdd()&&(n=n.multiply(r).mod(t)),e=e.divide(2),r=r.square().mod(t)}return n},c.prototype.modPow=u.prototype.modPow,u.prototype.compareAbs=function(e){var t=W(e),n=this.value,r=t.value;return t.isSmall?1:k(n,r)},c.prototype.compareAbs=function(e){var t=W(e),n=Math.abs(this.value),r=t.value;return t.isSmall?n===(r=Math.abs(r))?0:n>r?1:-1:-1},u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=W(e),n=this.value,r=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:k(n,r)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=W(e),n=this.value,r=t.value;return t.isSmall?n==r?0:n>r?1:-1:n<0!==t.sign?n<0?-1:1:n<0?1:-1},c.prototype.compareTo=c.prototype.compare,u.prototype.equals=function(e){return 0===this.compare(e)},c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(e){return 0!==this.compare(e)},c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(e){return this.compare(e)>0},c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(e){return this.compare(e)<0},c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return 0==(1&this.value[0])},c.prototype.isEven=function(){return 0==(1&this.value)},u.prototype.isOdd=function(){return 1==(1&this.value[0])},c.prototype.isOdd=function(){return 1==(1&this.value)},u.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},u.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},u.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return 1===Math.abs(this.value)},u.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return 0===this.value},u.prototype.isDivisibleBy=function(e){var t=W(e),n=t.value;return 0!==n&&(1===n||(2===n?this.isEven():this.mod(t).equals(s[0])))},c.prototype.isDivisibleBy=u.prototype.isDivisibleBy,u.prototype.isPrime=function(){var e=N(this);if(void 0!==e)return e;for(var t,n,i,a,o=this.abs(),u=o.prev(),c=[2,3,5,7,11,13,17,19],l=u;l.isEven();)l=l.divide(2);for(i=0;i<c.length;i++)if(!(a=r(c[i]).modPow(l,o)).equals(s[1])&&!a.equals(u)){for(n=!0,t=l;n&&t.lesser(u);t=t.multiply(2))(a=a.square().mod(o)).equals(u)&&(n=!1);if(n)return!1}return!0},c.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(e){var t=N(this);if(void 0!==t)return t;for(var n=this.abs(),i=void 0===e?5:e,a=0;a<i;a++){if(!r.randBetween(2,n.minus(2)).modPow(n.prev(),n).isUnit())return!1}return!0},c.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(e){for(var t,n,i,a=r.zero,o=r.one,s=W(e),u=this.abs();!u.equals(r.zero);)t=s.divide(u),n=a,i=s,a=o,s=u,o=n.subtract(t.multiply(o)),u=i.subtract(t.multiply(u));if(!s.equals(1))throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===a.compare(0)&&(a=a.add(e)),this.isNegative()?a.negate():a},c.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var e=this.value;return this.sign?w(e,1,this.sign):new u(y(e,1),this.sign)},c.prototype.next=function(){var e=this.value;return e+1<i?new c(e+1):new u(a,!1)},u.prototype.prev=function(){var e=this.value;return this.sign?new u(y(e,1),!0):w(e,1,this.sign)},c.prototype.prev=function(){var e=this.value;return e-1>-i?new c(e-1):new u(a,!0)};for(var A=[1];A[A.length-1]<=t;)A.push(2*A[A.length-1]);var P=A.length,C=A[P-1];function D(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=t||e instanceof u&&e.value.length<=1}function T(e,t,n){t=W(t);for(var i=e.isNegative(),a=t.isNegative(),o=i?e.not():e,s=a?t.not():t,u=[],c=[],l=!1,f=!1;!l||!f;)o.isZero()?(l=!0,u.push(i?1:0)):i?u.push(o.isEven()?1:0):u.push(o.isEven()?0:1),s.isZero()?(f=!0,c.push(a?1:0)):a?c.push(s.isEven()?1:0):c.push(s.isEven()?0:1),o=o.over(2),s=s.over(2);for(var d=[],p=0;p<u.length;p++)d.push(n(u[p],c[p]));for(var h=r(d.pop()).negate().times(r(2).pow(d.length));d.length;)h=h.add(r(d.pop()).times(r(2).pow(d.length)));return h}u.prototype.shiftLeft=function(e){if(!D(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);for(var t=this;e>=P;)t=t.multiply(C),e-=P-1;return t.multiply(A[e])},c.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(e){var t;if(!D(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var n=this;e>=P;){if(n.isZero())return n;n=(t=E(n,C))[1].isNegative()?t[0].prev():t[0],e-=P-1}return(t=E(n,A[e]))[1].isNegative()?t[0].prev():t[0]},c.prototype.shiftRight=u.prototype.shiftRight,u.prototype.not=function(){return this.negate().prev()},c.prototype.not=u.prototype.not,u.prototype.and=function(e){return T(this,e,function(e,t){return e&t})},c.prototype.and=u.prototype.and,u.prototype.or=function(e){return T(this,e,function(e,t){return e|t})},c.prototype.or=u.prototype.or,u.prototype.xor=function(e){return T(this,e,function(e,t){return e^t})},c.prototype.xor=u.prototype.xor;var R=1<<30,L=(t&-t)*(t&-t)|R;function I(e){var n=e.value,r="number"==typeof n?n|R:n[0]+n[1]*t|L;return r&-r}function F(e,t){return e=W(e),t=W(t),e.greater(t)?e:t}function q(e,t){return e=W(e),t=W(t),e.lesser(t)?e:t}function U(e,t){if(e=W(e).abs(),t=W(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var n,r,i=s[1];e.isEven()&&t.isEven();)n=Math.min(I(e),I(t)),e=e.divide(n),t=t.divide(n),i=i.multiply(n);for(;e.isEven();)e=e.divide(I(e));do{for(;t.isEven();)t=t.divide(I(t));e.greater(t)&&(r=t,t=e,e=r),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}var z=function(e,t){for(var n=e.length,r=Math.abs(t),i=0;i<n;i++){if("-"!==(l=e[i].toLowerCase())&&/[a-z0-9]/.test(l)){if(/[0-9]/.test(l)&&+l>=r){if("1"===l&&1===r)continue;throw new Error(l+" is not a valid digit in base "+t+".")}if(l.charCodeAt(0)-87>=r)throw new Error(l+" is not a valid digit in base "+t+".")}}if(2<=t&&t<=36&&n<=o/Math.log(t)){var a=parseInt(e,t);if(isNaN(a))throw new Error(l+" is not a valid digit in base "+t+".");return new c(parseInt(e,t))}t=W(t);var s=[],u="-"===e[0];for(i=u?1:0;i<e.length;i++){var l,f=(l=e[i].toLowerCase()).charCodeAt(0);if(48<=f&&f<=57)s.push(W(l));else if(97<=f&&f<=122)s.push(W(l.charCodeAt(0)-87));else{if("<"!==l)throw new Error(l+" is not a valid character");var d=i;do{i++}while(">"!==e[i]);s.push(W(e.slice(d+1,i)))}}return B(s,t,u)};function B(e,t,n){var r,i=s[0],a=s[1];for(r=e.length-1;r>=0;r--)i=i.add(e[r].times(a)),a=a.times(t);return n?i.negate():i}function V(e){var t=e.value;return"number"==typeof t&&(t=[t]),1===t.length&&t[0]<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t[0]):"<"+t+">"}function H(e,t){if((t=r(t)).isZero()){if(e.isZero())return"0";throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1))return e.isZero()?"0":e.isNegative()?new Array(1-e).join("10"):"1"+new Array(+e).join("01");var n="";if(e.isNegative()&&t.isPositive()&&(n="-",e=e.abs()),t.equals(1))return e.isZero()?"0":n+new Array(+e+1).join(1);for(var i,a=[],o=e;o.isNegative()||o.compareAbs(t)>=0;){o=(i=o.divmod(t)).quotient;var s=i.remainder;s.isNegative()&&(s=t.minus(s).abs(),o=o.next()),a.push(V(s))}return a.push(V(o)),n+a.reverse().join("")}function G(e){if(l(+e)){var t=+e;if(t===m(t))return new c(t);throw"Invalid integer: "+e}var r="-"===e[0];r&&(e=e.slice(1));var i=e.split(/e/i);if(i.length>2)throw new Error("Invalid integer: "+i.join("e"));if(2===i.length){var a=i[1];if("+"===a[0]&&(a=a.slice(1)),(a=+a)!==m(a)||!l(a))throw new Error("Invalid integer: "+a+" is not a valid exponent.");var o=i[0],s=o.indexOf(".");if(s>=0&&(a-=o.length-s-1,o=o.slice(0,s)+o.slice(s+1)),a<0)throw new Error("Cannot include negative exponent part for integers");e=o+=new Array(a+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);for(var f=[],d=e.length,h=n,g=d-h;d>0;)f.push(+e.slice(g,d)),(g-=h)<0&&(g=0),d-=h;return p(f),new u(f,r)}function W(e){return"number"==typeof e?function(e){if(l(e)){if(e!==m(e))throw new Error(e+" is not an integer.");return new c(e)}return G(e.toString())}(e):"string"==typeof e?G(e):e}u.prototype.toString=function(e){if(void 0===e&&(e=10),10!==e)return H(this,e);for(var t,n=this.value,r=n.length,i=String(n[--r]);--r>=0;)t=String(n[r]),i+="0000000".slice(t.length)+t;return(this.sign?"-":"")+i},c.prototype.toString=function(e){return void 0===e&&(e=10),10!=e?H(this,e):String(this.value)},u.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return+this.toString()},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf;for(var X=0;X<1e3;X++)s[X]=new c(X),X>0&&(s[-X]=new c(-X));return s.one=s[1],s.zero=s[0],s.minusOne=s[-1],s.max=F,s.min=q,s.gcd=U,s.lcm=function(e,t){return e=W(e).abs(),t=W(t).abs(),e.divide(U(e,t)).multiply(t)},s.isInstance=function(e){return e instanceof u||e instanceof c},s.randBetween=function(e,n){var r=q(e=W(e),n=W(n)),i=F(e,n).subtract(r);if(i.isSmall)return r.add(Math.round(Math.random()*i));for(var a=[],o=!0,s=i.value.length-1;s>=0;s--){var l=o?i.value[s]:t,f=m(Math.random()*l);a.unshift(f),f<l&&(o=!1)}return a=d(a),r.add("number"==typeof a?new c(a):new u(a,!1))},s.fromArray=function(e,t,n){return B(e.map(W),W(t||10),n)},s}(),void 0!==e&&e.hasOwnProperty("exports")&&(e.exports=r),void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n),r)});e.exports=i}).call(t,n(854)(e))},function(e,t,n){"use strict";t.a=Array.isArray},function(e,t,n){"use strict";var r=n(209);t.a=function(e){return null!=e?Object(r.a)(e)?e:[e]:[]}},function(e,t,n){"use strict";t.a=function(e){return"function"==typeof e}},function(e,t,n){"use strict";t.b=function(e){return e&&e.constructor===a},t.a=a;var r=n(213),i=n(0);function a(){var e=[],t=[],n=[],o=[],s=[],u=!1;return{constructor:a,insert:function(t){for(var n=Object(i.array)(t),r=0,a=n.length;r<a;++r)e.push(n[r]);return this},remove:function(e){for(var n=Object(i.isFunction)(e)?o:t,r=Object(i.array)(e),a=0,s=r.length;a<s;++a)n.push(r[a]);return this},modify:function(e,t,r){var a={field:t,value:Object(i.constant)(r)};return Object(i.isFunction)(e)?(a.filter=e,s.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return Object(i.isFunction)(e)?s.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return u=!0,this},pulse:function(i,a){var c,l,f,d,p,h,m;for(l=0,f=e.length;l<f;++l)i.add.push(Object(r.b)(e[l]));for(c={},l=0,f=t.length;l<f;++l)h=t[l],c[Object(r.f)(h)]=h;for(l=0,f=o.length;l<f;++l)p=o[l],a.forEach(function(e){p(e)&&(c[Object(r.f)(e)]=e)});for(m in c)i.rem.push(c[m]);function g(e,t,n){n?e[t]=n(e):i.encode=t,u||(c[Object(r.f)(e)]=e)}for(c={},l=0,f=n.length;l<f;++l)g((d=n[l]).tuple,d.field,d.value),i.modifies(d.field);for(l=0,f=s.length;l<f;++l)d=s[l],p=d.filter,a.forEach(function(e){p(e)&&g(e,d.field,d.value)}),i.modifies(d.field);if(u)i.mod=t.length||o.length?a.filter(function(e){return c.hasOwnProperty(Object(r.f)(e))}):a.slice();else for(m in c)i.mod.push(c[m]);return i}}}},function(e,t,n){"use strict";t.c=function(e){return!(!e||!a(e))},t.f=a,t.b=s,t.a=function(e){return u(e,s({}))},t.d=u,t.e=function(e,t){return o(t,a(e))};var r=Symbol("vega_id"),i=1;function a(e){return e[r]}function o(e,t){return e[r]=t,e}function s(e){var t=e===Object(e)?e:{data:e};return a(t)?t:o(t,i++)}function u(e,t){for(var n in e)t[n]=e[n];return t}},function(e,t,n){"use strict";var r=n(65),i=n(48);t.a=function(e,t){var n,a,o,s,u=Object(i.a)("beforesend","progress","load","error"),c=Object(r.a)(),l=new XMLHttpRequest,f=null,d=null,p=0;function h(e){var t,r=l.status;if(!r&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(l)||r>=200&&r<300||304===r){if(o)try{t=o.call(n,l)}catch(e){return void u.call("error",n,e)}else t=l;u.call("load",n,t)}else u.call("error",n,e)}if("undefined"==typeof XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=h:l.onreadystatechange=function(e){l.readyState>3&&h(e)},l.onprogress=function(e){u.call("progress",n,e)},n={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?c.get(e):(null==t?c.remove(e):c.set(e,t+""),n)},mimeType:function(e){return arguments.length?(a=null==e?null:e+"",n):a},responseType:function(e){return arguments.length?(s=e,n):s},timeout:function(e){return arguments.length?(p=+e,n):p},user:function(e){return arguments.length<1?f:(f=null==e?null:e+"",n)},password:function(e){return arguments.length<1?d:(d=null==e?null:e+"",n)},response:function(e){return o=e,n},get:function(e,t){return n.send("GET",e,t)},post:function(e,t){return n.send("POST",e,t)},send:function(t,r,i){return l.open(t,e,!0,f,d),null==a||c.has("accept")||c.set("accept",a+",*/*"),l.setRequestHeader&&c.each(function(e,t){l.setRequestHeader(t,e)}),null!=a&&l.overrideMimeType&&l.overrideMimeType(a),null!=s&&(l.responseType=s),p>0&&(l.timeout=p),null==i&&"function"==typeof r&&(i=r,r=null),null!=i&&1===i.length&&(i=function(e){return function(t,n){e(null==t?n:null)}}(i)),null!=i&&n.on("error",i).on("load",function(e){i(null,e)}),u.call("beforesend",n,l),l.send(null==r?null:r),n},abort:function(){return l.abort(),n},on:function(){var e=u.on.apply(u,arguments);return e===u?n:e}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return n.get(t)}return n}},function(e,t,n){"use strict";var r=n(375);t.a=function(e){if(null==e)return r.a;var t,n,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,r){r||(t=n=0);var u=2,c=e.length,l=new Array(c);for(l[0]=(t+=e[0])*i+o,l[1]=(n+=e[1])*a+s;u<c;)l[u]=e[u],++u;return l}}},function(e,t,n){"use strict";t.b=o;var r=n(903),i=n(215);function a(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=o(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function o(e,t){var n=Object(i.a)(e.transform),a=e.arcs;function o(e,t){t.length&&t.pop();for(var i=a[e<0?~e:e],o=0,s=i.length;o<s;++o)t.push(n(i[o],o));e<0&&Object(r.a)(t,s)}function s(e){return n(e)}function u(e){for(var t=[],n=0,r=e.length;n<r;++n)o(e[n],t);return t.length<2&&t.push(t[0]),t}function c(e){for(var t=u(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(c)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=s(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(s);break;case"LineString":n=u(t.arcs);break;case"MultiLineString":n=t.arcs.map(u);break;case"Polygon":n=l(t.arcs);break;case"MultiPolygon":n=t.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(t)}t.a=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return a(e,t)})}:a(e,t)}},function(e,t,n){"use strict";var r=n(962),i=["l",0,0,0,0,0,0,0];function a(e,t){var n=i[0]=e[0];if("a"===n||"A"===n)i[1]=t*e[1],i[2]=t*e[2],i[6]=t*e[6],i[7]=t*e[7];else for(var r=1,a=e.length;r<a;++r)i[r]=t*e[r];return i}function o(e,t,n,i){for(var a=Object(r.b)(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n),o=0;o<a.length;++o){var s=Object(r.a)(a[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}t.a=function(e,t,n,r,i){var s,u,c,l,f,d=null,p=0,h=0,m=0,g=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var v=0,y=t.length;v<y;++v){switch(s=t[v],1!==i&&(s=a(s,i)),s[0]){case"l":p+=s[1],h+=s[2],e.lineTo(p+n,h+r);break;case"L":p=s[1],h=s[2],e.lineTo(p+n,h+r);break;case"h":p+=s[1],e.lineTo(p+n,h+r);break;case"H":p=s[1],e.lineTo(p+n,h+r);break;case"v":h+=s[1],e.lineTo(p+n,h+r);break;case"V":h=s[1],e.lineTo(p+n,h+r);break;case"m":p+=s[1],h+=s[2],e.moveTo(p+n,h+r);break;case"M":p=s[1],h=s[2],e.moveTo(p+n,h+r);break;case"c":u=p+s[5],c=h+s[6],m=p+s[3],g=h+s[4],e.bezierCurveTo(p+s[1]+n,h+s[2]+r,m+n,g+r,u+n,c+r),p=u,h=c;break;case"C":p=s[5],h=s[6],m=s[3],g=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,m+n,g+r,p+n,h+r);break;case"s":u=p+s[3],c=h+s[4],m=2*p-m,g=2*h-g,e.bezierCurveTo(m+n,g+r,p+s[1]+n,h+s[2]+r,u+n,c+r),m=p+s[1],g=h+s[2],p=u,h=c;break;case"S":u=s[3],c=s[4],m=2*p-m,g=2*h-g,e.bezierCurveTo(m+n,g+r,s[1]+n,s[2]+r,u+n,c+r),p=u,h=c,m=s[1],g=s[2];break;case"q":u=p+s[3],c=h+s[4],m=p+s[1],g=h+s[2],e.quadraticCurveTo(m+n,g+r,u+n,c+r),p=u,h=c;break;case"Q":u=s[3],c=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,u+n,c+r),p=u,h=c,m=s[1],g=s[2];break;case"t":u=p+s[1],c=h+s[2],null===d[0].match(/[QqTt]/)?(m=p,g=h):"t"===d[0]?(m=2*p-l,g=2*h-f):"q"===d[0]&&(m=2*p-m,g=2*h-g),l=m,f=g,e.quadraticCurveTo(m+n,g+r,u+n,c+r),h=c,m=(p=u)+s[1],g=h+s[2];break;case"T":u=s[1],c=s[2],m=2*p-m,g=2*h-g,e.quadraticCurveTo(m+n,g+r,u+n,c+r),p=u,h=c;break;case"a":o(e,p+n,h+r,[s[1],s[2],s[3],s[4],s[5],s[6]+p+n,s[7]+h+r]),p+=s[6],h+=s[7];break;case"A":o(e,p+n,h+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),p=s[6],h=s[7];break;case"z":case"Z":e.closePath()}d=s}}},function(e,t,n){"use strict";var r=n(57),i=n(93),a=n(134),o=n(58),s=n(136);t.a=function(e,t){function n(e,n){var r=n.x||0,i=n.y||0;e.translate(r,i),e.beginPath(),t(e,n),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",Object(s.a)(n)),e("d",t(null,n))},bound:function(e,n){return t(Object(i.a)(e),n),Object(r.a)(e,n).translate(n.x||0,n.y||0)},draw:Object(a.a)(n),pick:Object(o.c)(n)}}},function(e,t,n){"use strict";var r=n(402);t.a=function(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=Object(r.a)(e,t,t.fill),!0)}},function(e,t,n){"use strict";t.a=function(e,t){return"translate("+e+","+t+")"}},function(e,t,n){"use strict";var r=n(57),i=n(93),a=n(134),o=n(58);t.a=function(e,t){function n(e,n){e.beginPath(),t(e,n)}var s=Object(o.a)(n);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var a=n.items;return 0===a.length?e:(t(Object(i.a)(e),a),Object(r.a)(e,a[0]))},draw:Object(a.b)(n),pick:function(e,t,n,r,i,a){var o=t.items,u=t.bounds;return!o||!o.length||u&&!u.contains(i,a)?null:(e.pixelRatio>1&&(n*=e.pixelRatio,r*=e.pixelRatio),s(e,o,n,r)?o[0]:null)}}}},function(e,t,n){"use strict";t.a=a;var r=n(59),i=n(92);function a(e){this._active=null,this._handlers={},this._loader=e||Object(i.d)()}var o=a.prototype;o.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},o.element=function(){return this._el},o.origin=function(e){return this._origin=e||[0,0],this},o.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},o.on=function(){},o.off=function(){},o._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&!n||e[r].handler===n)return r;return-1},o.handlers=function(){var e,t=this._handlers,n=[];for(e in t)n.push.apply(n,t[e]);return n},o.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},o.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then(function(t){var n=new MouseEvent(e.type,e),i=Object(r.d)(null,"a");for(var a in t)i.setAttribute(a,t[a]);i.dispatchEvent(n)}).catch(function(){})},o.handleTooltip=function(e,t,n){this._el.setAttribute("title",n||"")}},function(e,t,n){"use strict";t.b=function(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');n&&(a+=" "+n);return a+">"},t.a=function(e){return"</"+e+">"}},function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"h",function(){return i}),n.d(t,"o",function(){return a}),n.d(t,"l",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"n",function(){return u}),n.d(t,"g",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"f",function(){return f}),n.d(t,"i",function(){return d}),n.d(t,"j",function(){return p}),n.d(t,"m",function(){return h}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return g}),n.d(t,"k",function(){return v});var r="log",i="pow",a="utc",o="sqrt",s="band",u="time",c="point",l="linear",f="ordinal",d="quantile",p="quantize",h="threshold",m="bin-linear",g="bin-ordinal",v="sequential"},function(e,t,n){"use strict";var r=n(416),i=n(19);t.a=function(e,t,n){var a=Object(i.J)(t),o=a&&a.headless;return o?e.runAsync().then(function(){return Object(r.a)(e,null,null,o,n).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)}},function(e,t,n){"use strict";var r=n(0),i=["value","update","react","bind"];function a(e,t){Object(r.error)(e+' for "outer" push: '+Object(r.stringValue)(t))}t.a=function(e,t){var n=e.name;if("outer"===e.push)t.signals[n]||a("No prior signal definition",n),i.forEach(function(t){void 0!==e[t]&&a("Invalid property ",t)});else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r="Literal",i="Identifier"},function(e,t,n){"use strict";t.a=function(e){var t=this.context.data[e];return t?t.values.value:[]},t.b=function(e,t,n,o){t[0].type!==r.b&&Object(a.error)("First argument to data functions must be a string literal.");var s=t[0].value,u=i.a+s;o.hasOwnProperty(u)||(o[u]=n.getData(s).tuplesRef())},t.c=function(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i},t.d=function(e,t,n,o){t[0].type!==r.b&&Object(a.error)("First argument to indata must be a string literal.");t[1].type!==r.b&&Object(a.error)("Second argument to indata must be a string literal.");var s=t[0].value,u=t[1].value,c=i.b+u;o.hasOwnProperty(c)||(o[c]=n.getData(s).indataRef(n,u))},t.e=function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(a.truthy).insert(t)),1};var r=n(227),i=n(145),a=n(0)},function(e,t,n){"use strict";var r=n(61),i=n(20),a=n(27),o=n(1),s=n(0);function u(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)o[(r=e.params[i]).name]=c(r,t,n);return o}function c(e,t,n){var r=e.type,a=t[e.name];return"index"===r?function(e,t,n){Object(s.isString)(t.from)||Object(s.error)('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==a?"param"===r?function(e,t,n){var r=t[e.name];return e.array?(Object(s.isArray)(r)||Object(s.error)("Expected an array of sub-parameters. Instead: "+Object(s.stringValue)(r)),r.map(function(t){return f(e,t,n)})):f(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!Object(i.g)(a)?a.map(function(t){return l(e,t,n)}):l(e,a,n):void(e.required&&Object(s.error)("Missing required "+Object(s.stringValue)(t.type)+" parameter: "+Object(s.stringValue)(e.name)))}function l(e,t,n){var a=e.type;if(Object(i.g)(t))return d(a)?Object(s.error)("Expression references can not be signals."):p(a)?n.fieldRef(t):h(a)?n.compareRef(t):n.signalRef(t.signal);var o,u=e.expr||p(a);return u&&((o=t)&&o.expr)?Object(r.a)(t.expr,n):u&&function(e){return e&&e.field}(t)?Object(i.f)(t.field):d(a)?Object(r.a)(t,n):function(e){return"data"===e}(a)?Object(i.k)(n.getData(t).values):p(a)?Object(i.f)(t):h(a)?n.compareRef(t):t}function f(e,t,n){var r,o,c,l,f;for(l=0,f=e.params.length;l<f;++l){for(c in(o=e.params[l]).key)if(o.key[c]!==t[c]){o=null;break}if(o)break}return o||Object(s.error)("Unsupported parameter: "+Object(s.stringValue)(t)),r=Object(s.extend)(u(o,t,n),o.key),Object(i.k)(n.add(Object(a.p)(r)))}function d(e){return"expr"===e}function p(e){return"field"===e}function h(e){return"compare"===e}t.a=function(e,t){var n=Object(o.i)(e.type);n||Object(s.error)("Unrecognized transform type: "+Object(s.stringValue)(e.type));var r=Object(i.e)(n.type.toLowerCase(),null,u(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}},function(e,t,n){"use strict";function r(e){return!!e.or}function i(e){return!!e.and}function a(e){return!!e.not}Object.defineProperty(t,"__esModule",{value:!0}),t.isLogicalOr=r,t.isLogicalAnd=i,t.isLogicalNot=a,t.forEachLeave=function e(t,n){if(a(t))e(t.not,n);else if(i(t))for(var o=0,s=t.and;o<s.length;o++)e(s[o],n);else if(r(t))for(var u=0,c=t.or;u<c.length;u++)e(c[u],n);else n(t)},t.normalizeLogicalOperand=function e(t,n){return a(t)?{not:e(t.not,n)}:i(t)?{and:t.and.map(function(t){return e(t,n)})}:r(t)?{or:t.or.map(function(t){return e(t,n)})}:n(t)}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);t.defaultLegendConfig={};var a={entryPadding:1,format:1,offset:1,orient:1,padding:1,tickCount:1,title:1,type:1,values:1,zindex:1},o=r({},a,{opacity:1,shape:1,stroke:1,fill:1,size:1,encode:1});t.LEGEND_PROPERTIES=i.flagKeys(a),t.VG_LEGEND_PROPERTIES=i.flagKeys(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SELECTION_ID="_vgsid_",t.defaultConfig={single:{on:"click",fields:[t.SELECTION_ID],resolve:"global",empty:"all"},multi:{on:"click",fields:[t.SELECTION_ID],toggle:"event.shiftKey",resolve:"global",empty:"all"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97),i=n(6),a=n(28),o=n(7),s=n(3),u=n(22),c=n(10),l=n(2),f={zero:1,center:1,normalize:1};function d(e){return!!f[e]}t.isStackOffset=d,t.STACKABLE_MARKS=[u.BAR,u.AREA,u.RULE,u.POINT,u.CIRCLE,u.SQUARE,u.LINE,u.TEXT,u.TICK],t.STACK_BY_DEFAULT_MARKS=[u.BAR,u.AREA],t.stack=function(e,n,f){var p=u.isMarkDef(e)?e.type:e;if(!l.contains(t.STACKABLE_MARKS,p))return null;var h=function(e){var t=e.x,n=e.y;if(o.isFieldDef(t)&&o.isFieldDef(n))if("quantitative"===t.type&&"quantitative"===n.type){if(t.stack)return"x";if(n.stack)return"y";if(!!t.aggregate!=!!n.aggregate)return t.aggregate?"x":"y"}else{if("quantitative"===t.type)return"x";if("quantitative"===n.type)return"y"}else{if(o.isFieldDef(t)&&"quantitative"===t.type)return"x";if(o.isFieldDef(n)&&"quantitative"===n.type)return"y"}}(n);if(!h)return null;var m=n[h],g=o.isStringFieldDef(m)?o.vgField(m,{}):void 0,v="x"===h?"y":"x",y=n[v],b=o.isStringFieldDef(y)?o.vgField(y,{}):void 0,w=i.NONPOSITION_CHANNELS.reduce(function(e,t){if(a.channelHasField(n,t)){var r=n[t];(l.isArray(r)?r:[r]).forEach(function(n){var r=o.getFieldDef(n);if(!r.aggregate){var i=o.isStringFieldDef(r)?o.vgField(r,{}):void 0;(!i||i!==b&&i!==g)&&e.push({channel:t,fieldDef:r})}})}return e},[]);if(0===w.length)return null;var O=void 0;return(O=void 0!==m.stack?m.stack:l.contains(t.STACK_BY_DEFAULT_MARKS,p)&&void 0===f?"zero":f)&&d(O)?m.scale&&m.scale.type&&m.scale.type!==c.ScaleType.LINEAR?(s.warn(s.message.cannotStackNonLinearScale(m.scale.type)),null):a.channelHasField(n,h===i.X?i.X2:i.Y2)?(s.warn(s.message.cannotStackRangedMark(h)),null):(m.aggregate&&!l.contains(r.SUM_OPS,m.aggregate)&&s.warn(s.message.stackNonSummativeAggregate(m.aggregate)),{groupbyChannel:y?v:void 0,fieldChannel:h,impute:l.contains(["area","line"],p),stackBy:w,offset:O}):null}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),s=n(7),u=n(3),c=n(2),l=n(24);var f=function(e){function t(t,n){var r=e.call(this)||this;return r.dimensions=t,r.measures=n,r}return i(t,e),t.prototype.clone=function(){return new t(a({},this.dimensions),c.duplicate(this.measures))},t.makeFromEncoding=function(e){var n=!1;e.forEachFieldDef(function(e){e.aggregate&&(n=!0)});var r={},i={};return n?(e.forEachFieldDef(function(t,n){t.aggregate?"count"===t.aggregate?(r["*"]=r["*"]||{},r["*"].count=s.vgField(t,{aggregate:"count"})):(r[t.field]=r[t.field]||{},r[t.field][t.aggregate]=s.vgField(t),o.isScaleChannel(n)&&"unaggregated"===e.scaleDomain(n)&&(r[t.field].min=s.vgField(t,{aggregate:"min"}),r[t.field].max=s.vgField(t,{aggregate:"max"}))):function(e,t,n){n.bin?(e[s.vgField(n,{})]=!0,e[s.vgField(n,{binSuffix:"end"})]=!0,l.binRequiresRange(n,t)&&(e[s.vgField(n,{binSuffix:"range"})]=!0)):e[s.vgField(n)]=!0}(i,n,t)}),c.keys(i).length+c.keys(r).length===0?null:new t(i,r)):null},t.makeFromTransform=function(e){for(var n={},r={},i=0,a=e.aggregate;i<a.length;i++){(l=a[i]).op&&("count"===l.op?(r["*"]=r["*"]||{},r["*"].count=l.as||s.vgField(l)):(r[l.field]=r[l.field]||{},r[l.field][l.op]=l.as||s.vgField(l)))}for(var o=0,u=e.groupby;o<u.length;o++){var l;n[l=u[o]]=!0}return c.keys(n).length+c.keys(r).length===0?null:new t(n,r)},t.prototype.merge=function(e){c.differ(this.dimensions,e.dimensions)?u.debug("different dimensions, cannot merge"):(!function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];for(var i in r)r.hasOwnProperty(i)&&(n in e?e[n][i]=r[i]:e[n]={op:r[i]})}}(this.measures,e.measures),e.remove())},t.prototype.addDimensions=function(e){var t=this;e.forEach(function(e){return t.dimensions[e]=!0})},t.prototype.dependentFields=function(){var e={};return c.keys(this.dimensions).forEach(function(t){return e[t]=!0}),c.keys(this.measures).forEach(function(t){return e[t]=!0}),e},t.prototype.producedFields=function(){var e=this,t={};return c.keys(this.measures).forEach(function(n){c.keys(e.measures[n]).forEach(function(e){t[e+"_"+n]=!0})}),t},t.prototype.assemble=function(){for(var e=[],t=[],n=[],r=0,i=c.keys(this.measures);r<i.length;r++)for(var a=i[r],o=0,s=c.keys(this.measures[a]);o<s.length;o++){var u=s[o];n.push(this.measures[a][u]),e.push(u),t.push(a)}return{type:"aggregate",groupby:c.keys(this.dimensions),ops:e,fields:t,as:n}},t}(n(14).DataFlowNode);t.AggregateNode=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),s=n(7),u=n(10),c=n(2),l=function(e){function t(t){var n=e.call(this)||this;return n.fieldDefs=t,n}return i(t,e),t.prototype.clone=function(){return new t(a({},this.fieldDefs))},t.make=function(e){if("filter"!==e.config.invalidValues)return null;var n=e.reduceFieldDef(function(t,n,r){var i=o.isScaleChannel(r)&&e.getScaleComponent(r);if(i){var a=i.get("type");u.hasContinuousDomain(a)&&!n.aggregate&&(t[n.field]=n)}return t},{});return c.keys(n).length?new t(n):null},Object.defineProperty(t.prototype,"filter",{get:function(){return this.fieldDefs},enumerable:!0,configurable:!0}),t.prototype.assemble=function(){var e=this,t=c.keys(this.filter).reduce(function(t,n){var r=e.fieldDefs[n],i=s.vgField(r,{expr:"datum"});return null!==r&&(t.push(i+" !== null"),t.push("!isNaN("+i+")")),t},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null},t}(n(14).DataFlowNode);t.FilterInvalidNode=l},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(97),s=n(7),u=n(3),c=n(230),l=n(100),f=n(153),d=n(2),p=n(13);var h=function(e){function t(t){var n=e.call(this)||this;return n._parse={},n._parse=t,n}return i(t,e),t.prototype.clone=function(){return new t(d.duplicate(this.parse))},t.make=function(e){var n={},r={};(e.transforms||[]).forEach(function(e){f.isCalculate(e)?r[e.as]=!0:f.isFilter(e)&&c.forEachLeave(e.filter,function(e){l.isFieldPredicate(e)&&e.timeUnit&&(n[e.field]="date")})},{}),(p.isUnitModel(e)||p.isFacetModel(e))&&e.forEachFieldDef(function(e){if(s.isTimeFieldDef(e))n[e.field]="date";else if(s.isNumberFieldDef(e)){if(r[e.field]||o.isCountingAggregateOp(e.aggregate))return;n[e.field]="number"}});var i=e.data;if(i&&i.format&&i.format.parse){var a=i.format.parse;d.keys(a).forEach(function(e){n[e]=a[e]})}var h=e.component.data.ancestorParse;return d.keys(h).forEach(function(e){n[e]!==h[e]?u.warn(u.message.differentParse(e,n[e],h[e])):delete n[e]}),0===d.keys(n).length?null:new t(n)},Object.defineProperty(t.prototype,"parse",{get:function(){return this._parse},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){this._parse=a({},this._parse,e.parse),e.remove()},t.prototype.assembleFormatParse=function(){return this._parse},t.prototype.producedFields=function(){return d.toSet(d.keys(this.parse))},t.prototype.dependentFields=function(){return d.toSet(d.keys(this.parse))},t.prototype.assembleTransforms=function(){var e=this;return d.keys(this._parse).map(function(t){var n=function(e,t){var n="datum"+d.accessPath(e);return"number"===t?"toNumber("+n+")":"boolean"===t?"toBoolean("+n+")":"string"===t?"toString("+n+")":"date"===t?"toDate("+n+")":0===t.indexOf("date:")?"timeParse("+n+","+t.slice(5,t.length)+")":0===t.indexOf("utc:")?"utcParse("+n+","+t.slice(4,t.length)+")":(u.warn(u.message.unrecognizedParse(t)),null)}(t,e._parse[t]);return n?{type:"formula",expr:n,as:t}:null}).filter(function(e){return null!==e})},t}(n(14).DataFlowNode);t.ParseNode=h},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(7),s=n(2),u=n(24);var c=function(e){function t(t){var n=e.call(this)||this;return n._stack=t,n}return i(t,e),t.prototype.clone=function(){return new t(s.duplicate(this._stack))},t.make=function(e){var n,r=e.stack;if(!r)return null;r.groupbyChannel&&(n=e.fieldDef(r.groupbyChannel));var i,a=function(e){return e.stack.stackBy.reduce(function(e,t){var n=t.fieldDef,r=o.vgField(n);return r&&e.push(r),e},[])}(e),s=e.encoding.order;return i=s?u.sortParams(s):a.reduce(function(e,t){return e.field.push(t),e.order.push("descending"),e},{field:[],order:[]}),new t({dimensionFieldDef:n,field:e.vgField(r.fieldChannel),facetby:[],stackby:a,sort:i,offset:r.offset,impute:r.impute})},Object.defineProperty(t.prototype,"stack",{get:function(){return this._stack},enumerable:!0,configurable:!0}),t.prototype.addDimensions=function(e){this._stack.facetby=this._stack.facetby.concat(e)},t.prototype.dependentFields=function(){var e={};e[this._stack.field]=!0,this.getGroupbyFields().forEach(function(t){return e[t]=!0}),this._stack.facetby.forEach(function(t){return e[t]=!0});var t=this._stack.sort.field;return a.isArray(t)?t.forEach(function(t){return e[t]=!0}):e[t]=!0,e},t.prototype.producedFields=function(){var e={};return e[this._stack.field+"_start"]=!0,e[this._stack.field+"_end"]=!0,e},t.prototype.getGroupbyFields=function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute;return t?t.bin?n?[o.vgField(t,{binSuffix:"mid"})]:[o.vgField(t,{}),o.vgField(t,{binSuffix:"end"})]:[o.vgField(t)]:[]},t.prototype.assemble=function(){var e=[],t=this._stack,n=t.facetby,r=t.field,i=t.dimensionFieldDef,a=t.impute,s=t.offset,u=t.sort,c=t.stackby;if(a&&i){var l=i?o.vgField(i,{binSuffix:"mid"}):void 0;i.bin&&e.push({type:"formula",expr:"("+o.vgField(i,{expr:"datum"})+"+"+o.vgField(i,{expr:"datum",binSuffix:"end"})+")/2",as:l}),e.push({type:"impute",field:r,groupby:c,key:l,method:"value",value:0})}return e.push({type:"stack",groupby:this.getGroupbyFields().concat(n),field:r,sort:u,as:[r+"_start",r+"_end"],offset:s}),e},t}(n(14).DataFlowNode);t.StackNode=c},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=n(3),s=n(10),u=n(2),c=n(16),l=n(160);t.BRUSH="_brush",t.SCALE_TRIGGER="_scale_trigger";var f={predicate:"vlInterval",scaleDomain:"vlIntervalDomain",signals:function(e,n){var r=n.name,i=l.default.has(n),f=[],p=[],h=[],m=[];if(n.translate&&!i){var g="!event.item || event.item.mark.name !== "+u.stringValue(r+t.BRUSH);d(n,function(e,t){var n=t.between[0].filter||(t.between[0].filter=[]);n.indexOf(g)<0&&n.push(g)})}return n.project.forEach(function(r){var i=r.channel;if(i===a.X||i===a.Y){var g=function(e,n,r){var i=c.channelSignalName(n,r,"visual"),o=c.channelSignalName(n,r,"data"),f=l.default.has(n),p=e.scaleName(r),h=u.stringValue(p),m=e.getScaleComponent(r),g=m?m.get("type"):void 0,v=e.getSizeSignalRef(r===a.X?"width":"height").signal,y=r+"(unit)",b=d(n,function(e,t){return e.concat({events:t.between[0],update:"["+y+", "+y+"]"},{events:t,update:"["+i+"[0], clamp("+y+", 0, "+v+")]"})});return b.push({events:{signal:n.name+t.SCALE_TRIGGER},update:s.hasContinuousDomain(g)&&!s.isBinScale(g)?"[scale("+h+", "+o+"[0]), scale("+h+", "+o+"[1])]":"[0, 0]"}),f?[{name:o,on:[]}]:[{name:i,value:[],on:b},{name:o,on:[{events:{signal:i},update:i+"[0] === "+i+"[1] ? null : invert("+h+", "+i+")"}]}]}(e,n,i),v=c.channelSignalName(n,i,"data"),y=c.channelSignalName(n,i,"visual"),b=u.stringValue(e.scaleName(i)),w=e.getScaleComponent(i).get("type"),O=s.hasContinuousDomain(w)?"+":"";f.push.apply(f,g),h.push(v),p.push("{encoding: "+u.stringValue(i)+", field: "+u.stringValue(r.field)+", extent: "+v+"}"),m.push({scaleName:e.scaleName(i),expr:"(!isArray("+v+") || ("+O+"invert("+b+", "+y+")[0] === "+O+v+"[0] && "+O+"invert("+b+", "+y+")[1] === "+O+v+"[1]))"})}else o.warn("Interval selections only support x and y encoding channels.")}),i||f.push({name:r+t.SCALE_TRIGGER,update:m.map(function(e){return e.expr}).join(" && ")+" ? "+(r+t.SCALE_TRIGGER)+" : {}"}),f.concat({name:r+c.TUPLE,on:[{events:h.map(function(e){return{signal:e}}),update:h.join(" && ")+" ? {unit: "+c.unitName(e)+", intervals: ["+p.join(", ")+"]} : null"}]})},modifyExpr:function(e,t){return t.name+c.TUPLE+", "+("global"===t.resolve?"true":"{unit: "+c.unitName(e)+"}")},marks:function(e,n,a){var o=n.name,s=c.positionalProjections(n),f=s.xi,d=s.yi,p="data("+u.stringValue(n.name+c.STORE)+")";if(l.default.has(n))return a;var h={x:null!==f?{signal:o+"_x[0]"}:{value:0},y:null!==d?{signal:o+"_y[0]"}:{value:0},x2:null!==f?{signal:o+"_x[1]"}:{field:{group:"width"}},y2:null!==d?{signal:o+"_y[1]"}:{field:{group:"height"}}};if("global"===n.resolve)for(var m=0,g=u.keys(h);m<g.length;m++){var v=g[m];h[v]=[r({test:p+".length && "+p+"[0].unit === "+c.unitName(e)},h[v]),{value:0}]}var y=n.mark,b=y.fill,w=y.fillOpacity,O=i(y,["fill","fillOpacity"]),x=u.keys(O).reduce(function(e,t){return e[t]={value:O[t]},e},{});return[{name:o+t.BRUSH+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:b},fillOpacity:{value:w}},update:h}}].concat(a,{name:o+t.BRUSH,type:"rect",clip:!0,encode:{enter:r({fill:{value:"transparent"}},x),update:h}})}};function d(e,t){return e.events.reduce(function(e,n){return n.between?t(e,n):(o.warn(n+" is not an ordered event stream for interval selections"),e)},[])}t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(16),a={has:function(e){return"interval"!==e.type&&e.nearest},marks:function(e,t,n){var a=i.positionalProjections(t),o=a.x,s=a.y,u=e.mark();if("line"===u||"area"===u)return r.warn(r.message.nearestNotSupportForContinuous(u)),n;var c={name:e.getName("voronoi"),type:"path",from:{data:e.getName("marks")},encode:{enter:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}}},transform:[{type:"voronoi",x:o||!o&&!s?"datum.x":{expr:"0"},y:s||!o&&!s?"datum.y":{expr:"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},l=0,f=!1;return n.forEach(function(t,n){var r=t.name||"";r===e.component.mark[0].name?l=n:r.indexOf("voronoi")>=0&&(f=!0)}),f||n.splice(l+1,0,c),n}};t.default=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,a){return t.apply(this,arguments)};case 6:return function(e,n,r,i,a,o){return t.apply(this,arguments)};case 7:return function(e,n,r,i,a,o,s){return t.apply(this,arguments)};case 8:return function(e,n,r,i,a,o,s,u){return t.apply(this,arguments)};case 9:return function(e,n,r,i,a,o,s,u,c){return t.apply(this,arguments)};case 10:return function(e,n,r,i,a,o,s,u,c,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},function(e,t,n){var r=n(207);e.exports=function(e){return function t(n){return 0===arguments.length||r(n)?t:e.apply(this,arguments)}}},function(e,t,n){void 0!==e&&"undefined"==typeof nerdamer&&(nerdamer=n(208),n(855)),function(){"use strict";var e=nerdamer.getCore(),t=e.PARSER,n=e.Frac,r=e.Utils.isSymbol,i=e.groups.FN,a=e.Symbol,o=e.Utils.text,s=e.Utils.inBrackets,u=e.Utils.isInt,c=e.Utils.format,l=e.Utils.even,f=e.groups.N,d=e.groups.S,p=(i=e.groups.FN,e.groups.PL),h=e.groups.CP,m=e.groups.CB,g=e.groups.EX,v=e.groups.P,y="log",b="abs",w="sqrt",O="sin",x="cos",j="tan",_="sec",S="csc",M="cot",E="asin",k="acos",N="atan",A="sinh",P="cosh";function C(e){this.message=e||""}C.prototype=new Error,a.prototype.hasIntegral=function(){return this.containsFunction("integrate")},a.prototype.fnTransform=function(){var e,n=this.args[0];if(this.isLinear())switch(this.fname){case A:e=t.parse(c("(e^({0})-e^(-({0})))/2",n));break;case P:e=t.parse(c("(e^({0})+e^(-({0})))/2",n));break;case"tanh":e=t.parse(c("(e^({0})-e^(-({0})))/(e^({0})+e^(-({0})))",n));break;case j:e=t.parse(c("sin({0})/cos({0})",n));break;case S:e=t.parse(c("1/sin({0})",n));break;case _:e=t.parse(c("1/cos({0})",n));break;default:e=this}else if(this.power.equals(2))switch(this.fname){case O:e=t.parse(c("1/2-cos(2*({0}))/2",n));break;case x:e=t.parse(c("1/2+cos(2*({0}))/2",n));break;case j:e=t.parse(c("sin({0})^2/cos({0})^2",n));break;case P:e=t.parse(c("1/2+cosh(2*({0}))/2",n));break;case A:e=t.parse(c("-1/2+cosh(2*({0}))/2",n));break;case"tanh":e=t.parse(c("(1+cosh(2*({0})))/(-1+cosh(2*({0})))",n));break;case _:e=t.parse(c("(1-cos(2*({0})))/(1+cos(2*({0})))+1",n));break;default:e=this}else e=this.fname===_?t.parse(c("1/cos({0})^({1})",this.args[0],this.power)):this.fname===S?t.parse(c("1/sin({0})^({1})",this.args[0],this.power)):this.fname===j?this.power.lessThan(0)?t.parse(c("cos({0})^(-({1}))/sin({0})^({1})",this.args[0],this.power.negate())):t.parse(c("sin({0})^({1})/cos({0})^({1})",this.args[0],this.power)):this.fname===O&&this.power.lessThan(0)?t.parse(c("csc({0})^(-({1}))",this.args[0],this.power.negate())):this.fname===x&&this.power.lessThan(0)?t.parse(c("sec({0})^(-({1}))",this.args[0],this.power.negate())):this.fname===O&&this.power.equals(3)?t.parse(c("(3*sin({0})-sin(3*({0})))/4",this.args[0])):this.fname===x&&this.power.equals(3)?t.parse(c("(cos(3*({0}))+3*cos({0}))/4",this.args[0])):this;return e},e.Expression.prototype.hasIntegral=function(){return this.symbol.hasIntegral()},e.Utils.in_inverse_trig=function(e){return-1!==[E,k,N,"acsc","asec","acot"].indexOf(e)},e.Utils.in_trig=function(e){return-1!==[x,O,j,_,S,M].indexOf(e)},e.Utils.in_htrig=function(e){return-1!==["sinh","cosh","tanh"].indexOf(e)};var D=e.Utils.all_functions=function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].group!==i)return!1;return!0},T=e.Utils.cosAsinBtranform=function(e,n){var r,i;return r=e.args[0],i=n.args[0],t.parse(c("(sin(({0})+({1}))-sin(({0})-({1})))/2",r,i))},R=e.Utils.cosAsinAtranform=function(e,n){var r;return r=e.args[0],t.parse(c("(sin(2*({0})))/2",r))},L=e.Utils.cosAsinBtranform=function(e,n){var r,i;return r=e.args[0],i=n.args[0],t.parse(c("(cos(({0})+({1}))-cos(({0})-({1})))/2",r,i))},I=e.Utils.trigTransform=function(e){for(var n,r,o={},s=new a(1),u=0,c=e.length;u<c;u++)if((n=e[u]).group===i){var l=n.fname;l===x&&o[O]?(o[O].args[0].toString()!==n.args[0].toString()?(r=T(n,o[O]),delete o[O]):(r=R(n,o[O]),delete o[O]),s=t.multiply(s,r)):l===O&&o[x]?(o[x].args[0].toString()!==n.args[0].toString()?(r=T(n,o[x]),delete o[x]):(r=R(n,o[x]),delete o[x]),s=t.multiply(s,r)):l===O&&o[O]?(o[O].args[0].toString()!==n.args[0].toString()?(r=L(n,o[O]),delete o[O]):(r=t.multiply(n,o[O]),delete o[O]),s=r):o[l]=n}else s=t.multiply(s,n);for(var f in o)s=t.multiply(s,o[f]);return s};e.Settings.integration_depth=10;var F=e.Calculus={version:"1.4.4",sum:function(n,r,i,s){if(r.group!==e.groups.S)throw new Error("Index must be symbol. "+o(r)+" provided");if(r=r.value,e.Utils.isNumericSymbol(i)&&e.Utils.isNumericSymbol(s)){i=i.multiplier,s=s.multiplier;for(var u=n.text(),c={"~":!0},l=new e.Symbol(0),f=i;f<=s;f++){c[r]=new a(f);var d=t.parse(u,c);l=t.add(l,d)}return l}return l=t.symfunction("sum",arguments)},product:function(n,r,i,s){if(r.group!==e.groups.S)throw new Error("Index must be symbol. "+o(r)+" provided");if(r=r.value,e.Utils.isNumericSymbol(i)&&e.Utils.isNumericSymbol(s)){i=i.multiplier,s=s.multiplier;for(var u=n.text(),c={},l=new e.Symbol(1),f=i;f<=s;f++)c[r]=new a(f),l=t.multiply(l,t.parse(u,c))}else l=t.symfunction("product",arguments);return l},diff:function(u,c,l){if(e.Utils.isVector(u)){var A=new e.Vector([]);return u.each(function(e){A.elements.push(F.diff(e,c))}),A}var P=r(c)?c.text():c;if(l=r(l)?l.multiplier:l||1,void 0===P&&(P=e.Utils.variables(u)[0]),u.group===i&&u.fname===w){var C=u.args[0],D=u.power.clone();C.group===f&&C.group===v||(C.power=r(C.power)?t.multiply(C.power,t.multiply(new a(.5)),D):C.power.multiply(new n(.5)).multiply(D),C.multiplier=C.multiplier.multiply(u.multiplier)),u=C}if(u.group!==i||r(u.power))u=I(u);else{var T=I(u),R=F.diff(u.args[0].clone(),P);u=t.multiply(T,R)}return l>1&&(l--,u=F.diff(u,c,l)),u;function L(e){return(e.value===P||e.contains(P,!0))&&(e.multiplier=e.multiplier.multiply(e.power),e.power=e.power.subtract(new n(1)),e.power.equals(0)&&(e=a(e.multiplier))),e}function I(e){var u,l,w=e.group;if(w===f||w===d&&e.value!==P||w===v)e=a(0);else if(w===d)e=L(e);else{if(w===m){var A=e.multiplier.clone();e.toUnitMultiplier();var C=t.multiply(function(e){for(var n=e.collectSymbols(),r=new a(0),i=n.length,o=0;o<i;o++){for(var s=F.diff(n[o].clone(),P),u=0;u<i;u++)o!==u&&(s=t.multiply(s,n[u].clone()));r=t.add(r,s)}return r}(e),L(e));return C.multiplier=C.multiplier.multiply(A),C}if(w===i&&e.power.equals(1))switch(e.fname){case y:l=e.clone(),(e=e.args[0].clone()).power=e.power.negate(),e.multiplier=l.multiplier.divide(e.multiplier);break;case x:e.fname=O,e.multiplier.negate();break;case O:e.fname=x;break;case j:e.fname=_,e.power=new n(2);break;case _:e=q(e,j);break;case S:e=q(e,"-cot");break;case M:e.fname=S,e.multiplier.negate(),e.power=new n(2);break;case E:e=t.parse("(sqrt(1-("+o(e.args[0])+")^2))^(-1)");break;case k:e=t.parse("-(sqrt(1-("+o(e.args[0])+")^2))^(-1)");break;case N:e=t.parse("(1+("+o(e.args[0])+")^2)^(-1)");break;case"acot":e=t.parse("-1/(("+e.args[0]+")^2+1)");break;case b:A=e.multiplier.clone(),e.toUnitMultiplier(),(u=e.args[0].clone()).toUnitMultiplier(),(e=t.parse(s(o(e.args[0]))+"/abs"+s(o(u)))).multiplier=A;break;case"parens":e=a(1);break;case"cosh":e.fname="sinh";break;case"sinh":e.fname="cosh";break;case"tanh":e.fname="sech",e.power=new n(2);break;case"sech":e=q(e,"-tanh");break;case"csch":var D=String(e.args[0]);return t.parse("-coth("+D+")*csch("+D+")");case"asinh":e=t.parse("(sqrt(1+("+o(e.args[0])+")^2))^(-1)");break;case"acosh":e=t.parse("(sqrt(-1+("+o(e.args[0])+")^2))^(-1)");break;case"atanh":e=t.parse("(1-("+o(e.args[0])+")^2)^(-1)");break;case"asech":D=String(e.args[0]);e=t.parse("-1/(sqrt(1/("+D+")^2-1)*("+D+")^2)");break;case"acoth":e=t.parse("-1/(("+e.args[0]+")^2-1)");break;case"acsch":D=String(e.args[0]);e=t.parse("-1/(sqrt(1/("+D+")^2+1)*("+D+")^2)");break;case"Si":D=e.args[0];e=t.parse("sin("+D+")/("+D+")");break;case"Shi":D=e.args[0];e=t.parse("sinh("+D+")/("+D+")");break;case"Ci":D=e.args[0];e=t.parse("cos("+D+")/("+D+")");break;case"Chi":D=e.args[0];e=t.parse("cosh("+D+")/("+D+")");break;case"Ei":D=e.args[0];e=t.parse("e^("+D+")/("+D+")");break;case"erf":e=t.parse("(2*e^(-("+e.args[0]+")^2))/sqrt(pi)");break;case"atan2":var T=String(e.args[0]),R=String(e.args[1]);e=t.parse("("+R+")/(("+R+")^2+("+T+")^2)");break;case"sign":e=new a(0);break;case"log10":e=t.parse("1/(("+e.args[0]+")*log(10))");break;default:e=t.symfunction("diff",[e,c])}else if(w===g||w===i&&r(e.power)){var U;U=w===g?e.value:w===i&&e.contains(P)?e.fname+s(o(e.args[0])):e.value+s(o(e.args[0])),t.multiply(t.parse(y+s(U)),e.power.clone()),u=F.diff(t.multiply(t.parse(y+s(U)),e.power.clone()),P),e=t.multiply(e,u)}else if(w!==i||e.power.equals(1)){if(w===h||w===p){var z=new a(0);for(var B in e.symbols)z=t.add(z,F.diff(e.symbols[B].clone(),P));e=t.multiply(L(e.clone()),z)}}else(u=e.clone()).toLinear(),u.toUnitMultiplier(),e=t.multiply(L(e.clone()),I(u))}return e.updateHash(),e}function q(e,n,r){return t.multiply(e,t.parse(n+s(r||o(e.args[0]))))}},integration:{u_substitution:function(n,r){function o(e,n,i){var a=i?i(e,n):t.divide(e.clone(),F.diff(n,r));return a.contains(r,!0)?null:a}function s(e,n){var r=F.integrate(t.symfunction(e,[new a(p)]),p,0);return(r=r.sub(new a(p),n)).updateHash(),r}var u,c=n[0].clone(),l=n[1].clone(),f=c.group,d=l.group,p="__u__";if(f===i&&d!==i){if(u=o(l,(h=c.args[0]).clone()))return t.multiply(u,s(c.fname,h));if(u=o(l,c))return F.integration.poly_integrate(c)}else if(d===i&&f!==i){var h;if(u=o(c,(h=l.args[0]).clone()))return t.multiply(u,s(l.fname,h))}else if(f===i&&f===i){if(u=o(c.clone(),l.clone()))return t.multiply(F.integration.poly_integrate(l),u);if(u=o(l.clone(),c.clone()))return t.multiply(F.integration.poly_integrate(l),u)}else{if(f===g&&d!==g){if(!(u=o(l,(x=c.power).clone()))){var m=F.integration.decompose_arg(x.clone(),r),v=F.diff(m[2].clone(),r),y=F.integration.decompose_arg(v.clone(),r);if(t.multiply(m[1],y[1]).power.equals(l.power)){var b=t.divide(m[0].clone(),y[0].clone()),w=t.multiply(b.clone(),t.pow(new a(c.value),t.multiply(m[0],new a(p))));return w=t.multiply(w,new a(p)),F.integration.by_parts(w,p,0,{}).sub(p,m[1].clone())}}var O=F.integrate(c.sub(x.clone(),new a(p)),p,0);return t.multiply(O.sub(new a(p),x),u)}if(d===g&&f!==g){var x;u=o(c,(x=l.power).clone());O=F.integrate(l.sub(x,new a(p)),p,0);return t.multiply(O.sub(new a(p),x),u)}if(c.isComposite()||l.isComposite()){var j=function(n,i){var a=e.Algebra.Factor.factor(n),o=e.Algebra.Factor.factor(F.diff(i,r));return t.divide(a,o)},_=c.isComposite()?c.clone().toLinear():c.clone(),S=l.isComposite()?l.clone().toLinear():l.clone();if(u=o(_.clone(),S.clone(),j))return t.multiply(F.integration.poly_integrate(l),u);if(u=o(S.clone(),_.clone(),j))return t.multiply(F.integration.poly_integrate(c),u)}}},poly_integrate:function(e){var n=e.power.toString(),r=e.multiplier.toDecimal(),i=e.toUnitMultiplier().toLinear();return-1===Number(n)?t.multiply(new a(r),t.symfunction(y,[i])):t.parse(c("({0})*({1})^(({2})+1)/(({2})+1)",r,i,n))},stop:function(e){throw new C(e=e||"Stopping!")},partial_fraction:function(n,i,o,s){var u,c;return r(i)||(i=t.parse(i)),u=new a(0),(c=e.Algebra.PartFrac.partfrac(n,i)).group===m&&c.isLinear()?c.each(function(e){u=t.add(u,F.integrate(e,i,o,s))}):u=t.add(u,F.integrate(c,i,o,s)),u},get_udv:function(n){var r=[[],[],[],[],[]],o=function(t){var n=t.group;if(n===i){var a=t.fname;e.Utils.in_trig(a)||e.Utils.in_htrig(a)?r[3].push(t):e.Utils.in_inverse_trig(a)?r[1].push(t):a===y?r[0].push(t):F.integration.stop()}else n===d||t.isComposite()&&t.isLinear()||n===m&&t.isLinear()?r[2].push(t):n===g||t.isComposite()&&!t.isLinear()?r[4].push(t):F.integration.stop()};n.group===m?n.each(function(e){o(a.unwrapSQRT(e,!0))}):o(n);for(var s,u=new a(1),c=0;c<5;c++){var l,f=r[c],p=f.length;if(p>0){if(p>1){l=new a(1);for(var h=0;h<p;h++)l=t.multiply(l,f[h].clone())}else l=f[0].clone();s?u=t.multiply(u,l):(s=l).multiplier=s.multiplier.multiply(n.multiplier)}}return[s,u]},trig_sub:function(n,r,i,a,o,u){(o=o||F.integration.decompose_arg(n.clone().toLinear(),r))[3],o[2];var c=o[0],l=o[1];if(l.power.equals(2)&&c.greaterThan(0)){var f=e.Utils.getU(n),d=t.parse(j+s(f)),p=t.parse(_+s(f)+"^2"),h=t.multiply(n.sub(l,d),p),m=F.integrate(h,f,i,a).sub(d,l);return e.Utils.clearU(d),m}},by_parts:function(n,r,i,o){var s,u,c,l,f,d,p,h,m,g,v,y;if(o.previous=o.previous||[],u=(s=F.integration.get_udv(n))[0],c=s[1],v=(l=a.unwrapSQRT(t.expand(F.diff(u.clone(),r)),!0)).clone().stripVar(r),l=t.divide(l,v.clone()),f=F.integrate(c.clone(),r,i||0),y=(d=t.multiply(f.clone(),l)).toString(),-1!==o.previous.indexOf(y)&&e.Utils.in_trig(u.fname)&&c.isE())return o.is_cyclic=!0,new a(1);if(o.previous.push(y),p=t.multiply(u,f),g=d.multiplier.clone(),d.toUnitMultiplier(),(m=t.multiply(F.integrate(d.clone(),r,i,o),v)).multiplier=m.multiplier.multiply(g),h=t.subtract(p,m),o.is_cyclic&&(o.previous.pop(),0===o.previous.length)){h=t.expand(h);var b=new a(0);h.each(function(e){e.contains(r)||(b=t.add(b,e.clone()))}),h=t.divide(t.subtract(h,b.clone()),t.subtract(new a(1),b))}return h},decompose_arg:e.Utils.decompose_fn},integrate:function(o,f,v,T){if(!f){var R=e.Utils.variables(o);1===R.length&&(f=R[0]),f=f||"x"}if(e.Utils.isVector(o)){var L=new e.Vector([]);return o.each(function(e){L.elements.push(F.integrate(e,f))}),L}return isNaN(f)||t.error("variable expected but received "+f),o.isConstant(!0)?t.multiply(o.clone(),t.parse(f)):(T=T||{},e.Utils.block("PARSE2NUMBER",function(){v=v||0;var R,L=r(f)?f.toString():f,q=a.unwrapSQRT(o.clone(),!0),U=q.group;try{if(++v>e.Settings.integration_depth&&F.integration.stop("Maximum depth reached. Exiting!"),q.contains(L,!0)){if(U===d)R=F.integration.poly_integrate(q,L,v);else if(U===g)if(q.contains(L)&&q.previousGroup!==i){if(q.power.contains(L))F.integration.stop();else(De=F.diff(q.clone().toLinear(),L)).contains(L)&&F.integration.stop(),R=F.integration.poly_integrate(q,L,v)}else{if((Y=F.diff(q.power.clone(),L)).contains(L)){var z=Y.stripVar(L);if(($=t.divide(Y.clone(),z.clone())).group===d&&$.isLinear())return z.multiplier=z.multiplier.divide(new n(2)),t.parse(c("({2})*(sqrt(pi)*erf(sqrt(-{0})*{1}))/(2*sqrt(-{0}))",z,L,q.multiplier));F.integration.stop()}if(q.isE())R=q;else{var B=t.symfunction(y,[t.parse(q.value)]);R=t.divide(q,B)}R=t.divide(R,Y)}else if(q.isComposite()&&q.isLinear())R=new a(0),q.each(function(e){R=t.add(R,F.integrate(e,L,v))});else if(U===h)if(q.power.greaterThan(1)&&(q=t.expand(q)),q.power.equals(1))R=new a(0),q.each(function(e){R=t.add(R,F.integrate(e,L,v))},!0);else{var V=Number(q.power),H=q.multiplier.clone();q.toUnitMultiplier();var G=q.clone().toLinear(),W=(ht=F.integration.decompose_arg(G,L))[3],X=ht[2],Y=ht[0],$=ht[1];if(-1===V&&$.group!==p)if($.group===d&&$.power.equals(2)){var J=function(e){var n=new a(1);return e.each(function(e){n=t.multiply(n,"abs"===e.fname?e.args[0]:e)}),n},Q=Y.clone(),K=W.clone();Q=t.pow(Q,new a(.5)),K=t.pow(K,new a(.5));B=t.multiply(J(K),J(Q));var Z=t.symfunction(N,[t.divide(t.multiply(Y,$.toLinear()),B.clone())]);R=t.divide(Z,B)}else if($.group===d&&$.isLinear())R=t.divide(F.integration.poly_integrate(q),Y);else if($.power.equals(4)){var ee,te,ne,re,ie,ae,oe=s;Q=t.parse(w+oe(Y)+"*"+L+"^2"),K=t.parse(w+oe(2)+"*"+oe(Y)+"^"+oe("1/4")+"*"+oe(W)+"^"+oe("1/4")+"*"+L),ee=t.parse(w+oe(W)),be=t.add(t.add(Q.clone(),K.clone()),ee.clone()),Fe=t.add(t.subtract(Q,K),ee),te=t.parse(w+oe(2)+"*"+oe(W)+"^"+oe("3/4")),ne=t.parse(w+oe(W)+"*"+oe(W)+"^"+oe("1/4")+"*"+L),re=t.parse("2*"+oe(W)+"*"+w+oe(2)+"*"+oe(W)+"^"+oe("1/4")),ie=t.divide(t.subtract(te.clone(),ne.clone()),t.multiply(re.clone(),Fe)),ae=t.divide(t.add(te,ne),t.multiply(re,be.clone())),R=t.add(F.integrate(ie,L,v,T),F.integrate(ae,L,v,T))}else R=F.integration.partial_fraction(q,L,v);else if(-.5===V)if($.group===d&&$.power.equals(2))if(X.multiplier.lessThan(0)&&!W.multiplier.lessThan(0))if(Y.negate(),W.isConstant()&&Y.isConstant()){B=t.symfunction(w,[Y.clone()]);var se=t.symfunction(w,[t.multiply(Y.clone(),W)]);R=t.divide(t.symfunction(E,[t.divide(X.toLinear(),se)]),B)}else{var ue=t.symfunction(w,[Y]),ce=t.multiply(ue.clone(),$.clone().toLinear());R=t.divide(t.symfunction(N,[t.divide(ce,t.symfunction(w,[G.clone()]))]),ue)}else F.integration.stop();else F.integration.stop();else if($.isLinear()&&$.group!==p)R=t.divide(F.integration.poly_integrate(q),Y);else{if($.power.equals(2)&&Y.greaterThan(0)){var le,fe,de,pe,he,me;le=t.parse(w+s(Y)),fe=t.parse(w+s(W)),de=t.multiply(le.clone(),fe.clone()).invert(),pe=t.pow(W,new a(q.power)),me=e.Utils.getU(q),mt=t.multiply(de,$.clone().toLinear()),he=t.parse(N+s(mt));var ge=2*(Math.abs(q.power)-1),ve=F.integrate(t.parse(x+s(me)+"^"+ge));return e.Utils.clearU(me),t.multiply(ve.sub(me,he),pe)}if(q.group===m||q.power.lessThan(0)){Z=q.clone().toLinear();var ye=e.Algebra.Factor.factor(Z).toString()!==Z.toString();if(e.Algebra.degree(Z,t.parse(L)).equals(2)&&!ye)try{var be,we,Oe;Oe=e.Algebra.sqComplete(Z,L),mt=e.Utils.getU(Z),be=Oe.f.sub(Oe.a,mt),we=t.pow(be,t.parse(q.power)),R=F.integrate(we,mt).sub(mt,Oe.a)}catch(e){F.integration.stop()}else R=F.integration.partial_fraction(q,L,v,T)}else R=F.integration.by_parts(q,L,v,T)}R.multiplier=R.multiplier.multiply(H)}else if(U===i){var xe=q.args[0];H=q.multiplier.clone();q.toUnitMultiplier();Y=(ht=F.integration.decompose_arg(xe,L))[0],$=ht[1];var je=q.fname;if(je===y||je===E||je===k||je===N&&$.isLinear()){V=q.power.toString();u(V)&&(v-=V),R=F.integration.by_parts(q,L,v,T)}else{if(je===j&&q.power.lessThan(0))return(St=q.clone()).power.negate(),St.fname=M,F.integrate(St,L,v);if(!Y.contains(L,!0)&&q.isLinear())if(je===b){if(($=t.divide(xe.clone(),Y.clone())).group!==d||$.power.lessThan(0))F.integration.stop();else if(e.Utils.even($.power))R=F.integrate(xe,L,v);else{var _e=F.integrate($,L,v);_e.power=_e.power.subtract(new n(1)),R=t.multiply(t.multiply(t.symfunction(b,[$.toLinear()]),_e),Y)}}else{var Se=q.args[0].group,Me=F.integration.decompose_arg(xe,L);switch((Se!==h&&Se!==d&&Se!==m||!Me[1].power.equals(1)||xe.hasFunc())&&F.integration.stop(),je){case x:R=t.symfunction(O,[xe]);break;case O:(R=t.symfunction(x,[xe])).negate();break;case j:R=t.parse(c("log(sec({0}))",xe));break;case _:R=t.parse(c("log(tan({0})+sec({0}))",xe));break;case S:R=t.parse(c("-log(csc({0})+cot({0}))",xe));break;case M:R=t.parse(c("log(sin({0}))",xe));break;case A:R=t.symfunction(P,[xe]);break;case P:R=t.symfunction(A,[xe]);break;case"tanh":R=t.parse(c("log(cosh({0}))",xe));break;case"exp":R=F.integrate(t.parse(c("e^({0})",xe)),L,v);break;case"erf":xe=q.args[0].clone();var Ee=(wt=F.integration.decompose_arg(xe,L))[1],ke=wt[0];R=t.parse(c("e^(-(({2}))^2)/(({0})*sqrt(pi))+(1/({0})+({1}))*erf(({2}))",ke,Ee,xe));break;case"sign":R=t.multiply(q.clone(),xe.clone());break;default:F.integration.stop()}R=t.divide(R,Y)}else if($.isLinear()){if(je===x||je===O)if((V=Number(q.power))<0)q.fname=je===O?S:_,q.invert().updateHash(),R=F.integrate(q,L,v);else{xe=q.args[0];var Ne=q.clone(),Ae=q.clone(),Pe=new a((V-1)/V),Ce=t.multiply(Y.clone(),new a(V)).invert();Ne.power=Ne.power.subtract(new n(1)),Ae.power=Ae.power.subtract(new n(2));var De=t.symfunction(je===x?O:x,[xe.clone()]);je===O&&De.negate(),R=t.add(t.multiply(t.multiply(Ce,Ne),De),t.multiply(Pe,F.integrate(t.parse(Ae),L,v)))}else if(je===j||je===M){if(q.args[0].isLinear(L)){ge=q.power.subtract(new n(1)).toString();var Te=q.clone().toUnitMultiplier(),Re=t.parse(c((je===M?"-":"")+"1/({2}*{0})*{3}({1})^({0})",ge,xe,Y,je));Te.power=Te.power.subtract(new n(2)),Te.power.equals(0)&&(Te=t.parse(Te)),R=t.subtract(Re,F.integrate(Te,L,v))}}else if(je===_||je===S){var Le=q.power.subtract(new n(1)).toString(),Ie=q.power.subtract(new n(2)).toString(),Fe=je===_?j:M,qe=(Te=q.clone().toUnitMultiplier(),c((je===S?"-":"")+"1/({0}*{1})*{4}({3})^({2})*{5}({3})",Y,Le,Ie,xe,je,Fe));Re=t.parse(qe);Te.power=Te.power.subtract(new n(2)),Te.power.equals(0)&&(Te=t.parse(Te)),R=t.add(Re,t.multiply(new a(Ie/Le),F.integrate(Te,L,v)))}else je!==P&&je!==A||!q.power.equals(2)?F.integration.stop():R=F.integrate(q.fnTransform(),L,v)}else F.integration.stop();R.multiplier=R.multiplier.multiply(H)}}else if(U===p)R=F.integration.partial_fraction(q,L,v);else if(U===m){var Ue=q.stripVar(L),ze=t.divide(q.clone(),Ue.clone());if(ze.group!==m){if(ze.equals(1))return F.integrate(t.expand(q),L,v);R=F.integrate(ze,L,v)}else{var Be=ze.collectSymbols().sort(function(e,t){return e.group===t.group?Number(e.power)===Number(t.power)?e<t?1:-1:t.power-e.power:t.group-e.group}).map(function(e){var n=a.unwrapSQRT(e,!0);return"exp"===n.fname?t.parse(c("({1})*e^({0})",n.args[0],n.multiplier)):n});if(2===(Tt=Be.length)){try{R=F.integration.u_substitution(Be,L)}catch(e){}if(!R){var Ve=Be[0].group,He=Be[1].group,Ge=Be[0],We=Be[1],Xe=Ge.fname,Ye=We.fname;if(q=t.multiply(Ge.clone(),We.clone()),Ve===i&&He===i)if(Xe===y||Ye===y)R=F.integration.by_parts(q.clone(),L,v,T);else{Be.sort(function(e,t){return t.fname>e.fname});var $e=Ge.args[0];(!$e.isLinear()||$e.group!==h&&$e.group!==m&&$e.group!==d)&&F.integration.stop(),$=(ht=F.integration.decompose_arg($e,L))[1],Y=ht[0],$.isLinear()||F.integration.stop();var Je=We.args[0];if($e.equals(Je))if(Xe===O&&Ye===x||Xe===x&&Ye===O)if(Ge.power.lessThan(0)&&F.integration.stop(),Xe===O&&Ge.power.add(We.power).equals(0))Ge.fname=j,Ge.updateHash(),R=F.integrate(Ge,L,v);else if(l(Ge.power)&&Ye===x&&We.power.lessThan(0)){ge=Number(Ge.power)/2;var Qe=t.parse(c("(1-cos({0})^2)^({1})",Ge.args[0],ge));R=F.integrate(t.expand(t.multiply(Qe,We.clone())),L,v,T)}else if(l(Ge.power)&&Ye===O&&We.power.lessThan(0)){ge=Number(Ge.power)/2,Qe=t.parse(c("(1-sin({0})^2)^({1})",Ge.args[0],ge));R=F.integrate(t.expand(t.multiply(Qe,We.clone())),L,v,T)}else{var Ke=e.Utils.even(Ge.power),Ze=e.Utils.even(We.power);if(R=new a(0),Ke&&Ze){var et=function(e){var n,r=e.power/2;return n=e.fname===x?"((1/2)+(cos(2*("+e.args[0]+"))/2))^"+r:"((1/2)-(cos(2*("+e.args[0]+"))/2))^"+r,t.parse(n)};Y=et(Ge),W=et(We),De=t.multiply(Y,W);return(St=t.expand(De)).each(function(e){R=t.add(R,F.integrate(e,L,v))}),t.multiply(R,Ue)}Ke?(mt=Ge,Te=We):(mt=We,Te=Ge);var tt=mt.fname===x?-1:1,nt=((ge=Te.power)-1)/2,rt=t.parse("(1-"+mt.fname+e.Utils.inBrackets($e)+"^2)^"+nt);(St=t.expand(t.multiply(new a(tt),t.multiply(mt.clone(),rt)))).each(function(e){R=t.add(R,F.integration.poly_integrate(e.clone()))})}else if(Xe===_&&Ye===j&&$.isLinear()&&We.isLinear())R=t.parse(c("sec({0})^({1})/({1})",Ge.args[0],Ge.power));else if(Xe===j&&Ye===_&&$.isLinear())if(Ge.isLinear()&&We.isLinear())R=t.divide(t.symfunction(_,[$e.clone()]),Y);else if(l(Ge.power)){V=Number(Ge.power)/2,De=t.parse(c("(sec({0})^2-1)^({1})",Ge.args[0],V));R=F.integrate(t.expand(t.multiply(De,We)),L,v)}else F.integration.stop();else if(Xe===_&&Ye===x)Ge.fname=x,Ge.invert().updateHash(),R=F.integrate(t.multiply(Ge,We),L,v);else if(Xe===O&&Ye===S)We.fname=O,We.invert().updateHash(),R=F.integrate(t.multiply(Ge,We),L,v);else if(Xe!==j||Ye!==x&&Ye!==O||!We.power.lessThan(0)){De=t.multiply(Ge.fnTransform(),We.fnTransform());R=F.integrate(t.expand(De),L,v)}else{var De=t.multiply(Ge.fnTransform(),We);R=F.integrate(t.expand(De),L,v)}else if(Xe!==O&&Xe!==x||Ye!==O&&Ye!==x)F.integration.stop();else{var it=I(Be);R=F.integrate(t.expand(it),L,v)}}else if(Ve===i&&He===d){var at=Ge.isLinear();if(Ge.fname===x&&at&&We.power.equals(-1))R=t.symfunction("Ci",[Ge.args[0]]);else if(Ge.fname===x&&We.power.equals(-1))R=F.integrate(t.multiply(Ge.fnTransform(),We.clone()),L,v);else if(Ge.fname===P&&at&&We.power.equals(-1))R=t.symfunction("Chi",[Ge.args[0]]);else if(Ge.fname===P&&We.power.equals(-1))R=F.integrate(t.multiply(Ge.fnTransform(),We.clone()),L,v);else if(Ge.fname===O&&at&&We.power.equals(-1))R=t.symfunction("Si",[Ge.args[0]]);else if(Ge.fname===O&&We.power.equals(-1))R=F.integrate(t.multiply(Ge.fnTransform(),We.clone()),L,v);else if(Ge.fname===A&&at&&We.power.equals(-1))R=t.symfunction("Shi",[Ge.args[0]]);else if(Ge.fname===A&&We.power.equals(-1))R=F.integrate(t.multiply(Ge.fnTransform(),We.clone()),L,v);else if(Ge.fname===y&&We.power.equals(-1))R=F.integration.poly_integrate(Ge,L,v);else if("erf"===Ge.fname){if(We.power.equals(1)){ke=(wt=F.integration.decompose_arg(Ge.args[0],L))[0],Ee=wt[1],xe=Ge.args[0].toString();R=t.parse(c("(e^(-(({2}))^2)*(sqrt(pi)*e^((({2}))^2)*(2*({0})^2*({1})^2-3)*erf(({2}))+2*({0})*({1})-2))/(4*sqrt(pi)*({0})^2)",ke,Ee,xe))}}else R=F.integration.by_parts(q,L,v,T)}else if(Ve===g&&He===d){$=Xe===y?F.integration.decompose_arg(Ge.args[0],L)[1]:null;R=Ge.isE()&&(Ge.power.group===d||Ge.power.group===m)&&We.power.equals(-1)?t.symfunction("Ei",[Ge.power.clone()]):Xe===y&&$.value===We.value?F.integration.poly_integrate(Ge,L,v):F.integration.by_parts(q,L,v,T)}else if(Ve===p&&He===d){if(We.value===Ge.value&&Ge.power.equals(-1)){var ot=Math.min.apply(null,e.Utils.keys(Ge.symbols)),st=Math.min(ot,We.power),ut=We.clone();ut.power=new n(st),We=t.divide(We,ut.clone());De=new a(0);Ge.each(function(e){De=t.add(De,t.divide(e.clone(),ut.clone()))}),De.multiplier=Ge.multiplier,q=t.divide(We,De)}R=F.integration.partial_fraction(q,L,v)}else if(Ve===h&&He===d){Z=Ge.clone().toLinear();var ct=e.Algebra.degree(Z,t.parse(L)).equals(1);if(Ge.power.equals(-.5)){Y=(ht=F.integration.decompose_arg(Ge.clone().toLinear(),L))[0].negate(),$=ht[1],W=ht[3],V=Number(We.power);if(u(V)&&e.Utils.even(V)&&$.power.equals(2)){var lt=t.divide(t.multiply(t.pow(W.clone(),new a(2)),t.symfunction(w,[t.divide(W.clone(),Y.clone())])),t.pow(Y.clone(),new a(2)));lt=t.multiply(lt,t.symfunction(w,[W]).invert());var ft=t.parse("sin(u)");ft.power=ft.power.multiply(We.power);ve=F.integrate(ft,"u",v);var dt=t.parse(E+"("+w+"("+Y+"/"+W+")*"+L+")");R=t.multiply(lt,ve.sub(new a("u"),dt))}}else if(Ge.power.equals(-1)&&We.isLinear()&&ct)R=F.integration.partial_fraction(q,L,v);else if(!Ge.power.lessThan(0)&&u(Ge.power)){var pt=t.expand(Ge);R=new a(0),pt.each(function(e){e.group===p?e.each(function(e){R=t.add(R,F.integrate(t.multiply(We.clone(),e),L,v))}):R=t.add(R,F.integrate(t.multiply(We.clone(),e),L,v))})}else if(Ge.power.lessThan(-2))R=F.integration.by_parts(q,L,v,T);else if(Ge.power.lessThan(0)&&We.power.greaterThan(1)){var ht;Y=(ht=F.integration.decompose_arg(Ge.clone().toLinear(),L))[0].negate(),$=ht[1],W=ht[3],G=Ge.clone().toLinear();if($.group!==p&&$.isLinear()){V=Number(We.power);var mt=new a(Ot="_u_"),gt=t.expand(t.divide(t.pow(t.subtract(mt.clone(),W.clone()),new a(V)),mt.clone())),vt={};vt[Ot]=G;var yt=t.parse(gt,vt);R=F.integrate(yt,L,0)}else if(We.power.greaterThan($.power)||We.power.equals($.power)){var bt=new e.Algebra.Classes.Factors;Ge=e.Algebra.Factor.coeffFactor(Ge.invert(),bt),R=new a(0),e.Algebra.divide(We,Ge).each(function(e){R=t.add(R,F.integrate(e,L,v))}),bt.each(function(e){R=t.divide(R,e)}),R=t.expand(R)}else R=F.integration.partial_fraction(q,L,v)}else if(Ge.power.den.equals(2)){var wt;Y=(wt=F.integration.decompose_arg(Ge.clone().toLinear(),L))[3],$=wt[1],W=wt[0],wt[2];if($.power.equals(2)&&W.lessThan(0)){Y.equals(1)||(Ue=t.multiply(Ue,t.pow(Y,new a(2))));mt=L,lt=t.divide(t.pow(W.clone().negate(),new a(.5)),t.pow(Y,new a(.5)));var Ot=t.symfunction(x,[new a(mt)]),xt=t.pow(t.symfunction(x,[new a(mt)]),new a(Ge.power.num)),jt=t.pow(t.symfunction(O,[new a(mt)]),new a(We.power)),_t=t.multiply(t.multiply(xt,Ot),jt);ve=F.integrate(_t,mt,v);R=ve.sub(mt,t.symfunction(E,[t.multiply(new a(L),lt)]))}}else ct&&(R=F.integration.partial_fraction(q,L,v))}else if(Ge.isComposite()&&We.isComposite())if(R=new a(0),Ge.power.greaterThan(0)&&We.power.greaterThan(0)){var St;(St=t.expand(q)).each(function(e){R=t.add(R,F.integrate(e,L,v))},!0)}else{var Mt=Number(Ge.power),Et=Number(We.power);if(Mt<0&&Et>0){De=Ge;Ge=We,We=De}Ge.each(function(e){R=t.add(R,F.integrate(t.multiply(e,We.clone()),L,v))})}else if(Ve===h&&Be[0].power.greaterThan(0))Ge=t.expand(Ge),R=new a(0),Ge.each(function(e){R=t.add(R,F.integrate(t.multiply(e,We.clone()),L,v))},!0);else if(Ve===i&&He===g&&e.Utils.in_htrig(Ge.fname))Ge=Ge.fnTransform(),R=F.integrate(t.expand(t.multiply(Ge,We)),L,v);else if(Ve===i&&He===h||He===i&&Ve===h){if(He===i&&Ve===h){De=Ge;Ge=We,We=De}var kt,Nt,At;if(Ot=a.unwrapSQRT(F.diff(Ge.clone(),L),!0),kt=a.unwrapSQRT(We,!0),Ot.power.equals(kt.power)){if(V=new a(We.power),Nt=Ot.clone().toLinear(),At=We.clone().toLinear(),(Pe=e.Algebra.divide(Nt.toLinear(),At)).isConstant()){var Pt=t.pow(Pe,V.negate());R=t.multiply(Pt,F.integration.poly_integrate(Ge.clone()))}}else R=F.integration.by_parts(q,L,v,T)}else R=F.integration.by_parts(q,L,v,T)}}else if(3===Tt&&(Be[2].group===d&&Be[2].power.lessThan(2)||Be[0].group===h)){var Ct=Be[0];if(Ct.group===h){Ct.power.greaterThan(1)&&(Ct=t.expand(Ct));Te=t.multiply(Be[1],Be[2]);R=new a(0),Ct.each(function(e){var n=t.multiply(e,Te.clone()),r=F.integrate(n,L,v);R=t.add(R,r)},!0)}else R=F.integration.by_parts(q,L,v,T)}else if(D(Be)){De=new a(1);for(var Dt=0,Tt=Be.length;Dt<Tt;Dt++)De=t.multiply(De,Be[Dt].fnTransform());De=t.expand(De),R=F.integrate(De,L,v)}else{it=I(Be);R=F.integrate(t.expand(it),L,v)}}R=t.multiply(R,Ue)}}else R=t.multiply(q.clone(),t.parse(L));if(R)return R}catch(t){if(!(t instanceof C||t instanceof e.exceptions.DivisionByZero))throw t}return t.symfunction("integrate",[o,f])},!1))},defint:function(n,r,i,o){var s,u=e.Utils.variables(n),c=F.integrate(n,o);if(1===u.length&&(o=u[0]),c.hasIntegral())if(1===u.length&&r.isConstant()&&i.isConstant()){var l=e.Utils.build(n);s=new a(e.Math2.num_integrate(l,Number(r),Number(i)))}else s=t.symfunction("defint",[n,r,i,o]);else{var f,d,p={},h={};p[o]=i,h[o]=r,f=t.parse(c,p),d=t.parse(c,h),s=t.subtract(f,d)}return s},limit:function(n,r,i){var o=function(n){try{return t.parse(n.sub(r,i))}catch(t){if(t instanceof e.exceptions.UndefinedError)return;throw new Error("Stopping!")}};try{var s,u,c,l,f,d,p;c=n.getNum(),l=n.getDenom(),s=o(c),u=o(l),10,d=c,p=l;for(var h=0;void 0===s&&void 0===u||s.equals(0)&&u.equals(0)||s.isInfinty&&u.isInfinity;){if(h>10){var m={};m[r]=i;try{return e.Utils.block("PARSE2NUMBER",function(){return t.parse(n,m)},!0)}catch(t){throw e.exceptions.MaximumIterationsReached()}}d=F.diff(d,r),p=F.diff(p,r),s=o(d.clone()),u=o(p.clone()),h++}return s.isConstant(!0)||u.isConstant(!0)?f=u.equals(0)?a.infinity():t.divide(s,u):s.isInfinity?f=s:u.isInfinity&&(f=u),f}catch(e){return t.symfunction("limit",arguments)}}};nerdamer.register([{name:"diff",visible:!0,numargs:[1,3],build:function(){return F.diff}},{name:"sum",visible:!0,numargs:4,build:function(){return F.sum}},{name:"product",visible:!0,numargs:4,build:function(){return F.product}},{name:"integrate",visible:!0,numargs:[1,2],build:function(){return F.integrate}},{name:"defint",visible:!0,numargs:[3,4],build:function(){return F.defint}},{name:"limit",visible:!1,numargs:3,build:function(){return F.limit}}]),nerdamer.api()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),a=n(916),o=n(955),s=n(986),u=n(1007),c=n(1016),l=n(1018),f=n(1026),d=n(1028),p=n(1031),h=n(1037);n.n(h);n.o(h,"version")&&n.d(t,"version",function(){return h.version});var m=n(54);n.d(t,"bin",function(){return m.a}),n.d(t,"bootstrapCI",function(){return m.b}),n.d(t,"quartiles",function(){return m.c}),n.d(t,"random",function(){return m.d}),n.d(t,"setRandom",function(){return m.j}),n.d(t,"randomInteger",function(){return m.e}),n.d(t,"randomKDE",function(){return m.f}),n.d(t,"randomMixture",function(){return m.g}),n.d(t,"randomNormal",function(){return m.h}),n.d(t,"randomUniform",function(){return m.i}),n.d(t,"accessor",function(){return r.accessor}),n.d(t,"accessorName",function(){return r.accessorName}),n.d(t,"accessorFields",function(){return r.accessorFields}),n.d(t,"id",function(){return r.id}),n.d(t,"identity",function(){return r.identity}),n.d(t,"zero",function(){return r.zero}),n.d(t,"one",function(){return r.one}),n.d(t,"truthy",function(){return r.truthy}),n.d(t,"falsy",function(){return r.falsy}),n.d(t,"logger",function(){return r.logger}),n.d(t,"None",function(){return r.None}),n.d(t,"Error",function(){return r.Error}),n.d(t,"Warn",function(){return r.Warn}),n.d(t,"Info",function(){return r.Info}),n.d(t,"Debug",function(){return r.Debug}),n.d(t,"panLinear",function(){return r.panLinear}),n.d(t,"panLog",function(){return r.panLog}),n.d(t,"panPow",function(){return r.panPow}),n.d(t,"zoomLinear",function(){return r.zoomLinear}),n.d(t,"zoomLog",function(){return r.zoomLog}),n.d(t,"zoomPow",function(){return r.zoomPow}),n.d(t,"array",function(){return r.array}),n.d(t,"compare",function(){return r.compare}),n.d(t,"constant",function(){return r.constant}),n.d(t,"debounce",function(){return r.debounce}),n.d(t,"error",function(){return r.error}),n.d(t,"extend",function(){return r.extend}),n.d(t,"extentIndex",function(){return r.extentIndex}),n.d(t,"fastmap",function(){return r.fastmap}),n.d(t,"field",function(){return r.field}),n.d(t,"inherits",function(){return r.inherits}),n.d(t,"isArray",function(){return r.isArray}),n.d(t,"isBoolean",function(){return r.isBoolean}),n.d(t,"isDate",function(){return r.isDate}),n.d(t,"isFunction",function(){return r.isFunction}),n.d(t,"isNumber",function(){return r.isNumber}),n.d(t,"isObject",function(){return r.isObject}),n.d(t,"isRegExp",function(){return r.isRegExp}),n.d(t,"isString",function(){return r.isString}),n.d(t,"key",function(){return r.key}),n.d(t,"merge",function(){return r.merge}),n.d(t,"pad",function(){return r.pad}),n.d(t,"peek",function(){return r.peek}),n.d(t,"repeat",function(){return r.repeat}),n.d(t,"splitAccessPath",function(){return r.splitAccessPath}),n.d(t,"stringValue",function(){return r.stringValue}),n.d(t,"toBoolean",function(){return r.toBoolean}),n.d(t,"toDate",function(){return r.toDate}),n.d(t,"toNumber",function(){return r.toNumber}),n.d(t,"toString",function(){return r.toString}),n.d(t,"toSet",function(){return r.toSet}),n.d(t,"truncate",function(){return r.truncate}),n.d(t,"visitArray",function(){return r.visitArray});var g=n(92);n.d(t,"loader",function(){return g.d}),n.d(t,"read",function(){return g.e}),n.d(t,"inferType",function(){return g.b}),n.d(t,"inferTypes",function(){return g.c}),n.d(t,"typeParsers",function(){return g.f}),n.d(t,"formats",function(){return g.a});var v=n(19);n.d(t,"Bounds",function(){return v.a}),n.d(t,"Gradient",function(){return v.d}),n.d(t,"GroupItem",function(){return v.e}),n.d(t,"ResourceLoader",function(){return v.k}),n.d(t,"Item",function(){return v.g}),n.d(t,"Scenegraph",function(){return v.o}),n.d(t,"Handler",function(){return v.f}),n.d(t,"Renderer",function(){return v.j}),n.d(t,"CanvasHandler",function(){return v.b}),n.d(t,"CanvasRenderer",function(){return v.c}),n.d(t,"SVGHandler",function(){return v.l}),n.d(t,"SVGRenderer",function(){return v.m}),n.d(t,"SVGStringRenderer",function(){return v.n}),n.d(t,"RenderType",function(){return v.i}),n.d(t,"renderModule",function(){return v.J}),n.d(t,"Marks",function(){return v.h}),n.d(t,"boundClip",function(){return v.p}),n.d(t,"boundContext",function(){return v.q}),n.d(t,"boundStroke",function(){return v.t}),n.d(t,"boundItem",function(){return v.r}),n.d(t,"boundMark",function(){return v.s}),n.d(t,"pathCurves",function(){return v.B}),n.d(t,"pathSymbols",function(){return v.G}),n.d(t,"pathRectangle",function(){return v.E}),n.d(t,"pathTrail",function(){return v.H}),n.d(t,"pathParse",function(){return v.D}),n.d(t,"pathRender",function(){return v.F}),n.d(t,"point",function(){return v.I}),n.d(t,"domCreate",function(){return v.x}),n.d(t,"domFind",function(){return v.y}),n.d(t,"domChild",function(){return v.v}),n.d(t,"domClear",function(){return v.w}),n.d(t,"openTag",function(){return v.A}),n.d(t,"closeTag",function(){return v.u}),n.d(t,"font",function(){return v.z}),n.d(t,"textMetrics",function(){return v.R}),n.d(t,"resetSVGClipId",function(){return v.K}),n.d(t,"sceneEqual",function(){return v.L}),n.d(t,"pathEqual",function(){return v.C}),n.d(t,"sceneToJSON",function(){return v.O}),n.d(t,"sceneFromJSON",function(){return v.M}),n.d(t,"sceneZOrder",function(){return v.Q}),n.d(t,"sceneVisit",function(){return v.P}),n.d(t,"scenePickVisit",function(){return v.N}),n.d(t,"Dataflow",function(){return i.a}),n.d(t,"EventStream",function(){return i.b}),n.d(t,"Parameters",function(){return i.e}),n.d(t,"Pulse",function(){return i.f}),n.d(t,"MultiPulse",function(){return i.c}),n.d(t,"Operator",function(){return i.d}),n.d(t,"Transform",function(){return i.g}),n.d(t,"changeset",function(){return i.h}),n.d(t,"ingest",function(){return i.k}),n.d(t,"isTuple",function(){return i.m}),n.d(t,"definition",function(){return i.i}),n.d(t,"transform",function(){return i.p}),n.d(t,"transforms",function(){return i.q}),n.d(t,"tupleid",function(){return i.r});var y=n(60);n.d(t,"scale",function(){return y.d}),n.d(t,"scheme",function(){return y.f}),n.d(t,"interpolate",function(){return y.b}),n.d(t,"interpolateRange",function(){return y.c}),n.d(t,"timeInterval",function(){return y.g}),n.d(t,"utcInterval",function(){return y.h});var b=n(140);n.d(t,"projection",function(){return b.b});var w=n(1038);n.d(t,"View",function(){return w.a});var O=n(417);n.d(t,"parse",function(){return O.d}),n.d(t,"expressionFunction",function(){return O.a}),n.d(t,"formatLocale",function(){return O.b}),n.d(t,"timeFormatLocale",function(){return O.e});var x=n(434);n.d(t,"runtime",function(){return x.b}),n.d(t,"runtimeContext",function(){return x.a}),Object(r.extend)(i.q,a,o,s,u,c,l,f,d,p)},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"a",function(){return f});var r=n(90),i=n(359),a=[],o=Object(i.a)("id"),s=Object(r.c)(function(e){return e},a,"identity"),u=Object(r.c)(function(){return 0},a,"zero"),c=Object(r.c)(function(){return 1},a,"one"),l=Object(r.c)(function(){return!0},a,"true"),f=Object(r.c)(function(){return!1},a,"false")},function(e,t,n){"use strict";var r=n(90),i=n(126),a=n(127);t.a=function(e,t){var n=Object(i.a)(e),o="return _["+n.map(a.a).join("][")+"];";return Object(r.c)(Function("_",o),[e=1===n.length?n[0]:e],t||e)}},function(e,t,n){"use strict";t.a=function(e){throw Error(e)}},function(e,t,n){"use strict";t.a=function(e){return e===Object(e)}},function(e,t,n){"use strict";t.a=function(e){return"string"==typeof e}},function(e,t,n){"use strict";t.a=function(e){return e[e.length-1]}},function(e,t,n){"use strict";t.a=function(e){return null==e||""===e?null:+e}},function(e,t,n){"use strict";t.a=function(e){return"[object Date]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";t.a=function(e){return"number"==typeof e}},function(e,t,n){"use strict";t.a=function(e,t){for(var n="";--t>=0;)n+=e;return n}},function(e,t,n){"use strict";t.a=a;var r=n(0),i="_:mod:_";function a(){Object.defineProperty(this,i,{writable:!0,value:{}})}var o=a.prototype;o.set=function(e,t,n,a){var o=this,s=o[e],u=o[i];return null!=t&&t>=0?(s[t]!==n||a)&&(s[t]=n,u[t+":"+e]=-1,u[e]=-1):(s!==n||a)&&(o[e]=n,u[e]=Object(r.isArray)(n)?1+n.length:-1),o},o.modified=function(e,t){var n,a=this[i];if(!arguments.length){for(n in a)if(a[n])return!0;return!1}if(Object(r.isArray)(e)){for(n=0;n<e.length;++n)if(a[e[n]])return!0;return!1}return null!=t&&t>=0?t+1<a[e]||!!a[t+":"+e]:!!a[e]},o.clear=function(){return this[i]={},this}},function(e,t,n){"use strict";t.a=o,t.b=s;var r=n(91),i=n(0),a=0;function o(e,t,n){this.id=++a,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function s(e,t,n){return new o(e,t,n)}var u=o.prototype;u._filter=i.truthy,u._apply=i.identity,u.targets=function(){return this._targets||(this._targets=Object(r.a)(i.id))},u.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},u.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},u.filter=function(e){var t=s(e);return this.targets().add(t),t},u.apply=function(e){var t=s(null,e);return this.targets().add(t),t},u.merge=function(){var e=s();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},u.throttle=function(e){var t=-1;return this.filter(function(){var n=Date.now();return n-t>e?(t=n,1):0})},u.debounce=function(e){var t=s();return this.targets().add(s(null,null,Object(i.debounce)(e,function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()}))),t},u.between=function(e,t){var n=!1;return e.targets().add(s(null,null,function(){n=!0})),t.targets().add(s(null,null,function(){n=!1})),this.filter(function(){return n})}},function(e,t,n){"use strict";var r=n(214);t.a=function(e,t){return function(n,i,a){arguments.length<3&&(a=i,i=null);var o=Object(r.a)(n).mimeType(e);return o.row=function(e){return arguments.length?o.response(function(e,t){return function(n){return e(n.responseText,t)}}(t,i=e)):i},o.row(i),a?o.get(a):o}}},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),t.a=s,t.b=function(e,t){return t.reduce(function(t,n){return t[n]=s(e,n),t},{})};var r=n(0),i={boolean:r.toBoolean,integer:r.toNumber,number:r.toNumber,date:r.toDate,string:r.toString,unknown:r.identity},a=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return u(e)&&(e=+e)==~~e},u,function(e){return!isNaN(Date.parse(e))}],o=["boolean","integer","number","date"];function s(e,t){if(!e||!e.length)return"unknown";var n,r,i,s,u,c=a.slice();for(r=0,i=e.length;r<i;++r){for(n=t?e[r][t]:e[r],s=0;s<c.length;++s)null==(u=n)||u!=u||c[s](n)||(c.splice(s,1),--s);if(0===c.length)return"string"}return o[a.indexOf(c[0])]}function u(e){return!(isNaN(+e)||e instanceof Date)}},function(e,t,n){"use strict";var r=n(900),i=n(373),a=n(901),o={dsv:r.a,csv:Object(r.b)(","),tsv:Object(r.b)("\t"),json:i.a,topojson:a.a};t.a=function(e,t){return arguments.length>1?(o[e]=t,this):o.hasOwnProperty(e)?o[e]:null}},function(e,t,n){"use strict";(function(e){var r=n(0);t.a=function(t,n){var i,a=n&&n.property?Object(r.field)(n.property):r.identity;return!Object(r.isObject)(t)||(i=t,"function"==typeof e&&Object(r.isFunction)(e.isBuffer)&&e.isBuffer(i))?a(JSON.parse(t)):function(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(a(t))}}).call(t,n(344).Buffer)},function(e,t,n){"use strict";var r=n(215);t.a=function(e){var t,n=Object(r.a)(e.transform),i=1/0,a=i,o=-i,s=-i;function u(e){(e=n(e))[0]<i&&(i=e[0]),e[0]>o&&(o=e[0]),e[1]<a&&(a=e[1]),e[1]>s&&(s=e[1])}function c(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(c);break;case"Point":u(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(u)}}for(t in e.arcs.forEach(function(e){for(var t,r=-1,u=e.length;++r<u;)(t=n(e[r],r))[0]<i&&(i=t[0]),t[0]>o&&(o=t[0]),t[1]<a&&(a=t[1]),t[1]>s&&(s=t[1])}),e.objects)c(e.objects[t]);return[i,a,o,s]}},function(e,t,n){"use strict";t.a=function(e){return e}},function(e,t,n){"use strict";t.a=function(e,t){var n={},r={},i={},a=[],o=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){n[e<0?~e:e]=1}),a.push(i)}}return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++o],t[o]=n,t[r]=i)}),t.forEach(function(t){var n,a,o=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=o[0],u=o[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=u,a=r[u]){delete r[a.start];var c=a===n?n:n.concat(a);r[c.start=n.start]=i[c.end=a.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(t),n.start=s,a=i[s]){delete i[a.end];var l=a===n?n:a.concat(n);r[l.start=a.start]=i[l.end=n.end]=l}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=u]=n}),s(i,r),s(r,i),t.forEach(function(e){n[e<0?~e:e]||a.push([e])}),a}},function(e,t,n){"use strict";var r=n(375);t.a=function(e){if(null==e)return r.a;var t,n,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,r){r||(t=n=0);var u=2,c=e.length,l=new Array(c),f=Math.round((e[0]-o)/i),d=Math.round((e[1]-s)/a);for(l[0]=f-t,t=f,l[1]=d-n,n=d;u<c;)l[u]=e[u],++u;return l}}},function(e,t,n){"use strict";t.a=a;var r=n(130),i=n(0);function a(e,t,n,r){var i,a,o,s,u,c=this,l=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n,o=0,s=n.length;o<s;++o)if((i=n[o]).stamp===t){if(i.fields)for(u in a=c.fields||(c.fields={}),i.fields)a[u]=1;i.changed(c.ADD)&&(l|=c.ADD),i.changed(c.REM)&&(l|=c.REM),i.changed(c.MOD)&&(l|=c.MOD)}this.changes=l}var o=Object(i.inherits)(a,r.b);o.fork=function(e){var t=new r.b(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,function(e){return t.add.push(e)}),e&t.REM&&this.visit(t.REM,function(e){return t.rem.push(e)}),e&t.MOD&&this.visit(t.MOD,function(e){return t.mod.push(e)})),t},o.changed=function(e){return this.changes&e},o.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?Object(i.isArray)(e)?e.some(function(e){return n[e]}):n[e]:0},o.filter=function(){Object(i.error)("MultiPulse does not support filtering.")},o.materialize=function(){Object(i.error)("MultiPulse does not support materialization.")},o.visit=function(e,t){var n=this,r=n.pulses,i=r.length,a=0;if(e&n.SOURCE)for(;a<i;++a)r[a].visit(e,t);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(e,t);return n}},function(e,t,n){"use strict";t.a=u;var r=n(380),i=n(131),a=n(381),o=n(1),s=n(0);function u(e){o.g.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}u.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:i.a},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var c=Object(s.inherits)(u,o.g);c.transform=function(e,t){var n,r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),i.modifies(this._outputs),r._drop=!1!==e.drop,e.cross&&r._dims.length>1&&(r._drop=!1,this.cross()),r.changes(i)},c.cross=function(){var e=this,t=e.value,n=e._dnames,r=n.map(function(){return{}}),i=n.length;function a(e){var t,a,o,s;for(t in e)for(o=e[t].tuple,a=0;a<i;++a)r[a][s=o[n[a]]]=s}a(e._prev),a(t),function a(o,s,u){var c,l,f=n[u],d=r[u++];for(c in d)s[f]=d[c],l=o?o+"|"+c:c,u<i?a(l,s,u):t[l]||e.cell(l,s)}("",{},0)},c.init=function(e){var t=this._inputs=[],n=this._outputs=[],a={};function o(e){for(var n,r=Object(s.array)(Object(s.accessorFields)(e)),i=0,o=r.length;i<o;++i)a[n=r[i]]||(a[n]=1,t.push(n))}this._dims=Object(s.array)(e.groupby),this._dnames=this._dims.map(function(e){var t=Object(s.accessorName)(e);return o(e),n.push(t),t}),this.cellkey=e.key?e.key:Object(r.a)(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var u,c,l,f,d,p,h=e.fields||[null],m=e.ops||["count"],g=e.as||[],v=h.length,y={};for(v!==m.length&&Object(s.error)("Unmatched number of fields and aggregate ops."),p=0;p<v;++p)u=h[p],c=m[p],null==u&&"count"!==c&&Object(s.error)("Null aggregate field specified."),f=Object(s.accessorName)(u),d=Object(i.d)(c,f,g[p]),n.push(d),"count"!==c?((l=y[f])||(o(u),(l=y[f]=[]).field=u,this._measures.push(l)),"count"!==c&&(this._countOnly=!1),l.push(Object(i.c)(c,d))):this._counts.push(d);return this._measures=this._measures.map(function(e){return Object(i.b)(e,e.field)}),{}},c.cellkey=Object(r.a)(),c.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},c.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,o=i.length;for(n.agg=Array(o),r=0;r<o;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new a.a),n},c.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,s={};for(n=0,r=a.length;n<r;++n)s[i[n]]=a[n](e);return t?Object(o.o)(t.tuple,s):Object(o.k)(s)},c.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].add(t[n].get(e),e)},c.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].rem(t[n].get(e),e)},c.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(n=0,r=(t=e.agg).length;n<r;++n)t[n].set(i);return i},c.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,s=this._prev,u=this._drop,c=e.add,l=e.rem,f=e.mod;if(s)for(n in s)t=s[n],u&&!t.num||l.push(t.tuple);for(r=0,i=this._alen;r<i;++r)c.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(t=o[r]).num&&u?l:f).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e}},function(e,t,n){"use strict";t.a=function(e){return e&&e.length?1===e.length?e[0]:(t=e,function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(54),a=n(0);function o(e){this._key=e?Object(a.field)(e):r.r,this.reset()}var s=o.prototype;s.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},s.add=function(e){this._add.push(e)},s.rem=function(e){this._rem.push(e)},s.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,s=i.length,u=Array(o-s),c={};for(e=0;e<s;++e)c[a(i[e])]=1;for(e=0,t=0;e<o;++e)c[a(n=r[e])]?c[a(n)]=0:u[t++]=n;return this._rem=[],this._add=u},s.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;--r>=0;)t=e(n[r])+"",i.hasOwnProperty(t)||(i[t]=1,++a);return a},s.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Object(a.extentIndex)(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},s.argmin=function(e){return this.extent(e)[0]||{}},s.argmax=function(e){return this.extent(e)[1]||{}},s.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):1/0},s.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-1/0},s.quartile=function(e){return this._get===e&&this._q||(this._q=Object(i.c)(this.values(),e),this._get=e),this._q},s.q1=function(e){return this.quartile(e)[0]},s.q2=function(e){return this.quartile(e)[1]},s.q3=function(e){return this.quartile(e)[2]},s.ci=function(e){return this._get===e&&this._ci||(this._ci=Object(i.b)(this.values(),1e3,.05,e),this._get=e),this._ci},s.ci0=function(e){return this.ci(e)[0]},s.ci1=function(e){return this.ci(e)[1]}},function(e,t,n){"use strict";function r(e){return null===e?NaN:+e}t.a=function(e,t){var n,i=[],a=e.length,o=-1;if(null==t)for(;++o<a;)isNaN(n=r(e[o]))||i.push(n);else for(;++o<a;)isNaN(n=r(t(e[o],o,e)))||i.push(n);return i}},function(e,t,n){"use strict";var r=n(382),i=n(8);t.a=function(e,t){var n=Object(r.a)(e,t);return[Object(i.m)(n.sort(i.a),.25),Object(i.m)(n,.5),Object(i.m)(n,.75)]}},function(e,t,n){"use strict";var r=n(55);t.a=function(e,t){var n,i,a=NaN,o={mean:function(e){return arguments.length?(n=e||0,a=NaN,o):n},stdev:function(e){return arguments.length?(i=null==e?1:e,a=NaN,o):i},sample:function(){var e,t,o=0,s=0;if(a==a)return o=a,a=NaN,o;do{e=(o=2*Object(r.a)()-1)*o+(s=2*Object(r.a)()-1)*s}while(0===e||e>1);return t=Math.sqrt(-2*Math.log(e)/e),a=n+s*t*i,n+o*t*i},pdf:function(e){var t=Math.exp(Math.pow(e-n,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*t},cdf:function(e){var t,r=(e-n)/i,a=Math.abs(r);if(a>37)t=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(t=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),t/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):t=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return r>0?1-t:t},icdf:function(e){if(e<=0||e>=1)return NaN;var t=2*e-1,r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*r)+Math.log(1-Math.pow(t,2))/2,o=Math.log(1-t*t)/r,s=(t>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return n+i*Math.SQRT2*s}};return o.mean(e).stdev(t)}},function(e,t,n){"use strict";var r=n(0);t.a=function(e,t,n){var i=e,a=t||[],o=n||[],s={},u=0;return{add:function(e){o.push(e)},remove:function(e){s[i(e)]=++u},size:function(){return a.length},data:function(e,t){return u&&(a=a.filter(function(e){return!s[i(e)]}),s={},u=0),t&&e&&a.sort(e),o.length&&(a=e?Object(r.merge)(e,a,o.sort(e)):a.concat(o),o=[]),a}}}},function(e,t,n){"use strict";t.a=o;var r=n(387),i=n(1),a=n(0);function o(e){i.g.call(this,{},e),this._keys=Object(a.fastmap)();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}var s=Object(a.inherits)(o,i.g);s.activate=function(e){this._targets[this._targets.active++]=e},s.subflow=function(e,t,n,i){var a,o,s=this.value,u=s.hasOwnProperty(e)&&s[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(o=i||(o=this._group[e])&&o.tuple,u=(a=n.dataflow).add(new r.a(n.fork(n.NO_SOURCE),this)).connect(t(a,e,o)),s[e]=u,this.activate(u)),u},s.transform=function(e,t){var n=t.dataflow,r=this,a=e.key,o=e.subflow,s=this._keys,u=e.modified("key");function c(e){return r.subflow(e,o,t)}return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=Object(i.r)(e),n=s.get(t);void 0!==n&&(s.delete(t),c(n).rem(e))}),t.visit(t.ADD,function(e){var t=a(e);s.set(Object(i.r)(e),t),c(t).add(e)}),u||t.modified(a.fields)?t.visit(t.MOD,function(e){var t=Object(i.r)(e),n=s.get(t),r=a(e);n===r?c(r).mod(e):(s.set(t,r),c(n).rem(e),c(r).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){c(s.get(Object(i.r)(e))).mod(e)}),u&&t.visit(t.REFLOW,function(e){var t=Object(i.r)(e),n=s.get(t),r=a(e);n!==r&&(s.set(t,r),c(n).rem(e),c(r).add(e))}),s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e,t){r.d.call(this,e),this.parent=t}var o=Object(i.inherits)(a,r.d);o.connect=function(e){return this.targets().add(e),e.source=this},o.add=function(e){this.value.add.push(e)},o.rem=function(e){this.value.rem.push(e)},o.mod=function(e){this.value.mod.push(e)},o.init=function(e){this.value.init(e,e.NO_SOURCE)},o.evaluate=function(){return this.value}},function(e,t,n){"use strict";t.a=function(e,t){return e?e.map(function(e,n){return t[n]||Object(r.accessorName)(e)}):null};var r=n(0)},function(e,t,n){"use strict";t.b=function(e,t,n,a){var o=i[e](t,n);return{init:o.init||r.zero,update:function(e,t){t[a]=o.next(e)}}},n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a});var r=n(0);var i={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=i.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){(t=+t)>0||Object(r.error)("ntile num must be greater than zero.");var n=i.cume_dist(),a=n.next;return{init:n.init,next:function(e){return Math.ceil(t*a(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return(t=+t)>0||Object(r.error)("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},a=Object.keys(i)},function(e,t,n){"use strict";t.a=a;var r=n(391),i=n(0);function a(e){r.a.call(this,e),this.items=this.items||[]}Object(i.inherits)(a,r.a)},function(e,t,n){"use strict";t.a=function(e){this.mark=e,this.bounds=this.bounds||new r.a};var r=n(45)},function(e,t,n){"use strict";t.a=a;var r=n(132),i=n(92);function a(e){this._pending=0,this._loader=e||Object(i.d)()}var o=a.prototype;function s(e){e._pending+=1}function u(e){e._pending-=1}o.pending=function(){return this._pending},o.sanitizeURL=function(e){var t=this;return s(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return u(t),e}).catch(function(){return u(t),null})},o.loadImage=function(e){var t=this,n=Object(r.b)();return s(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){u(t),i.loaded=!0},i.onerror=function(){u(t),i.loaded=!1},i.src=r,i}).catch(function(e){return u(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}})},o.ready=function(){var e=this;return new Promise(function(t){!function n(r){e.pending()?setTimeout(function(){n(!0)},10):t(r)}(!1)})}},function(e,t,n){"use strict";t.a=function(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null},t.b=function(){return"undefined"!=typeof Image?Image:null}},function(e,t,n){"use strict";var r;t.a=function(e,t){if(r)try{return new r(e,t)}catch(e){}return null},t.b=function(){return r&&r.Image||null};try{if(!(r=n(958)))throw 1}catch(e){try{r=n(959)}catch(e){r=null}}},function(e,t,n){"use strict";t.b=function(e,t){return JSON.stringify(e,i,t)},t.a=function(e){return function e(t){var n,i,a,o=t.marktype,s=t.items;if(s)for(i=0,a=s.length;i<a;++i)n=o?"mark":"group",s[i][n]=t,s[i].zindex&&(s[i][n].zdirty=!0),"group"===(o||n)&&e(s[i]);o&&Object(r.a)(t);return t}("string"==typeof e?JSON.parse(e):e)};var r=n(396),i=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"]},function(e,t,n){"use strict";var r=n(45),i=n(397),a=n(56),o={mark:null};t.a=function(e,t,n){var s,u,c,l,f=a.a[e.marktype],d=f.bound,p=e.items,h=p&&p.length;if(f.nested)return h?c=p[0]:(o.mark=e,c=o),l=Object(i.a)(c,d,n),t=t&&t.union(l)||l;if(t=t||e.bounds&&e.bounds.clear()||new r.a,h)for(s=0,u=p.length;s<u;++s)t.union(Object(i.a)(p[s],d,n));return e.bounds=t}},function(e,t,n){"use strict";var r=n(45),i=n(56);t.a=function(e,t,n){var a=i.a[e.mark.marktype],o=t||a.bound;return a.nested&&(e=e.mark),o(e.bounds||(e.bounds=new r.a),e,n)}},function(e,t,n){"use strict";t.a=function(e,t,n){var r=i.hasOwnProperty(e)&&i[e],a=null;r&&(a=r.curve||r[t||"vertical"],r.tension&&null!=n&&(a=a[r.tension](n)));return a};var r=n(194),i={basis:{curve:r.c},"basis-closed":{curve:r.d},"basis-open":{curve:r.e},bundle:{curve:r.f,tension:"beta",value:.85},cardinal:{curve:r.g,tension:"tension",value:0},"cardinal-open":{curve:r.i,tension:"tension",value:0},"cardinal-closed":{curve:r.h,tension:"tension",value:0},"catmull-rom":{curve:r.j,tension:"alpha",value:.5},"catmull-rom-closed":{curve:r.k,tension:"alpha",value:.5},"catmull-rom-open":{curve:r.l,tension:"alpha",value:.5},linear:{curve:r.m},"linear-closed":{curve:r.n},monotone:{horizontal:r.p,vertical:r.o},natural:{curve:r.q},step:{curve:r.r},"step-after":{curve:r.s},"step-before":{curve:r.t}}},function(e,t,n){"use strict";t.a=function(e){return s.hasOwnProperty(e)?s[e]:function(e){if(!u.hasOwnProperty(e)){var t=Object(r.a)(e);u[e]={draw:function(e,n){Object(i.a)(e,t,0,0,Math.sqrt(n)/2)}}}return u[e]}(e)};var r=n(133),i=n(217),a=2*Math.PI,o=Math.sqrt(3)/2,s={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,a)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=o*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=o*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=o*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=o*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}}};var u={}},function(e,t,n){"use strict";var r=n(39);function i(e){return e.x}function a(e){return e.y}function o(e){return e.width}function s(e){return e.height}function u(e){return function(){return e}}t.a=function(){var e=i,t=a,n=o,c=s,l=u(0),f=null;function d(i,a,o){var s,u=null!=a?a:+e.call(this,i),d=null!=o?o:+t.call(this,i),p=+n.call(this,i),h=+c.call(this,i),m=+l.call(this,i);if(f||(f=s=Object(r.a)()),m<=0)f.rect(u,d,p,h);else{var g=u+p,v=d+h;f.moveTo(u+m,d),f.lineTo(g-m,d),f.quadraticCurveTo(g,d,g,d+m),f.lineTo(g,v-m),f.quadraticCurveTo(g,v,g-m,v),f.lineTo(u+m,v),f.quadraticCurveTo(u,v,u,v-m),f.lineTo(u,d+m),f.quadraticCurveTo(u,d,u+m,d),f.closePath()}if(s)return f=null,s+""||null}return d.x=function(t){return arguments.length?(e="function"==typeof t?t:u(+t),d):e},d.y=function(e){return arguments.length?(t="function"==typeof e?e:u(+e),d):t},d.width=function(e){return arguments.length?(n="function"==typeof e?e:u(+e),d):n},d.height=function(e){return arguments.length?(c="function"==typeof e?e:u(+e),d):c},d.cornerRadius=function(e){return arguments.length?(l="function"==typeof e?e:u(+e),d):l},d.context=function(e){return arguments.length?(f=null==e?null:e,d):f},d}},function(e,t,n){"use strict";var r=n(39),i=Math.PI;t.a=function(){var e,t,n,a,o,s,u,c,l=null;function f(e,t,n){var r=n/2;if(o){var a=u-t,f=e-s;if(a||f){var d=Math.sqrt(a*a+f*f),p=(a/=d)*c,h=(f/=d)*c,m=Math.atan2(f,a);l.moveTo(s-p,u-h),l.lineTo(e-a*r,t-f*r),l.arc(e,t,r,m-i,m),l.lineTo(s+p,u+h),l.arc(s,u,c,m,m+i)}else l.arc(e,t,r,0,2*i);l.closePath()}else o=1;s=e,u=t,c=r}function d(i){var s,u,c,d=i.length,p=!1;for(null==l&&(l=c=Object(r.a)()),s=0;s<=d;++s)!(s<d&&a(u=i[s],s,i))===p&&(p=!p)&&(o=0),p&&f(+e(u,s,i),+t(u,s,i),+n(u,s,i));if(c)return l=null,c+""||null}return d.x=function(t){return arguments.length?(e=t,d):e},d.y=function(e){return arguments.length?(t=e,d):t},d.size=function(e){return arguments.length?(n=e,d):n},d.defined=function(e){return arguments.length?(a=e,d):a},d.context=function(e){return arguments.length?(l=null==e?null:e,d):l},d}},function(e,t,n){"use strict";var r=n(963);t.a=function(e,t,n){return n.id?Object(r.a)(e,n,t.bounds):n}},function(e,t,n){"use strict";t.a=u;var r=n(222),i=n(56),a=n(404),o=n(59),s=n(0);function u(e){r.a.call(this,e),this._down=null,this._touch=null,this._first=!0}var c=Object(s.inherits)(u,r.a);function l(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function f(e){return function(t){this.fire(e,t),this._active=null}}c.initialize=function(e,t,n){var i=this._canvas=e&&Object(o.e)(e,"canvas");if(i){var a=this;this.events.forEach(function(e){i.addEventListener(e,function(t){c[e]?c[e].call(a,t):a.fire(e,t)})})}return r.a.prototype.initialize.call(this,e,t,n)},c.canvas=function(){return this._canvas},c.context=function(){return this._canvas.getContext("2d")},c.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],c.DOMMouseScroll=function(e){this.fire("mousewheel",e)},c.mousemove=l("mousemove","mouseover","mouseout"),c.dragover=l("dragover","dragenter","dragleave"),c.mouseout=f("mouseout"),c.dragleave=f("dragleave"),c.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},c.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},c.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},c.touchmove=function(e){this.fire("touchmove",e,!0)},c.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},c.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if("click"===e&&a&&a.href?this.handleHref(t,a,a.href):("mouseover"===e||"mouseout"===e)&&a&&a.tooltip&&this.handleTooltip(t,a,"mouseover"===e?a.tooltip:null),o)for(t.vegaType=e,r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},c.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},c.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},c.pickEvent=function(e){var t=Object(a.a)(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},c.pick=function(e,t,n,r,a){var o=this.context();return i.a[e.marktype].pick.call(this,o,e,t,n,r,a)}},function(e,t,n){"use strict";t.a=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}},function(e,t,n){"use strict";t.a=f;var r=n(139),i=n(45),a=n(56),o=n(59),s=n(975),u=n(976),c=n(132),l=n(0);function f(e){r.a.call(this,e),this._redraw=!1,this._dirty=new i.a}var d=Object(l.inherits)(f,r.a),p=r.a.prototype,h=new i.a;d.initialize=function(e,t,n,r,i){return this._canvas=Object(c.a)(1,1),e&&(Object(o.c)(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),p.initialize.call(this,e,t,n,r,i)},d.resize=function(e,t,n,r){return p.resize.call(this,e,t,n,r),Object(u.a)(this._canvas,this._width,this._height,this._origin,this._scale),this._redraw=!0,this},d.canvas=function(){return this._canvas},d.context=function(){return this._canvas?this._canvas.getContext("2d"):null},d.dirty=function(e){var t=function(e,t){if(null==t)return e;for(var n=h.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},d._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function(e,t,n){return t.expand(1).round(),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a,n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},d.draw=function(e,t,n){var r=a.a[t.marktype];t.clip&&Object(s.a)(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},d.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))}},function(e,t,n){"use strict";t.a=o;var r=n(222),i=n(59),a=n(0);function o(e){r.a.call(this,e);var t=this;t._hrefHandler=u(t,function(e,n){n&&n.href&&t.handleHref(e,n,n.href)}),t._tooltipHandler=u(t,function(e,n){n&&n.tooltip&&t.handleTooltip(e,n,"mouseover"===e.type?n.tooltip:null)})}var s=Object(a.inherits)(o,r.a);function u(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}s.initialize=function(e,t,n){var a=this._svg;return a&&(a.removeEventListener("click",this._hrefHandler),a.removeEventListener("mouseover",this._tooltipHandler),a.removeEventListener("mouseout",this._tooltipHandler)),this._svg=a=e&&Object(i.e)(e,"svg"),a&&(a.addEventListener("click",this._hrefHandler),a.addEventListener("mouseover",this._tooltipHandler),a.addEventListener("mouseout",this._tooltipHandler)),r.a.prototype.initialize.call(this,e,t,n)},s.svg=function(){return this._svg},s.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:u(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},s.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}},function(e,t,n){"use strict";t.a=h;var r=n(139),i=n(56),a=n(59),o=n(223),s=n(138),u=n(42),c=n(137),l=n(408),f=n(409),d=n(0),p=l.a.xmlns;function h(e){r.a.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var m=Object(d.inherits)(h,r.a),g=r.a.prototype;function v(e,t,n){var r,i,o;for((e=Object(a.b)(e,n,"linearGradient",p)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)(o=Object(a.b)(e,r,"stop",p)).setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);Object(a.c)(e,r)}function y(e,t,n){var r;(e=Object(a.b)(e,n,"clipPath",p)).setAttribute("id",t.id),t.path?(r=Object(a.b)(e,0,"path",p)).setAttribute("d",t.path):((r=Object(a.b)(e,0,"rect",p)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height))}function b(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function w(e,t,n,r){var i,o=e._svg;if(!o&&(i=t.ownerDocument,o=Object(a.d)(i,r,p),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var s=Object(a.d)(i,"path",p);s.setAttribute("class","background"),o.appendChild(s),s.__data__=e;var u=Object(a.d)(i,"g",p);o.appendChild(u),u.__data__=e}return!i&&o.previousSibling===n&&n||t.insertBefore(o,n?n.nextSibling:t.firstChild),o}m.initialize=function(e,t,n,r){return e&&(this._svg=Object(a.b)(e,0,"svg",p),this._svg.setAttribute("class","marks"),Object(a.c)(e,1),this._root=Object(a.b)(this._svg,0,"g",p),Object(a.c)(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),g.initialize.call(this,e,t,n,r)},m.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),g.background.apply(this,arguments)},m.resize=function(e,t,n,r){return g.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},m.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in l.a)e[t]=l.a[t];var n=this._bgcolor?Object(o.b)("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+Object(o.a)("rect"):"";return Object(o.b)("svg",e)+n+this._svg.innerHTML+Object(o.a)("svg")},m._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),Object(a.c)(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},m.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=Object(a.b)(t,0,"defs",p)),v(r,n.gradient[e],i++);for(e in n.clipping)r||(n.el=r=Object(a.b)(t,0,"defs",p)),y(r,n.clipping[e],i++);r&&(0===i?(t.removeChild(r),n.el=null):Object(a.c)(r,i))},m._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},m.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},m.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},m._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,a,o,s,u,c=++this._dirtyID;for(o=0,s=e.length;o<s;++o)(n=(t=e[o]).mark).marktype!==r&&(r=n.marktype,a=i.a[r]),n.zdirty&&n.dirty!==c&&(this._dirtyAll=!1,n.dirty=c,b(n.group,c)),t.exit?(a.nested&&n.items.length?(u=n.items[0])._svg&&this._update(a,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=a.nested?n.items[0]:t)._update!==c&&(t._svg&&t._svg.ownerSVGElement?this._update(a,t._svg,t):(this._dirtyAll=!1,b(t,c)),t._update=c);return!this._dirtyAll},m.draw=function(e,t,n){if(!this.isDirty(t))return t._svg;var r,o=this,s=i.a[t.marktype],l=!1===t.interactive?"none":null,f="g"===s.tag,d=null,p=0;function h(e){var t=o.isDirty(e),n=w(e,r,d,s.tag);t&&(o._update(s,n,e),f&&function(e,t,n){t=t.lastChild;var r,i=0;Object(u.b)(n,function(n){r=e.draw(t,n,r),++i}),Object(a.c)(t,1+i)}(o,n,e)),d=n,++p}return(r=w(t,e,n,"g")).setAttribute("class",Object(a.a)(t)),f||r.style.setProperty("pointer-events",l),t.clip?r.setAttribute("clip-path",Object(c.a)(o,t,t.group)):r.removeAttribute("clip-path"),s.nested?t.items.length&&h(t.items[0]):Object(u.b)(t,h),Object(a.c)(r,p),r};var O=null,x=null,j={group:function(e,t,n){x=t.__values__,O=t.childNodes[1],e.foreground(_,n,this),O=t.childNodes[0],e.background(_,n,this);var r=!1===n.mark.interactive?"none":null;r!==x.events&&(O.style.setProperty("pointer-events",r),x.events=r)},text:function(e,t,n){var r=Object(s.d)(n);r!==x.text&&(t.textContent=r,x.text=r),(r=Object(s.a)(n))!==x.font&&(t.style.setProperty("font",r),x.font=r)}};function _(e,t,n){t!==x[e]&&(null!=t?n?O.setAttributeNS(n,e,t):O.setAttribute(e,t):n?O.removeAttributeNS(n,e):O.removeAttribute(e),x[e]=t)}m._update=function(e,t,n){O=t,x=t.__values__,e.attr(_,n,this);var r=j[e.type];r&&r.call(this,e,t,n),this.style(O,n)},m.style=function(e,t){var n,r,i,a,o,s;if(null!=t)for(n=0,r=f.a.length;n<r;++n)(o=t[i=f.a[n]])!==x[i]&&(a=f.b[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+(s=void 0,"undefined"==typeof window?"":(s=window.location).hash?s.href.slice(0,-s.hash.length):s.href)+"#"+o.id+")"),e.style.setProperty(a,o+"")),x[i]=o)}},function(e,t,n){"use strict";t.a={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},i=Object.keys(r)},function(e,t,n){"use strict";t.a=p;var r=n(139),i=n(56),a=n(59),o=n(223),s=n(138),u=n(42),c=n(137),l=n(408),f=n(409),d=n(0);function p(e){r.a.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}var h,m=Object(d.inherits)(p,r.a),g=r.a.prototype;function v(e,t,n,r){h[r||e]=t}function y(e,t,n,r){if(null==e)return"";var i,a,o,u,c,l="";for("bgrect"===n&&!1===t.interactive&&(l+="pointer-events: none; "),"text"===n&&(l+="font: "+Object(s.a)(e)+"; "),i=0,a=f.a.length;i<a;++i)o=f.a[i],u=f.b[o],null==(c=e[o])?"fill"===u&&(l+="fill: none; "):"transparent"!==c||"fill"!==u&&"stroke"!==u?(c.id&&(r.gradient[c.id]=c,c="url(#"+c.id+")"),l+=u+": "+c+"; "):l+=u+": none; ";return l?'style="'+l.trim()+'"':null}m.resize=function(e,t,n,r){g.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,s={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in l.a)s[u]=l.a[u];a.head=Object(o.b)("svg",s);var c=this._bgcolor;return"transparent"!==c&&"none"!==c||(c=null),a.bg=c?Object(o.b)("rect",{width:this._width,height:this._height,style:"fill: "+c+";"})+Object(o.a)("rect"):"",a.root=Object(o.b)("g",{transform:"translate("+i+")"}),a.foot=Object(o.a)("g")+Object(o.a)("svg"),this},m.background=function(){var e=g.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},m.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},m._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},m.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(r=(n=i.gradient[t]).stops,a+=Object(o.b)("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=Object(o.b)("stop",{offset:r[e].offset,"stop-color":r[e].color})+Object(o.a)("stop");a+=Object(o.a)("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=Object(o.b)("clipPath",{id:t}),n.path?a+=Object(o.b)("path",{d:n.path})+Object(o.a)("path"):a+=Object(o.b)("rect",{x:0,y:0,width:n.width,height:n.height})+Object(o.a)("rect"),a+=Object(o.a)("clipPath");return a.length>0?Object(o.b)("defs")+a+Object(o.a)("defs"):""},m.attributes=function(e,t){return h={},e(v,t,this),h},m.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then(function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e})}return null},m.mark=function(e){var t,n=this,r=i.a[e.marktype],l=r.tag,f=this._defs,d="";function p(i){var a=n.href(i);a&&(d+=Object(o.b)("a",a)),t="g"!==l?y(i,e,l,f):null,d+=Object(o.b)(l,n.attributes(r.attr,i),t),"text"===l?d+=Object(s.d)(i).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===l&&(d+=Object(o.b)("path",n.attributes(r.background,i),y(i,e,"bgrect",f))+Object(o.a)("path"),d+=Object(o.b)("g",n.attributes(r.foreground,i))+n.markGroup(i)+Object(o.a)("g")),d+=Object(o.a)(l),a&&(d+=Object(o.a)("a"))}return"g"!==l&&!1===e.interactive&&(t='style="pointer-events: none;"'),d+=Object(o.b)("g",{class:Object(a.a)(e),"clip-path":e.clip?Object(c.a)(n,e,e.group):null},t),r.nested?e.items&&e.items.length&&p(e.items[0]):Object(u.b)(e,p),d+Object(o.a)("g")},m.markGroup=function(e){var t=this,n="";return Object(u.b)(e,function(e){n+=t.mark(e)}),n}},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o});var r="top",i="left",a="right",o="bottom"},function(e,t,n){"use strict";t.a=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a});var r="Feature",i="FeatureCollection",a="MultiPoint"},function(e,t,n){"use strict";t.c=function(e){return new Uint8Array(e)},t.a=function(e){return new Uint16Array(e)},t.b=function(e){return new Uint32Array(e)}},function(e,t,n){"use strict";t.a=function(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}},function(e,t,n){"use strict";var r=n(142);t.a=function(e,t,n,i,a){return(t=t||new i(e.loader())).initialize(n,Object(r.d)(e),Object(r.a)(e),Object(r.b)(e),a).background(e._background)}},function(e,t,n){"use strict";var r=n(1053);n.d(t,"d",function(){return r.a});n(433),n(226),n(418),n(425);var i=n(419);n.d(t,"c",function(){return i.d}),n.d(t,"a",function(){return i.c});n(12),n(432),n(95);var a=n(67);n.d(t,"b",function(){return a.b});var o=n(70);n.d(t,"e",function(){return o.b})},function(e,t,n){"use strict";var r=n(61),i=n(1075);t.a=function(e,t){var n=t.getSignal(e.name);if(e.update){var a=Object(r.a)(e.update,t);n.update=a.$expr,n.params=a.$params}e.on&&e.on.forEach(function(e){Object(i.a)(e,t,n.id)})}},function(e,t,n){"use strict";n.d(t,"d",function(){return k}),t.c=D,n.d(t,"b",function(){return T}),n.d(t,"a",function(){return R});var r=n(1),i=n(420),a=n(54),o=n(0),s=n(33),u=n(8),c=n(1059),l=n(1060),f=n(1061),d=n(1062),p=n(1063),h=n(1064),m=n(1065),g=n(1066),v=n(1067),y=n(144),b=n(1068),w=n(1069),O=n(1070),x=n(228),j=n(1071),_=n(424),S=n(1072),M=n(1073),E=n(1074),k={random:function(){return Object(a.d)()},isArray:o.isArray,isBoolean:o.isBoolean,isDate:o.isDate,isNumber:o.isNumber,isObject:o.isObject,isRegExp:o.isRegExp,isString:o.isString,isTuple:r.m,toBoolean:o.toBoolean,toDate:o.toDate,toNumber:o.toNumber,toString:o.toString,pad:o.pad,peek:o.peek,truncate:o.truncate,rgb:s.f,lab:s.e,hcl:s.c,hsl:s.d,sequence:u.n,format:c.c,utcFormat:c.h,utcParse:c.i,timeFormat:c.f,timeParse:c.g,monthFormat:c.e,monthAbbrevFormat:c.d,dayFormat:c.b,dayAbbrevFormat:c.a,quarter:l.a,utcquarter:l.b,warn:f.c,info:f.b,debug:f.a,inScope:d.a,clampRange:p.a,pinchDistance:h.b,pinchAngle:h.a,screen:m.b,containerSize:m.a,windowSize:m.c,span:v.a,flush:g.a,bandspace:y.a,inrange:_.a,setdata:x.e,pathShape:O.b,panLinear:o.panLinear,panLog:o.panLog,panPow:o.panPow,zoomLinear:o.zoomLinear,zoomLog:o.zoomLog,zoomPow:o.zoomPow,encode:S.a,modify:M.a},N=["view","item","group","xy","x","y"],A="event.vega.",P="this.",C={};function D(e,t,n){return 1===arguments.length?k[e]:(k[e]=t,n&&(C[e]=n),R&&(R.functions[e]=P+e),this)}D("bandwidth",y.b,y.i),D("copy",y.c,y.i),D("domain",y.d,y.i),D("range",y.g,y.i),D("invert",y.f,y.i),D("scale",y.h,y.i),D("gradient",b.a,y.i),D("geoArea",w.a,y.i),D("geoBounds",w.b,y.i),D("geoCentroid",w.c,y.i),D("geoShape",O.a,y.i),D("indata",x.c,x.d),D("data",x.a,x.b),D("vlSingle",E.d,x.b),D("vlSingleDomain",E.e,x.b),D("vlMulti",E.d,E.c),D("vlMultiDomain",E.e,E.c),D("vlInterval",E.a,x.b),D("vlIntervalDomain",E.b,x.b),D("treePath",j.b,x.b),D("treeAncestors",j.a,x.b);var T={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+Object(o.stringValue)("$"+e)+"]"},functions:function(e){var t=Object(i.c)(e);for(var n in N.forEach(function(e){t[e]=A+e}),k)t[n]=P+n;return t},constants:i.b,visitors:C},R=Object(i.a)(T)},function(e,t,n){"use strict";n(421);var r=n(1057);n.d(t,"d",function(){return r.a});var i=n(1058);n.d(t,"a",function(){return i.a});var a=n(423);n.d(t,"c",function(){return a.a});var o=n(422);n.d(t,"b",function(){return o.a})},function(e,t,n){"use strict";function r(e){this.type=e}t.a=r,r.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1}},function(e,t,n){"use strict";t.a={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"}},function(e,t,n){"use strict";var r=n(0);t.a=function(e){function t(t,n,r){return function(i){return function(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}}var n="new Date";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&Object(r.error)("Missing arguments to clamp function."),t.length>3&&Object(r.error)("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),indexof:t("indexOf",null),lastindexof:t("lastIndexOf",null),slice:t("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase","String",0),lower:t("toLowerCase","String",0),substring:t("substring","String"),replace:t("replace","String"),regexp:"RegExp",test:t("test","RegExp"),if:function(t){t.length<3&&Object(r.error)("Missing arguments to if function."),t.length>3&&Object(r.error)("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}},function(e,t,n){"use strict";t.a=function(e,t,n,r){var i,a=t[0],o=t[t.length-1];return a>o&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=e:a<e)&&(r?e<=o:e<o)}},function(e,t,n){"use strict";var r=n(61),i=n(0),a="view",o="scope";function s(e,t){return(e.merge?u:e.stream?c:e.type?l:Object(i.error)("Invalid stream specification: "+Object(i.stringValue)(e)))(e,t)}function u(e,t){var n=f({merge:e.merge.map(function(e){return s(e,t)})},e,t);return t.addStream(n).id}function c(e,t){var n=f({stream:s(e.stream,t)},e,t);return t.addStream(n).id}function l(e,t){var n,r=t.event((n=e.source)===o?a:n||a,e.type),i=f({stream:r},e,t);return 1===Object.keys(i).length?r:t.addStream(i).id}function f(e,t,n){var a,u,c,l,f=t.between;return f&&(2!==f.length&&Object(i.error)('Stream "between" parameter must have 2 entries: '+Object(i.stringValue)(t)),e.between=[s(f[0],n),s(f[1],n)]),f=t.filter?Object(i.array)(t.filter):[],(t.marktype||t.markname||t.markrole)&&f.push((a=t.marktype,u=t.markname,c=t.markrole,(l="event.item")+(a&&"*"!==a?"&&"+l+".mark.marktype==='"+a+"'":"")+(c?"&&"+l+".mark.role==='"+c+"'":"")+(u?"&&"+l+".mark.name==='"+u+"'":""))),t.source===o&&f.push("inScope(event.item)"),f.length&&(e.filter=Object(r.a)("("+f.join(")&&(")+")").$expr),null!=(f=t.throttle)&&(e.throttle=+f),null!=(f=t.debounce)&&(e.debounce=+f),t.consume&&(e.consume=!0),e}t.a=function(e,t){return e.signal?t.getSignal(e.signal).id:e.scale?t.getScale(e.scale).id:s(e,t)}},function(e,t,n){"use strict";var r=n(148),i=n(0);t.a=function(e,t,n,a){return function e(t,n,a,o){var s,u,c;if(t.signal)s="datum",c=Object(r.a)(t.signal,n,a,o);else if(t.group||t.parent){for(u=Math.max(1,t.level||1),s="item";u-- >0;)s+=".mark.group";t.parent?(c=t.parent,s+=".datum"):c=t.group}else t.datum?(s="datum",c=t.datum):Object(i.error)("Invalid field reference: "+Object(i.stringValue)(t));t.signal||(Object(i.isString)(c)?(o[c]=1,c=Object(i.splitAccessPath)(c).map(i.stringValue).join("][")):c=e(c,n,a,o));return s+"["+c+"]"}(Object(i.isObject)(e)?e:{datum:e},t,n,a)}},function(e,t,n){"use strict";t.b=s;var r=n(148),i=n(426),a=n(145),o=n(0);function s(e,t,n,s){var u;if(Object(o.isString)(e))u=a.c+e,n.hasOwnProperty(u)||(n[u]=t.scaleRef(e)),u=Object(o.stringValue)(u);else{for(u in t.scales)n[a.c+u]=t.scaleRef(u);u=Object(o.stringValue)(a.c)+"+"+(e.signal?"("+Object(r.a)(e.signal,t,n,s)+")":Object(i.a)(e,t,n,s))}return"_["+u+"]"}t.a=function(e,t,n,r,i){var a,u,c,l=s(e.scale,n,r,i);return null!=e.range?(u=l+".range()",t=0===(a=+e.range)?u+"[0]":"($="+u+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=l+"("+t+")"),e.band&&(c=function(e,t){if(!Object(o.isString)(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}(e.scale,n))&&(a=(u=l+".bandwidth")+"()"+(1===(a=+e.band)?"":"*"+a),c<0&&(a="("+u+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+l+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t}},function(e,t,n){"use strict";var r=n(0);t.a=function(e,t,n){return e+"["+Object(r.stringValue)(t)+"]="+n+";"}},function(e,t,n){"use strict";var r=n(21);t.a=function(e,t,n,i,a,o,s){return{type:r.a,name:n,role:e,style:t,from:i,interactive:a||!1,encode:o,marks:s}}},function(e,t,n){"use strict";var r=n(21),i=n(12);t.a=function(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===r.a?i.o:t||i.n:t}},function(e,t,n){"use strict";var r=n(61),i=n(20);t.a=function(e,t,n){var a,o,s=e.remove,u=e.insert,c=e.toggle,l=e.modify,f=e.values,d=t.add(Object(i.j)());a="if("+e.trigger+',modify("'+n+'",'+[u,s,c,l,f].map(function(e){return null==e?"null":e}).join(",")+"),0)",o=Object(r.a)(a,t),d.update=o.$expr,d.params=o.$params}},function(e,t,n){"use strict";t.a=u;var r=n(95),i=n(20),a=n(61),o=n(27),s=n(0);function u(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function c(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}var l=u.prototype=c.prototype;function f(e){return(Object(s.isArray)(e)?function(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(r>0?",":"")+(Object(s.isObject)(t)?t.signal||f(t):Object(s.stringValue)(t));return n+"]"}:function(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+Object(s.stringValue)(t)+":"+(Object(s.isObject)(n)?n.signal||f(n):Object(s.stringValue)(n));return r+"}"})(e)}l.fork=function(){return new c(this)},l.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},l.id=function(){return(this._subid?this._subid+":":0)+this._id++},l.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},l.proxy=function(e){var t=e instanceof i.b?Object(i.k)(e):e;return this.add(Object(o.s)({value:t}))},l.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},l.addUpdate=function(e){return this.updates.push(e),e},l.finish=function(){var e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}for(e in this.data)for(var r in n((t=this.data[e]).input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values"),t.index)n(t.index[r],e,"index:"+r);return this},l.pushState=function(e,t,n){this._encode.push(Object(i.k)(this.add(Object(o.w)({pulse:e})))),this._parent.push(t),this._lookup.push(n?Object(i.k)(this.proxy(n)):null),this._markpath.push(-1)},l.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},l.parent=function(){return Object(s.peek)(this._parent)},l.encode=function(){return Object(s.peek)(this._encode)},l.lookup=function(){return Object(s.peek)(this._lookup)},l.markpath=function(){var e=this._markpath;return++e[e.length-1]},l.fieldRef=function(e,t){if(Object(s.isString)(e))return Object(i.f)(e,t);e.signal||Object(s.error)("Unsupported field reference: "+Object(s.stringValue)(e));var n,r=e.signal,a=this.field[r];return a||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=a=Object(i.k)(this.add(Object(o.i)(n)))),a},l.compareRef=function(e,t){function n(e){return Object(i.g)(e)?(a=!0,Object(i.k)(r[e.signal])):e}var r=this.signals,a=!1,u=Object(s.array)(e.field).map(n),c=Object(s.array)(e.order).map(n);return t&&u.push(i.m),a?Object(i.k)(this.add(Object(o.e)({fields:u,orders:c}))):Object(i.d)(u,c)},l.keyRef=function(e,t){var n=this.signals,r=!1;return e=Object(s.array)(e).map(function(e){return Object(i.g)(e)?(r=!0,Object(i.k)(n[e.signal])):e}),r?Object(i.k)(this.add(Object(o.j)({fields:e,flat:t}))):Object(i.i)(e,t)},l.sortRef=function(e){if(!e)return e;var t=[Object(i.c)(e.op,e.field),i.m],n=e.order||i.a;return n.signal?Object(i.k)(this.add(Object(o.e)({fields:t,orders:[n=this.signalRef(n.signal),n]}))):Object(i.d)(t,[n,n])},l.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},l.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&Object(s.error)("Duplicate signal name: "+Object(s.stringValue)(e));var n=t instanceof i.b?t:this.add(Object(i.j)(t));return this.signals[e]=n},l.getSignal=function(e){return this.signals[e]||Object(s.error)("Unrecognized signal name: "+Object(s.stringValue)(e)),this.signals[e]},l.signalRef=function(e){return this.signals[e]?Object(i.k)(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(Object(i.j)(null))),Object(i.k)(this.lambdas[e]))},l.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=Object(a.a)(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},l.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},l.objectProperty=function(e){return e&&Object(s.isObject)(e)?this.signalRef(e.signal||f(e)):e},l.addBinding=function(e,t){this.bindings||Object(s.error)("Nested signals do not support binding: "+Object(s.stringValue)(e)),this.bindings.push(Object(s.extend)({signal:e},t))},l.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&Object(s.error)("Duplicate scale or projection name: "+Object(s.stringValue)(e)),this.scales[e]=this.add(t)},l.addScale=function(e,t){this.addScaleProj(e,Object(o.v)(t))},l.addProjection=function(e,t){this.addScaleProj(e,Object(o.r)(t))},l.getScale=function(e){return this.scales[e]||Object(s.error)("Unrecognized scale name: "+Object(s.stringValue)(e)),this.scales[e]},l.projectionRef=l.scaleRef=function(e){return Object(i.k)(this.getScale(e))},l.projectionType=l.scaleType=function(e){return this.getScale(e).params.type},l.addData=function(e,t){return this.data.hasOwnProperty(e)&&Object(s.error)("Duplicate data set name: "+Object(s.stringValue)(e)),this.data[e]=t},l.getData=function(e){return this.data[e]||Object(s.error)("Undefined data set name: "+Object(s.stringValue)(e)),this.data[e]},l.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&Object(s.error)("Duplicate data set name: "+Object(s.stringValue)(e)),this.addData(e,r.a.fromEntries(this,t))}},function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t={padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:s},area:{fill:s},image:null,line:{stroke:s,strokeWidth:o},path:{stroke:s},rect:{fill:s},rule:{stroke:u},shape:{stroke:s},symbol:{fill:s,size:64},text:{fill:u,font:i,fontSize:11},style:{"guide-label":{fill:u,font:i,fontSize:10},"guide-title":{fill:u,font:i,fontSize:11,fontWeight:"bold"},"group-title":{fill:u,font:i,fontSize:13,fontWeight:"bold"},point:{size:a,strokeWidth:o,shape:"circle"},circle:{size:a,strokeWidth:o},square:{size:a,strokeWidth:o,shape:"square"},cell:{fill:"transparent",stroke:l}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:c,grid:!1,gridWidth:1,gridColor:l,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:c,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,entryPadding:5,titlePadding:5,gradientWidth:100,gradientHeight:20,gradientStrokeColor:l,gradientStrokeWidth:0,gradientLabelBaseline:"top",gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelOffset:8,labelLimit:160,symbolType:"circle",symbolSize:100,symbolFillColor:"transparent",symbolStrokeColor:c,symbolStrokeWidth:1.5,titleAlign:"left",titleBaseline:"top",titleLimit:180},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}};return(e||[]).forEach(function(e){var n,i,a;if(e)for(n in e)if("style"===n)for(n in a=t.style||(t.style={}),e.style)a[n]=Object(r.extend)(a[n]||{},e.style[n]);else i=e[n],t[n]=Object(r.isObject)(i)&&!Object(r.isArray)(i)?Object(r.extend)(Object(r.isObject)(t[n])?t[n]:{},i):i}),t};var i="sans-serif",a=30,o=2,s="#4c78a8",u="#000",c="#888",l="#ddd"},function(e,t,n){"use strict";var r=n(435);n.d(t,"b",function(){return r.a});var i=n(1109);n.d(t,"a",function(){return i.a});n(96)},function(e,t,n){"use strict";var r=n(1106),i=n(1107),a=n(1108);t.a=function(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){Object(r.a)(e,t)}),n.forEach(function(e){Object(r.b)(e,t)}),(e.streams||[]).forEach(function(e){Object(i.a)(e,t)}),(e.updates||[]).forEach(function(e){Object(a.a)(e,t)}),t.resolve()}},function(e,t,n){"use strict";t.a=function e(t,n,r){r=r||{};var i,a;for(i in t)(a=t[i])&&a.$expr&&a.$params&&e(a.$params,n,r),r[i]=Object(o.isArray)(a)?a.map(function(e){return s(e,n)}):s(a,n);return r};var r=n(435),i=n(96),a=n(1),o=n(0);function s(e,t){if(!e||!Object(o.isObject)(e))return e;for(var n,r=0,i=u.length;r<i;++r)if(n=u[r],e.hasOwnProperty(n.key))return n.parse(e,t);return e}var u=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||Object(o.error)("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Object(o.key)(e.$key,e.$flat))}},{key:"$expr",parse:function(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=Object(o.accessor)(Object(i.e)(e.$expr,t),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Object(o.field)(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n,r,a=e.$encode,s={};for(n in a)r=a[n],s[n]=Object(o.accessor)(Object(i.a)(r.$expr,t),r.$fields),s[n].output=r.$output;return s}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=Object(o.array)(e.$compare).map(function(e){return e&&e.$tupleid?a.r:e});return t.fn[n]||(t.fn[n]=Object(o.compare)(r,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,i,a){var o=Object(r.a)(n,t.fork()),s=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(a),s}}},{key:"$tupleid",parse:function(){return a.r}}]},function(e,t,n){"use strict";function r(e){return(e+"").toLowerCase()}t.a=r,t.c=function(e){return"operator"===r(e)},t.b=function(e){return"collect"===r(e)}},function(e,t,n){var r="undefined"!=typeof JSON?JSON:n(1116);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var o,s="boolean"==typeof t.cycles&&t.cycles,u=t.replacer||function(e,t){return t},c=t.cmp&&(o=t.cmp,function(e){return function(t,n){var r={key:t,value:e[t]},i={key:n,value:e[n]};return o(r,i)}}),l=[];return function e(t,o,f,d){var p=n?"\n"+new Array(d+1).join(n):"",h=n?": ":":";if(f&&f.toJSON&&"function"==typeof f.toJSON&&(f=f.toJSON()),void 0!==(f=u.call(t,o,f))){if("object"!=typeof f||null===f)return r.stringify(f);if(i(f)){for(var m=[],g=0;g<f.length;g++){var v=e(f,g,f[g],d+1)||r.stringify(null);m.push(p+n+v)}return"["+m.join(",")+p+"]"}if(-1!==l.indexOf(f)){if(s)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(f);var y=a(f).sort(c&&c(f));for(m=[],g=0;g<y.length;g++){var b=e(f,o=y[g],f[o],d+1);if(b){var w=r.stringify(o)+h+b;m.push(p+n+w)}}return l.splice(l.indexOf(f),1),"{"+m.join(",")+p+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);t.AXIS_PROPERTY_TYPE={grid:"grid",labelOverlap:"main",offset:"main",title:"main"};var a={orient:1,domain:1,format:1,grid:1,labelBound:1,labelFlush:1,labelPadding:1,labels:1,labelOverlap:1,maxExtent:1,minExtent:1,offset:1,position:1,tickCount:1,ticks:1,tickSize:1,title:1,titlePadding:1,values:1,zindex:1},o=r({},a,{encoding:1,labelAngle:1,titleMaxLength:1}),s=r({scale:1},a,{gridScale:1,encode:1});t.isAxisProperty=function(e){return!!o[e]},t.VG_AXIS_PROPERTIES=i.flagKeys(s),t.AXIS_PROPERTIES=i.flagKeys(o)},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(150),a=n(150),o=n(1123),s=n(231),u=n(22),c=n(22),l=n(10),f=n(232),d=n(441),p=n(2);t.defaultViewConfig={width:200,height:200},t.defaultConfig={padding:5,timeFormat:"%b %d, %Y",countTitle:"Number of Records",invalidValues:"filter",view:t.defaultViewConfig,mark:c.defaultMarkConfig,area:{},bar:c.defaultBarConfig,circle:{},geoshape:{},line:{},point:{},rect:{},rule:{color:"black"},square:{},text:{color:"black"},tick:c.defaultTickConfig,box:{size:14},boxWhisker:{},boxMid:{color:"white"},scale:l.defaultScaleConfig,projection:{},axis:{},axisX:{},axisY:{minExtent:30},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:s.defaultLegendConfig,selection:f.defaultConfig,style:{},title:{}},t.initConfig=function(e){return p.mergeDeep(p.duplicate(t.defaultConfig),e)};var h=["view"].concat(u.PRIMITIVE_MARKS,i.COMPOSITE_MARK_STYLES),m=["padding","numberFormat","timeFormat","countTitle","stack","scale","selection","invalidValues","overlay"],g=r({view:["width","height"]},u.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX,a.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX);function v(e,t,n){var i="title"===t?d.extractTitleConfig(e.title).mark:e[t];"view"===t&&(n="cell");var a=r({},i,e.style[t]);p.keys(a).length>0&&(e.style[n||t]=a),delete e[t]}t.stripAndRedirectConfig=function(e){e=p.duplicate(e);for(var t=0,n=m;t<n.length;t++)delete e[a=n[t]];if(e.axis)for(var r=0,i=o.VL_ONLY_GUIDE_CONFIG;r<i.length;r++){var a=i[r];delete e.axis[a]}if(e.legend)for(var s=0,c=o.VL_ONLY_GUIDE_CONFIG;s<c.length;s++)a=c[s],delete e.legend[a];if(e.mark)for(var l=0,f=u.VL_ONLY_MARK_CONFIG_PROPERTIES;l<f.length;l++)a=f[l],delete e.mark[a];for(var d=0,y=h;d<y.length;d++){for(var b=y[d],w=0,O=u.VL_ONLY_MARK_CONFIG_PROPERTIES;w<O.length;w++)a=O[w],delete e[b][a];var x=g[b];if(x)for(var j=0,_=x;j<_.length;j++)a=_[j],delete e[b][a];v(e,b)}for(var a in v(e,"title","group-title"),e)p.isObject(e[a])&&0===p.keys(e[a]).length&&delete e[a];return p.keys(e).length>0?e:void 0}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.extractTitleConfig=function(e){var t=e.anchor,n=e.offset,a=e.orient,o=e.color,s=i(e,["anchor","offset","orient","color"]);return{mark:r({},s,o?{fill:o}:{}),nonMark:r({},t?{anchor:t}:{},n?{offset:n}:{},a?{orient:a}:{})}}},function(e,t,n){(function(e,r){var i=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<a;u=r[++n])m(u)||!w(u)?o+=" "+u:o+=" "+s(u);return o},t.deprecate=function(n,i){if(y(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return function(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}};var a,o={};function s(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&j(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return v(i)||(i=l(e,i,r)),i}var a=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),x(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(j(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return e.stylize(Date.prototype.toString.call(n),"date");if(x(n))return f(n)}var c,w="",_=!1,S=["{","}"];(p(n)&&(_=!0,S=["[","]"]),j(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(w=" "+RegExp.prototype.toString.call(n)),O(n)&&(w=" "+Date.prototype.toUTCString.call(n)),x(n)&&(w=" "+f(n)),0!==o.length||_&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=_?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)E(t,String(o))?a.push(d(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(d(e,t,n,r,i,!0))}),a}(e,n,r,s,o):o.map(function(t){return d(e,n,r,s,t,_)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,w,S)):S[0]+w+S[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),E(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),y(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===_(e)}function w(e){return"object"==typeof e&&null!==e}function O(e){return w(e)&&"[object Date]"===_(e)}function x(e){return w(e)&&("[object Error]"===_(e)||e instanceof Error)}function j(e){return"function"==typeof e}function _(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(y(a)&&(a=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=r.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){};return o[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=h,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=w,t.isDate=O,t.isError=x,t.isFunction=j,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(1126);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":"),[e.getDate(),M[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(1127),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(162),n(1125))},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s=n(152),u=n(154),c=function(e){function t(t,n,r,i,a){return e.call(this,t,n,r,i,a)||this}return i(t,e),t.prototype.parseData=function(){this.component.data=s.parseData(this),this.children.forEach(function(e){e.parseData()})},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),o.keys(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})},n=0,r=this.children;n<r.length;n++){t(r[n])}},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children;e<t.length;e++){t[e].parseMarkGroup()}},t.prototype.parseAxisAndHeader=function(){for(var e=0,t=this.children;e<t.length;e++){t[e].parseAxisAndHeader()}},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.forEach(function(e){return e.assembleSelectionSignals()}),[]},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},u.assembleLayoutSignals(this))},t.prototype.assembleSelectionData=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},[])},t.prototype.assembleMarks=function(){return this.children.map(function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleLayoutSize();return a({type:"group",name:e.getName("group")},t?{title:t}:{},n?{style:n}:{},r?{encode:{update:r}}:{},e.assembleGroup())})},t}(n(13).Model);t.BaseConcatModel=c},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=n(2),o=n(24);function s(e,t,n,s,u){if(u){var c=null,l=s.facetFieldDef;if(l&&u.labels){var f=l.header,d=void 0===f?{}:f,p=d.format,h=d.labelAngle,m=r({},void 0!==h?{angle:{value:h}}:{});c=r({text:o.formatSignalRef(l,p,"parent",e.config),offset:10,orient:"row"===t?"left":"top",style:"guide-label"},a.keys(m).length>0?{encode:{update:m}}:{})}var g=u.axes,v=g&&g.length>0;if(c||v){var y="row"===t?"height":"width";return r({name:e.getName(t+"_"+n),type:"group",role:t+"-"+n},s.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:{field:i.vgField(l,{expr:"datum"}),order:l.sort||"ascending"}}:{},c?{title:c}:{},u.sizeSignal?{encode:{update:(b={},b[y]=u.sizeSignal,b)}}:{},v?{axes:g}:{})}}return null;var b}t.HEADER_CHANNELS=["row","column"],t.HEADER_TYPES=["header","footer"],t.getHeaderType=function(e){return"top"===e||"left"===e?"header":"footer"},t.getTitleGroup=function(e,t){var n=e.component.layoutHeaders[t].title,i=r({align:{value:"center"},text:{value:n}},"vertical"===("row"===t?"vertical":void 0)?{angle:{value:270}}:{});return{name:e.getName(t+"_title"),role:t+"-title",type:"group",marks:[r({type:"text",role:t+"-title-text",style:"guide-title"},a.keys(i).length>0?{encode:{update:i}}:{})]}},t.getHeaderGroups=function(e,n){for(var r=e.component.layoutHeaders[n],i=[],a=0,o=t.HEADER_TYPES;a<o.length;a++){var u=o[a];if(r[u])for(var c=0,l=r[u];c<l.length;c++){var f=l[c];i.push(s(e,n,u,r,f))}}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(438),i=n(2),a=n(446);t.assembleLegends=function(e){for(var t=e.component.legends,n={},o=0,s=i.keys(t);o<s.length;o++){var u=s[o],c=e.getScaleComponent(u),l=r(c.domains);if(n[l])for(var f=0,d=n[l];f<d.length;f++){var p=d[f];a.mergeLegendComponent(p,t[u])||n[l].push(t[u])}else n[l]=[t[u].clone()]}return i.flatten(i.vals(n)).map(function(e){return e.combine()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(7),a=n(231),o=n(23),s=n(2),u=n(24),c=n(13),l=n(155),f=n(30),d=n(30),p=n(1130),h=n(1131),m=n(1132);function g(e){c.isUnitModel(e)?e.component.legends=function(e){var t=e.encoding;return[r.COLOR,r.SIZE,r.SHAPE,r.OPACITY].reduce(function(n,a){var s=t[a];return!e.legend(a)||!e.getScaleComponent(a)||i.isFieldDef(s)&&a===r.SHAPE&&s.type===o.GEOJSON||(n[a]=v(e,a)),n},{})}(e):e.component.legends=function(e){for(var t=e.component,n=t.legends,r=t.resolve,i=function(t){g(t),s.keys(t.component.legends).forEach(function(i){r.legend[i]=l.parseGuideResolve(e.component.resolve,i),"shared"===r.legend[i]&&(n[i]=y(n[i],t.component.legends[i]),n[i]||(r.legend[i]="independent",delete n[i]))})},a=0,o=e.children;a<o.length;a++){var u=o[a];i(u)}return s.keys(n).forEach(function(t){for(var n=0,i=e.children;n<i.length;n++){var a=i[n];a.component.legends[t]&&"shared"===r.legend[t]&&delete a.component.legends[t]}}),n}(e)}function v(e,t){var n=e.fieldDef(t),o=e.legend(t),c=new p.LegendComponent({},function(e,t){switch(t){case r.COLOR:var n=e.scaleName(r.COLOR);return e.markDef.filled?{fill:n}:{stroke:n};case r.SIZE:return{size:e.scaleName(r.SIZE)};case r.SHAPE:return{shape:e.scaleName(r.SHAPE)};case r.OPACITY:return{opacity:e.scaleName(r.OPACITY)}}return null}(e,t));a.LEGEND_PROPERTIES.forEach(function(n){var r=function(e,t,n,r){var a=r.fieldDef(n);switch(e){case"format":return u.numberFormat(a,t.format,r.config);case"title":return u.getSpecifiedOrDefaultValue(t.title,i.title(a,r.config));case"values":return m.values(t);case"type":return u.getSpecifiedOrDefaultValue(t.type,m.type(a.type,n,r.getScaleComponent(n).get("type")))}return t[e]}(n,o,t,e);if(void 0!==r){var a="values"===n?!!o.values:r===o[n];(a||void 0===e.config.legend[n])&&c.set(n,r,a)}});var l=o.encoding||{},f=["labels","legend","title","symbols","gradient"].reduce(function(r,i){var a=h[i]?h[i](n,l[i],e,t,c.get("type")):l[i];return void 0!==a&&s.keys(a).length>0&&(r[i]={update:a}),r},{});return s.keys(f).length>0&&c.set("encode",f,!!o.encoding),c}function y(e,t){if(!e)return t.clone();var n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(!n.explicit||!r.explicit||n.value===r.value){for(var i=!1,o=function(n){var r=d.mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",function(e,t){switch(n){case"title":return u.titleMerger(e,t);case"type":return i=!0,f.makeImplicit("symbol")}return d.defaultTieBreaker(e,t,n,"legend")});e.setWithExplicit(n,r)},c=0,l=a.VG_LEGEND_PROPERTIES;c<l.length;c++){o(l[c])}return i&&(((e.implicit||{}).encode||{}).gradient&&s.deleteNestedProperty(e.implicit,["encode","gradient"]),((e.explicit||{}).encode||{}).gradient&&s.deleteNestedProperty(e.explicit,["encode","gradient"])),e}}t.parseLegend=g,t.parseLegendForChannel=v,t.mergeLegendComponent=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(47),i=n(2),a=n(234),o=n(14),s=n(157),u=n(235),c=n(1138),l=n(237);function f(e){if(e instanceof s.FacetNode)if(1!==e.numChildren()||e.children[0]instanceof o.OutputNode){!function e(t){if(t instanceof o.OutputNode&&t.type===r.MAIN&&1===t.numChildren()){var n=t.children[0];n instanceof s.FacetNode||(n.swapWithParent(),e(t))}}(e.model.component.data.main),i.flatten(e.children.map((u=e,function e(n){if(!(n instanceof s.FacetNode)){var r=n.clone();if(r instanceof o.OutputNode){var c=t.FACET_SCALE_PREFIX+r.getSource();r.setSource(c),u.model.component.data.outputNodes[c]=r}else(r instanceof a.AggregateNode||r instanceof l.StackNode)&&r.addDimensions(u.fields);return i.flatten(n.children.map(e)).forEach(function(e){return e.parent=r}),[r]}return i.flatten(n.children.map(e))}))).forEach(function(t){return t.parent=e.model.component.data.main})}else{var n=e.children[0];(n instanceof a.AggregateNode||n instanceof l.StackNode)&&n.addDimensions(e.fields),n.swapWithParent(),f(e)}else e.children.forEach(f);var u}function d(e){e instanceof u.FilterInvalidNode&&i.every(i.vals(e.filter),function(e){return null===e})&&e.remove(),e instanceof o.OutputNode&&!e.isRequired()&&e.remove(),e.children.forEach(d)}function p(e){var t=[];return e.forEach(function e(n){0===n.numChildren()?t.push(n):n.children.forEach(e)}),t}t.FACET_SCALE_PREFIX="scale_",t.optimizeDataflow=function(e){var t=i.vals(e.sources);t.forEach(d),p(t=t.filter(function(e){return e.numChildren()>0})).forEach(c.iterateFromLeaves(c.removeUnusedSubtrees)),p(t=t.filter(function(e){return e.numChildren()>0})).forEach(c.iterateFromLeaves(c.moveParseUp)),p(t).forEach(c.removeDuplicateTimeUnits),t.forEach(f),i.keys(e.sources).forEach(function(t){0===e.sources[t].numChildren()&&delete e.sources[t]})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(3),a=n(10),o=n(2),s=n(2),u=n(13),c=n(30),l=n(449);function f(e,t){u.isUnitModel(e)?function(e,t){var n=e.component.scales;o.keys(n).forEach(function(r){var o=e.specifiedScales[r],s=n[r],u=e.getScaleComponent(r),c=e.fieldDef(r),l=e.sort(r),f=e.config,p=o[t],h=u.get("type"),m=a.scaleTypeSupportProperty(h,t),g=a.channelScalePropertyIncompatability(r,t);if(void 0!==p&&(m?g&&i.warn(g):i.warn(i.message.scalePropertyNotWorkWithScaleType(h,t,r))),m&&void 0===g)if(void 0!==p)s.copyKeyFromObject(t,o);else{var v=d(t,r,c,l,u.get("type"),u.get("padding"),u.get("paddingInner"),o.domain,e.markDef,f);void 0!==v&&s.set(t,v,!1)}})}(e,t):p(e,t)}function d(e,t,n,r,i,a,o,s,u,c){var l=c.scale;switch(e){case"nice":return h(i,t,n);case"padding":return m(t,i,l,n,u,c.bar);case"paddingInner":return g(a,t,l);case"paddingOuter":return v(a,t,i,o,l);case"reverse":return y(i,r);case"zero":return b(t,n,s)}return l[e]}function p(e,t){for(var n=e.component.scales,r=0,i=e.children;r<i.length;r++){var a=i[r];"range"===t?l.parseScaleRange(a):f(a,t)}o.keys(n).forEach(function(r){for(var i,a=0,o=e.children;a<o.length;a++){var s=o[a].component.scales[r];if(s){var u=s.getWithExplicit(t);i=c.mergeValuesWithExplicit(i,u,t,"scale",c.tieBreakByComparing(function(e,n){switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0}))}}n[r].setWithExplicit(t,i)})}function h(e,t,n){if(!n.bin&&!s.contains([a.ScaleType.TIME,a.ScaleType.UTC],e))return s.contains([r.X,r.Y],t)}function m(e,t,n,i,o,u){if(s.contains([r.X,r.Y],e)){if(a.isContinuousToContinuous(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;var c=o.type,l=o.orient;if("bar"===c&&!i.bin&&("vertical"===l&&"x"===e||"horizontal"===l&&"y"===e))return u.continuousBandSize}if(t===a.ScaleType.POINT)return n.pointPadding}}function g(e,t,n){if(void 0===e)return s.contains([r.X,r.Y],t)?n.bandPaddingInner:void 0}function v(e,t,n,i,o){if(void 0===e)return s.contains([r.X,r.Y],t)&&n===a.ScaleType.BAND?void 0!==o.bandPaddingOuter?o.bandPaddingOuter:i/2:void 0}function y(e,t){if(a.hasContinuousDomain(e)&&"descending"===t)return!0}function b(e,t,n){return"size"===e&&"quantitative"===t.type||!(!!n&&"unaggregated"!==n||t.bin||!s.contains([r.X,r.Y],e))}t.parseScaleProperty=f,t.getDefaultValue=d,t.parseNonUnitScaleProperty=p,t.nice=h,t.padding=m,t.paddingInner=g,t.paddingOuter=v,t.reverse=y,t.zero=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(6),a=n(3),o=n(10),s=n(10),u=n(2),c=n(29),l=n(13),f=n(30),d=n(448);function p(e,n,r,i,s,u,c,l,d,p){for(var g=l||null===i.rangeStep,v=0,y=t.RANGE_PROPERTIES;v<y.length;v++){var b=y[v];if(void 0!==i[b]){var w=o.scaleTypeSupportProperty(n,b),O=o.channelScalePropertyIncompatability(e,b);if(w)if(O)a.warn(O);else switch(b){case"range":return f.makeExplicit(i[b]);case"scheme":return f.makeExplicit(h(i[b]));case"rangeStep":var x=i[b];if(null!==x){if(!l)return f.makeExplicit({step:x});a.warn(a.message.rangeStepDropped(e))}}else a.warn(a.message.scalePropertyNotWorkWithScaleType(n,b,e))}}return f.makeImplicit(m(e,n,r,s,u,c,d,p,g))}function h(e){if(o.isExtendedScheme(e)){var t={scheme:e.name};return e.count&&(t.count=e.count),e.extent&&(t.extent=e.extent),t}return{scheme:e}}function m(e,t,n,r,o,c,l,f,d){switch(e){case i.X:case i.Y:if(u.contains(["point","band"],t)&&!d)if(e===i.X&&"text"===c){if(r.scale.textXRangeStep)return{step:r.scale.textXRangeStep}}else if(r.scale.rangeStep)return{step:r.scale.rangeStep};return e===i.Y&&s.hasContinuousDomain(t)?[{signal:l},0]:[0,{signal:l}];case i.SIZE:return[function(e,t,n){if(t)return 0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(a.message.incompatibleChannel("size",e))}(c,o,r),function(e,t,n){var r=n.scale;switch(e){case"bar":case"tick":return void 0!==n.scale.maxBandSize?n.scale.maxBandSize:g(t,n.scale)-1;case"line":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":if(n.scale.maxSize)return n.scale.maxSize;var i=g(t,r);return(i-2)*(i-2)}throw new Error(a.message.incompatibleChannel("size",e))}(c,f,r)];case i.SHAPE:return"symbol";case i.COLOR:return"ordinal"===t?"nominal"===n?"category":"ordinal":"rect"===c||"geoshape"===c?"heatmap":"ramp";case i.OPACITY:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel "+e)}function g(e,t){return e.length>0?Math.min.apply(null,e):t.rangeStep?t.rangeStep:21}t.RANGE_PROPERTIES=["range","rangeStep","scheme"],t.parseScaleRange=function(e){l.isUnitModel(e)?function(e){var t=e.component.scales;i.SCALE_CHANNELS.forEach(function(n){var i=t[n];if(i){var o=e.getScaleComponent(n),s=e.specifiedScales[n],l=e.fieldDef(n),f="x"===n?"width":"y"===n?"height":void 0,d=f?!!e.component.layoutSize.get(f):void 0,h=o.get("type"),m=u.contains(["point","band"],h)||!!s.rangeStep;f&&e.fit&&!d&&m&&(a.warn(a.message.CANNOT_FIX_RANGE_STEP_WITH_FIT),d=!0);var g=function(e){var t=[],n=e.getScaleComponent("x"),i=n&&n.get("range");i&&c.isVgRangeStep(i)&&r.isNumber(i.step)&&t.push(i.step);var a=e.getScaleComponent("y"),o=a&&a.get("range");return o&&c.isVgRangeStep(o)&&r.isNumber(o.step)&&t.push(o.step),t}(e),v=p(n,h,l.type,s,e.config,i.get("zero"),e.mark(),d,e.getName(f),g);i.setWithExplicit("range",v)}})}(e):d.parseNonUnitScaleProperty(e,"range")},t.parseRangeForChannel=p,t.defaultRange=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(16),a=n(239),o={predicate:"vlMulti",scaleDomain:"vlMultiDomain",signals:function(e,t){var n=t.project,o=a.default.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum",s=[],u=n.map(function(e){return r.stringValue(e.channel)}).filter(function(e){return e}).join(", "),c=n.map(function(e){return r.stringValue(e.field)}).join(", "),l=n.map(function(t){var n=t.channel,i=e.fieldDef(n);return i&&i.bin?(s.push(t.field),"["+o+r.accessPath(e.vgField(n,{}))+", "+o+r.accessPath(e.vgField(n,{binSuffix:"end"}))+"]"):""+o+r.accessPath(t.field)}).join(", ");return[{name:t.name+i.TUPLE,value:{},on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? {unit: "+i.unitName(e)+", encodings: ["+u+"], fields: ["+c+"], values: ["+l+"]"+(s.length?", "+s.map(function(e){return r.stringValue("bin_"+e)+": 1"}).join(", "):"")+"} : null",force:!0}]}]},modifyExpr:function(e,t){return t.name+i.TUPLE+", "+("global"===t.resolve?"null":"{unit: "+i.unitName(e)+"}")}};t.default=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(98),s=n(7),u=n(2),c=n(24),l=n(13);function f(e,t){var n;n=function(e){return"as"in e}(e)?[e.as,e.as+"_end"]:[s.vgField(e,{}),s.vgField(e,{binSuffix:"end"})];var r=s.normalizeBin(e.bin,void 0)||{},i=function(e,t){return o.binToString(e)+"_"+t}(r,e.field),u=function(e,t){if(e.model){var n=e.model;return{signal:n.getName(t+"_bins"),extentSignal:n.getName(t+"_extent")}}return e}(t,i),c=u.signal,l=u.extentSignal;return{key:i,binComponent:a({bin:r,field:e.field,as:n},c?{signal:c}:{},l?{extentSignal:l}:{})}}var d=function(e){function t(t){var n=e.call(this)||this;return n.bins=t,n}return i(t,e),t.prototype.clone=function(){return new t(u.duplicate(this.bins))},t.makeBinFromEncoding=function(e){var n=e.reduceFieldDef(function(t,n,r){if(n.bin){var i=f(n,{model:e}),o=i.key,u=i.binComponent;t[o]=a({},u,t[o],function(e,t,n,r){if(c.binRequiresRange(t,n)){var i=l.isUnitModel(e)&&(e.axis(n)||e.legend(n))||{},a=s.vgField(t,{expr:"datum"}),o=s.vgField(t,{expr:"datum",binSuffix:"end"});return{formulaAs:s.vgField(t,{binSuffix:"range"}),formula:c.binFormatExpression(a,o,i.format,r)}}return{}}(e,n,r,e.config))}return t},{});return 0===u.keys(n).length?null:new t(n)},t.makeFromTransform=function(e,n){var r,i=f(e,n),a=i.key,o=i.binComponent;return new t(((r={})[a]=o,r))},t.prototype.merge=function(e){this.bins=a({},this.bins,e.bins),e.remove()},t.prototype.producedFields=function(){var e={};return u.vals(this.bins).forEach(function(t){t.as.forEach(function(t){return e[t]=!0})}),e},t.prototype.dependentFields=function(){var e={};return u.vals(this.bins).forEach(function(t){e[t.field]=!0}),e},t.prototype.assemble=function(){return u.flatten(u.vals(this.bins).map(function(e){var t=[],n=a({type:"bin",field:e.field,as:e.as,signal:e.signal},e.bin);return!e.bin.extent&&e.extentSignal&&(t.push({type:"extent",field:e.field,signal:e.extentSignal}),n.extent={signal:e.extentSignal}),t.push(n),e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))},t}(n(14).DataFlowNode);t.BinNode=d},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=function(e){function t(t){var n=e.call(this)||this;return n.transform=t,n}return i(t,e),t.prototype.clone=function(){return new t(a.duplicate(this.transform))},t.prototype.producedFields=function(){var e={};return e[this.transform.as]=!0,e},t.prototype.assemble=function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}},t}(n(14).DataFlowNode);t.CalculateNode=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),o=n(2),s=function(e){function t(t,n){var r=e.call(this)||this;return r.model=t,r.filter=n,r.expr=a.expression(r.model,r.filter,r),r}return i(t,e),t.prototype.clone=function(){return new t(this.model,o.duplicate(this.filter))},t.prototype.assemble=function(){return{type:"filter",expr:this.expr}},t}(n(14).DataFlowNode);t.FilterNode=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),s=n(23),u=n(2),c=function(e){function t(t,n,r){var i=e.call(this)||this;return i.fields=t,i.geojson=n,i.signal=r,i}return i(t,e),t.prototype.clone=function(){return new t(u.duplicate(this.fields),this.geojson,this.signal)},t.makeAll=function(e){for(var n=[],r=0,i=[[o.X,o.Y],[o.X2,o.Y2]];r<i.length;r++){for(var a={},c=0,l=i[r];c<l.length;c++){var f=l[c];if(e.channelHasField(f)){var d=e.fieldDef(f);u.contains([s.LATITUDE,s.LONGITUDE],d.type)&&(a[d.type]=d.field)}}(s.LONGITUDE in a||s.LATITUDE in a)&&n.push(new t([a[s.LONGITUDE],a[s.LATITUDE]],null,e.getName("geojson_"+n.length)))}e.channelHasField(o.SHAPE)&&((d=e.fieldDef(o.SHAPE)).type===s.GEOJSON&&n.push(new t(null,d.field,e.getName("geojson_"+n.length))));return n},t.prototype.assemble=function(){return a({type:"geojson"},this.fields?{fields:this.fields}:{},this.geojson?{geojson:this.geojson}:{},{signal:this.signal})},t}(n(14).DataFlowNode);t.GeoJSONNode=c},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=n(23),s=n(2),u=function(e){function t(t,n,r){var i=e.call(this)||this;return i.projection=t,i.fields=n,i.as=r,i}return i(t,e),t.prototype.clone=function(){return new t(this.projection,s.duplicate(this.fields),s.duplicate(this.as))},t.makeAll=function(e){var n=[];if(!e.projectionName())return n;for(var r=0,i=[[a.X,a.Y],[a.X2,a.Y2]];r<i.length;r++){for(var u={},c=0,l=i[r];c<l.length;c++){var f=l[c];if(e.channelHasField(f)){var d=e.fieldDef(f);s.contains([o.LATITUDE,o.LONGITUDE],d.type)&&(u[d.type]=d.field)}}(o.LONGITUDE in u||o.LATITUDE in u)&&n.push(new t(e.projectionName(),[u[o.LONGITUDE],u[o.LATITUDE]],[u[o.LONGITUDE]+"_geo",u[o.LATITUDE]+"_geo"]))}return n},t.prototype.assemble=function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}},t}(n(14).DataFlowNode);t.GeoPointNode=u},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(232),o=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.clone=function(){return new t},t.prototype.producedFields=function(){return(e={})[a.SELECTION_ID]=!0,e;var e},t.prototype.assemble=function(){return{type:"identifier",as:a.SELECTION_ID}},t}(n(14).DataFlowNode);t.IdentifierNode=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(3),u=n(14),c=n(158),l=function(e){function t(t,n){var r=e.call(this)||this;return r.transform=t,r.secondary=n,r}return i(t,e),t.make=function(e,n,r){var i=e.component.data.sources,a=new c.SourceNode(n.from.data),o=i[a.hash()];o||(i[a.hash()]=a,o=a);var s=e.getName("lookup_"+r),l=new u.OutputNode(s,"lookup",e.component.data.outputNodeRefCounts);return l.parent=o,e.component.data.outputNodes[s]=l,new t(n,l.getSource())},t.prototype.producedFields=function(){return o.toSet(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))},t.prototype.assemble=function(){var e;if(this.transform.from.fields)e=a({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var t=this.transform.as;o.isString(t)||(s.warn(s.message.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return a({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e,this.transform.default?{default:this.transform.default}:{})},t}(u.DataFlowNode);t.LookupNode=l},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),a=n(2),o=n(234),s=n(451),u=n(452),c=n(14),l=n(157),f=n(453),d=n(235),p=n(236),h=n(454),m=n(455),g=n(456),v=n(457),y=n(158),b=n(237),w=n(159);function O(e){var t=0;return function n(a,O){a instanceof y.SourceNode&&(i.isUrlData(a.data)||(e.push(O),O={name:null,source:O.name,transform:[]}));if(a instanceof p.ParseNode&&(a.parent instanceof y.SourceNode&&!O.source?O.format=r({},O.format||{},{parse:a.assembleFormatParse()}):O.transform=O.transform.concat(a.assembleTransforms())),a instanceof l.FacetNode)return O.name||(O.name="data_"+t++),!O.source||O.transform.length>0?(e.push(O),a.data=O.name):a.data=O.source,void a.assemble().forEach(function(t){return e.push(t)});(a instanceof f.FilterNode||a instanceof u.CalculateNode||a instanceof m.GeoPointNode||a instanceof h.GeoJSONNode||a instanceof o.AggregateNode||a instanceof v.LookupNode||a instanceof g.IdentifierNode)&&O.transform.push(a.assemble()),(a instanceof d.FilterInvalidNode||a instanceof s.BinNode||a instanceof w.TimeUnitNode||a instanceof b.StackNode)&&(O.transform=O.transform.concat(a.assemble())),a instanceof o.AggregateNode&&(O.name||(O.name="data_"+t++)),a instanceof c.OutputNode&&(O.source&&0===O.transform.length?a.setSource(O.source):a.parent instanceof c.OutputNode?a.setSource(O.name):(O.name||(O.name="data_"+t++),a.setSource(O.name),1===a.numChildren()&&(e.push(O),O={name:null,source:O.name,transform:[]})));switch(a.numChildren()){case 0:a instanceof c.OutputNode&&(!O.source||O.transform.length>0)&&e.push(O);break;case 1:n(a.children[0],O);break;default:O.name||(O.name="data_"+t++);var x=O.name;!O.source||O.transform.length>0?e.push(O):x=O.source,a.children.forEach(function(e){n(e,{name:null,source:x,transform:[]})})}}}t.assembleFacetData=function(e){var t=[],n=O(t);return e.children.forEach(function(t){return n(t,{source:e.name,name:null,transform:[]})}),t},t.assembleRootData=function(e){var t=a.vals(e.sources),n=[],r=O(n),i=0;t.forEach(function(e){e.hasName()||(e.dataName="source_"+i++);var t=e.assemble();r(e,t)}),n.forEach(function(e){0===e.transform.length&&delete e.transform}),n.sort(function(e,t){return 0===(e.transform||[]).length?-1:0===(t.transform||[]).length?1:0});for(var o=0,s=n;o<s.length;o++)for(var u=0,c=s[o].transform||[];u<c.length;u++){var l=c[u];"lookup"===l.type&&(l.from=e.outputNodes[l.from].getSource())}return n}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),o=n(3),s=n(156),u=n(2);function c(e,t){return a.isRepeatRef(e.field)?e.field.repeat in t?r({},e,{field:t[e.field.repeat]}):void o.warn(o.message.noSuchRepeatedValue(e.field.repeat)):e}function l(e,t){if(void 0!==(e=c(e,t))){if(e.sort&&s.isSortField(e.sort)){var n=c(e.sort,t);e=r({},e,n?{sort:n}:{})}return e}}function f(e,t){if(!a.isFieldDef(e)){if(a.hasConditionalFieldDef(e)){if(n=l(e.condition,t))return r({},e,{condition:n});e.condition;return i(e,["condition"])}return e}var n;return(n=l(e,t))?n:a.isConditionalDef(e)?{condition:e.condition}:void 0}function d(e,t){var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(u.isArray(i))n[r]=i.map(function(e){return f(e,t)}).filter(function(e){return e});else{var a=f(i,t);a&&(n[r]=a)}}return n}t.replaceRepeaterInFacet=function(e,t){return d(e,t)},t.replaceRepeaterInEncoding=function(e,t){return d(e,t)}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(439),a=n(6),o=n(2),s=n(24),u=n(155),c=n(30),l=n(1151),f=n(461),d=n(1152),p=n(1153),h=["domain","grid","labels","ticks","title"];t.parseUnitAxis=function(e){return a.POSITION_SCALE_CHANNELS.reduce(function(t,n){if(e.component.scales[n]&&e.axis(n)){var r={},i=O(n,e);i&&y(i)&&(r.main=i);var a=w(n,e);a&&y(a)&&(r.grid=a),t[n]=[r]}return t},{})};var m={bottom:"top",top:"bottom",left:"right",right:"left"};function g(e,t){if(!e)return t.map(function(e){return r({},e.main?{main:e.main.clone()}:{},e.grid?{grid:e.grid.clone()}:{})});if(e.length===t.length){for(var n=e.length,i=0;i<n;i++){var a=e[i].main,o=t[i].main;if(!!a!=!!o)return;if(a&&o){var s=a.getWithExplicit("orient"),u=o.getWithExplicit("orient");if(s.explicit&&u.explicit&&s.value!==u.value)return;e[i].main=v(a,o)}var c=e[i].grid,l=t[i].grid;if(!!c!=!!l)return;c&&l&&(e[i].grid=v(c,l))}return e}}function v(e,t){for(var n=function(n){var r=c.mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",function(e,t){switch(n){case"title":return s.titleMerger(e,t);case"gridScale":return{explicit:e.explicit,value:e.value||t.value}}return c.defaultTieBreaker(e,t,n,"axis")});e.setWithExplicit(n,r)},r=0,a=i.VG_AXIS_PROPERTIES;r<a.length;r++){n(a[r])}return e}function y(e){return o.some(h,function(t){return b(e,t)})}function b(e,t){return"axis"===t||("grid"===t||"title"===t?!!e.get(t):!(!1===(n=e.get(t))||null===n));var n}function w(e,t){return x(e,t,!0)}function O(e,t){return x(e,t,!1)}function x(e,t,n){var r=t.axis(e),a=new l.AxisComponentPart;i.VG_AXIS_PROPERTIES.forEach(function(o){var u=function(e,t,n,r,a){var o=r.fieldDef(n);if(a&&"main"===i.AXIS_PROPERTY_TYPE[e]||!a&&"grid"===i.AXIS_PROPERTY_TYPE[e])return;switch(e){case"scale":return r.scaleName(n);case"gridScale":return p.gridScale(r,n,a);case"domain":return p.domain("domain",t,a,n);case"format":return s.numberFormat(o,t.format,r.config);case"grid":var u=r.getScaleComponent(n).get("type");return s.getSpecifiedOrDefaultValue(t.grid,p.grid(u,o));case"labels":return!a&&t.labels;case"labelFlush":return p.labelFlush(o,n,t,a);case"labelOverlap":var u=r.getScaleComponent(n).get("type");return p.labelOverlap(o,t,n,u);case"minExtent":return p.minMaxExtent(t.minExtent,a);case"maxExtent":return p.minMaxExtent(t.maxExtent,a);case"orient":return s.getSpecifiedOrDefaultValue(t.orient,p.orient(n));case"tickCount":var u=r.getScaleComponent(n).get("type"),c="x"===n?"width":"y"===n?"height":void 0,l=c?r.getSizeSignalRef(c):void 0;return s.getSpecifiedOrDefaultValue(t.tickCount,p.tickCount(n,o,u,l));case"ticks":return p.ticks("ticks",t,a,n);case"title":return s.getSpecifiedOrDefaultValue(t.title,p.title(t.titleMaxLength,o,r.config));case"values":return p.values(t,r,o);case"zindex":return s.getSpecifiedOrDefaultValue(t.zindex,p.zindex(a))}return i.isAxisProperty(e)?t[e]:void 0}(o,r,e,t,n);if(void 0!==u){var c="values"===o?!!r.values:"encode"===o?!!r.encoding||!!r.labelAngle:u===r[o],l=f.getAxisConfig(o,t.config,e,a.get("orient"),t.getScaleComponent(e).get("type"));(c||void 0===l||n)&&a.set(o,u,c)}});var u=r.encoding||{},c=h.reduce(function(n,r){if(!b(a,r))return n;var i="labels"===r?d.labels(t,e,u.labels||{},a.get("orient")):u[r]||{};return void 0!==i&&o.keys(i).length>0&&(n[r]={update:i}),n},{});return o.keys(c).length>0&&a.set("encode",c,!!r.encoding||!!r.labelAngle),a}t.parseLayerAxis=function(e){for(var t=e.component,n=t.axes,r=t.resolve,i={top:0,bottom:0,right:0,left:0},a=0,s=e.children;a<s.length;a++){(y=s[a]).parseAxisAndHeader();for(var c=0,l=o.keys(y.component.axes);c<l.length;c++){var f=l[c];r.axis[f]=u.parseGuideResolve(e.component.resolve,f),"shared"===r.axis[f]&&(n[f]=g(n[f],y.component.axes[f]),n[f]||(r.axis[f]="independent",delete n[f]))}}for(var d=0,p=["x","y"];d<p.length;d++){f=p[d];for(var h=0,v=e.children;h<v.length;h++){var y;if((y=v[h]).component.axes[f]){if("independent"===r.axis[f]){n[f]=(n[f]||[]).concat(y.component.axes[f]);for(var b=0,w=y.component.axes[f];b<w.length;b++){var O=w[b],x=O.main.getWithExplicit("orient"),j=x.value,_=x.explicit;if(i[j]>0&&!_){var S=m[j];i[j]>i[S]&&O.main.set("orient",S,!1)}i[j]++}}delete y.component.axes[f]}}}},t.parseGridAxis=w,t.parseMainAxis=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAxisConfig=function(e,t,n,r,i){void 0===r&&(r="");for(var a=0,o=("band"===i?["axisBand"]:[]).concat(["x"===n?"axisX":"axisY","axis"+r.substr(0,1).toUpperCase()+r.substr(1),"axis"]);a<o.length;a++){var s=o[a];if(t[s]&&void 0!==t[s][e])return t[s][e]}}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),s=n(28),u=n(28),c=n(7),l=n(22),f=n(233),d=n(2),p=n(460),h=n(152),m=n(154),g=n(102),v=n(1154),y=n(1155),b=n(13),w=n(459),O=n(16),x=function(e){function t(t,n,r,i,o,s,c){void 0===i&&(i={});var d=e.call(this,t,n,r,s,void 0)||this;d.fit=c,d.type="unit",d.specifiedScales={},d.specifiedAxes={},d.specifiedLegends={},d.specifiedProjection={},d.selection={},d.children=[],d.initSize(a({},i,t.width?{width:t.width}:{},t.height?{height:t.height}:{}));var p=l.isMarkDef(t.mark)?t.mark.type:t.mark,h=d.encoding=u.normalizeEncoding(w.replaceRepeaterInEncoding(t.encoding||{},o),p);return d.markDef=v.normalizeMarkDef(t.mark,h,s),d.stack=f.stack(p,h,d.config.stack),d.specifiedScales=d.initScales(p,h),d.specifiedAxes=d.initAxes(h),d.specifiedLegends=d.initLegend(h),d.specifiedProjection=t.projection,d.selection=t.selection,d}return i(t,e),t.prototype.scaleDomain=function(e){var t=this.specifiedScales[e];return t?t.domain:void 0},t.prototype.sort=function(e){return(this.getMapping()[e]||{}).sort},t.prototype.axis=function(e){return this.specifiedAxes[e]},t.prototype.legend=function(e){return this.specifiedLegends[e]},t.prototype.initScales=function(e,t){return o.SCALE_CHANNELS.reduce(function(e,n){var r,i,a=t[n];return c.isFieldDef(a)?(r=a,i=a.scale):c.hasConditionalFieldDef(a)?(r=a.condition,i=a.condition.scale):"x"===n?r=c.getFieldDef(t.x2):"y"===n&&(r=c.getFieldDef(t.y2)),r&&(e[n]=i||{}),e},{})},t.prototype.initAxes=function(e){return[o.X,o.Y].reduce(function(t,n){var r=e[n];if(c.isFieldDef(r)||n===o.X&&c.isFieldDef(e.x2)||n===o.Y&&c.isFieldDef(e.y2)){var i=c.isFieldDef(r)?r.axis:null;null!==i&&!1!==i&&(t[n]=a({},i))}return t},{})},t.prototype.initLegend=function(e){return o.NONPOSITION_SCALE_CHANNELS.reduce(function(t,n){var r=e[n];if(r){var i=c.isFieldDef(r)?r.legend:c.hasConditionalFieldDef(r)?r.condition.legend:null;null!==i&&!1!==i&&(t[n]=a({},i))}return t},{})},t.prototype.parseData=function(){this.component.data=h.parseData(this)},t.prototype.parseLayoutSize=function(){g.parseUnitLayoutSize(this)},t.prototype.parseSelection=function(){this.component.selection=O.parseUnitSelection(this,this.selection)},t.prototype.parseMarkGroup=function(){this.component.mark=y.parseMarkGroup(this)},t.prototype.parseAxisAndHeader=function(){this.component.axes=p.parseUnitAxis(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return O.assembleTopLevelSignals(this,e)},t.prototype.assembleSelectionSignals=function(){return O.assembleUnitSelectionSignals(this,[])},t.prototype.assembleSelectionData=function(e){return O.assembleUnitSelectionData(this,e)},t.prototype.assembleLayout=function(){return null},t.prototype.assembleLayoutSignals=function(){return m.assembleLayoutSignals(this)},t.prototype.assembleMarks=function(){var e=this.component.mark||[];return this.parent&&b.isLayerModel(this.parent)||(e=O.assembleUnitSelectionMarks(this,e)),e.map(this.correctDataNames)},t.prototype.assembleLayoutSize=function(){return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},t.prototype.getMapping=function(){return this.encoding},t.prototype.toSpec=function(e,t){var n,r=d.duplicate(this.encoding);return n={mark:this.markDef,encoding:r},e||(n.config=d.duplicate(this.config)),t||(n.data=d.duplicate(this.data)),n},t.prototype.mark=function(){return this.markDef.type},t.prototype.channelHasField=function(e){return s.channelHasField(this.encoding,e)},t.prototype.fieldDef=function(e){var t=this.encoding[e];return c.getFieldDef(t)},t}(b.ModelWithField);t.UnitModel=x},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(103),i=n(850),a=n.n(i),o=n(31),s=n.n(o),u=n(208),c=n.n(u),l=n(356),f=(n.n(l),n(856)),d=(n.n(f),n(357)),p=n(1113),h=n.n(p),m=n(41),g=(n.n(m),n(161)),v=n(465),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};const b=Object(m.create)({checkTypes:!1,env:m.env}),w="quantitative",O=[0,100],x=c()("p^2 * 30").buildFunction(),j=x(O[0]),_=x(O[1]),S=[j,_],M=c()(`1 - d/${_}`).buildFunction(),E=M(j),k=([e,t],n,r,i)=>(a,o)=>b.range(e,null==i?t:t/i).map(e=>null==i?e:e*i).map(e=>null==o?{[n]:e,[r]:a(e)}:{[n]:e,[r]:a(e),series:o}),N=(e,t,n,i)=>{const a=(e=>{const t=s()(e+" svg").get(0).getBoundingClientRect(),n=s()(s()(e+" g.mark-rule.role-axis-grid").get(1)).children("line").get(0).getBoundingClientRect(),r=s()(s()(e+" g.mark-rule.role-axis-grid").get(0)).children("line").get(0).getBoundingClientRect();return{width:n.width,left:n.left-t.left,top:r.top-t.top,height:r.height}})(e),o=r.k().domain([0,n]).range([0,a.width]),u=r.k().domain([0,a.height]).range([0,i]);s()(e).closest(".draw").each((e,n)=>{n instanceof HTMLElement&&Object(v.setHandlers)(n,a,e=>t(b.pipe([o,e,u])))})},A=e=>({$schema:"https://vega.github.io/schema/vega-lite/v2.json",width:e-100,height:.6*e}),P={renderer:"svg",actions:!1},C=(e,t)=>{const n=e=>f.calculus.Riemann(t(),j,e,200),r=f.calculus.Riemann(e(),O[0],O[1],200)/(O[1]-O[0]);return[t=>n(e()(t)),e=>n(r)]};g.a.then(()=>{const e=(()=>{const e="#income-distribution",t=y({},A(s()(e).width()),{config:{mark:{orient:"vertical"}},mark:"line",data:{values:k(O,"percentile","income")(x)},encoding:{x:{field:"percentile",type:w},y:{field:"income",type:w}}}),n=a.a.stream(x);return h()(e,t,P).then(N(e,n,O[1],_)),n})(),t=(()=>{const e="#marginal-utility",t=y({},A(s()(e).width()),{config:{mark:{orient:"vertical"}},data:{values:k(S,"income","marginalUtility",1e3)(M)},mark:"line",encoding:{x:{field:"income",type:w},y:{field:"marginalUtility",type:w}}}),n=a.a.stream(M);return h()(e,t,P).then(()=>N(e,n,_,E)),n})(),n=a.a.combine(C,[e,t]);(()=>{const e="#utility-distribution",t=y({},A(s()(e).width()),{config:{legend:{padding:40},rule:{strokeDash:[8,8],opacity:.3}},data:{name:"table"},layer:[{mark:{type:"line",orient:"vertical"},encoding:{x:{field:"percentile",type:w},y:{field:"utility",type:w,axis:{minExtent:40}},color:{field:"series",type:"nominal"}}},{mark:"rule",encoding:{y:{field:"utility",type:w,aggregate:"mean"},size:{value:5},color:{field:"series",type:"nominal"}}}]});return h()(e,t,P).then(e=>e.view)})().then(e=>{a.a.on(([t,n])=>{e.change("table",d.changeset().insert(b.join([k(O,"percentile","utility")(t,"inegalitarian"),k(O,"percentile","utility")(n,"egalitarian")])).remove(e=>!0)).run()},n)})})},function(e,t,n){"use strict";var r=n(851);function i(e){return!!(e&&e.constructor&&e.call&&e.apply)}function a(){return!0}var o,s=[],u=[],c=-1,l=!1,f={};function d(e,t){var n,r,i,o,s=x([],a);for(i=[],o=[],n=0;n<t.length;++n)void 0!==t[n]&&(i.push(t[n]),void 0!==t[n].end&&o.push(t[n].end));return(r=x(i,e)).depsChanged=[],r.fnArgs=r.deps.concat([r,r.depsChanged]),r.end=s,s.listeners.push(r),M(o,s),s.deps=o,j(r),r}function p(e){return f.map(e,this)}function h(e){return e(this)}function m(e){return g(e,this)}function g(e,t){var n=f.stream(1),r=f.on(function(){var e=n()-1;n(e),e<=0&&n.end(!0)});r(t.end);var i=f.stream(),a=f.combine(function(t,a){i.end(!0);var o=e(t());n(n()+1),r(o.end),i=f.map(a,o)},[t]);return f.endsOn(n.end,a),a}function v(e,t){return d(function(e,t,n){n(e.val(t.val))},[t,e])}function y(e){return v(e,this)}function b(e){return v(this,e)}function w(){return"stream("+this.val+")"}function O(){function e(t){return 0===arguments.length?e.val:(function e(t,n){if(null!=n&&i(n.then))return console.warn("flyd: Promise swallowing has been deprecated, please see https://github.com/paldepind/flyd#promises for more info"),void n.then(t);t.val=n;t.hasVal=!0;void 0===o?(l=!0,function(e){var t,n,r,i=e.listeners;for(t=0;t<i.length;++t)(r=i[t]).end===e?N(r):(void 0!==r.depsChanged&&r.depsChanged.push(e),r.shouldUpdate=!0,_(r));for(;c>=0;--c)!0===(n=u[c]).shouldUpdate&&j(n),n.queued=!1}(t),s.length>0?S():l=!1):o===t?function(e,t){var n,r;for(n=0;n<t.length;++n)(r=t[n]).end!==e?(void 0!==r.depsChanged&&r.depsChanged.push(e),r.shouldUpdate=!0):N(r)}(t,t.listeners):s.push(function(){e(t,n)})}(e,t),e)}return e.hasVal=!1,e.val=void 0,e.vals=[],e.listeners=[],e.queued=!1,e.end=void 0,e.ap=y,e["fantasy-land/map"]=e.map=p,e["fantasy-land/ap"]=b,e["fantasy-land/of"]=e.of=f.stream,e["fantasy-land/chain"]=e.chain=m,e.pipe=h,e.constructor=f.stream,e.toJSON=function(){return e.val},e.toString=w,e}function x(e,t){var n=O();return n.fn=t,n.deps=e,n.depsMet=!1,n.depsChanged=e.length>0?[]:void 0,n.shouldUpdate=!1,M(e,n),n}function j(e){var t;if(!(!0!==e.depsMet&&(t=e,t.depsMet=t.deps.every(function(e){return e.hasVal}),!t.depsMet)||void 0!==e.end&&!0===e.end.val))if(void 0===o){o=e,e.depsChanged&&(e.fnArgs[e.fnArgs.length-1]=e.depsChanged);var n=e.fn.apply(e.fn,e.fnArgs);void 0!==n&&e(n),o=void 0,void 0!==e.depsChanged&&(e.depsChanged=[]),e.shouldUpdate=!1,!1===l&&S()}else s.push(function(){j(e)})}function _(e){var t,n=e.listeners;if(!1===e.queued){for(e.queued=!0,t=0;t<n.length;++t)_(n[t]);u[++c]=e}}function S(){for(l=!0;s.length>0;){s.shift()()}l=!1}function M(e,t){for(var n=0;n<e.length;++n)e[n].listeners.push(t)}function E(e,t){t[t.indexOf(e)]=t[t.length-1],t.length--}function k(e){for(var t=0;t<e.deps.length;++t)E(e,e.deps[t].listeners);e.deps.length=0}function N(e){void 0!==e.deps&&k(e),void 0!==e.end&&k(e.end)}function A(){}f.stream=function(e){var t=x([],a),n=O();return n.end=t,n.fnArgs=[],t.listeners.push(n),arguments.length>0&&n(e),n},f.stream["fantasy-land/of"]=f.stream.of=f.stream,f.combine=r(2,d),f.isStream=function(e){return i(e)&&"hasVal"in e},f.immediate=function(e){return!1===e.depsMet&&(e.depsMet=!0,j(e)),e},f.endsOn=function(e,t){return k(t.end),e.listeners.push(t.end),t.end.deps.push(e),t},f.map=r(2,function(e,t){return d(function(t,n){n(e(t.val))},[t])}),f.chain=r(2,g),f.ap=r(2,v),f.on=r(2,function(e,t){return d(function(t){e(t.val)},[t])}),f.scan=r(3,function(e,t,n){var r=d(function(n,r){r(t=e(t,n.val))},[n]);return r.hasVal||r(t),r}),f.merge=r(2,function(e,t){var n=f.immediate(d(function(e,t,n,r){r[0]?n(r[0]()):e.hasVal?n(e.val):t.hasVal&&n(t.val)},[e,t]));return f.endsOn(d(function(){return!0},[e.end,t.end]),n),n}),f.transduce=r(2,function(e,t){return e=e(new A),d(function(t,n){var r=e["@@transducer/step"](void 0,t.val);return r&&!0===r["@@transducer/reduced"]?(n.end(!0),r["@@transducer/value"]):r},[t])}),f.curryN=r,f.fromPromise=function(e){var t=f.stream();return e.then(function(e){t(e),t.end(!0)}),t},f.flattenPromise=function(e){return d(function(e,t){e().then(t)},[e])},A.prototype["@@transducer/init"]=function(){},A.prototype["@@transducer/result"]=function(){},A.prototype["@@transducer/step"]=function(e,t){return t},e.exports=f},function(e,t,n){var r=n(354),i=n(355),a=n(852),o=n(853),s=a(function(e,t){return 1===e?i(t):r(e,o(e,[],t))});e.exports=s},function(e,t,n){var r=n(355),i=n(207);e.exports=function(e){return function t(n,a){switch(arguments.length){case 0:return t;case 1:return i(n)?t:r(function(t){return e(n,t)});default:return i(n)&&i(a)?t:i(n)?r(function(t){return e(t,a)}):i(a)?r(function(t){return e(n,t)}):e(n,a)}}}},function(e,t,n){var r=n(354),i=n(207);e.exports=function e(t,n,a){return function(){for(var o=[],s=0,u=t,c=0;c<n.length||s<arguments.length;){var l;c<n.length&&(!i(n[c])||s>=arguments.length)?l=n[c]:(l=arguments[s],s+=1),o[c]=l,i(l)||(u-=1),c+=1}return u<=0?a.apply(this,o):r(u,e(t,o,a))}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){nerdamer=n(208),n(356),function(){"use strict";var e=nerdamer.getCore(),t=e.PARSER,n=e.groups.N,r=e.groups.P,i=e.groups.S,a=e.groups.EX,o=e.groups.FN,s=e.groups.PL,u=e.groups.CP,c=e.groups.CB,l=e.Utils.keys,f=e.Utils.variables,d=e.Utils.round,p=e.Frac,h=e.Utils.isInt,m=e.Symbol,g=e.Settings.CONST_HASH,v=e.Utils.importFunctions();function y(n,r,i){if(e.Utils.isSymbol(n))this.parse(n);else if(isNaN(n))"string"==typeof n&&this.parse(t.parse(n));else{if(i=i||0,void 0===r)throw new Error("Polynomial expects a variable name when creating using order");this.coeffs=[],this.coeffs[i]=n,this.fill(n)}}function b(){this.factors={}}function w(t,n,r){this.terms=n||[],this.coeff=t,this.map=r,this.sum=new e.Frac(0),this.image=void 0}y.fromArray=function(e,t){if(void 0===t)throw new Error("A variable name must be specified when creating polynomial from array");var n=new y;return n.coeffs=e,n.variable=t,n},y.fit=function(e,t,n,r,i,a){var o=new Array(i+1),s=n-t;o[0]=t,o[i]=e,s-=e*Math.pow(r,i);for(var u=i-1;u>0;u--){var c=Math.pow(r,u),l=s/c,f=Math.sign(l)*Math.floor(Math.abs(l));s-=f*c,o[u]=f}if(0!==s)return null;for(u=0;u<o.length;u++)o[u]=new p(o[u]);return y.fromArray(o,a)},y.prototype={parse:function(r,i){if(this.variable=f(r)[0],!r.isPoly())throw new Error("Polynomial Expected! Received "+e.Utils.text(r));if(i=i||[],r.power.absEquals(1)||(r=t.expand(r)),r.group===e.groups.N)i[0]=r.multiplier;else if(r.group===e.groups.S)i[r.power.toDecimal()]=r.multiplier;else for(var a in r.symbols){var o=r.symbols[a],s=o.power;if(e.Utils.isSymbol(s))throw new Error("power cannot be a Symbol");s=o.group===n?0:s.toDecimal(),o.symbols?this.parse(o,i):i[s]=o.multiplier}this.coeffs=i,this.fill()},fill:function(e){e=Number(e)||0;for(var t=this.coeffs.length,n=0;n<t;n++)void 0===this.coeffs[n]&&(this.coeffs[n]=new p(e));return this},trim:function(){for(var e=this.coeffs.length;e--;){var t=this.coeffs[e],n=t.equals(0);if(!t||!n)break;if(0===e)break;this.coeffs.pop()}return this},modP:function(e){for(var t=this.coeffs.length,n=0;n<t;n++){var r=this.coeffs[n];if(r<0){for(var i,a=n;a<t;a++)if(this.coeffs[a]>0){i=this.coeffs[a];break}if(i){for(;a>n;a--)this.coeffs[a]=this.coeffs[a].subtract(new p(1)),this.coeffs[a-1]=this.coeffs[a-1].add(new p(e));r=this.coeffs[n]}}var o=r.mod(e),s=r.subtract(o).divide(e);if(!s.equals(0)){var u=n+1,c=this.coeffs[u]||new p(0);c=c.add(s),this.coeffs[u]=new p(c),this.coeffs[n]=new p(o)}}return this},add:function(e){for(var t=Math.max(this.coeffs.length,e.coeffs.length),n=0;n<t;n++){var r=this.coeffs[n]||new p(0),i=e.coeffs[n]||new p(0);this.coeffs[n]=r.add(i)}return this},subtract:function(e){for(var t=Math.max(this.coeffs.length,e.coeffs.length),n=0;n<t;n++){var r=this.coeffs[n]||new p(0),i=e.coeffs[n]||new p(0);this.coeffs[n]=r.subtract(i)}return this},divide:function(t){for(var n=this.variable,r=e.Utils.arrayClone(this.coeffs),i=e.Utils.arrayClone(t.coeffs),a=r.length,o=i.length-1,s=[],u=0;u<a;u++){var c=a-(u+1),l=c-o,f=r[c].divide(i[o]);if(l<0)break;s[l]=f;for(var d=0;d<=o;d++)r[d+l]=r[d+l].subtract(i[d].multiply(f))}var p=y.fromArray(r,n||"x").trim();return[y.fromArray(s,n||"x"),p]},multiply:function(e){for(var t=this.coeffs.length,n=e.coeffs.length,r=[],i=0;i<t;i++)for(var a=this.coeffs[i],o=0;o<n;o++){var s=i+o,u=e.coeffs[o],c=r[s]||new p(0);r[s]=c.add(a.multiply(u))}return this.coeffs=r,this},isZero:function(){for(var e=this.coeffs.length,t=0;t<e;t++){if(!this.coeffs[t].equals(0))return!1}return!0},sub:function(e){for(var t=new p(0),n=this.coeffs.length,r=0;r<n;r++){var i=this.coeffs[r];i.equals(0)||(t=t.add(i.multiply(new p(Math.pow(e,r)))))}return t},clone:function(){var e=new y;return e.coeffs=this.coeffs,e.variable=this.variable,e},deg:function(){return this.trim(),this.coeffs.length-1},lc:function(){return this.coeffs[this.deg()].clone()},monic:function(){for(var e=this.lc(),t=this.coeffs.length,n=0;n<t;n++)this.coeffs[n]=this.coeffs[n].divide(e);return this},gcd:function(t){if(this.coeffs.length-1<t.coeffs.length-1)return t.gcd(this);for(var n=this;!t.isZero();){var r=t.clone();t=(n=n.clone()).divide(r)[1],n=r}var i=e.Math2.QGCD.apply(null,n.coeffs);if(!i.equals(1))for(var a=n.coeffs.length,o=0;o<a;o++)n.coeffs[o]=n.coeffs[o].divide(i);return n},diff:function(){for(var e=[],t=this.coeffs.length,n=1;n<t;n++)e.push(this.coeffs[n].multiply(new p(n)));return this.coeffs=e,this},integrate:function(){for(var e=[0],t=this.coeffs.length,n=0;n<t;n++){var r=new p(n+1);e[r]=this.coeffs[n].divide(r)}return this.coeffs=e,this},gcf:function(t){for(var n=[],r=0;r<this.coeffs.length;r++){var i=this.coeffs[r];i.equals(0)||-1!==n.indexOf(i)||n.push(i)}var a=[e.Math2.QGCD.apply(void 0,n),function(e){for(var t=0;t<e.length;t++)if(!e[t].equals(0))return t}(this.coeffs)].toDecimal();if(t){var o=[];o[a[1]-1]=a[0],a=y.fromArray(o,this.variable).fill()}return a},quad:function(e){var t=[];if(this.coeffs.length>3)throw new Error("Cannot calculate quadratic order of "+(this.coeffs.length-1));if(0===this.coeffs.length)throw new Error("Polynomial array has no terms");var n=this.coeffs[2]||0,r=this.coeffs[1]||0,i=r*r-4*n*this.coeffs[0];return i<0&&!e?t:(t[0]=(-r+Math.sqrt(i))/(2*n),t[1]=(-r-Math.sqrt(i))/(2*n),t)},squareFree:function(){for(var e=this.clone(),t=1,n=e.clone().diff(),r=e.clone().gcd(n),i=e.divide(r)[0],a=y.fromArray([new p(1)],e.variable);!r.equalsNumber(1);){var o=i.gcd(r),s=i.divide(o)[0];if(!s.equalsNumber(1)&&t>1){for(var u=s.clone(),c=1;c<t;c++)u.multiply(s.clone());s=u}a=a.multiply(s),t++,i=o,r=r.divide(o)[0]}return[a,i,t]},toSymbol:function(){var n=this.coeffs.length,r=this.variable;if(0===n)return new e.Symbol(0);for(var i=n-1,a="",o=0;o<n;o++){var s=o===i?"":"+",u=this.coeffs[o];u.equals(0)||(a+=u+"*"+r+"^"+o+s)}return t.parse(a)},equalsNumber:function(e){return this.trim(),1===this.coeffs.length&&this.coeffs[0].toDecimal()===String(e)},toString:function(){return this.toSymbol().toString()}},m.prototype.coeffs=function(e,n){n&&!this.isPoly(!0)&&t.error("Polynomial expected when requesting coefficients with order"),e=e||[];var r=this.clone().distributeMultiplier();if(r.isComposite())for(var i in r.symbols){var a=r.symbols[i];a.isComposite()?a.clone().distributeMultiplier().coeffs(e,n):n?e[a.isConstant()?0:a.power.toDecimal()]=a.multiplier:e.push(a.multiplier)}else n?e[r.isConstant()?0:r.power.toDecimal()]=r.multiplier:e.push(r.multiplier);if(n)for(var o=0;o<e.length;o++)void 0===e[o]&&(e[o]=new p(0));return e},m.prototype.tBase=function(e){if(void 0===e)throw new Error("Symbol.tBase requires a map object!");for(var t=[],n=this.collectSymbols(null,null,null,!0),r=n.length,i=0;i<r;i++){var a=n[i],o=a.group,s=new w(a.multiplier,[],e);if(o===c)for(var u in a.symbols){var l=a.symbols[u];s.terms[e[u]]=l.power}else s.terms[e[a.value]]=a.power;t.push(s.fill()),s.updateCount()}return t},m.prototype.altVar=function(e){var t=this.multiplier.toString(),n=this.power.toString();return("1"===t?"":t+"*")+e+("1"===n?"":"^"+n)},m.prototype.sameVars=function(e){if(!this.symbols&&this.group!==e.group)return!1;for(var t in this.symbols){var n=this.symbols[t],r=e.symbols[t];if(!r)return!1;if(n.value!==r.value)return!1}return!0},m.prototype.groupTerms=function(n){var r,i,a;n=String(n);var o=[];return this.each(function(u){if(u.group===s){a=u.groupTerms(n);for(var c=0;c<a.length;c++){var l=a[c];l&&(o[c]=l)}}else r=e.Utils.decompose_fn(u,n,!0),i=r.x.value===n?Number(r.x.power):0,o[i]=t.add(o[i]||new m(0),r.a)}),o},m.prototype.collectFactors=function(){var e=[];return this.group===c?this.each(function(t){e.push(t.clone())}):e.push(this.clone()),e},b.prototype.add=function(e){if(e.equals(0))return this;if(e.group===c){var n=this;e.multiplier.equals(1)||n.add(new m(e.multiplier)),e.each(function(e){n.add(e)})}else{this.preAdd&&(e=this.preAdd(e)),this.pFactor&&(e=t.pow(e,new m(this.pFactor)));var r=e.isConstant();if(r&&e.equals(1))return this;var i=r?e.value:e.text();i in this.factors?this.factors[i]=t.multiply(this.factors[i],e):this.factors[i]=e}return this},b.prototype.toSymbol=function(){var n=new m(1);for(var r in this.factors){var i=this.factors[r],a=(i.group,i.power.equals(1)?t.symfunction(e.PARENTHESIS,[this.factors[r]]):this.factors[r]);n=t.multiply(n,a)}return""===n.fname&&(n=m.unwrapPARENS(n)),n},b.prototype.merge=function(e){for(var n in e)n in this.factors?this.factors[n]=t.multiply(this.factors[n],e[n]):this.factors[n]=e[n];return this},b.prototype.each=function(t){for(var n in this.factors){var r=this.factors[n];r.fname===e.PARENTHESIS&&r.isLinear()&&(r=r.args[0]),t.call(this,r,n)}return this},b.prototype.count=function(){return l(this.factors).length},b.prototype.clean=function(){try{var t=e.Settings.CONST_HASH;this.factors[t].lessThan(0)&&(this.factors[t].equals(-1)?delete this.factors[t]:this.factors[t].negate(),this.each(function(e){e.negate()}))}catch(e){}},b.prototype.toString=function(){return this.toSymbol().toString()},w.prototype.updateCount=function(){this.count=this.count||0;for(var e=0;e<this.terms.length;e++)this.terms[e].equals(0)||this.count++;return this},w.prototype.getVars=function(){for(var e=[],t=0;t<this.terms.length;t++){var n=this.terms[t];this.getRevMap();n.equals(0)||e.push(this.rev_map[t])}return e.join(" ")},w.prototype.len=function(){return void 0===this.count&&this.updateCount(),this.count},w.prototype.toSymbol=function(e){e=e||this.getRevMap();for(var n=new m(this.coeff),r=0;r<this.terms.length;r++){var i=e[r],a=this.terms[r];if(!a.equals(0)&&i!==g){var o=new m(i);o.power=a,n=t.multiply(n,o)}}return n},w.prototype.getRevMap=function(){if(this.rev_map)return this.rev_map;var e={};for(var t in this.map)e[this.map[t]]=t;return this.rev_map=e,e},w.prototype.generateImage=function(){return this.image=this.terms.join(" "),this},w.prototype.getImg=function(){return this.image||this.generateImage(),this.image},w.prototype.fill=function(){for(var t=this.map.length,n=0;n<t;n++)void 0===this.terms[n]?this.terms[n]=new e.Frac(0):this.sum=this.sum.add(this.terms[n]);return this},w.prototype.divide=function(e){for(var t=this.coeff.divide(e.coeff),n=this.terms.length,r=new w(t,[],this.map),i=0;i<n;i++)r.terms[i]=this.terms[i].subtract(e.terms[i]),r.sum=r.sum.add(r.terms[i]);return r},w.prototype.multiply=function(e){for(var t=this.coeff.multiply(e.coeff),n=this.terms.length,r=new w(t,[],this.map),i=0;i<n;i++)r.terms[i]=this.terms[i].add(e.terms[i]),r.sum=r.sum.add(r.terms[i]);return r},w.prototype.isZero=function(){return this.coeff.equals(0)},w.prototype.toString=function(){return"{ coeff: "+this.coeff.toString()+", terms: ["+this.terms.join(",")+"]: sum: "+this.sum.toString()+", count: "+this.count+"}"},e.Utils.toMapObj=function(e){for(var t=0,n={},r=0;r<e.length;r++){var i=e[r];void 0===n[i]&&(n[i]=t,t++)}return n.length=t,n},e.Utils.filledArray=function(e,t,n){for(var r=[];t--;)r[t]=n?new n(e):e;return r},e.Utils.arrSum=function(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=e[r];return t},e.Utils.haveIntersection=function(e,t){var n;return t.length>e.length&&(n=t,t=e,e=n),e.some(function(e){return t.indexOf(e)>-1})},e.Utils.subFunctions=function(t,n){n=n||{};var r=[];return t.each(function(t){if(t.group===o||t.previousGroup===o){var i=e.Utils.text(t,"hash"),a=n[i];if(a)r.push(t.altVar(a));else{var f=t.fname+l(n).length;n[i]=f,r.push(t.altVar(f))}}else t.group===c||t.group===s||t.group===u?r.push(e.Utils.subFunctions(t,n)):r.push(t.text())}),t.group===u||t.group===s?t.altVar(e.Utils.inBrackets(r.join("+"))):t.group===c?t.altVar(e.Utils.inBrackets(r.join("*"))):t.text()},e.Utils.getFunctionsSubs=function(e){var n={};for(var r in e)n[e[r]]=t.parse(r);return n};var O=e.Algebra={version:"1.4.5",init:void 0,proots:function(n,r){r=r||7;var a=[],o=function(e,t,n){for(var r=N(e,t,n).concat(a),i=0;i<0;i++)r.unshift(0);return r};if(n instanceof m&&n.isPoly()){if(n.distributeMultiplier(),n.group===s){var u=e.Utils.arrayMin(l(n.symbols)),c=n.symbols[u].clone().toUnitMultiplier();n=t.expand(t.divide(n,c)),a.push(0)}if(n.group===e.groups.S)return[0];if(n.group===e.groups.PL){var f=l(n.symbols),p=e.Utils.arrayMin(f);n=e.PARSER.divide(n,e.PARSER.parse(n.value+"^"+p))}for(var h=l(n.symbols).sort().pop(),v=n.group===e.groups.PL?n.symbols:n.symbols[h],y=v.group,b=(f=y===i?[v.power.toDecimal()]:l(v.symbols),[]),w=e.Utils.arrayMax(f),O=1;O<=w;O++){var x=0;-1!==f.indexOf(O+"")&&(x=y===i?v.multiplier:v.symbols[O].multiplier),b.unshift(x)}return b.push(n.symbols[g].multiplier),v.group===i&&(b[0]=v.multiplier),o(b,f,w)}if(e.Utils.isArray(n)){var j=n,_=(b=[],f=[],0);for(O=0;O<j.length;O++){for(var S=j[O][0],M=j[O][1],E=M-_-1,k=0;k<E;k++)b.unshift(0);b.unshift(S),0!==M&&f.push(M),_=M}return o(b,f,w=Math.max.apply(void 0,f))}throw new Error("Cannot calculate roots. Symbol must be a polynomial!");function N(e,t,n){var i=e.slice(0);if(e.unshift(n),n>100)throw new Error("This utility accepts polynomials of degree up to 100. ");var a=[],o={};for(o.Degree=n,O=0;O<n;O++)a.push(0);var s=a.slice(0);function u(e,t,n,r,i,a){i[0]=a.b=r[0],i[1]=a.a=-t*a.b+r[1];for(var o=2;o<e;o++)i[o]=-(t*a.a+n*a.b)+r[o],a.b=a.a,a.a=i[o]}function c(e,t,n,r,i,a,o,s,c){var l=new Object,f=3;return l.b=l.a=0,u(t,o,s,a,c,l),i.c=l.a,i.d=l.b,Math.abs(i.c)<=100*e*Math.abs(a[t-1])&&Math.abs(i.d)<=100*e*Math.abs(a[t-2])?f:(i.h=s*r,Math.abs(i.d)>=Math.abs(i.c)?(f=2,i.e=n/i.d,i.f=i.c/i.d,i.g=o*r,i.a3=i.e*(i.g+n)+i.h*(r/i.d),i.a1=-n+i.f*r,i.a7=i.h+(i.f+o)*n):(f=1,i.e=n/i.c,i.f=i.d/i.c,i.g=i.e*o,i.a3=i.e*n+(i.g+i.h/i.c)*r,i.a1=-n*(i.d/i.c)+r,i.a7=i.g*i.d+i.h*i.f+n),f)}function l(e,t,n,r,i,a,o,s,u){var c;if(3!=n)if(c=1==n?i:r,Math.abs(a.a1)>10*e*Math.abs(c)){a.a7/=a.a1,a.a3/=a.a1,o[0]=u[0],o[1]=-u[0]*a.a7+u[1];for(l=2;l<t;l++)o[l]=-u[l-1]*a.a7+s[l-2]*a.a3+u[l]}else{o[0]=0,o[1]=-u[0]*a.a7;for(l=2;l<t;l++)o[l]=-u[l-1]*a.a7+s[l-2]*a.a3}else{o[1]=o[0]=0;for(var l=2;l<t;l++)o[l]=s[l-2]}}function f(e,t,n,r,i,a,o,s,u,c,l,f,d,p,h,m,g){var v,y,b,w,O,x,j,_;t.b=t.a=0,3!=e&&(2!=e?(v=n+d*o+f*c,y=s+(d+p*c)*u):(v=(n+l)*c+f,y=(c+d)*s+p*u),0!=(_=-(j=-((O=(b=-h[m-1]/g[m])*a)+(x=b*b*i))+p*(w=-(h[m-2]+b*g[m-1])/g[m])*r)+y+b*v)&&(t.a=-(d*(x+O)+p*(b*r+w*a))/_+d,t.b=p*(1+j/_)))}function p(e,t,n,r){var i,a,o;r.sr=r.si=r.lr=r.li=0,0!=e?0!=n?(i=t/2,Math.abs(i)<Math.abs(n)?(o=-(o=n>=0?e:-e)+i*(i/Math.abs(n)),a=Math.sqrt(Math.abs(o))*Math.sqrt(Math.abs(n))):(o=-e/i*(n/i)+1,a=Math.sqrt(Math.abs(o))*Math.abs(i)),o>=0?(a=i>=0?-a:a,r.lr=(-i+a)/e,r.sr=0!=r.lr?n/r.lr/e:r.sr):(r.lr=r.sr=-i/e,r.si=Math.abs(a/e),r.li=-r.si)):r.lr=-t/e:r.sr=0!=t?-n/t:r.sr}function h(e,t,n,r,i,a,o,s,d,h,m,g){var v,y,b,w,O,x,j,_,S,M,E,k=new Object,N=0,A=0;n.NZ=0,x=r,_=i;do{if(k.li=k.lr=k.si=k.sr=0,p(1,x,_,k),n.szr=k.sr,n.szi=k.si,n.lzr=k.lr,n.lzi=k.li,Math.abs(Math.abs(n.szr)-Math.abs(n.lzr))>.01*Math.abs(n.lzr))break;for(u(o,x,_,d,a,s),y=Math.abs(-n.szr*s.b+s.a)+Math.abs(n.szi*s.b),M=Math.sqrt(Math.abs(_)),v=2*Math.abs(a[0]),O=-n.szr*s.b,E=1;E<t;E++)v=v*M+Math.abs(a[E]);if(y<=20*(v=(9*(v=v*M+Math.abs(O+s.a))+2*Math.abs(O)-7*(Math.abs(s.a+O)+M*Math.abs(s.b)))*e)){n.NZ=2;break}if(++N>20)break;if(N>=2&&w<=.01&&y>=b&&!A){for(u(o,x-=x*(w=w<e?Math.sqrt(e):Math.sqrt(w)),_+=_*w,d,a,s),E=0;E<5;E++)l(e,t,c(e,t,s.a,s.b,m,g,x,_,h),s.a,s.b,m,g,h,a);A=1,N=0}b=y,l(e,t,c(e,t,s.a,s.b,m,g,x,_,h),s.a,s.b,m,g,h,a),f(c(e,t,s.a,s.b,m,g,x,_,h),s,s.a,m.a1,m.a3,m.a7,s.b,m.c,m.d,m.f,m.g,m.h,x,_,g,t,d),j=s.a,0!=(S=s.b)&&(w=Math.abs((-_+S)/S),x=j,_=S)}while(0!=S)}function m(e,t,n,r,i,a,o,s,u){var c,l,f,d,p,h,m,g,v,y,b,w=r-1;for(t.NZ=b=v=0,m=n.a;;){for(h=i[0],o[0]=h,y=1;y<a;y++)o[y]=h=h*m+i[y];for(f=Math.abs(h),d=Math.abs(m),c=.5*Math.abs(o[0]),y=1;y<a;y++)c=c*d+Math.abs(o[y]);if(f<=20*e*(2*c-f)){t.NZ=1,t.szr=m,t.szi=0;break}if(++b>10)break;if(b>=2&&Math.abs(g)<=.001*Math.abs(-g+m)&&f>p){v=1,t.a=m;break}for(p=f,u[0]=l=s[0],y=1;y<r;y++)u[y]=l=l*m+s[y];if(Math.abs(l)>10*Math.abs(s[w])*e)for(g=-h/l,s[0]=o[0],y=1;y<r;y++)s[y]=g*u[y-1]+o[y];else for(s[0]=0,y=1;y<r;y++)s[y]=u[y-1];for(l=s[0],y=1;y<r;y++)l=l*m+s[y];m+=g=Math.abs(l)>10*Math.abs(s[w])*e?-h/l:0}return v}function g(e,t,n,r,i,a,o,s,d,p,g,v){var y,b,w,O,x,j,_,S,M,E,k,N,A,P,C,D,T,R,L,I,F,q,U,z,B,V=new Object,H=new Object,G=new Array(t),W=new Array(t),X=1;for(v.NZ=0,O=w=.25,x=r,S=i,V.b=V.a=0,u(d,g,i,s,p,V),y=V.a,b=V.b,H.h=H.g=H.f=H.e=H.d=H.c=H.a7=H.a3=H.a1=0,U=c(e,o,y,b,H,a,g,i,G),I=0;I<n;I++){if(R=1,l(e,o,U,y,b,H,a,G,p),f(U=c(e,o,y,b,H,a,g,i,G),V,y,H.a1,H.a3,H.a7,b,H.c,H.d,H.f,H.g,H.h,g,i,a,o,s),C=V.a,T=D=V.b,E=0!=a[o-1]?-s[o]/a[o-1]:0,k=A=1,0!=I&&3!=U&&(z=(P=(A=0!=T?Math.abs((T-S)/T):A)<_?A*_:1)<O?1:0,(F=(N=(k=0!=E?Math.abs((E-x)/E):k)<j?k*j:1)<w?1:0)||z)){for(L=0;L<o;L++)W[L]=a[L];for(M=E,q=B=0;;){if(R&&0==(R=0)&&F&&(!z||N<P));else{if(h(e,o,v,C,D,p,d,V,s,G,H,a),y=V.a,b=V.b,v.NZ>0)return;if(X=B=1,O*=.25,q||!F)X=0;else for(L=0;L<o;L++)a[L]=W[L]}if(0!=X){if(V.a=M,X=m(e,v,V,o,s,d,p,a,G),M=V.a,v.NZ>0)return;if(q=1,w*=.25,0!=X){C=-(M+M),D=M*M;continue}}for(L=0;L<o;L++)a[L]=W[L];if(!z||B)break}u(d,g,i,s,p,V),U=c(e,o,y=V.a,b=V.b,H,a,g,i,G)}S=T,x=E,_=A,j=k}}!function(e,t,n,r){var i,a,o,s,u,c,l,f,d,h,m,v,y,b,w,O,x,j,_,S,M,E,k,N=e.Degree,A=Math.LN2,P=e.Degree+1,C=new Array(P),D=new Array(P),T=new Array(P),R=new Array(P),L=new Object,I=new Object;v=1;do{a=v,y=1+(v/=2)}while(y>1);var F=Number.MIN_VALUE/a,q=Math.cos(1.6406094968746698),U=Math.sin(1.6406094968746698),z=Math.sqrt(.5),B=-z;for(I.NZ=j=0,I.szr=I.szi=I.lzr=I.lzi=0;0==t[N];)n[j]=r[j]=0,N--,j++;for(E=N+1;N>=1;){if(N<=2){N<2?(n[e.Degree-1]=-t[1]/t[0],r[e.Degree-1]=0):(L.li=L.lr=L.si=L.sr=0,p(t[0],t[1],t[2],L),n[e.Degree-2]=L.sr,r[e.Degree-2]=L.si,n[e.Degree-1]=L.lr,r[e.Degree-1]=L.li);break}for(l=0,f=Number.MAX_VALUE,V=0;V<E;V++)(h=Math.abs(t[V]))>l&&(l=h),0!=h&&h<f&&(f=h);if(((d=F/f)<=1&&l>=10||d>1&&Number.MAX_VALUE/d>=l)&&(d=0==d?Number.MIN_VALUE:d,S=Math.floor(Math.log(d)/A+.5),1!=(u=Math.pow(2,S))))for(V=0;V<E;V++)t[V]*=u;for(var V=0;V<E;V++)D[V]=Math.abs(t[V]);D[N]=-D[N],M=N-1,h=Math.exp((Math.log(-D[N])-Math.log(D[0]))/N),0!=D[M]&&(h=(m=-D[N]/D[M])<h?m:h),m=h;do{for(m=.1*(h=m),c=D[0],V=1;V<E;V++)c=c*m+D[V]}while(c>0);s=h;do{for(o=c=D[0],V=1;V<N;V++)o=h*o+(c=h*c+D[V]);h-=s=(c=h*c+D[N])/o}while(Math.abs(s/h)>.005);for(i=h,V=1;V<N;V++)C[V]=(N-V)*t[V]/N;for(C[0]=t[0],v=t[N],y=t[M],k=0==C[M]?1:0,_=0;_<5;_++)if(b=C[M],k){for(V=0;V<M;V++)C[j=M-V]=C[j-1];C[0]=0,k=0==C[M]?1:0}else{for(O=-v/b,V=0;V<M;V++)C[j=M-V]=O*C[j-1]+t[j];C[0]=t[0],k=Math.abs(C[M])<=Math.abs(y)*a*10?1:0}for(V=0;V<N;V++)R[V]=C[V];for(_=1;_<=20;_++){if(x=-U*B+q*z,B=U*z+q*B,g(a,P,20*_,w=i*(z=x),i,C,N,t,E,T,-2*w,I),0!=I.NZ){for(n[j=e.Degree-N]=I.szr,r[j]=I.szi,N=(E-=I.NZ)-1,V=0;V<E;V++)t[V]=T[V];1!=I.NZ&&(n[j+1]=I.lzr,r[j+1]=I.lzi);break}for(V=0;V<N;V++)C[V]=R[V]}if(_>20){e.Degree-=N;break}}}(o,i,s,a);var v=a.length;for(O=0;O<v;O++){var y=d(a[O],r+8),b=d(s[O],r),w=y<0?"-":"";0===(b=r-String(b).length>2?b:s[O])&&(b=""),0===y&&(y=""),y=1===Math.abs(y)?w+"i":y?y+"*i":"";var x=b&&y?b+"+"+y:b+y;s[O]=x.replace(/\+\-/g,"-")}return s}},roots:function(n){var r=O.proots(n).map(function(e){return t.parse(e)});return e.Vector.fromArray(r)},froot:function(t,n,r){return function(n){for(var i=r||e.Utils.build(e.Calculus.diff(t.clone())),a=t instanceof Function?t:e.Utils.build(t),o=!1,s=0;!o;){var u=n-a(n)/i(n),c=Math.abs(u)-Math.abs(n);n=u,Math.abs(c)<1e-12?o=!0:s>1e4&&(n=null,o=!0),s++}return n}(Number(n))},quad:function(e,n,r){var i=function(e,n,r,i){return t.parse("-("+n+"+"+i+"*sqrt(("+n+")^2-4*("+e+")*("+r+")))/(2*"+e+")")};return[i(e,n,r,1),i(e,n,r,-1)]},sumProd:function(e,t){return O.quad(-t,e,-1).map(function(e){return e.invert()})},coeffs:function(e,n,r){n=String(n),e=t.expand(e),r=r||[],e.group===a&&e.contains(n,!0)&&t.error("Unable to get coefficients using expression "+e.toString());var i=f(e);if(i.length<=1&&i[0]===n)for(var o=new y(e).coeffs.map(function(e){return new m(e)}),s=0,l=o.length;s<l;s++){var d=o[s];(g=r[s])&&(d=t.add(g,d)),r[s]=d}else if(n||t.error("Polynomial contains more than one variable. Please specify which variable is to be used!"),-1===i.indexOf(n))r[0]=e;else if(r=r||[],e.group===c){var p=e.symbols[n];p||t.error("Expression is not a polynomial!");var g,v=Number(p.power);((d=t.divide(e.clone(),p.clone())).contains(n,!0)||v<0||!h(v))&&t.error("Expression is not a polynomial!"),(g=r[v])&&(d=t.add(g,d)),r[v]=d}else e.group===u&&e.each(function(e){O.coeffs(e.clone(),n,r)},!0);for(s=0,l=r.length;s<l;s++)void 0===r[s]&&(r[s]=new m(0));return r},polyPowers:function(t,r,a){if(a=a||[],(d=d=t.group)===s&&r===t.value)a=a.concat(l(t.symbols));else if(d===u)for(var o in t.symbols){var f=t.symbols[o],d=f.group,p=f.value;if(d===i&&r===p)a.push(f.power);else if(d===s||d===u)a=O.polyPowers(f,r,a);else if(d===c&&f.contains(r)){var h=f.symbols[r];h&&a.push(h.power)}else d!==n&&r===p||a.push(0)}else d===c&&t.contains(r)&&a.push(e.Utils.decompose_fn(t,r,!0).x.power);return e.Utils.arrayUnique(a).sort()},Factor:{mix:function(e,t){for(var n=l(e),r=n.length,i=[],a=0;a<r;a++){for(var o=n[a],s=e[o],u=i.length,c=0;c<u;c++){var f=i[c]*o;i.push(f),t&&i.push(-f)}for(c=1;c<=s;c++)i.push(Math.pow(o,c))}return i},common:function(n,r){try{if(n.group===u){for(var i=t.expand(n.clone(),!0).collectSymbols(null,null,function(e,t){return(t.length||1)-(e.length||1)}),a={},o=[],s=0;s<i.length;s++){var c=i[s];o.push(c.multiplier.clone()),c.each(function(e){var t=Number(e.power);if(isNaN(t))throw new Error("exiting");e.value in a?(t<a[e.value][0]&&(a[e.value][0]=t),a[e.value][1].push(e)):a[e.value]=[t,[e]]})}var l=new m(1);for(var f in a)a[f][1].length===i.length&&(l=t.multiply(l,t.pow(new m(f),new m(a[f][0]))));var d=e.Math2.QGCD.apply(null,o);if(!d.equals(1)){r.add(new m(d));for(s=0;s<i.length;s++)i[s].multiplier=i[s].multiplier.divide(d)}if(!l.equals(1)){r.add(l),n=new m(0);for(s=0;s<i.length;s++)n=t.add(n,t.divide(i[s],l.clone()))}}}catch(e){}return n},zeroes:function(n,r){var i=function(){throw new Error("Exiting")};try{var a,o,s,c,l;l=(n=t.expand(n.clone())).toString(),a=f(n),s=new m(0);for(var d=[],g=[],v=0,y=a.length;v<a.length;v++){for(var b={},w=0;w<y;w++)v!==w&&(b[a[w]]=0);var x=(o=t.parse(l,b)).power;h(x)||i(),d.push(o),g.push(o.power)}if(e.Utils.allSame(g)){var j=n.length,_=d.length;2===_&&(c=new p(g[0]/(j-1))),3===_&&(c=new p(g[0]/Math.round((Math.sqrt(8*j-1)-3)/2)))}else c=e.Math2.QGCD.apply(null,g);h(c)||i();for(v=0;v<d.length;v++){var S=d[v],M=S.power.clone().divide(c);S.multiplier=new p(Math.pow(S.multiplier,1/M)),S.power=c.clone(),s=t.add(s,S)}if(s.group!==u)return n;for(;;){var E=O.div(n.clone(),s.clone());if(!E[1].equals(0))break;if(n=E[0],r.add(s.clone()),n.equals(1))break}}catch(l){}return n},factor:function(n,r){if(n.group===u){var a=new m(0);n.each(function(e){(e.group===u&&e.power.greaterThan(1)||e.group===c)&&(e=t.expand(e)),a=t.add(a,e)}),a.power=n.power,n=a}n.group===o&&"sqrt"!==n.fname&&(n=e.Utils.evaluate(n));try{if(n.group===c){r=r||new b;var s=!0;return r.add(new m(n.multiplier)),n.each(function(e){e.group!==i&&(s=!1);var t=O.Factor.factor(e.clone());r.add(t)}),s?n:r.toSymbol()}if(n.group===i)return n;if(n.isConstant())return n.equals(1)?n.clone():e.Math2.factor(n);var d=n.power.clone();if(h(d)){n.toLinear(),r=r||new b;var p={};n=t.parse(e.Utils.subFunctions(n,p)),l(p).length>0&&(r.preAdd=function(n){return t.parse(n,e.Utils.getFunctionsSubs(p))}),n.isLinear()||(r.pFactor=n.power.toString(),n.toLinear());var g=f(n);if(g.length>1){s=!0;var v=!0;if(n.each(function(e){e.group!==i&&(s=!1),e.multiplier.equals(1)||(v=!1)}),s&&v)return t.pow(n,t.parse(d))}if(n=O.Factor.coeffFactor(n,r),n=O.Factor.powerFactor(n,r),1===g.length){n=O.Factor.squareFree(n,r);var y=new b;for(var w in n=O.Factor.trialAndError(n,y),y.factors)r.add(t.pow(y.factors[w],t.parse(d)))}else n=O.Factor.mfactor(n,r);return n=t.parse(n,e.Utils.getFunctionsSubs(p)),r.add(t.pow(n,t.parse(d))),r.clean(),r.toSymbol()}return n}catch(e){return n}},reduce:function(e,n){if(e.group===u&&2===e.length){var r=e.collectSymbols().sort(function(e,t){return t.multiplier-e.multiplier});if(r[0].power.equals(r[1].power)){var i=t.parse(r[0].power),a=r[0].clone().toLinear(),o=r[1].clone().toLinear();n.add(t.add(a.clone(),o.clone())),o.negate();for(var s=Number(i),c=new m(0),l=1;l<=s;l++){var f=t.pow(a.clone(),t.subtract(i.clone(),new m(l))),d=t.pow(o.clone(),t.subtract(new m(l),new m(1)));c=t.add(c,t.multiply(f,d))}return c}}return e},squareFree:function(e,t){if(e.isConstant()||e.group===i)return e;var n=new y(e).squareFree(),r=n[2];if(1!==r){var a=n[1].toSymbol();return a.power=a.power.multiply(new p(r)),t.add(O.Factor.factor(a)),O.Factor.squareFree(n[0].toSymbol(),t)}return e},powerFactor:function(n,r){if(n.group!==s)return n;var i=e.Utils.arrayMin(l(n.symbols)),a=new m(0),o=t.parse(n.value+"^"+i);return n.each(function(e){e=t.divide(e,o.clone()),a=t.add(a,e)}),r.add(o),a},coeffFactor:function(t,n){if(t.isComposite()){var r=e.Math2.QGCD.apply(null,t.coeffs());r.equals(1)||t.each(function(e){e.isComposite()?e.each(function(e){e.multiplier=e.multiplier.divide(r)}):e.multiplier=e.multiplier.divide(r)}),t.updateHash(),n&&n.add(new m(r))}return t},trialAndError:function(t,n){if(t.isConstant()||t.group===i)return t;for(var r=new y(t),a=r.coeffs[0],o=e.Math2.ifactor(a),s=O.proots(t),u=0;u<s.length;u++){var c=s[u],l=1;if(!isNaN(c)){for(var f in o){var d=e.Utils.round(Math.log(f)/Math.log(Math.abs(c)),8);if(h(d)){c=f,l=d;break}}var m=new p(c),g=[new p(m.num).negate()];g[l]=new p(m.den);var v=y.fromArray(g,r.variable).fill(),b=r.divide(v);b[1].equalsNumber(0)&&(r=b[0],n.add(v.toSymbol()))}}return r.equalsNumber(1)||(r=O.Factor.search(r,n)),r.toSymbol()},search:function(t,n,r){r=r||10;var i=t.variable,a=function(e,a,o,s){var u=y.fit(e,a,o,r,s,i);if(u&&u.coeffs.length>1){var c=t.divide(u);if(c[1].equalsNumber(0))return n.add(u.toSymbol()),[c[0],u]}return null},o=t.coeffs[0],s=e.Math2.ifactor(o),u=t.lc(),c=e.Math2.ifactor(u),l=t.sub(r),f=O.Factor.mix(e.Math2.ifactor(l),l<0),d=Math.ceil(t.coeffs.length/2),p=u.lessThan(0),h=o.lessThan(0);for(c[1]=1,s[1]=1;d--;)for(var m in c)for(var g in s)for(var v=0;v<f.length;v++){var b=a(m,g,f[v],d);if(b)return t=b[0],e.Utils.isPrime(t.sub(r))||(t=O.Factor.search(t,n)),t;!b&&p?b=a(-m,g,f[v],d):!b&&h?b=a(m,-g,f[v],d):!b&&p&&h&&(b=a(-m,-g,f[v],d))}return t},mSqfrFactor:function(t,n){if(t.group!==o)for(var r=f(t).reverse(),i=0;i<r.length;i++)do{if(r[i]!==t.value){var a=O.Factor.coeffFactor(e.Calculus.diff(t,r[i]));if(a.equals(0))break;var s=O.div(t,a.clone()),u=s[1].equals(0);if(s[0].isConstant()){n.add(s[0]);break}u&&(n.add(s[0]),t=a)}else n.add(t),t=new m(1)}while(u);return t},sqdiff:function(n,r){try{var a,o,s=function(t){return e.Utils.block("POSITIVE_MULTIPLIERS",function(){return m.unwrapPARENS(v.sqrt(v.abs(t)))},!0)},u=e.Utils.separate(n.clone()),c=[];for(var l in u)"constants"!==l&&c.push(u[l]);if(c.sort(function(e,t){return t.power-e.power}),2===c.length)if(a=c.pop(),o=c.pop(),a.isComposite()&&o.power.equals(2)){o=s(o);var f=O.Factor.factor(t.add(a,u.constants));f.power.equals(2)&&(f.toLinear(),r.add(t.subtract(f.clone(),o.clone())),r.add(t.add(f,o)),n=new m(1))}else if(a=a.powSimp(),o=o.powSimp(),(a.group===i||""===a.fname)&&a.power.equals(2)&&(o.group===i||""===o.fname)&&o.power.equals(2)){if(a.multiplier.lessThan(0)){var d=o;o=a,a=d}a.multiplier.greaterThan(0)&&(a=s(a),o=s(o)),r.add(t.subtract(a.clone(),o.clone())),r.add(t.add(a,o)),n=new m(1)}}catch(e){}return n},mfactor:function(n,r){if(n.group===o)if("sqrt"===n.fname){var i=new b,a=O.Factor.common(n.args[0].clone(),i);a=O.Factor.coeffFactor(a,i),n=t.symfunction("sqrt",[a]),i.each(function(r){n=t.multiply(n,t.parse(e.Utils.format("sqrt({0})",r)))})}else r.add(n);else{n=O.Factor.mSqfrFactor(n,r);for(var s=f(n),u=n.collectSymbols().map(function(e){return m.unwrapSQRT(e)}),c={},l={},d=s.length,p=u.length,g=0;g<d;g++){var v=s[g];c[v]=new m(0);for(var y=0;y<p;y++){var w=u[y];if(w.contains(v)){var x=w.value===v?w.power.toDecimal():w.symbols[v].power.toDecimal();(!l[v]||x<l[v])&&(l[v]=x),c[v]=t.add(c[v],w.clone())}}}for(var j in c){var _=t.parse(j+"^"+l[j]),S=t.divide(c[j],_),M=t.expand(S);if(M.equals(1))break;var E=O.div(n.clone(),M);if(E[0].equals(0))break;var k=h(M)&&M.lessThan(0);if(E[1].equals(0)&&!k){var N=O.div(n.clone(),E[0].clone());_=N[0];if(n=N[1],_.equals(-1))return n;var A=E[0];if(n.equals(A)){var P=O.Factor.reduce(A,r);if(!n.equals(P))return O.Factor.mfactor(P,r)}else r.add(A);return _.isConstant("all")?(r.add(_),_):O.Factor.mfactor(_,r)}}}return n=O.Factor.sqdiff(n,r),n=O.Factor.zeroes(n,r)}},allLinear:function(e){for(var t=e.length,n=0;n<t;n++)if(!O.isLinear(e[n]))return!1;return!0},isLinear:function(e){var t=!1,r=e.group;if(r===s||r===u)for(var l in t=!0,e.symbols){var f=e.symbols[l],d=f.group;if(d===o||d===a||d===c)t=!1;else if(d===s||d===u)t=O.isLinear(f);else if(f.group!==n&&"1"!==f.power.toString()){t=!1;break}}else r===i&&1===e.power&&(t=!0);return t},gcd:function(){var n;if(0==(n=1===arguments.length&&arguments[0]instanceof e.Vector?arguments[0].elements:e.Utils.arguments2Array(arguments)).length)return new m(1);if(1==n.length)return n[0];for(var r=[],i=!1,a=0;a<n.length;a++)if(n[a].group===o&&"gcd"===n[a].fname)(n=n.concat(arguments[a].args)).splice(a,1);else{var s=f(n[a]);if(e.Utils.haveIntersection(s,r)){i=!0;break}r=r.concat(s)}if(i||0===r.length){if(n.every(function(e){return e.getDenom().equals(1)})){var u=n[0];for(a=1;a<n.length;a++)u=O.gcd_(n[a],u);return u}return t.divide(O.gcd.apply(null,n.map(function(e){return e.getNum()})),O.lcm.apply(null,n.map(function(e){return e.getDenom()})))}return t.symfunction("gcd",n)},gcd_:function(n,i){if(n.group!==o&&n.group!==r||(n=e.Utils.block("PARSE2NUMBER",function(){return t.parse(n)})),i.group===o&&(i=e.Utils.block("PARSE2NUMBER",function(){return t.parse(i)})),n.isConstant()&&i.isConstant())return new m(e.Math2.QGCD(new p(+n),new p(+i)));var s=t.multiply(n.getDenom()||new m(1),i.getDenom()||new m(1)).invert();if(n=t.multiply(n.clone(),s.clone()),i=t.multiply(i.clone(),s.clone()),n=t.expand(n),i=t.expand(i),n.group===c||i.group===c){var u=t.divide(n.clone(),i.clone());if(!(v=t.multiply(i.clone(),u.getDenom().invert())).equals(1))return v}if(n.group===a||i.group===a){var l=new m(e.Math2.GCD(n.multiplier,i.multiplier)),d=O.gcd_(n.value===g?new m(1):t.parse(n.value),i.value===g?new m(1):t.parse(i.value)),h=O.gcd_(t.parse(n.power),t.parse(i.power));return t.multiply(l,t.pow(d,h))}if(n.length<i.length){var v=n;n=i,i=v}var b,w=f(n),x=f(i);if(w.length===x.length&&1===w.length&&w[0]===x[0]||1===w.length&&0===x.length||0===w.length&&1===x.length)return n=new y(n),i=new y(i),t.divide(n.gcd(i).toSymbol(),s);for(;!i.equals(0);){v=i.clone();if(n=n.clone(),b=O.div(n,v),i=b[1],b[0].equals(0))return t.divide(new m(e.Math2.QGCD(n.multiplier,i.multiplier)),s);n=v}var j=[];n.each(function(e){j.push(e.multiplier)});var _=e.Math2.QGCD.apply(void 0,j);return _.equals(1)||n.each(function(e){e.multiplier=e.multiplier.divide(_)}),!n.equals(1)||n.isConstant()||i.isConstant()?t.divide(n,s):t.divide(t.symfunction("gcd",arguments),s)},lcm:function(){var n;1===arguments.length?arguments[0]instanceof e.Vector?n=arguments[0].elements:t.error("lcm expects either 1 vector or 2 or more arguments"):n=e.Utils.arguments2Array(arguments);var r=n.reduce(function(e,n){return t.multiply(e,n.clone())},new m(1)),i=function(e,t){var n,r,i,a=[],o=Math.pow(2,e.length);for(r=t;r<o;r++){n=[],i=e.length-1;do{0!=(r&1<<i)&&n.push(e[i])}while(i--);n.length==t&&a.push(n)}return a}(arguments,arguments.length-1).map(function(e){return e.reduce(function(e,n){return t.multiply(e,n.clone())},new m(1))});if(n.every(function(t){return e.Utils.isVariableSymbol(t)}))var a=t.symfunction("gcd",e.Utils.arrayUnique(i));else a=O.gcd.apply(null,i);return t.divide(r,a)},divide:function(n,r){var i,a,o,s;return(s=(o=e.Algebra.Factor.factor(n.clone())).getDenom()).isConstant("all")?s=new m(1):n=t.expand(m.unwrapPARENS(t.multiply(o,s.clone()))),i=O.div(n,r),a=t.divide(i[1],r),t.divide(t.add(i[0],a),s)},div:function(n,r){if(r.isConstant())return n.each(function(e){e.multiplier=e.multiplier.divide(r.multiplier)}),[n,new m(0)];if(n.group===i&&r.group===u){var a=n.value,o=e.Utils.decompose_fn(r.clone(),a,!0);if(n.isLinear()&&o.x&&o.x.isLinear()&&r.isLinear()){var s=m.create(n.multiplier);return[t.divide(s.clone(),o.a.clone()),t.divide(t.multiply(s,o.b),o.a).negate()]}}if(n.group===i&&r.group===i){var c=t.divide(n.clone(),r.clone());return c.isConstant()?[c,new m(0)]:[new m(0),n.clone()]}var l=n.hasFunc(),d=r.hasFunc(),h=!1;if(l||d){h=!0;var v={},b=(n=t.parse(e.Utils.subFunctions(n,v)),r=t.parse(e.Utils.subFunctions(r,v)),e.Utils.getFunctionsSubs(v))}var O,x,j,_,S=e.Utils.arrayUnique(f(n).concat(f(r)));if(1===S.length){O=(X=new y(n).divide(new y(r)))[0].toSymbol(),x=X[1].toSymbol()}else{S.push(g);var M=function(e){for(var n=new m(0),r=0;r<e.length;r++){var i=e[r].toSymbol();n=t.add(n,i)}return n},E=function(e,t){var n,r=Math.max.apply(null,e.terms),i=0;if(!t)for(var a=0;a<e.terms.length;a++)if(e.terms[a].equals(r)&&(n=a,i++),i>1)return;if(t)for(a=0;a<e.terms.length;a++)if(e.terms[a].equals(r)){n=a;break}return[r,n,e]},k=function(e,t){var n=e[t=t||0],r=e.length;if(n){for(var i,a,o=E(n),s=t+1;s<r;s++){var u=e[s],c=n.sum.equals(u.sum);if(!c&&o)break;if(c){for(var l,f,d,p,h=n.terms.length,m=0;m<h;m++){var g=n.terms[m],v=u.terms[m];(void 0===l||g.greaterThan(l))&&(l=g,d=m),(void 0===f||v.greaterThan(f))&&(f=v,p=m)}var y=l.subtract(u.terms[d]),b=f.subtract(n.terms[p]);if(b>y){o=[f,p,u];break}if(y>b){o=[l,d,n];break}}else if(o=E(u))break;o=E(u)}if(!o)return E(e[0],!0);for(s=0;s<D.length;s++){var w=D[s].terms;if((a=o[1])===w.length-1)return;if(!(i=w[a]).equals(0))break}return i.equals(0)?k(e,++t):o}},N=e.Utils.toMapObj(S),A=function(e,t){return t.sum.subtract(e.sum)},P=function(e,t){if(!e||!t)return!1;for(var n=0;n<e.terms.length;n++)if(e.terms[n].lessThan(t.terms[n]))return!1;return!0},C=n.tBase(N).sort(A),D=r.tBase(N).sort(A),T=P(C[0],D[0])&&C[0].count>D[0].count?D:C,R=k(T),L=[];if(R){var I=R[1],F=function(e,t){var n=e.len(),r=t.len(),i=t.terms[I],a=e.terms[I];return r>n&&i.greaterThan(a)?r-n:i.subtract(a)};I=function(e,t,n){return n}(0,0,I),C.sort(F),D.sort(F);var q=D[0],U=C[0],z=new w(new p(1),[],U.map);if(q.sum.greaterThan(U.sum)&&U.len()>1)for(var B=0;B<U.terms.length;B++){var V=q.terms[B].subtract(U.terms[B]);if(V.equals(0))z.terms[B]=new p(0);else{var H=V.add(new p(1));z.terms[B]=V;for(var G=0;G<C.length;G++)C[G].terms[B]=C[G].terms[B].add(H)}}for(var W=P(C[0],D[0]);W&&(_=D,!(j=C)[0].sum.equals(_[0].sum)||j.length>=_.length);){var X=C[0].divide(D[0]);L.push(X),C.shift();for(B=1;B<D.length;B++){var Y=D[B].multiply(X).generateImage(),$=C.length;0===$&&(Y.coeff=Y.coeff.neg(),C.push(Y),C.sort(F));for(G=0;G<$;G++){var J=C[G];if(J.getImg()===Y.getImg()){J.coeff=J.coeff.subtract(Y.coeff),J.coeff.equals(0)&&(e.Utils.remove(C,G),G--);break}G===$-1&&(Y.coeff=Y.coeff.neg(),C.push(Y),C.sort(F))}}if(!(W=P(C[0],D[0]))&&C.length>=D.length)for(B=1;B<C.length;B++)if(W=P(C[B],D[0])){C.unshift(e.Utils.remove(C,B));break}}}O=M(L),x=M(C),void 0!==z&&(z=z.toSymbol(),O=t.divide(O,z.clone()),x=t.divide(x,z))}return h&&(O=t.parse(O.text(),b),x=t.parse(x.text(),b)),[O,x]},line:function(n,r,i){e.Utils.isArray(n)&&(n=e.Utils.convertToVector(n)),e.Utils.isArray(r)&&(r=e.Utils.convertToVector(r)),i=t.parse(i||"x"),e.Utils.isVector(n)&&e.Utils.isVector(r)||t.error('Line expects a vector! Received "'+n+'" & "'+r+'"');var a=t.subtract(r.e(1).clone(),n.e(1).clone()),o=t.subtract(r.e(2).clone(),n.e(2).clone()),s=t.divide(o,a),u=t.multiply(i,s.clone()),c=t.multiply(n.e(1).clone(),s);return t.add(t.subtract(u,c),n.e(2).clone())},PartFrac:{createTemplate:function(e,n,r,a){var s,u,c,l,f,d,p;(e=O.Factor.factor(e)).each(function(t,n){if(t.group===o&&""===t.fname&&t.args[0].group===i){var r=t.args[0];this.symbols?(delete this.symbols[n],this.symbols[r.value]=r):e=t.args[0]}}),s=n.collectFactors(),u=[],d=[],p=new m(1);for(var h=0;h<s.length;h++){var g=m.unwrapPARENS(s[h]);if(g.power.greaterThan(1)){l=Number(g.power),c=g.clone().toLinear(),f=Number(O.degree(c,a));for(var v=0;v<l;v++){var y=t.pow(c.clone(),new m(v+1));r.push(y.clone());var b=t.divide(e.clone(),y.clone());d.push(f),u.push(b)}}else if(g.isConstant("all"))p=t.multiply(p,g);else{f=Number(O.degree(g,a)),r.push(g);b=t.divide(e.clone(),g.clone());b=t.expand(m.unwrapPARENS(b)),d.push(f),u.push(b)}}return[r=r.map(function(e){return t.multiply(e,p.clone())}),u,d]},partfrac:function(n,r,i){var a=f(n);r=r||t.parse(a[0]);try{var o,s,u,c,l,d,p,h,g,v,y,b,w,x,j,_,S,M,E;if(o=t.expand(n.getNum()),s=t.expand(n.getDenom().toUnitMultiplier()),o.multiplier=n.multiplier,l=o.groupTerms(r),Number(O.degree(o,r))>=Number(O.degree(s,r))?(w=(b=O.div(o.clone(),t.expand(s.clone())))[0],l=(o=b[1]).groupTerms(r)):w=new m(0),1===Number(O.degree(s,r))){var k=t.divide(o,s);return i?[w,k]:t.add(w,k)}c=O.Factor.factor(s),_=O.PartFrac.createTemplate(s.clone(),c,[],r),S=_[0],x=_[1],d=_[2],y=[l.length],p=[],u=[],j=[],x.map(function(e,n){M=S[n],E=d[n];for(var i=0;i<E;i++){u.push(M.clone());var a=m.create(r,i),o=t.expand(t.multiply(e,a.clone())).groupTerms(r),s=o.length;y.push(s),p.push(o),j.push(a.clone())}}),h=e.Utils.arrayMax(y),v=new e.Matrix(e.Utils.fillHoles(l,h)).transpose(),g=new e.Matrix;for(var N=0;N<p.length;N++)g.elements.push(e.Utils.fillHoles(p[N],h));var A=t.multiply(g.transpose().invert(),v),P=i?[w]:w;return A.each(function(e,n){var r=t.multiply(j[n],t.divide(e,u[n]));i?P.push(r):P=t.add(P,r)}),P}catch(e){}return n}},degree:function(n,r,o){if(o=o||{nd:[],sd:[],depth:0},!r){var s=f(n);if(s.length>1)throw new Error("You must specify the variable for multivariate polynomials!");if(0===s.length)return new m(0);r=t.parse(s[0])}var u=n.group;n.isComposite()?((n=n.clone()).distributeExponent(),n.each(function(e){o.depth++,O.degree(e,r,o),o.depth--})):n.group===c?n.each(function(e){o.depth++,O.degree(e,r,o),o.depth++}):u===a&&n.value===r.value?o.sd.push(n.power.clone()):u===i&&n.value===r.value?o.nd.push(t.parse(n.power)):o.nd.push(new m(0));var l=o.nd.length>0?e.Utils.arrayMax(o.nd):void 0;return 0===o.depth&&o.sd.length>0?(void 0!==l&&o.sd.unshift(l),t.symfunction("max",o.sd)):(e.Utils.isSymbol(l)||(l=t.parse(l)),l)},sqComplete:function(n,r,i){e.Utils.isSymbol(r)||(r=t.parse(r));var a,o,s,c,l,f,d,p,h,g,y,b=function(e){throw e=e||"Stopping",new Error(e)};return n.group!==u&&b("Must be a polynomial!"),h=e.Utils.inBrackets,n=n.clone(),(a=e.Algebra.degree(n,r)).equals(2)||b("Cannot complete square for degree "+a),o=(d=e.Algebra.coeffs(n,r))[2],p=d[1].sign(),s=t.divide(d[1],new m(2)),c=t.pow(s.clone(),new m(2)),i?[o,s,l]:(y=v.sqrt(o),f=t.divide(v.sqrt(c),y.clone()),l=t.subtract(d[0],t.pow(f.clone(),new m(2))),{a:g=t.parse(h(y.clone()+"*"+r+(p<0?"-":"+")+f)),c:l,f:t.add(t.pow(g.clone(),new m(2)),l.clone())})},Classes:{Polynomial:y,Factors:b,MVTerm:w}};nerdamer.useAlgebraDiv=function(){var n=O.divideFn=t.divide,r=0;t.divide=function(t,i){var a;return a=1===++r?e.Algebra.divide(t,i):n(t,i),r=0,a}},nerdamer.useParserDiv=function(){O.divideFn&&(t.divide=O.divideFn),delete O.divideFn},nerdamer.register([{name:"factor",visible:!0,numargs:1,build:function(){return O.Factor.factor}},{name:"gcd",visible:!0,numargs:[1],build:function(){return O.gcd}},{name:"lcm",visible:!0,numargs:[1],build:function(){return O.lcm}},{name:"roots",visible:!0,numargs:-1,build:function(){return O.roots}},{name:"divide",visible:!0,numargs:2,build:function(){return O.divide}},{name:"div",visible:!0,numargs:2,build:function(){return O.div}},{name:"partfrac",visible:!0,numargs:[1,2],build:function(){return O.PartFrac.partfrac}},{name:"deg",visible:!0,numargs:[1,2],build:function(){return O.degree}},{name:"coeffs",visible:!0,numargs:[1,2],build:function(){return function(){var t=O.coeffs.apply(O,arguments);return new e.Vector(t)}}},{name:"line",visible:!0,numargs:[2,3],build:function(){return O.line}},{name:"sqcomp",visible:!0,numargs:[1,2],build:function(){return function(e,t){try{return t=t||f(e)[0],O.sqComplete(e.clone(),t).f}catch(t){return e}}}}]),nerdamer.api()}()},function(e,t,n){e.exports=n(124)},function(e,t,n){var r=n(124),i=t;function a(e,t,n){var r=(t+n)/2;return Math.abs(n-t)/6*(e(t)+4*e(r)+e(n))}i.pointDiff=function(e,t){var n=e(t-.001);return(e(t+.001)-n)/.002},i.Riemann=function(e,t,n,r,i){var a,o=(n-t)/r,s=0;if("function"==typeof i)for(a=t;a<n;a+=o)s+=e(i(a,a+o));else for(a=t;a<n;a+=o)s+=e(a);return s*o},i.adaptiveSimpson=function(e,t,n,i){return i=void 0===i?r.EPSILON:i,function e(t,n,r,i,o){var s=n+r,u=a(t,n,s),c=a(t,s,r);return Math.abs(u+c-i)<=15*o?u+c+(u+c-i)/15:e(t,n,s,o/2,u)+e(t,s,r,o/2,c)}(e,t,n,a(e,t,n),i)},i.limit=function(e,t,n){if("left"===n)return e(t-1e-15);if("right"===n)return e(t+1e-15);if("middle"===n)return(i.limit(e,t,"left")+i.limit(e,t,"right"))/2;throw new Error("Approach not provided")},i.StirlingGamma=function(e){return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)},i.LanczosGamma=function(e){var t,n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*i.LanczosGamma(1-e));var r=n[0],a=(e-=1)+7+.5;for(t=1;t<n.length;t++)r+=n[t]/(e+t);return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*r},i.MonteCarlo=function(e,t){if(arguments.length<2)throw new Error("Please enter at least one interval.");if(t<=0)throw new Error("Please use a positive integer for N.");var n=[];t=Math.ceil(t);for(var i=2;i<arguments.length;i++)n.push(arguments[i]);return n.map(function(e){return e[1]-e[0]}).reduce(function(e,t){return e*t})/t*r.matrix.transpose(n.map(function(e){return r.statistic.randomSample(e[0],e[1],t)})).map(function(t){return e.apply(null,[t[0],t[1],t[2]])}).reduce(function(e,t){return e+t})}},function(e,t,n){var r=n(124).basic,i=function(e,t){this.re=e,this.im=t,this.r=this.magnitude(),this.t=this.phase()};i.prototype.add=function(e){return new i(this.re+e.re,this.im+e.im)},i.prototype.subtract=function(e){return new i(this.re-e.re,this.im-e.im)},i.prototype.multiply=function(e){var t=this.re*e.re-this.im*e.im,n=this.im*e.re+this.re*e.im;return new i(t,n)},i.prototype.divide=function(e){var t=e.re*e.re+e.im*e.im,n=(this.re*e.re+this.im*e.im)/t,r=(this.im*e.re-this.re*e.im)/t;return new i(n,r)},i.prototype.magnitude=function(){return Math.sqrt(this.re*this.re+this.im*this.im)},i.prototype.phase=function(){return Math.atan2(this.im,this.re)},i.prototype.conjugate=function(){return new i(this.re,-1*this.im)},i.prototype.pow=function(e){var t=Math.pow(this.magnitude(),e);return new i(t*Math.cos(e*this.phase()),t*Math.sin(e*this.phase()))},i.prototype.complexPow=function(e){var t=Math.pow(this.re,2)+Math.pow(this.im,2),n=Math.pow(t,e.re/2)*Math.pow(Math.E,-e.im*this.phase()),r=e.re*this.phase()+.5*e.im*Math.log(t);return new i(n*Math.cos(r),n*Math.sin(r))},i.prototype.roots=function(e){for(var t=new Array(e),n=0;n<e;n++){var r=(this.phase()+2*Math.PI*n)/e,a=Math.pow(this.magnitude(),1/e);t[n]=new i(a*Math.cos(r),a*Math.sin(r))}return t},i.prototype.sin=function(){var e=new i(Math.E,0),t=new i(0,1),n=new i(0,-1);return e.complexPow(t.multiply(this)).subtract(e.complexPow(n.multiply(this))).divide(new i(0,2))},i.prototype.cos=function(){var e=new i(Math.E,0),t=new i(0,1),n=new i(0,-1);return e.complexPow(t.multiply(this)).add(e.complexPow(n.multiply(this))).divide(new i(2,0))},i.prototype.tan=function(){return this.sin().divide(this.cos())},i.prototype.equals=function(e,t){return r.numbersEqual(this.re,e.re,t)&&r.numbersEqual(this.im,e.im,t)},e.exports=i},function(e,t,n){var r=n(124).complex,i=t;i.segment=function(e,t,n){for(var r=[],i=t;i<e.length;i+=n)r.push(e[i]);return r},i.fft=function(e){var t=e.length;if(t<=1)return[new r(e[0],0)];if(Math.log(t)/Math.LN2%1!=0)throw new Error("Array length must be integer power of 2");for(var n=i.fft(i.segment(e,0,2)),a=i.fft(i.segment(e,1,2)),o=[],s=t/2,u=0;u<t;u++){var c=-2*Math.PI*u/t,l=new r(Math.cos(c),Math.sin(c));o[u]=u<s?n[u].add(l.multiply(a[u])):n[u-s].subtract(l.multiply(a[u-s]))}return o}},function(e,t){var n=t;n._check2DVector=function(e){if(2!==e.length)throw new Error("Only two dimensional operations are supported at this time.")},n.deepCopy=function(e){if(!Array.isArray(e))throw new Error("Input must be a matrix.");if(void 0===e[0][0])throw new Error("Input cannot be a vector.");for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n].slice();return t},n.isSquare=function(e){if(!Array.isArray(e))throw new Error("Input must be a matrix.");if(void 0===e[0][0])throw new Error("Input cannot be a vector.");for(var t=e.length,n=0;n<t;n++)if(e[n].length!==t)return!1;return!0},n.addition=function(e,t){if(e.length!==t.length||e[0].length!==t[0].length)throw new Error("Matrix mismatch");var n,r=new Array(e.length);if(e[0].length)for(n=0;n<e.length;n++){r[n]=new Array(e[n].length);for(var i=0;i<e[n].length;i++)r[n][i]=e[n][i]+t[n][i]}else for(n=0;n<e.length;n++)r[n]=e[n]+t[n];return r},n.subtraction=function(e,t){if(e.length!==t.length||e[0].length!==t[0].length)throw new Error("Matrix mismatch");var n,r=new Array(e.length);if(e[0].length)for(n=0;n<e.length;n++){r[n]=new Array(e[n].length);for(var i=0;i<e[n].length;i++)r[n][i]=e[n][i]-t[n][i]}else for(n=0;n<e.length;n++)r[n]=e[n]-t[n];return r},n.scalar=function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)e[n][r]=t*e[n][r];return e},n.transpose=function(e){for(var t=new Array(e[0].length),n=0;n<e[0].length;n++){t[n]=new Array(e.length);for(var r=0;r<e.length;r++)t[n][r]=e[r][n]}return t},n.identity=function(e){for(var t=new Array(e),n=0;n<e;n++){t[n]=new Array(e);for(var r=0;r<e;r++)t[n][r]=n===r?1:0}return t},n.dotproduct=function(e,t){if(e.length!==t.length)throw new Error("Vector mismatch");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n},n.multiply=function(e,t){if(e[0].length!==t.length)throw new Error("Matrix mismatch");for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=new Array(t[0].length);for(var a=n.transpose(t),o=0;o<r.length;o++)for(var s=0;s<r[o].length;s++)r[o][s]=n.dotproduct(e[o],a[s]);return r},n.determinant=function(e){var t,r,i,a,o=e.length,s=e[0].length,u=0;if(!n.isSquare(e))throw new Error("Matrix must be square.");if(1===o)return e[0][0];if(2===o)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(r=0;r<s;r++){for(i=e[0][r],a=e[0][r],t=1;t<o;t++)a*=e[t][((r+t)%s+s)%s],i*=e[t][((r-t)%s+s)%s];u+=a-i}return u},n.lupDecomposition=function(e){if(!n.isSquare(e))throw new Error("Matrix must be square.");var t,r=e.length,i=n.deepCopy(e),a=n.transpose(n.identity(r)),o=new Array(r);this.getL=function(e){for(var t=e[0].length,r=n.identity(t),i=0;i<t;i++)for(var a=0;a<t;a++)i>a&&(r[i][a]=e[i][a]);return r},this.getU=function(e){for(var t=e[0].length,r=n.identity(t),i=0;i<t;i++)for(var a=0;a<t;a++)i<=a&&(r[i][a]=e[i][a]);return r};for(var s=0;s<r;s++){var u;for(u=0;u<r;u++)o[u]=i[u][s];for(u=0;u<r;u++){t=i[u];for(var c=Math.min(u,s),l=0,f=0;f<c;f++)l+=t[f]*o[f];t[s]=o[u]-=l}var d=s;for(u=s+1;u<r;u++)Math.abs(o[u])>Math.abs(o[d])&&(d=u);if(d!=s&&(i=n.rowSwitch(i,d,s),a=n.rowSwitch(a,d,s)),s<r&&0!==i[s][s])for(u=s+1;u<r;u++)i[u][s]/=i[s][s]}return[this.getL(i),this.getU(i),a]},n.rotate=function(e,t,r){n._check2DVector(e);var i="clockwise"===r?-1:1,a=t*(Math.PI/180),o=[[Math.cos(a),-1*i*Math.sin(a)],[i*Math.sin(a),Math.cos(a)]];return n.multiply(o,e)},n.scale=function(e,t,r){n._check2DVector(e);var i=[[t,0],[0,r]];return n.multiply(i,e)},n.shear=function(e,t,r){n._check2DVector(e);var i=[[1,"xaxis"===r?t:0],["yaxis"===r?t:0,1]];return n.multiply(i,e)},n.affine=function(e,t,r){n._check2DVector(e);var i=[[1,0,t],[0,1,r],[0,0,1]],a=[[e[0][0]],[e[1][0]],[1]],o=n.multiply(i,a);return[[o[0][0]],[o[1][0]]]},n.rowScale=function(e,t,n){for(var r=new Array(e.length),i=0;i<e.length;i++){r[i]=new Array(e[i].length);for(var a=0;a<e[i].length;a++)r[i][a]=i===t?n*e[i][a]:e[i][a]}return r},n.rowSwitch=function(e,t,n){for(var r=new Array(e.length),i=0;i<e.length;i++){r[i]=new Array(e[i].length);for(var a=0;a<e[i].length;a++)r[i][a]=i===t?e[n][a]:i===n?e[t][a]:e[i][a]}return r},n.rowAddMultiple=function(e,t,n,r){for(var i=new Array(e.length),a=0;a<e.length;a++){i[a]=new Array(e[a].length);for(var o=0;o<e[a].length;o++)a===n?i[n][o]=e[n][o]+r*e[t][o]:i[a][o]=e[a][o]}return i},n.GaussJordanEliminate=function(e,t){for(var n,r,i,a=void 0===t?1e-10:t,o=e.length,s=e[0].length,u=-1;++u<o;){var c=u;for(n=u;++n<o;)Math.abs(e[n][u])>Math.abs(e[c][u])&&(c=n);var l=e[u];if(e[u]=e[c],e[c]=l,Math.abs(e[u][u])<=a)return e;for(n=u;++n<o;)for(i=e[n][u]/e[u][u],r=u-1;++r<s;)e[n][r]-=e[u][r]*i}for(u=o;--u>=0;){for(i=e[u][u],n=-1;++n<u;)for(r=s;--r>=u;)e[n][r]-=e[u][r]*e[n][u]/i;for(e[u][u]/=i,r=o-1;++r<s;)e[u][r]/=i}return e},n.rowReduce=function(e,t){return n.GaussJordanEliminate(e,t)},n.inverse=function(e){if(!n.isSquare(e))throw new Error("Matrix must be square.");var t,r=e.length,i=n.identity(r);for(t=0;t<r;t++)e[t]=e[t].concat(i[t]);for(e=n.GaussJordanEliminate(e),t=0;t<r;t++)e[t]=e[t].slice(r);return e},n.getCol=function(e,t){var n=new Array(e.length);if(t<0)throw new Error("The specified column must be a positive integer.");if(t>=e[0].length)throw new Error("The specified column must be between 0 and the number of columns - 1.");for(var r=0;r<e.length;r++)n[r]=e[r][t];return n},n.reorderRows=function(e,t){var n=[];if(void 0===t)throw new Error("A reordering array must be entered.");if(t.length!==e.length)throw new Error("The reordered matrix must have the same number of rows as the original matrix.");for(var r=0;r<t.length;r++){if(t[r]<0)throw new Error("The desired order of the rows must be positive integers.");if(t[r]>=t.length)throw new Error("The desired order of the rows must start at 0 and end at the number of rows - 1.");n.push(e[t[r]])}return n},n.reorderCols=function(e,t){var r=[];if(void 0===t)throw new Error("Please enter a desired reordering array.");if(t.length!==e[0].length)throw new Error("The reordered matrix must have the same number of columns as the original matrix.");for(var i=0;i<t.length;i++){if(t[i]<0)throw new Error("The desired order of the columns must be positive integers.");if(t[i]>=t.length)throw new Error("The desired order of the columns must start at 0 and end at the number of columns - 1.");r.push(n.getCol(e,t[i]))}return n.transpose(r)},n.reverseRows=function(e){for(var t=[],r=e.length-1;r>-1;r--)t.push(r);return n.reorderRows(e,t)},n.reverseCols=function(e){for(var t=[],r=e.length-1;r>-1;r--)t.push(r);return n.reorderCols(e,t)},n.zeros=function(e,t){var n=new Array(e);if(e<1||t<1)throw new Error("The matrix dimensions must be positive integers.");e=Math.ceil(e),t=Math.ceil(t);for(var r=0;r<e;r++){for(var i=new Array(t),a=0;a<t;a++)i[a]=0;n[r]=i}return n},n.zigzag=function(e,t,r){if(e<=1)throw new Error("Matrix size must be at least 2x2.");e=Math.ceil(e);var i,a=n.zeros(e,e),o=function(t){var n,r,i,a,o,s=!1,u=e*e,c=1,l=1;for(t[0][0]=u,t[e-1][e-1]=c,a=1;a<e;a++)s?(u-=4*l,c+=4*l,l++):(u--,c++),t[0][a]=u,t[e-1][e-1-a]=c,s=!s;var f=!0;for(a=1;a<e;a++){for(r=a,i=t[n=0][r],o=1;o<a+1;o++)f?i-=1:i+=1,r--,t[++n][r]=i;f=!f}for(f=e%2==0,a=1;a<e-1;a++){for(r=a,i=t[n=e-1][r],o=1;o<e-a;o++)f?i--:i++,r++,t[--n][r]=i;f=!f}return t},s=function(e){return n.transpose(o(e))},u=function(e){return n.reverseCols(o(e))},c=function(e){return n.reverseCols(n.reverseRows(o(e)))},l=function(e){return n.transpose(c(e))};if("BR"===t&&"H"===r)return o(a);if("BR"===t&&"V"===r)return s(a);if("BL"===t&&"H"===r)return u(a);if("BL"===t&&"V"===r)return i=a,n.reverseRows(l(u(i)));if("TR"===t&&"H"===r)return function(e){return n.reverseRows(o(e))}(a);if("TR"===t&&"V"===r)return function(e){return n.reverseRows(s(e))}(a);if("TL"===t&&"H"===r)return c(a);if("TL"===t&&"V"===r)return l(a);throw new Error("Enter the direction (V,H) and corner (BR,BL,TR,TL) correctly.")},n.vectorNorm=function(e,t){if(!Array.isArray(e)||0===e.length)throw new Error("Vector must be an array of at least length 1.");if(void 0!==t&&"number"!=typeof t)throw new Error("Norm order must be a number.");t=void 0===t?2:t;var n,r,i=e.length,a=0;switch(t){case 1/0:for(r=0;r<i;r++)(n=Math.abs(e[r]))>a&&(a=n);break;case-1/0:for(a=1/0,r=0;r<i;r++)(n=Math.abs(e[r]))<a&&(a=n);break;default:for(r=0;r<i;r++)a+=Math.pow(Math.abs(e[r]),t);a=Math.pow(a,1/t)}return a},n.matrixNorm=function(e,t){if(!Array.isArray(e)||0===e.length||!Array.isArray(e[0]))throw new Error("Matrix must be an array of at least length 1.");if(void 0!==t&&"number"!=typeof t&&null!==t)throw new Error("Norm order must be a number or null.");t=void 0===t?null:t;var n,r,i,a=e.length,o=e[0].length,s=0;switch(t){case 1/0:for(r=0;r<a;r++){for(n=0,i=0;i<o;i++)n+=Math.abs(e[r][i]);n>s&&(s=n)}break;case-1/0:for(s=1/0,r=0;r<a;r++){for(n=0,i=0;i<o;i++)n+=Math.abs(e[r][i]);n<s&&(s=n)}break;case 1:for(r=0;r<o;r++){for(n=0,i=0;i<a;i++)n+=Math.abs(e[i][r]);n>s&&(s=n)}break;case-1:for(s=1/0,r=0;r<o;r++){for(n=0,i=0;i<a;i++)n+=Math.abs(e[i][r]);n<s&&(s=n)}break;case null:for(r=0;r<a;r++)for(i=0;i<o;i++)s+=Math.pow(e[r][i],2);s=Math.pow(s,.5);break;case 2:case-2:throw new Error("Singular values are not yet supported in numbers.js.");default:for(r=0;r<a;r++)for(i=0;i<o;i++)s+=Math.pow(Math.abs(e[r][i]),t);s=Math.pow(s,1/t)}return s},n.isUpperBand=function(e,t){if(!Array.isArray(e)||!Array.isArray(e[0])||e.length<2)throw new Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof t||t<0||t%1!=0)throw new Error("Upper bandwidth must be a nonzero integer.");for(var n=!0,r=e[0].length,i=0,a=t+1;a<r;a++){if(0!==e[i][a]){n=!1;break}i++}return n},n.isLowerBand=function(e,t){if(!Array.isArray(e)||!Array.isArray(e[0])||e.length<2)throw new Error("Matrix must be an array of at least dimension 2.");if("number"!=typeof t||t<0||t%1!=0)throw new Error("Lower bandwidth must be a nonzero integer.");for(var n=!0,r=e.length,i=0,a=t+1;a<r;a++){if(0!==e[a][i]){n=!1;break}i++}return n},sumNondiagonalElements=function(e,t){var n,r=0;for(n=0;n<t;n++)r+=Math.abs(e[n]);for(n=t+1;n<e.length;n++)r+=Math.abs(e[n]);return r},n.isRowDD=function(e){var t=e.length;if(!n.isSquare(e))throw new Error("Matrix must be square.");for(var r=0;r<t;r++){var i=e[r],a=i[r],o=sumNondiagonalElements(i,r);if(Math.abs(a)<o)return!1}return!0},n.isStrictlyRowDD=function(e){if(!n.isSquare(e))throw new Error("Matrix must be square.");for(var t=e.length,r=0;r<t;r++){var i=e[r],a=i[r],o=sumNondiagonalElements(i,r);if(Math.abs(a)<=o)return!1}return!0},n.isColumnDD=function(e){if(!n.isSquare)throw new Error("Matrix must be square.");for(var t=e.length,r=0;r<t;r++){var i=n.getCol(e,r),a=i[r],o=sumNondiagonalElements(i,r);if(Math.abs(a)<o)return!1}return!0},n.isStrictlyColumnDD=function(e){if(!n.isSquare(e))throw new Error("Matrix must be square.");for(var t=e.length,r=0;r<t;r++){var i=n.getCol(e,r),a=i[r],o=sumNondiagonalElements(i,r);if(Math.abs(a)<=o)return!1}return!0}},function(e,t,n){var r=n(125),i=t;i.simple=function(e){if(isNaN(e)||!isFinite(e)||e%1||e<2)return!1;if(e%2==0)return 2===e;if(e%3==0)return 3===e;for(var t=5,n=Math.sqrt(e);t<=n;t+=6)if(e%t==0||e%(t+2)==0)return!1;return!0},i.factorization=function(e){var t;e=Math.floor(e);for(var n,r=[],i=Math.sqrt,a=1<e&&isFinite(e);a;){if(t=i(e),e%(n=2))for(n=3;e%n&&(n+=2)<t;);n=t<n?e:n,r.push(n),a=n!==e,e/=n}return r},i.millerRabin=function(e,t){if(1===arguments.length&&(t=20),2===e)return!0;if(!r.isInt(e)||e<=1||e%2==0)return!1;for(var n=0,i=e-1;;){var a=r.divMod(i,2),o=a[0];if(1===a[1])break;n+=1,i=o}for(var s=function(t){if(1===r.powerMod(t,i,e))return!1;for(var a=0;a<n;a++)if(r.powerMod(t,Math.pow(2,a)*i,e)===e-1)return!1;return!0},u=0;u<t;u++){if(s(2+Math.floor(Math.random()*(e-2-2))))return!1}return!0},i.sieve=function(e){if(e<2)return[];for(var t=[2],n=3;n<=e;n++){var r=!1;for(var i in t)r=r||0==n%t[i];r||t.push(n)}return t},i.coprime=function(e,t){return 1===r.gcd(e,t)},i.getPerfectPower=function(e){var t=i.getPrimePower(e);return!!(t&&t[1]>1)&&t},i.getPrimePower=function(e){if(e<2)return!1;if(i.millerRabin(e))return[e,1];if(e%2==0)return[2,e.toString(2).length-1];var t=i.factorization(e);if(!t)return!1;for(var n=t.length,r=0;r<n;r++)for(var a=0,o=0;a<=e;){if((a=Math.pow(t[r],o))/e==1)return[t[r],o];o++}return!1}},function(e,t,n){var r=n(125),i=t;i.mean=function(e){var t=e.length;return r.sum(e)/t},i.median=function(e){return i.quantile(e,1,2)},i.mode=function(e){for(var t,n={},r=0,i=e.length;r<i;r++)void 0===n[e[r]]?n[e[r]]=0:n[e[r]]++;for(var a in n)n.hasOwnProperty(a)&&(void 0===t||n[a]>n[t])&&(t=a);return Number(t)},i.quantile=function(e,t,n){var r,i;return 0===t?Math.min.apply(null,e):t===n?Math.max.apply(null,e):((r=e.slice(0)).sort(function(e,t){return e-t}),(i=r.length*t/n)%1==0?.5*r[i-1]+.5*r[i]:r[Math.floor(i)])},i.report=function(e){return{mean:i.mean(e),firstQuartile:i.quantile(e,1,4),median:i.median(e),thirdQuartile:i.quantile(e,3,4),standardDev:i.standardDev(e)}},i.standardDev=function(e){for(var t=e.length,n=i.mean(e),a=[],o=0;o<e.length;o++)a[o]=Math.pow(e[o]-n,2);return Math.sqrt(1/t*r.sum(a))},i.correlation=function(e,t){if(e.length==t.length)return i.covariance(e,t)/(i.standardDev(e)*i.standardDev(t));throw new Error("Array mismatch")},i.rSquared=function(e,t){return 1-r.sum(e.map(function(e,n){return r.square(e-t[n])}))/r.sum(e.map(function(t){return r.square(t-i.mean(e))}))},i.exponentialRegression=function(e){var t=e.length,n=r.range(1,t),a=r.sum(n),o=(r.sum(e),i.mean(e),e.map(function(e){return Math.log(e)})),s=n.map(function(e){return e*e}),u=r.sum(s),c=r.sum(o),l=n.map(function(e,t){return e*o[t]}),f=r.sum(l),d=(c*u-a*f)/(t*u-a*a),p=(t*f-a*c)/(t*u-a*a),h=function(e){return"number"==typeof e?Math.exp(d)*Math.exp(p*e):e.map(function(e){return Math.exp(d)*Math.exp(p*e)})};return h.rSquared=i.rSquared(e,n.map(h)),h},i.linearRegression=function(e,t){var n=e.length,a=r.sum(e),o=r.sum(t),s=r.sum(e.map(function(e,n){return e*t[n]})),u=r.sum(e.map(function(e){return e*e})),c=i.mean(e),l=i.mean(t),f=(s-1/n*a*o)/(u-1/n*(a*a)),d=l-f*c;return function(e){return"number"==typeof e?d+f*e:e.map(function(e){return d+f*e})}},i.covariance=function(e,t){if(e.length==t.length){for(var n=e.length,i=0,a=r.sum(e),o=r.sum(t),s=0;s<n;s++)i+=e[s]*t[s];return(i-a*o/n)/n}throw new Error("Array mismatch")}},function(e,t){var n=t;n.fibonacci=function(e){for(var t,n=1,r=0,i=1,a=function(e){for(var t,n=[];e>0;)t=e<2?e:e%2,e=Math.floor(e/2),n.push(t);return n.reverse()}(e),o=0;o<a.length;o++){a[o]?(n=(t=[(n+i)*r,r*r+i*i])[0],r=t[1]):(n=(t=[n*n+r*r,(n+i)*r])[0],r=t[1]),i=n+r}return r},n.collatz=function(e,t){t.push(e),1!==e&&(e%2==0?n.collatz(e/2,t):n.collatz(3*e+1,t))}},function(e,t,n){n(125);var r=t,i=Math.random;r.setGenerator=function(e){if("function"!=typeof e)throw new Error("Must pass a function");i=e},r.sample=function(e,t,n){var r=[];r.length=n;for(var a=0;a<n;a++)r[a]=e+(t-e)*i();return r},r.boxMullerTransform=function(e,t){arguments.length<=1&&(t=1),0===arguments.length&&(e=0);var n,r=0,a=0;do{n=(r=2*i()-1)*r+(a=2*i()-1)*a}while(0===n||n>1);var o=Math.sqrt(-2*Math.log(n)/n),s=r*o,u=a*o;return[s=e+s*t,u=e+u*t]},r.irwinHall=function(e,t){1===arguments.length&&(t=0);for(var n=0,r=0;r<e;r++)n+=i();return n-t},r.bates=function(e,t,n){arguments.length<=2&&(n=0),1===arguments.length&&(t=1);for(var r=0,a=0;a<e;a++)r+=(t-n)*i()+n;return r/e},r.distribution={},r.distribution.normal=function(e,t,n){return arguments.length<=2&&(n=1),1===arguments.length&&(t=0),r.distribution.boxMuller(e,t,n)},r.distribution.logNormal=function(e,t,n){arguments.length<=2&&(n=1),1===arguments.length&&(t=0);return r.distribution.boxMuller(e,t,n).map(function(e){return Math.exp(e)})},r.distribution.boxMuller=function(e,t,n,i){arguments.length<=3&&(i=!1),arguments.length<=2&&(n=1),1===arguments.length&&(t=0);for(var a=[],o=0;o<e;o++){var s=r.boxMullerTransform(t,n);a.push(i?s:s[0])}return a},r.distribution.irwinHall=function(e,t,n){arguments.length<=2&&(n=0),1===arguments.length&&(t=e);for(var i=new Array(e),a=0;a<e;a++)i[a]=r.irwinHall(t,n);return i},r.distribution.irwinHallNormal=function(e){return r.distribution.irwinHall(e,12,6)},r.distribution.bates=function(e,t,n){arguments.length<=2&&(n=0),1===arguments.length&&(t=e);for(var i=new Array(e),a=0;a<e;a++)i[a]=r.bates(e,t,n);return i}},function(e,t,n){"use strict";function r(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}n.d(t,"d",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"e",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return u});var i=0,a=1,o=2,s=3,u=4;t.f=function(e){var t=e||i;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=a&&r("error","ERROR",arguments),this},warn:function(){return t>=o&&r("warn","WARN",arguments),this},info:function(){return t>=s&&r("log","INFO",arguments),this},debug:function(){return t>=u&&r("log","DEBUG",arguments),this}}}},function(e,t,n){"use strict";t.a=function(e,t){return c(e,t,a.a,r.c)},t.b=function(e,t){var n=Math.sign(e[0]);return c(e,t,s(n),o(n))},t.c=function(e,t,n){return c(e,t,u(n),u(1/n))},t.d=function(e,t,n){return l(e,t,n,a.a,r.c)},t.e=function(e,t,n){var r=Math.sign(e[0]);return l(e,t,n,s(r),o(r))},t.f=function(e,t,n,r){return l(e,t,n,u(r),u(1/r))};var r=n(358),i=n(363),a=n(364);function o(e){return function(t){return e*Math.exp(t)}}function s(e){return function(t){return Math.log(e*t)}}function u(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function c(e,t,n,r){var a=n(e[0]),o=n(Object(i.a)(e)),s=(o-a)*t;return[r(a-s),r(o-s)]}function l(e,t,n,r,a){var o=r(e[0]),s=r(Object(i.a)(e)),u=null!=t?r(t):(o+s)/2;return[a(u+(o-u)*n),a(u+(s-u)*n)]}},function(e,t,n){"use strict";var r=n(90),i=n(210),a=n(211),o=n(126),s=n(127);t.a=function(e,t){var n,u,c,l,f,d,p,h,m,g=[],v=(e=Object(i.a)(e)).map(function(e,t){return null==e?null:(g.push(t),Object(a.a)(e)?e:Object(o.a)(e).map(s.a).join("]["))}),y=g.length-1,b=Object(i.a)(t),w="var u,v;return ";if(y<0)return null;for(u=0;u<=y;++u)c=v[n=g[u]],Object(a.a)(c)?(l="(u=this."+(d="f"+n)+"(a))",f="(v=this."+d+"(b))",(p=p||{})[d]=c):(l="(u=a["+c+"])",f="(v=b["+c+"])"),d="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==b[n]?(m=1,h=-1):(m=-1,h=1),w+="("+l+"<"+f+"||u==null)&&v!=null?"+h+":(u>v||v==null)&&u!=null?"+m+":"+d+"!==u&&v===v?"+h+":v!==v&&u===u?"+m+(n<y?":":":0");return c=Function("a","b",w+";"),p&&(c=c.bind(p)),e=e.reduce(function(e,t){return Object(a.a)(t)?(Object(r.a)(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),Object(r.c)(c,Object.keys(e))}},function(e,t,n){"use strict";var r=n(211);t.a=function(e){return Object(r.a)(e)?e:function(){return e}}},function(e,t,n){"use strict";t.a=function(e,t){var n,r;function i(){t(r),n=r=null}return function(t){r=t,n&&clearTimeout(n),n=setTimeout(i,e)}}},function(e,t,n){"use strict";t.a=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e}},function(e,t,n){"use strict";t.a=function(e,t){var n,r,i,a,o,s=-1,u=e.length;if(null==t){for(;++s<u;)if(null!=(r=e[s])&&r>=r){n=i=r;break}for(a=o=s;++s<u;)null!=(r=e[s])&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}else{for(;++s<u;)if(null!=(r=t(e[s],s,e))&&r>=r){n=i=r;break}for(a=o=s;++s<u;)null!=(r=t(e[s],s,e))&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}return[a,o]}},function(e,t,n){"use strict";var r={};t.a=function(e){var t,n,i={};function a(e){return i.hasOwnProperty(e)&&i[e]!==r}return t={size:0,empty:0,object:i,has:a,get:function(e){return a(e)?i[e]:void 0},set:function(e,n){return a(e)||(++t.size,i[e]===r&&--t.empty),i[e]=n,this},delete:function(e){return a(e)&&(--t.size,++t.empty,i[e]=r),this},clear:function(){t.size=t.empty=0,t.object=i={}},test:function(e){return arguments.length?(n=e,t):n},clean:function(){var e,a,o={},s=0;for(e in i)(a=i[e])===r||n&&n(a)||(o[e]=a,++s);t.size=s,t.empty=0,t.object=i=o}},e&&Object.keys(e).forEach(function(n){t.set(n,e[n])}),t}},function(e,t,n){"use strict";t.a=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}},function(e,t,n){"use strict";t.a=function(e){return"boolean"==typeof e}},function(e,t,n){"use strict";t.a=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=n(90),i=n(210),a=n(126),o=n(127);t.a=function(e,t){e&&(e=t?Object(i.a)(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):Object(i.a)(e));var n=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?Object(o.a)(e):Object(a.a)(e).map(o.a).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return Object(r.c)(n,e,"key")}},function(e,t,n){"use strict";t.a=function(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),s=0,u=0,c=0;s<i&&u<a;++c)o[c]=e(t[s],n[u])>0?n[u++]:t[s++];for(;s<i;++s,++c)o[c]=t[s];for(;u<a;++u,++c)o[c]=n[u];return o}},function(e,t,n){"use strict";var r=n(367);t.a=function(e,t,n,i){var a=n||" ",o=e+"",s=t-o.length;return s<=0?o:"left"===i?Object(r.a)(a,s)+o:"center"===i?Object(r.a)(a,~~(s/2))+o+Object(r.a)(a,Math.ceil(s/2)):o+Object(r.a)(a,s)}},function(e,t,n){"use strict";t.a=function(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}},function(e,t,n){"use strict";var r=n(365),i=n(366);function a(e){return Object(i.a)(e)?e:Object(r.a)(e)?e:Date.parse(e)}t.a=function(e,t){return t=t||a,null==e||""===e?null:t(e)}},function(e,t,n){"use strict";t.a=function(e){return null==e||""===e?null:e+""}},function(e,t,n){"use strict";t.a=function(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}},function(e,t,n){"use strict";t.a=function(e,t,n,r){var i=null!=r?r:"",a=e+"",o=a.length,s=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-s):"center"===n?a.slice(0,Math.ceil(s/2))+i+a.slice(o-~~(s/2)):a.slice(0,s)+i}},function(e,t,n){"use strict";t.a=function(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}},function(e,t,n){"use strict";t.a=g;var r=n(886),i=n(887),a=n(888),o=n(889),s=n(909),u=n(910),c=n(911),l=n(912),f=n(212),d=n(913),p=n(91),h=n(92),m=n(0);function g(){this._log=Object(m.logger)(),this.logLevel(m.Error),this._clock=0,this._rank=0;try{this._loader=Object(h.d)()}catch(e){}this._touched=Object(p.a)(m.id),this._pulses={},this._pulse=null,this._heap=new d.a(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}var v=g.prototype;function y(e){return function(){return this._log[e].apply(this,arguments)}}v.stamp=function(){return this._clock},v.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},v.cleanThreshold=1e4,v.add=r.a,v.connect=i.a,v.rank=u.a,v.rerank=u.b,v.pulse=l.a,v.touch=l.b,v.update=l.c,v.changeset=f.a,v.ingest=o.a,v.request=o.b,v.events=a.a,v.on=s.a,v.run=c.c,v.runAsync=c.e,v.runAfter=c.d,v._enqueue=c.a,v._getPulse=c.b,v.error=y("error"),v.warn=y("warn"),v.info=y("info"),v.debug=y("debug"),v.logLevel=y("level")},function(e,t,n){"use strict";var r=n(128),i=n(0);t.a=function(e,t,n,a){var o,s=1;return e instanceof r.a?o=e:e&&e.prototype instanceof r.a?o=new e:Object(i.isFunction)(e)?o=new r.a(null,e):(s=0,o=new r.a(e,t)),this.rank(o),s&&(a=n,n=t),n&&this.connect(o,o.parameters(n,a)),this.touch(o),o}},function(e,t,n){"use strict";t.a=function(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)}},function(e,t,n){"use strict";var r=n(369),i=n(0);t.a=function(e,t,n,a){for(var o,s=this,u=Object(r.b)(n,a),c=function(e){e.dataflow=s;try{u.receive(e)}catch(e){s.error(e)}finally{s.run()}},l=0,f=(o="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):Object(i.array)(e)).length;l<f;++l)o[l].addEventListener(t,c);return u}},function(e,t,n){"use strict";t.a=function(e,t,n){return this.pulse(e,this.changeset().insert(Object(r.e)(t,n)))},t.b=function(e,t,n){var r=this,i=r._pending||function(e){var t,n,r=new Promise(function(e,r){t=e,n=r});return r.requests=0,r.done=function(){0==--r.requests&&e.runAfter(function(){e._pending=null;try{e.run(),t(e)}catch(e){n(e)}})},e._pending=r}(r);i.requests+=1,r.loader().load(t,{context:"dataflow"}).then(function(t){r.ingest(e,t,n)},function(e){r.error("Loading failed",t,e)}).catch(function(e){r.error("Data ingestion failed",t,e)}).then(i.done,i.done)};var r=n(92)},function(e,t,n){"use strict";var r=n(0),i=n(891),a=/^([A-Za-z]+:)?\/\//,o="file://",s=["mimeType","responseType","user","password"];function u(e,t){return Object(r.extend)({},e.options,t)}function c(e,t){var n=this;return n.sanitize(e,t).then(function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)})}function l(e,t){return t=u(this,t),new Promise(function(n,i){var s,u,c,l,f={href:null};null!=e&&"string"==typeof e?(u=a.test(e),(l=t.baseURL)&&!u&&(h(e,"/")||"/"===l[l.length-1]||(e="/"+e),e=l+e),c=(s=h(e,o))||"file"===t.mode||"http"!==t.mode&&!u&&p(),s?e=e.slice(o.length):h(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),c=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(f,"localFile",{value:!!c}),f.href=e,n(f)):i("Sanitize failure, invalid URI: "+Object(r.stringValue)(e))})}function f(e,t){return t=u(this,t),new Promise(function(n,r){var a,o=Object(i.a)(e);for(a in t.headers)o.header(a,t.headers[a]);s.forEach(function(e){t[e]&&o[e](t[e])}),o.on("error",function(t){r(t||"Error loading URL: "+e)}).on("load",function(e){var t=e&&e.responseText;e&&0!==e.status?n(t):r(t||"Error")}).get()})}function d(e){return new Promise(function(t,n){var r=p();r?r.readFile(e,function(e,r){e?n(e):t(r)}):n("No file system access for "+e)})}function p(){var e=n(898);return e&&Object(r.isFunction)(e.readFile)?e:null}function h(e,t){return null!=e&&0===e.lastIndexOf(t,0)}t.a=function(e){return{options:e||{},sanitize:l,load:c,file:d,http:f}}},function(e,t,n){"use strict";var r=n(214);n.d(t,"a",function(){return r.a});n(892),n(893),n(894),n(895),n(896),n(897)},function(e,t,n){"use strict";var r=n(129);Object(r.a)("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)})},function(e,t,n){"use strict";var r=n(129);Object(r.a)("application/json",function(e){return JSON.parse(e.responseText)})},function(e,t,n){"use strict";var r=n(129);Object(r.a)("text/plain",function(e){return e.responseText})},function(e,t,n){"use strict";var r=n(129);Object(r.a)("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t})},function(e,t,n){"use strict";var r=n(76),i=n(370);Object(i.a)("text/csv",r.a)},function(e,t,n){"use strict";var r=n(76),i=n(370);Object(i.a)("text/tab-separated-values",r.c)},function(e,t){},function(e,t,n){"use strict";var r=n(371),i=n(372),a=n(0),o=n(70);t.a=function(e,t,n){t=t||{};var s=Object(i.a)(t.type||"json");return s||Object(a.error)("Unknown data format type: "+t.type),e=s(e,t),t.parse&&function(e,t,n){if(!e.length)return;n=n||o.c;var i,a,s,u,c,l,f,d=e.columns||Object.keys(e[0]);"auto"===t&&(t=Object(r.b)(e,d));for(d=Object.keys(t),i=d.map(function(e){var i,a,s=t[e];if(s&&(0===s.indexOf("date:")||0===s.indexOf("utc:")))return("'"===(a=(i=s.split(/:(.+)?/,2))[1])[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1)),"utc"===i[0]?Object(o.e)(a):n(a);if(!r.c[s])throw Error("Illegal format pattern: "+e+":"+s);return r.c[s]}),u=0,l=e.length,f=d.length;u<l;++u)for(a=e[u],c=0;c<f;++c)s=d[c],a[s]=i[c](a[s])}(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e}},function(e,t,n){"use strict";t.b=function(e){return function(t,n){var r={delimiter:e};return a(t,n?Object(i.extend)(n,r):r)}},t.a=a;var r=n(76),i=n(0);function a(e,t){return t.header&&(e=t.header.map(i.stringValue).join(t.delimiter)+"\n"+e),Object(r.b)(t.delimiter).parse(e+"")}},function(e,t,n){"use strict";var r=n(373),i=n(902),a=n(0);t.a=function(e,t){var n,o,s;return e=Object(r.a)(e,t),n=t&&(s=t.feature)?i.a:t&&(s=t.mesh)?i.b:Object(a.error)("Missing TopoJSON feature or mesh parameter."),(o=(o=e.objects[s])?n(e,o):Object(a.error)("Invalid TopoJSON object: "+s))&&o.features||[o]}},function(e,t,n){"use strict";n(374);var r=n(216);n.d(t,"a",function(){return r.a});var i=n(904);n.d(t,"b",function(){return i.a});n(905),n(906),n(908),n(215),n(377)},function(e,t,n){"use strict";t.a=function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}},function(e,t,n){"use strict";var r=n(216),i=n(376);t.a=function(e){return Object(r.b)(e,function(e,t,n){var r,a,o;if(arguments.length>1)r=function(e,t,n){var r,i=[],a=[];function o(e){var t=e<0?~e:e;(a[t]||(a[t]=[])).push({i:e,g:r})}function s(e){e.forEach(o)}function u(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":t.arcs.forEach(u)}}(t),a.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}(0,t,n);else for(a=0,r=new Array(o=e.arcs.length);a<o;++a)r[a]=a;return{type:"MultiLineString",arcs:Object(i.a)(e,r)}}.apply(this,arguments))}},function(e,t,n){"use strict";n(216),n(376)},function(e,t,n){"use strict";n(907)},function(e,t,n){"use strict";t.a=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}},function(e,t,n){"use strict";n(374),n(377)},function(e,t,n){"use strict";var r=n(128),i=n(212),a=n(0),o={skip:!0};function s(e,t,n,s,u,c){var l,f,d=Object(a.extend)({},c,o);Object(a.isFunction)(n)||(n=Object(a.constant)(n)),void 0===s?l=function(t){e.touch(n(t))}:Object(a.isFunction)(s)?(f=new r.a(null,s,u,!1),l=function(t){var r,a=n(t);f.evaluate(t),Object(i.b)(r=f.value)?e.pulse(a,r,c):e.update(a,r,d)}):l=function(t){e.update(n(t),s,d)},t.apply(l)}function u(e,t,n,i,o,s){var u,c;void 0===i?c=n:(u=Object(a.isFunction)(i)?i:Object(a.constant)(i),i=n?function(e,t){var r=u(e,t);return n.skip()?r:n.skip(!0).value=r}:u,(c=new r.a(null,i,o,!1)).modified(s&&s.force),c.rank=0,n&&(c.skip(!0),c.value=n.value,c.targets().add(n))),t.targets().add(c)}t.a=function(e,t,n,i,a){return(e instanceof r.a?u:s)(this,e,t,n,i,a),this}},function(e,t,n){"use strict";t.a=function(e){e.rank=++this._rank},t.b=function(e){var t,n,i,a=[e];for(;a.length;)if(this.rank(t=a.pop()),n=t._targets)for(i=n.length;--i>=0;)a.push(t=n[i]),t===e&&Object(r.error)("Cycle detected in dataflow graph.")};var r=n(0)},function(e,t,n){"use strict";t.c=function(e){var t,n,i,u,c=this,l=0,f=c.logLevel();if(c._pending)return c.info("Awaiting requests, delaying dataflow run."),0;if(c._pulse)return c.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!c._touched.length)return c.info("Dataflow invoked, but nothing to do."),0;c._pulse=new r.b(c,++c._clock,e),f>=o.Info&&(i=Date.now(),c.debug("-- START PROPAGATION ("+c._clock+") -----"));c._touched.forEach(function(e){c._enqueue(e,!0)}),c._touched=Object(a.a)(o.id);try{for(;c._heap.size()>0;)(t=c._heap.pop()).rank===t.qrank?(n=t.run(c._getPulse(t,e)),f>=o.Debug&&c.debug(t.id,n===r.a?"STOP":n,t),n!==r.a&&(c._pulse=n,t._targets&&t._targets.forEach(function(e){c._enqueue(e)})),++l):c._enqueue(t,!0)}catch(e){u=e}c._pulses={},c._pulse=null,f>=o.Info&&(i=Date.now()-i,c.info("> Pulse "+c._clock+": "+l+" operators; "+i+"ms"));u&&(c._postrun=[],c.error(u));if(c._onrun)try{c._onrun(c,l,u)}catch(e){c.error(e)}if(c._postrun.length){var d=c._postrun;c._postrun=[],d.sort(function(e,t){return t.priority-e.priority}).forEach(function(e){s(c,e.callback)})}return l},t.e=function(){return this._pending||Promise.resolve(this.run())},t.d=function(e,t,n){this._pulse||t?this._postrun.push({priority:n||0,callback:e}):s(this,e)},t.a=function(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse);(n||t)&&(e.qrank=e.rank,this._heap.push(e))},t.b=function(e,t){var n,a=e.source,s=this._clock;if(a&&Object(o.isArray)(a))return n=a.map(function(e){return e.pulse}),new i.a(this,s,n,t);n=this._pulses[e.id],a&&((a=a.pulse)&&a!==r.a?a.stamp===s&&n.target!==e?n=a:n.source=a.source:n.source=[]);return n};var r=n(130),i=n(378),a=n(91),o=n(0);function s(e,t){try{t(e)}catch(t){e.error(t)}}},function(e,t,n){"use strict";t.b=function(e,t){var n=t||i;this._pulse?this._enqueue(e):this._touched.add(e);n.skip&&e.skip(!0);return this},t.c=function(e,t,n){var r=n||i;(e.set(t)||r.force)&&this.touch(e,r);return this},t.a=function(e,t,n){this.touch(e,n||i);var a=new r.b(this,this._clock+(this._pulse?0:1)),o=e.pulse&&e.pulse.source||[];return a.target=e,this._pulses[e.id]=t.pulse(a,o),this};var r=n(130),i={skip:!1,force:!1}},function(e,t,n){"use strict";function r(e){this.cmp=e,this.nodes=[]}t.a=r;var i=r.prototype;function a(e,t,n,r){var i,a,o;for(i=e[n];n>t&&r(i,a=e[o=n-1>>1])<0;)e[n]=a,n=o;return e[n]=i}function o(e,t,n){for(var r,i=t,o=e.length,s=e[t],u=2*t+1;u<o;)(r=u+1)<o&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],u=2*(t=u)+1;return e[t]=s,a(e,i,t,n)}i.size=function(){return this.nodes.length},i.clear=function(){return this.nodes=[],this},i.peek=function(){return this.nodes[0]},i.push=function(e){var t=this.nodes;return t.push(e),a(t,0,t.length-1,this.cmp)},i.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,o(t,0,this.cmp)):e=n,e},i.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,o(t,0,this.cmp),n},i.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,o(t,0,this.cmp)),e}},function(e,t,n){"use strict";t.a=a;var r=n(128),i=n(0);function a(e,t){r.a.call(this,e,null,t)}var o=Object(i.inherits)(a,r.a);o.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e)!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t);var t},o.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},o.transform=function(){}},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),t.a=function(e){var t=i(e);return t&&t.Definition||null},t.b=i;var r={};function i(e){return e=e&&e.toLowerCase(),r.hasOwnProperty(e)?r[e]:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(379);n.d(t,"aggregate",function(){return r.a});var i=n(923);n.d(t,"bin",function(){return i.a});var a=n(924);n.d(t,"collect",function(){return a.a});var o=n(925);n.d(t,"compare",function(){return o.a});var s=n(926);n.d(t,"countpattern",function(){return s.a});var u=n(927);n.d(t,"cross",function(){return u.a});var c=n(928);n.d(t,"density",function(){return c.a});var l=n(930);n.d(t,"extent",function(){return l.a});var f=n(386);n.d(t,"facet",function(){return f.a});var d=n(931);n.d(t,"field",function(){return d.a});var p=n(932);n.d(t,"filter",function(){return p.a});var h=n(933);n.d(t,"flatten",function(){return h.a});var m=n(934);n.d(t,"fold",function(){return m.a});var g=n(935);n.d(t,"formula",function(){return g.a});var v=n(936);n.d(t,"generate",function(){return v.a});var y=n(937);n.d(t,"impute",function(){return y.a});var b=n(938);n.d(t,"joinaggregate",function(){return b.a});var w=n(939);n.d(t,"key",function(){return w.a});var O=n(940);n.d(t,"lookup",function(){return O.a});var x=n(941);n.d(t,"multiextent",function(){return x.a});var j=n(942);n.d(t,"multivalues",function(){return j.a});var _=n(943);n.d(t,"params",function(){return _.a});var S=n(944);n.d(t,"prefacet",function(){return S.a});var M=n(945);n.d(t,"project",function(){return M.a});var E=n(946);n.d(t,"proxy",function(){return E.a});var k=n(947);n.d(t,"relay",function(){return k.a});var N=n(948);n.d(t,"sample",function(){return N.a});var A=n(949);n.d(t,"sequence",function(){return A.a});var P=n(950);n.d(t,"sieve",function(){return P.a});var C=n(387);n.d(t,"subflow",function(){return C.a});var D=n(951);n.d(t,"tupleindex",function(){return D.a});var T=n(952);n.d(t,"values",function(){return T.a});var R=n(953);n.d(t,"window",function(){return R.a})},function(e,t,n){"use strict";t.a=function(e){var t,n,r,i,a,o,s,u,c=e.maxbins||20,l=e.base||10,f=Math.log(l),d=e.divide||[5,2],p=e.extent[0],h=e.extent[1],m=h-p;if(e.step)t=e.step;else if(e.steps){for(a=m/c,o=0,s=e.steps.length;o<s&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(c)/f),r=e.minstep||0,t=Math.max(r,Math.pow(l,Math.round(Math.log(m)/f)-n));Math.ceil(m/t)>c;)t*=l;for(o=0,s=d.length;o<s;++o)(a=t/d[o])>=r&&m/a<=c&&(t=a)}return i=(a=Math.log(t))>=0?0:1+~~(-a/f),u=Math.pow(l,-i-1),(e.nice||void 0===e.nice)&&(p=p<(a=Math.floor(p/t+u)*t)?a-t:a,h=Math.ceil(h/t)*t),{start:p,stop:h,step:t}}},function(e,t,n){"use strict";var r=n(382),i=n(55),a=n(8);t.a=function(e,t,n,o){var s,u,c,l,f=Object(r.a)(e,o),d=f.length,p=t;for(c=0,l=Array(p);c<p;++c){for(s=0,u=0;u<d;++u)s+=f[~~(Object(i.a)()*d)];l[c]=s/d}return[Object(a.m)(l.sort(a.a),n/2),Object(a.m)(l,1-n/2)]}},function(e,t,n){"use strict";var r=n(55);t.a=function(e,t){null==t&&(t=e,e=0);var n,i,a,o={};return o.min=function(e){return arguments.length?(a=i-(n=e||0),o):n},o.max=function(e){return arguments.length?(a=(i=e||0)-n,o):i},o.sample=function(){return n+Math.floor(a*Object(r.a)())},o.pdf=function(e){return e===Math.floor(e)&&e>=n&&e<i?1/a:0},o.cdf=function(e){var t=Math.floor(e);return t<n?0:t>=i?1:(t-n+1)/a},o.icdf=function(e){return e>=0&&e<=1?n-1+Math.floor(e*a):NaN},o.min(e).max(t)}},function(e,t,n){"use strict";var r=n(384),i=n(383),a=n(55),o=n(8);t.a=function(e,t){var n=Object(r.a)(),s={},u=0;return s.data=function(n){return arguments.length?(e=n,u=n?n.length:0,s.bandwidth(t)):e},s.bandwidth=function(n){return arguments.length?(!(t=n)&&e&&(a=(r=e).length,u=Object(i.a)(r),c=(u[2]-u[0])/1.34,t=1.06*Math.min(Math.sqrt(Object(o.t)(r)),c)*Math.pow(a,-.2)),s):t;var r,a,u,c},s.sample=function(){return e[~~(Object(a.a)()*u)]+t*n.sample()},s.pdf=function(r){for(var i=0,a=0;a<u;++a)i+=n.pdf((r-e[a])/t);return i/t/u},s.cdf=function(r){for(var i=0,a=0;a<u;++a)i+=n.cdf((r-e[a])/t);return i/u},s.icdf=function(){throw Error("KDE icdf not supported.")},s.data(e)}},function(e,t,n){"use strict";var r=n(55);t.a=function(e,t){var n,i={},a=0;return i.weights=function(e){return arguments.length?(n=function(e){var t,n=[],r=0;for(t=0;t<a;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<a;++t)n[t]/=r;return n}(t=e||[]),i):t},i.distributions=function(n){return arguments.length?(n?(a=n.length,e=n):(a=0,e=[]),i.weights(t)):e},i.sample=function(){for(var t=Object(r.a)(),i=e[a-1],o=n[0],s=0;s<a-1;o+=n[++s])if(t<o){i=e[s];break}return i.sample()},i.pdf=function(t){for(var r=0,i=0;i<a;++i)r+=n[i]*e[i].pdf(t);return r},i.cdf=function(t){for(var r=0,i=0;i<a;++i)r+=n[i]*e[i].cdf(t);return r},i.icdf=function(){throw Error("Mixture icdf not supported.")},i.distributions(e).weights(t)}},function(e,t,n){"use strict";var r=n(55);t.a=function(e,t){null==t&&(t=null==e?1:e,e=0);var n,i,a,o={};return o.min=function(e){return arguments.length?(a=i-(n=e||0),o):n},o.max=function(e){return arguments.length?(a=(i=e||0)-n,o):i},o.sample=function(){return n+a*Object(r.a)()},o.pdf=function(e){return e>=n&&e<=i?1/a:0},o.cdf=function(e){return e<n?0:e>i?1:(e-n)/a},o.icdf=function(e){return e>=0&&e<=1?n+e*a:NaN},o.min(e).max(t)}},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(54),a=n(0);function o(e){r.g.call(this,null,e)}o.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var s=Object(a.inherits)(o,r.g);s.transform=function(e,t){var n,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],u=s[0],c=s[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(Object(a.accessorFields)(e.field))?t.ADD_MOD:t.ADD,t.visit(n,function(e){var t=r(e);e[u]=t,e[c]=null==t?null:i+o*(1+(t-i)/o)}),t.modifies(s)},s._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,o=Object(i.a)(e),s=o.start,u=o.stop,c=o.step;null!=(t=e.anchor)&&(n=t-(s+c*Math.floor((t-s)/c)),s+=n,u+=n);var l=function(e){var t=r(e);return null==t?null:(t=Math.max(s,Math.min(+t,u-c)),s+c*Math.floor((t-s)/c))};return l.start=s,l.stop=u,l.step=c,this.value=Object(a.accessor)(l,Object(a.accessorFields)(r),e.name||"bin_"+Object(a.accessorName)(r))}},function(e,t,n){"use strict";t.a=o;var r=n(385),i=n(1),a=n(0);function o(e){i.g.call(this,[],e)}o.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(a.inherits)(o,i.g).transform=function(e,t){var n=t.fork(t.ALL),a=Object(r.a)(i.r,this.value,n.materialize(n.ADD).add),o=e.sort,s=t.changed()||o&&(e.modified("sort")||t.modified(o.fields));return n.visit(n.REM,a.remove),this.modified(s),this.value=n.source=a.data(o,s),t.source&&t.source.root&&(this.value.root=t.source.root),n}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.d.call(this,null,o,e)}function o(e){return this.value&&!e.modified()?this.value:Object(i.compare)(e.fields,e.orders)}Object(i.inherits)(a,r.d)},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}a.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var o=Object(i.inherits)(a,r.g);o.transform=function(e,t){function n(t){return function(n){for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(s(n),e.case,a)||[],u=0,c=i.length;u<c;++u)o.test(r=i[u])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,s=e.field,u=e.as||["text","count"],c=n(function(e){i[e]=1+(i[e]||0)}),l=n(function(e){i[e]-=1});return r?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,l)),this._finish(t,u)},o._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},o._finish=function(e,t){var n,i,a,o=this._counts,s=this._tuples||(this._tuples={}),u=t[0],c=t[1],l=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in o)i=s[n],a=o[n]||0,!i&&a?(s[n]=i=Object(r.k)({}),i[u]=n,i[c]=a,l.add.push(i)):0===a?(i&&l.rem.push(i),o[n]=null,s[n]=null):i[c]!==a&&(i[c]=a,l.mod.push(i));return l.modifies(t)}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}a.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(i.inherits)(a,r.g).transform=function(e,t){var n=t.fork(t.NO_SOURCE),a=this.value,o=e.as||["a","b"],s=o[0],u=o[1];return!a||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter")?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,i){for(var a,o,s=[],u={},c=e.length,l=0;l<c;++l)for(u[t]=o=e[l],a=0;a<c;++a)u[n]=e[a],i(u)&&(s.push(Object(r.k)(u)),(u={})[t]=o);return s}(a,s,u,e.filter||i.truthy)):n.mod=a,n.source=this.value,n.modifies(o)}},function(e,t,n){"use strict";t.a=s;var r=n(929),i=n(1),a=n(0),o=n(8);function s(e){i.g.call(this,null,e)}var u=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],c={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:u},{name:"weights",type:"number",array:!0}]};s.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:u.concat(c)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(a.inherits)(s,i.g).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var s=Object(r.a)(e.distribution,function(e){return function(){return e.materialize(e.SOURCE).source}}(t)),u=e.method||"pdf";"pdf"!==u&&"cdf"!==u&&Object(a.error)("Invalid density method: "+u),e.extent||s.data||Object(a.error)("Missing density extent parameter."),u=s[u];var c=e.as||["value","density"],l=e.extent||Object(o.f)(s.data()),f=(l[1]-l[0])/(e.steps||100),d=Object(o.n)(l[0],l[1]+f/2,f).map(function(e){var t={};return t[c[0]]=e,t[c[1]]=u(e),Object(i.k)(t)});this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}},function(e,t,n){"use strict";t.a=function e(t,n){var r=t[s];a.hasOwnProperty(r)||Object(i.error)("Unknown distribution function: "+r);var c=a[r]();for(var l in t)l===u?c.data((t.from||n()).map(t[l])):l===o?c[l](t[l].map(function(t){return e(t,n)})):typeof c[l]===s&&c[l](t[l]);return c};var r=n(54),i=n(0),a={kde:r.f,mixture:r.g,normal:r.h,uniform:r.i},o="distributions",s="function",u="field"},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,[1/0,-1/0],e)}a.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(i.inherits)(a,r.g).transform=function(e,t){var n=this.value,r=e.field,i=n[0],a=n[1],o=t.ADD;(t.changed()||t.modified(r.fields)||e.modified("field"))&&(o=t.SOURCE,i=1/0,a=-1/0),t.visit(o,function(e){var t=r(e);null!=t&&((t=+t)<i&&(i=t),t>a&&(a=t))}),this.value=[i,a]}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.d.call(this,null,o,e)}function o(e){return this.value&&!e.modified()?this.value:Object(i.isArray)(e.name)?Object(i.array)(e.name).map(function(e){return Object(i.field)(e)}):Object(i.field)(e.name,e.as)}Object(i.inherits)(a,r.d)},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,Object(i.fastmap)(),e)}a.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(i.inherits)(a,r.g).transform=function(e,t){var n=t.dataflow,i=this.value,a=t.fork(),o=a.add,s=a.rem,u=a.mod,c=e.expr,l=!0;function f(t){var n=Object(r.r)(t),a=c(t,e),f=i.get(n);a&&f?(i.delete(n),o.push(t)):a||f?l&&a&&!f&&u.push(t):(i.set(n,1),s.push(t))}return t.visit(t.REM,function(e){var t=Object(r.r)(e);i.has(t)?i.delete(t):s.push(e)}),t.visit(t.ADD,function(t){c(t,e)?o.push(t):i.set(Object(r.r)(t),1)}),t.visit(t.MOD,f),e.modified()&&(l=!1,t.visit(t.REFLOW,f)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),a}},function(e,t,n){"use strict";t.a=o;var r=n(388),i=n(1),a=n(0);function o(e){i.g.call(this,[],e)}o.Definition={type:"Flatten",metadata:{generates:!0,source:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},Object(a.inherits)(o,i.g).transform=function(e,t){var n=t.fork(t.NO_SOURCE),a=e.fields,o=Object(r.a)(a,e.as||[]),s=o.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,r,u,c=a.map(function(t){return t(e)}),l=c.reduce(function(e,t){return Math.max(e,t.length)},0),f=0;f<l;++f){for(r=Object(i.j)(e),t=0;t<s;++t)r[o[t]]=null==(u=c[t][f])?null:u;n.add.push(r)}}),this.value=n.source=n.add,n.modifies(o)}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,[],e)}a.Definition={type:"Fold",metadata:{generates:!0,source:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(i.inherits)(a,r.g).transform=function(e,t){var n=t.fork(t.NO_SOURCE),a=e.fields,o=a.map(i.accessorName),s=e.as||["key","value"],u=s[0],c=s[1],l=a.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,i=0;i<l;++i)(t=Object(r.j)(e))[u]=o[i],t[c]=a[i](e),n.add.push(t)}),this.value=n.source=n.add,n.modifies(s)}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}a.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(i.inherits)(a,r.g).transform=function(e,t){var n=e.expr,r=e.as,i=e.modified(),a=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(a,function(t){t[r]=n(t,e)})}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,[],e)}Object(i.inherits)(a,r.g).transform=function(e,t){var n,i,a,o=this.value,s=t.fork(t.ALL),u=e.size-o.length,c=e.generator;if(u>0){for(n=[];--u>=0;)n.push(a=Object(r.k)(c(e))),o.push(a);s.add=s.add.length?s.materialize(s.ADD).add.concat(n):n}else i=o.slice(0,-u),s.rem=s.rem.length?s.materialize(s.REM).rem.concat(i):i,o=o.slice(-u);return s.source=this.value=o,s}},function(e,t,n){"use strict";t.a=u;var r=n(1),i=n(0),a=n(8),o={value:"value",median:a.i,mean:a.h,min:a.k,max:a.g},s=[];function u(e){r.g.call(this,[],e)}u.Definition={type:"Impute",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(i.inherits)(u,r.g).transform=function(e,t){var n,a,u,c,l,f,d,p,h,m,g=t.fork(t.ALL),v=function(e){var t,n=e.method||o.value;if(null!=o[n])return n===o.value?(t=void 0!==e.value?e.value:0,function(){return t}):o[n];Object(i.error)("Unrecognized imputation method: "+n)}(e),y=function(e){var t=e.field;return function(e){return e?t(e):NaN}}(e),b=Object(i.accessorName)(e.field),w=Object(i.accessorName)(e.key),O=(e.groupby||[]).map(i.accessorName),x=function(e,t,n,r){var i,a,o,u,c,l,f,d,p=function(e){return e(d)},h=[],m=r?r.slice():[],g={},v={};for(m.forEach(function(e,t){g[e]=t+1}),u=0,f=e.length;u<f;++u)d=e[u],l=n(d),c=g[l]||(g[l]=m.push(l)),a=(i=t?t.map(p):s)+"",(o=v[a])||(o=v[a]=[],h.push(o),o.values=i),o[c-1]=d;return h.domain=m,h}(t.source,e.groupby,e.key,e.keyvals),j=[],_=this.value,S=x.domain.length;for(l=0,p=x.length;l<p;++l)for(u=(n=x[l]).values,a=NaN,d=0;d<S;++d)if(null==n[d]){for(c=x.domain[d],m={_impute:!0},f=0,h=u.length;f<h;++f)m[O[f]]=u[f];m[w]=c,m[b]=isNaN(a)?a=v(n,y):a,j.push(Object(r.k)(m))}return j.length&&(g.add=g.materialize(g.ADD).add.concat(j)),_.length&&(g.rem=g.materialize(g.REM).rem.concat(_)),this.value=j,g}},function(e,t,n){"use strict";t.a=o;var r=n(379),i=n(131),a=n(0);function o(e){r.a.call(this,e)}o.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:i.a},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var s=Object(a.inherits)(o,r.a);s.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(n=r.value=r.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),r.changes(),t.visit(t.SOURCE,function(e){Object(a.extend)(e,n[r.cellkey(e)].tuple)}),t.reflow(i).modifies(this._outputs)},s.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.d.call(this,null,o,e)}function o(e){return this.value&&!e.modified()?this.value:Object(i.key)(e.fields,e.flat)}Object(i.inherits)(a,r.d)},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,{},e)}a.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(i.inherits)(a,r.g).transform=function(e,t){var n,r,a=t,o=e.as,s=e.fields,u=e.index,c=e.values,l=null==e.default?null:e.default,f=e.modified(),d=f?t.SOURCE:t.ADD,p=s.length;return c?(r=c.length,p>1&&!o&&Object(i.error)('Multi-field lookup requires explicit "as" parameter.'),o&&o.length!==p*r&&Object(i.error)('The "as" parameter has too few output field names.'),o=o||c.map(i.accessorName),n=function(e){for(var t,n,i=0,a=0;i<p;++i)if(null==(n=u.get(s[i](e))))for(t=0;t<r;++t,++a)e[o[a]]=l;else for(t=0;t<r;++t,++a)e[o[a]]=c[t](n)}):(o||Object(i.error)("Missing output field names."),n=function(e){for(var t,n=0;n<p;++n)t=u.get(s[n](e)),e[o[n]]=null==t?l:t}),f?a=t.reflow(!0):d|=s.some(function(e){return t.modified(e.fields)})?t.MOD:0,t.visit(d,n),a.modifies(o)}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.d.call(this,null,o,e)}function o(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=1/0,a=-1/0,o=e.extents;for(t=0,n=o.length;t<n;++t)(r=o[t])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}Object(i.inherits)(a,r.d)},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.d.call(this,null,o,e)}function o(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}Object(i.inherits)(a,r.d)},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}Object(i.inherits)(a,r.g),a.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}},function(e,t,n){"use strict";t.a=o;var r=n(386),i=n(1),a=n(0);function o(e){r.a.call(this,e)}Object(a.inherits)(o,r.a).transform=function(e,t){var n=this,r=e.subflow,o=e.field;return(e.modified("field")||o&&t.modified(Object(a.accessorFields)(o)))&&Object(a.error)("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,function(e){var a=n.subflow(Object(i.r)(e),r,t,e);o?o(e).forEach(function(e){a.mod(e)}):a.mod(e)}),t.visit(t.ADD,function(e){var a=n.subflow(Object(i.r)(e),r,t,e);o?o(e).forEach(function(e){a.add(Object(i.k)(e))}):a.add(e)}),t.visit(t.REM,function(e){var a=n.subflow(Object(i.r)(e),r,t,e);o?o(e).forEach(function(e){a.rem(e)}):a.rem(e)}),t}},function(e,t,n){"use strict";t.a=o;var r=n(388),i=n(1),a=n(0);function o(e){i.g.call(this,null,e)}o.Definition={type:"Project",metadata:{generates:!0,changes:!0,modifies:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(a.inherits)(o,i.g).transform=function(e,t){var n,a,o=e.fields,s=Object(r.a)(e.fields,e.as||[]),u=o?function(e,t){return function(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}(e,t,o,s)}:i.n;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=Object(i.r)(e);n.rem.push(a[t]),a[t]=null}),t.visit(t.ADD,function(e){var t=u(e,Object(i.k)({}));a[Object(i.r)(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(u(e,a[Object(i.r)(e)]))}),n}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}Object(i.inherits)(a,r.g).transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}Object(i.inherits)(a,r.g).transform=function(e,t){var n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=Object(r.r)(e);n.rem.push(i[t]),i[t]=null}),t.visit(t.ADD,function(e){var t=Object(r.j)(e);i[Object(r.r)(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(Object(r.n)(e,i[Object(r.r)(e)]))})),n}},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(54),a=n(0);function o(e){r.g.call(this,[],e),this.count=0}o.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(a.inherits)(o,r.g).transform=function(e,t){var n=t.fork(t.NO_SOURCE),a=e.modified("size"),o=e.size,s=this.value,u=this.count,c=0,l=s.reduce(function(e,t){return e[Object(r.r)(t)]=1,e},{});function f(e){var t,a;s.length<o?s.push(e):(a=~~((u+1)*Object(i.d)()))<s.length&&a>=c&&(t=s[a],l[Object(r.r)(t)]&&n.rem.push(t),s[a]=e),++u}if(t.rem.length&&(t.visit(t.REM,function(e){var t=Object(r.r)(e);l[t]&&(l[t]=-1,n.rem.push(e)),--u}),s=s.filter(function(e){return-1!==l[Object(r.r)(e)]})),(t.rem.length||a)&&s.length<o&&t.source&&(c=u=s.length,t.visit(t.SOURCE,function(e){l[Object(r.r)(e)]||f(e)}),c=-1),a&&s.length>o){for(var d=0,p=s.length-o;d<p;++d)l[Object(r.r)(s[d])]=-1,n.rem.push(s[d]);s=s.slice(p)}return t.mod.length&&t.visit(t.MOD,function(e){l[Object(r.r)(e)]&&n.mod.push(e)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||c<0)&&(n.add=s.filter(function(e){return!l[Object(r.r)(e)]})),this.count=u,this.value=n.source=s,n}},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(0),a=n(8);function o(e){r.g.call(this,null,e)}o.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]},Object(i.inherits)(o,r.g).transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Object(a.n)(e.start,e.stop,e.step||1).map(r.k),n.add=t.add.concat(this.value),n}}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e),this.modified(!0)}Object(i.inherits)(a,r.g).transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,Object(i.fastmap)(),e)}Object(i.inherits)(a,r.g).transform=function(e,t){var n=t.dataflow,r=e.field,i=this.value,a=!0;function o(e){i.set(r(e),e)}return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,function(e){i.delete(r(e))}),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}Object(i.inherits)(a,r.g).transform=function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))}},function(e,t,n){"use strict";t.a=f;var r=n(380),i=n(131),a=n(385),o=n(389),s=n(954),u=n(1),c=n(0),l=n(8);function f(e){u.g.call(this,{},e),this._mlen=0,this._mods=[]}f.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:o.a.concat(i.a)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var d=Object(c.inherits)(f,u.g);function p(e,t,n){var r=n.sort,i=r&&!n.ignorePeers,a=n.frame||[null,0],o=e.data(r),s=o.length,u=0,f=i?Object(l.e)(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||Object(c.constant)(-1)};for(t.init();u<s;++u)h(d,a,u,s),i&&m(d,f),t.update(d,o[u])}function h(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function m(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}d.transform=function(e,t){var n,i,a=this,o=a.state,u=e.modified();this.stamp=t.stamp,o&&!u||(o=a.state=new s.a(e));var c=Object(r.a)(e.groupby);function l(e){return a.group(c(e))}for(u||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,function(e){l(e).add(e)})):(t.visit(t.REM,function(e){l(e).remove(e)}),t.visit(t.ADD,function(e){l(e).add(e)})),n=0,i=a._mlen;n<i;++n)p(a._mods[n],o,e);return a._mlen=0,a._mods=[],t.reflow(u).modifies(o.outputs)},d.group=function(e){var t=this.value[e];return t||((t=this.value[e]=Object(a.a)(u.r)).stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}},function(e,t,n){"use strict";t.a=s;var r=n(131),i=n(381),a=n(389),o=n(0);function s(e){var t=Object(o.array)(e.ops),n=Object(o.array)(e.fields),s=Object(o.array)(e.params),u=Object(o.array)(e.as),c=this.outputs=[],l=this.windows=[],f={},d={},p=!0,h=[],m=[];function g(e){Object(o.array)(Object(o.accessorFields)(e)).forEach(function(e){f[e]=1})}g(e.sort),t.forEach(function(e,t){var i=n[t],f=Object(o.accessorName)(i),v=Object(r.d)(e,f,u[t]);if(g(i),c.push(v),a.c.hasOwnProperty(e))l.push(Object(a.b)(e,n[t],s[t],v));else{if(null==i&&"count"!==e&&Object(o.error)("Null aggregate field specified."),"count"===e)return void h.push(v);p=!1;var y=d[f];y||((y=d[f]=[]).field=i,m.push(y)),y.push(Object(r.c)(e,v))}}),(h.length||m.length)&&(this.cell=function(e,t,n){e=e.map(function(e){return Object(r.b)(e,e.field)});var a={num:0,agg:null,store:!1,count:t};if(!n)for(var o=e.length,s=a.agg=Array(o),u=0;u<o;++u)s[u]=new e[u](a);if(a.store)var c=a.data=new i.a;return a.add=function(e){if(a.num+=1,!n){c&&c.add(e);for(var t=0;t<o;++t)s[t].add(s[t].get(e),e)}},a.rem=function(e){if(a.num-=1,!n){c&&c.rem(e);for(var t=0;t<o;++t)s[t].rem(s[t].get(e),e)}},a.set=function(e){var r,i;for(c&&c.values(),r=0,i=t.length;r<i;++r)e[t[r]]=a.num;if(!n)for(r=0,i=s.length;r<i;++r)s[r].set(e)},a.init=function(){a.num=0,c&&c.reset();for(var e=0;e<o;++e)s[e].init()},a}(m,h,p)),this.inputs=Object.keys(f)}var u=s.prototype;u.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},u.update=function(e,t){var n,r=this.cell,i=this.windows,a=e.data,o=i&&i.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(a[n]);for(n=e.p1;n<e.i1;++n)r.add(a[n]);r.set(t)}for(n=0;n<o;++n)i[n].update(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(956);n.d(t,"bound",function(){return r.a});var i=n(980);n.d(t,"identifier",function(){return i.a});var a=n(981);n.d(t,"mark",function(){return a.a});var o=n(982);n.d(t,"overlap",function(){return o.a});var s=n(983);n.d(t,"render",function(){return s.a});var u=n(984);n.d(t,"viewlayout",function(){return u.a})},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(19),a=n(0);function o(e){r.g.call(this,null,e)}function s(e,t,n){return t(e.bounds.clear(),e,n)}Object(a.inherits)(o,r.g).transform=function(e,t){var n,r=t.dataflow,a=e.mark,o=a.marktype,u=i.h[o],c=u.bound,l=a.bounds;return u.nested?(a.items.length&&r.dirty(a.items[0]),l=s(a,c),a.items.forEach(function(e){e.bounds.clear().union(l)})):"group"===o||e.modified()?(t.visit(t.MOD,function(e){r.dirty(e)}),l.clear(),a.items.forEach(function(e){l.union(s(e,c))})):(n=t.changed(t.REM),t.visit(t.ADD,function(e){l.union(s(e,c))}),t.visit(t.MOD,function(e){n=n||l.alignsWith(e.bounds),r.dirty(e),l.union(s(e,c))}),n&&(l.clear(),a.items.forEach(function(e){l.union(e.bounds)}))),Object(i.p)(a),t.modifies("bounds")}},function(e,t,n){"use strict";var r=0;t.a=function(e,t){var n,i=[];return n={id:"gradient_"+r++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:i,stop:function(e,t){return i.push({offset:e,color:t}),n}}}},function(e,t){},function(e,t){},function(e,t,n){"use strict";t.a=o;var r=n(45),i=n(390),a=n(395);function o(e){arguments.length?this.root=Object(a.a)(e):(this.root=u({marktype:"group",name:"root",role:"frame"}),this.root.items=[new i.a(this.root)])}var s=o.prototype;function u(e,t){return{bounds:new r.a,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}s.toJSON=function(e){return Object(a.b)(this.root,e||0)},s.mark=function(e,t,n){var r=u(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},function(e,t,n){"use strict";var r=n(46),i=n(218);t.a=Object(i.a)("arc",r.a)},function(e,t,n){"use strict";t.b=function(e,t,n,i,o,s,u,c,l){var f=a.call(arguments);if(r[f])return r[f];var d=u*(Math.PI/180),p=Math.sin(d),h=Math.cos(d);n=Math.abs(n),i=Math.abs(i);var m=h*(c-e)*.5+p*(l-t)*.5,g=h*(l-t)*.5-p*(c-e)*.5,v=m*m/(n*n)+g*g/(i*i);v>1&&(v=Math.sqrt(v),n*=v,i*=v);var y=h/n,b=p/n,w=-p/i,O=h/i,x=y*c+b*l,j=w*c+O*l,_=y*e+b*t,S=w*e+O*t,M=1/((_-x)*(_-x)+(S-j)*(S-j))-.25;M<0&&(M=0);var E=Math.sqrt(M);s==o&&(E=-E);var k=.5*(x+_)-E*(S-j),N=.5*(j+S)+E*(_-x),A=Math.atan2(j-N,x-k),P=Math.atan2(S-N,_-k)-A;P<0&&1===s?P+=2*Math.PI:P>0&&0===s&&(P-=2*Math.PI);for(var C=Math.ceil(Math.abs(P/(.5*Math.PI+.001))),D=[],T=0;T<C;++T){var R=A+T*P/C,L=A+(T+1)*P/C;D[T]=[k,N,R,L,n,i,p,h]}return r[f]=D},t.a=function(e){var t=a.call(e);if(i[t])return i[t];var n=e[0],r=e[1],o=e[2],s=e[3],u=e[4],c=e[5],l=e[6],f=e[7],d=f*u,p=-l*c,h=l*u,m=f*c,g=Math.cos(o),v=Math.sin(o),y=Math.cos(s),b=Math.sin(s),w=.5*(s-o),O=Math.sin(.5*w),x=8/3*O*O/Math.sin(w),j=n+g-x*v,_=r+v+x*g,S=n+y,M=r+b,E=S+x*b,k=M-x*y;return i[t]=[d*j+p*_,h*j+m*_,d*E+p*k,h*E+m*k,d*S+p*M,h*S+m*M]};var r={},i={},a=[].join},function(e,t,n){"use strict";t.a=function(e,t,n){for(var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,s=n.x1+t.x2*r,u=n.y1+t.y2*i,c=t.stops,l=0,f=c.length,d=e.createLinearGradient(a,o,s,u);l<f;++l)d.addColorStop(c[l].offset,c[l].color);return d}},function(e,t,n){"use strict";var r=n(46),i=n(221);t.a=Object(i.a)("area",r.b)},function(e,t,n){"use strict";var r=n(46),i=n(57),a=n(42),o=n(135),s=n(219),u=n(137),c=n(136),l=.5;t.a={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",Object(c.a)(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,a=n.length;r<a;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&Object(i.a)(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var i=this;Object(a.b)(t,function(t){var u,c,f=t.x||0,d=t.y||0,p=t.width||0,h=t.height||0;e.save(),e.translate(f,d),(t.stroke||t.fill)&&(c=null==t.opacity?1:t.opacity)>0&&(e.beginPath(),u=t.stroke?l:0,Object(r.d)(e,t,u,u),t.fill&&Object(s.a)(e,t,c)&&e.fill(),t.stroke&&Object(o.a)(e,t,c)&&e.stroke()),t.clip&&(e.beginPath(),e.rect(0,0,p,h),e.clip()),n&&n.translate(-f,-d),Object(a.b)(t,function(t){i.draw(e,t,n)}),n&&n.translate(f,d),e.restore()})},pick:function(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;var s=this;return Object(a.a)(t,function(u){var c,l,f,d;if(!(d=u.bounds)||d.contains(i,o))return l=u.x||0,f=u.y||0,e.save(),e.translate(l,f),l=i-l,f=o-f,c=Object(a.a)(u,function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,l,f)?s.pick(e,n,r,l,f):null}),e.restore(),c||((c=!1!==t.interactive&&(u.fill||u.stroke)&&l>=0&&l<=u.width&&f>=0&&f<=u.height)?u:null)})},background:function(e,t){var n=t.stroke?l:0;e("class","background"),e("d",Object(r.d)(null,t,n,n))},foreground:function(e,t,n){e("clip-path",t.clip?Object(u.a)(n,t,t):null)}}},function(e,t,n){"use strict";var r=n(42),i=n(58),a=n(220);function o(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function s(e,t){return"center"===e?t/2:"right"===e?t:0}function u(e,t){return"middle"===e?t/2:"bottom"===e?t:0}t.a={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=o(t,n),i=t.x||0,c=t.y||0,l=(null!=t.width?t.width:r.width)||0,f=(null!=t.height?t.height:r.height)||0,d=!1===t.aspect?"none":"xMidYMid";i-=s(t.align,l),c-=u(t.baseline,f),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",Object(a.a)(i,c)),e("width",l),e("height",f),e("preserveAspectRatio",d)},bound:function(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=s(t.align,a),i-=u(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function(e,t,n){var i=this;Object(r.b)(t,function(t){if(!n||n.intersects(t.bounds)){var r,a,c,l,f=o(t,i),d=t.x||0,p=t.y||0,h=(null!=t.width?t.width:f.width)||0,m=(null!=t.height?t.height:f.height)||0;d-=s(t.align,h),p-=u(t.baseline,m),!1!==t.aspect&&(a=f.width/f.height,c=t.width/t.height,a==a&&c==c&&a!==c&&(c<a?(p+=(m-(l=h/a))/2,m=l):(d+=(h-(l=m*a))/2,h=l))),f.loaded&&(e.globalAlpha=null!=(r=t.opacity)?r:1,e.drawImage(f,d,p,h,m))}})},pick:Object(i.b)(),get:o,xOffset:s,yOffset:u}},function(e,t,n){"use strict";var r=n(46),i=n(221);t.a=Object(i.a)("line",r.c)},function(e,t,n){"use strict";var r=n(57),i=n(93),a=n(133),o=n(217),s=n(134),u=n(58),c=n(136);function l(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=Object(a.a)(n)).path=n),Object(o.a)(e,r,t.x,t.y)}t.a={type:"path",tag:"path",nested:!1,attr:function(e,t){e("transform",Object(c.a)(t)),e("d",t.path)},bound:function(e,t){return l(Object(i.a)(e),t)?e.set(0,0,0,0):Object(r.a)(e,t)},draw:Object(s.a)(l),pick:Object(u.c)(l)}},function(e,t,n){"use strict";var r=n(57),i=n(46),a=n(134),o=n(58);function s(e,t){e.beginPath(),Object(i.d)(e,t)}t.a={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Object(i.d)(null,t))},bound:function(e,t){var n,i;return Object(r.a)(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)},draw:Object(a.a)(s),pick:Object(o.c)(s)}},function(e,t,n){"use strict";var r=n(57),i=n(42),a=n(58),o=n(135),s=n(136);function u(e,t,n){var r,i,a,s;return!(!t.stroke||!Object(o.a)(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,s=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,s),!0)}t.a={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",Object(s.a)(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,i;return Object(r.a)(e.set(n=t.x||0,i=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:i),t)},draw:function(e,t,n){Object(i.b)(t,function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&u(e,t,r)&&e.stroke()}})},pick:Object(a.b)(function(e,t,n,r){return!!e.isPointInStroke&&u(e,t,1)&&e.isPointInStroke(n,r)})}},function(e,t,n){"use strict";var r=n(46),i=n(218);t.a=Object(i.a)("shape",r.e)},function(e,t,n){"use strict";var r=n(46),i=n(218);t.a=Object(i.a)("symbol",r.f)},function(e,t,n){"use strict";var r=n(45),i=n(138),a=n(42),o=n(219),s=n(58),u=n(135),c=n(220),l={left:"start",center:"middle",right:"end"},f=new r.a;function d(e,t,n){var r,a,o=i.c.height(t),s=t.align,u=t.radius||0,c=t.x||0,l=t.y||0,f=t.dx||0,d=(t.dy||0)+Object(i.b)(t)-Math.round(.8*o);return u&&(a=(t.theta||0)-Math.PI/2,c+=u*Math.cos(a),l+=u*Math.sin(a)),r=i.c.width(t),"center"===s?f-=r/2:"right"===s&&(f-=r),e.set(f+=c,d+=l,f+r,d+o),t.angle&&!n&&e.rotate(t.angle*Math.PI/180,c,l),e.expand(n||!r?0:1)}t.a={type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,a=(t.dy||0)+Object(i.b)(t),o=t.x||0,s=t.y||0,u=t.angle||0,f=t.radius||0;f&&(n=(t.theta||0)-Math.PI/2,o+=f*Math.cos(n),s+=f*Math.sin(n)),e("text-anchor",l[t.align]||"start"),u?(n=Object(c.a)(o,s)+" rotate("+u+")",(r||a)&&(n+=" "+Object(c.a)(r,a))):n=Object(c.a)(o+r,s+a),e("transform",n)},bound:d,draw:function(e,t,n){Object(a.b)(t,function(t){var r,a,s,c,l,f;n&&!n.intersects(t.bounds)||(f=Object(i.d)(t))&&0!==(r=null==t.opacity?1:t.opacity)&&(e.font=Object(i.a)(t),e.textAlign=t.align||"left",a=t.x||0,s=t.y||0,(c=t.radius)&&(l=(t.theta||0)-Math.PI/2,a+=c*Math.cos(l),s+=c*Math.sin(l)),t.angle&&(e.save(),e.translate(a,s),e.rotate(t.angle*Math.PI/180),a=s=0),a+=t.dx||0,s+=(t.dy||0)+Object(i.b)(t),t.fill&&Object(o.a)(e,t,r)&&e.fillText(f,a,s),t.stroke&&Object(u.a)(e,t,r)&&e.strokeText(f,a,s),t.angle&&e.restore())})},pick:Object(s.b)(function(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=d(f,t,!0),s=-t.angle*Math.PI/180,u=Math.cos(s),c=Math.sin(s),l=t.x,p=t.y,h=u*i-c*a+(l-l*u+p*c),m=c*i+u*a+(p-l*c-p*u);return o.contains(h,m)})}},function(e,t,n){"use strict";var r=n(46),i=n(221);t.a=Object(i.a)("trail",r.g)},function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){var n=t.clip;if(e.save(),e.beginPath(),Object(r.isFunction)(n))n(e);else{var i=t.group;e.rect(0,0,i.width||0,i.height||0)}e.clip()}},function(e,t,n){"use strict";var r="undefined"!=typeof window&&window.devicePixelRatio||1;t.a=function(e,t,n,i,a){var o="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,s=e.getContext("2d"),u=o?r:a;return e.width=t*u,e.height=n*u,o&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*i[0],u*i[1]),e}},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),t.b=function(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(c[e]=t,this):c[e]};var r=n(403),i=n(405),a=n(406),o=n(407),s=n(410),u={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},c={};c.canvas=c.png={renderer:i.a,headless:i.a,handler:r.a},c.svg={renderer:o.a,headless:s.a,handler:a.a},c.none={}},function(e,t,n){"use strict";var r=n(45),i=n(93),a=n(0),o=new r.a;t.a=function(e){var t=e.clip;if(Object(a.isFunction)(t))t(Object(i.a)(o.clear()));else{if(!t)return;o.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(o)}},function(e,t,n){"use strict";t.b=o,t.a=s;var r=n(133),i=n(0),a=1e-9;function o(e,t,n){return e===t||("path"===n?s(e,t):e instanceof Date&&t instanceof Date?+e==+t:Object(i.isNumber)(e)&&Object(i.isNumber)(t)?Math.abs(e-t)<=a:e&&t&&(Object(i.isObject)(e)||Object(i.isObject)(t))?null!=e&&null!=t&&function(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!o(e[n],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function s(e,t){return o(Object(r.a)(e),Object(r.a)(t))}},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(0),a=":vega_identifier:";function o(e){r.g.call(this,0,e)}o.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(i.inherits)(o,r.g).transform=function(e,t){var n=function(e){var t=e._signals[a];t||(e._signals[a]=t=e.add(0));return t}(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++r)}),n.set(this.value=r),t}},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(19),a=n(0);function o(e){r.g.call(this,null,e)}Object(a.inherits)(o,r.g).transform=function(e,t){var n=this.value;n||((n=t.dataflow.scenegraph().mark(e.markdef,function(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index)).group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r="group"===n.marktype?i.e:i.g;return t.visit(t.ADD,function(e){r.call(e,n)}),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}},function(e,t,n){"use strict";t.a=s;var r=n(411),i=n(1),a=n(19),o=n(0);function s(e){i.g.call(this,null,e)}var u=Object(o.inherits)(s,i.g),c={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&l(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};function l(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function f(e){for(var t,n=1,r=e.length,i=e[0].bounds;n<r;i=t,++n)if(l(i,t=e[n].bounds))return!0}function d(e){var t=e.bounds;return t.width()>1&&t.height()>1}u.transform=function(e,t){var n=c[e.method]||c.parity,i=t.materialize(t.SOURCE).source;if(i){e.sort&&(i=i.slice().sort(e.sort)),"greedy"===e.method&&(i=i.filter(d)),i.forEach(function(e){e.opacity=1});var s,u,l,p,h,m=i;if(m.length>=3&&f(m)){t=t.reflow(e.modified()).modifies("opacity");do{m=n(m)}while(m.length>=3&&f(m));m.length<3&&!Object(o.peek)(i).opacity&&(m.length>1&&(Object(o.peek)(m).opacity=0),Object(o.peek)(i).opacity=1)}if(e.boundScale){var g=(s=e.boundScale,u=e.boundOrient,l=e.boundTolerance,p=s.range(),h=new a.a,u===r.d||u===r.a?h.set(p[0],-1/0,p[1],1/0):h.set(-1/0,p[0],1/0,p[1]),h.expand(l||1),function(e){return h.encloses(e.bounds)});i.forEach(function(e){g(e)||(e.opacity=0)})}return t}}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}Object(i.inherits)(a,r.g).transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}},function(e,t,n){"use strict";t.a=S;var r=n(985),i=n(411),a=n(1),o=n(19),s=n(0),u="fit",c="fit-x",l="fit-y",f="pad",d="none",p="padding",h="axis",m="title",g="frame",v="legend",y="scope",b="row-header",w="row-footer",O="column-header",x="column-footer",j=.5,_=new o.a;function S(e){a.g.call(this,null,e)}function M(e,t,n){return e[t]===n?0:(e[t]=n,1)}function E(e){var t=e.items[0].datum.orient;return t===i.b||t===i.c}function k(e,t,n,r){var a,s,u=t.items[0],c=u.datum,l=c.orient,f=function(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(c),d=u.range,p=u.offset,h=u.position,m=u.minExtent,g=u.maxExtent,v=c.title&&u.items[f[2]].items[0],y=u.titlePadding,b=u.bounds,w=0,O=0;switch(_.clear().union(b),b.clear(),(a=f[0])>-1&&b.union(u.items[a].bounds),(a=f[1])>-1&&b.union(u.items[a].bounds),l){case i.d:w=h||0,O=-p,s=Math.max(m,Math.min(g,-b.y1)),v&&(v.auto?(s+=y,v.y=-s,s+=v.bounds.height(),b.add(v.bounds.x1,0).add(v.bounds.x2,0)):b.union(v.bounds)),b.add(0,-s).add(d,0);break;case i.b:w=-p,O=h||0,s=Math.max(m,Math.min(g,-b.x1)),v&&(v.auto?(s+=y,v.x=-s,s+=v.bounds.width(),b.add(0,v.bounds.y1).add(0,v.bounds.y2)):b.union(v.bounds)),b.add(-s,0).add(0,d);break;case i.c:w=n+p,O=h||0,s=Math.max(m,Math.min(g,b.x2)),v&&(v.auto?(s+=y,v.x=s,s+=v.bounds.width(),b.add(0,v.bounds.y1).add(0,v.bounds.y2)):b.union(v.bounds)),b.add(0,0).add(s,d);break;case i.a:w=h||0,O=r+p,s=Math.max(m,Math.min(g,b.y2)),v&&(v.auto?(s+=y,v.y=s,s+=v.bounds.height(),b.add(v.bounds.x1,0).add(v.bounds.x2,0)):b.union(v.bounds)),b.add(0,0).add(d,s);break;default:w=u.x,O=u.y}return Object(o.t)(b.translate(w,O),u),M(u,"x",w+j)|M(u,"y",O+j)&&(u.bounds=_,e.dirty(u),u.bounds=b,e.dirty(u)),u.mark.bounds.clear().union(b)}function N(e,t,n,r,a,s,u){var c,l,f,d=t.items[0],p=d.datum.orient,h=d.offset,m=d.bounds,g=0,v=0;switch(p===i.d||p===i.a?(f=a,g=n[p]):p!==i.b&&p!==i.c||(f=r,v=n[p]),_.clear().union(m),m.clear(),d.items.forEach(function(e){m.union(e.bounds)}),c=Math.round(m.width())+2*d.padding-1,l=Math.round(m.height())+2*d.padding-1,p){case i.b:g-=c+h-Math.floor(f.x1),n.left+=l+n.margin;break;case i.c:g+=h+Math.ceil(f.x2),n.right+=l+n.margin;break;case i.d:v-=l+h-Math.floor(f.y1),n.top+=c+n.margin;break;case i.a:v+=h+Math.ceil(f.y2),n.bottom+=c+n.margin;break;case"top-left":g+=h,v+=h;break;case"top-right":g+=s-c-h,v+=h;break;case"bottom-left":g+=h,v+=u-l-h;break;case"bottom-right":g+=s-c-h,v+=u-l-h;break;default:g=d.x,v=d.y}return Object(o.t)(m.set(g,v,g+c,v+l),d),M(d,"x",g)|M(d,"width",c)|M(d,"y",v)|M(d,"height",l)&&(d.bounds=_,e.dirty(d),d.bounds=m,e.dirty(d)),d.mark.bounds.clear().union(m)}Object(s.inherits)(S,a.g).transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&Object(r.a)(n,t,e.layout),function(e,t,n){var r,a,s,j,S,A,P=t.items,C=Math.max(0,t.width||0),D=Math.max(0,t.height||0),T=(new o.a).set(0,0,C,D),R=T.clone(),L=T.clone(),I=T.clone(),F=[];for(S=0,A=P.length;S<A;++S)switch((a=P[S]).role){case h:R.union(j=k(e,a,C,D)),(E(a)?L:I).union(j);break;case m:r=a;break;case v:F.push(a);break;case g:case y:case b:case w:case O:case x:L.union(a.bounds),I.union(a.bounds);break;default:T.union(a.bounds)}r&&(R.union(j=function(e,t,n){var r=t.items[0],a=r.datum.orient,o=r.offset,s=r.bounds,u=0,c=0;switch(_.clear().union(s),a){case i.d:u=r.x,c=n.y1-o;break;case i.b:u=n.x1-o,c=r.y;break;case i.c:u=n.x2+o,c=r.y;break;case i.a:u=r.x,c=n.y2+o;break;default:u=r.x,c=r.y}s.translate(u-r.x,c-r.y),M(r,"x",u)|M(r,"y",c)&&(r.bounds=_,e.dirty(r),r.bounds=s,e.dirty(r));return t.bounds.clear().union(s)}(e,r,R)),(E(r)?L:I).union(j));if(F.length)for(s={left:0,right:0,top:0,bottom:0,margin:n.legendMargin||8},S=0,A=F.length;S<A;++S)if(j=N(e,F[S],s,L,I,C,D),n.autosize&&n.autosize.type===u){var q=F[S].items[0].datum.orient;q===i.b||q===i.c?T.add(j.x1,0).add(j.x2,0):q!==i.d&&q!==i.a||T.add(0,j.y1).add(0,j.y2)}else T.union(j);T.union(L).union(I).union(R),function(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,s=e._height,h=e.padding();if(e._autosize<1||!a)return;var m=Math.max(0,t.width||0),g=Math.max(0,Math.ceil(-n.x1)),v=Math.max(0,Math.ceil(n.x2-m)),y=Math.max(0,t.height||0),b=Math.max(0,Math.ceil(-n.y1)),w=Math.max(0,Math.ceil(n.y2-y));i.contains===p&&(o-=h.left+h.right,s-=h.top+h.bottom);a===d?(g=0,b=0,m=o,y=s):a===u?(m=Math.max(0,o-g-v),y=Math.max(0,s-b-w)):a===c?(m=Math.max(0,o-g-v),s=y+b+w):a===l?(o=m+g+v,y=Math.max(0,s-b-w)):a===f&&(o=m+g+v,s=y+b+w);e._resizeView(o,s,m,y,[g,b],i.resize)}(e,t,T,n)}(n,t,e)}),t}},function(e,t,n){"use strict";t.a=function(e,t,n){var r,x,j,_,S,M,E,k,N,A,P,C,D,T=function(e){for(var t,n,r=e.items,i=r.length,h=0,m={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};h<i;++h)if(t=r[h],n=t.items,"group"===t.marktype)switch(t.role){case a:case o:break;case s:p(n,m.rowheaders);break;case u:p(n,m.rowfooters);break;case l:p(n,m.colheaders);break;case f:p(n,m.colfooters);break;case c:m.rowtitle=n[0];break;case d:m.coltitle=n[0];break;default:p(n,m.marks)}return m}(t),R=T.marks,L="flush"===n.bounds,I=L?h:m,F=new i.a(0,0,0,0),q=y(n.align,"column"),U=y(n.align,"row"),z=y(n.padding,"column"),B=y(n.padding,"row"),V=n.offset,H=t.columns||n.columns||R.length,G=H<0?1:Math.ceil(R.length/H),W=G*H,X=[],Y=[],$=[],J=[],Q=R.length;for(x=0;x<H;++x)Y[x]=0;for(x=0;x<G;++x)J[x]=0;for(x=0;x<Q;++x)S=I(R[x]),_=~~(x/H),E=(j=x%H)?Math.ceil(I(R[x-1]).x2):0,k=_?Math.ceil(I(R[x-H]).y2):0,Y[j]=Math.max(Y[j],E),J[_]=Math.max(J[_],k),X.push(z+b(S.x1)),$.push(B+b(S.y1)),e.dirty(R[x]);for(x=0;x<Q;++x)x%H==0&&(X[x]=0),x<H&&($[x]=0);if("each"===q)for(j=1;j<H;++j){for(D=0,x=j;x<Q;x+=H)D<X[x]&&(D=X[x]);for(x=j;x<Q;x+=H)X[x]=D+Y[j]}else if("all"===q){for(C=0,j=1;j<H;++j)C<Y[j]&&(C=Y[j]);for(D=0,x=0;x<Q;++x)x%H&&D<X[x]&&(D=X[x]);for(x=0;x<Q;++x)x%H&&(X[x]=D+C)}else for(j=1;j<H;++j)for(x=j;x<Q;x+=H)X[x]+=Y[j];if("each"===U)for(_=1;_<G;++_){for(D=0,r=(x=_*H)+H;x<r;++x)D<$[x]&&(D=$[x]);for(x=_*H;x<r;++x)$[x]=D+J[_]}else if("all"===U){for(C=0,_=1;_<G;++_)C<J[_]&&(C=J[_]);for(D=0,x=H;x<Q;++x)D<$[x]&&(D=$[x]);for(x=H;x<Q;++x)$[x]=D+C}else for(_=1;_<G;++_)for(r=(x=_*H)+H;x<r;++x)$[x]+=J[_];for(N=0,x=0;x<Q;++x)M=R[x],E=M.x||0,M.x=N=X[x]+(x%H?N:0),M.bounds.translate(N-E,0);for(j=0;j<H;++j)for(A=0,x=j;x<Q;x+=H)M=R[x],k=M.y||0,M.y=A+=$[x],M.bounds.translate(0,A-k);for(x=0;x<Q;++x)R[x].mark.bounds.clear();for(x=0;x<Q;++x)M=R[x],e.dirty(M),F.union(M.mark.bounds.union(M.bounds));function K(e,t){return Math.floor(Math.min(e,t))}function Z(e,t){return Math.ceil(Math.max(e,t))}I=L?g:v,P=y(n.headerBand,"row",null),N=w(e,T.rowheaders,R,H,G,-y(V,"rowHeader"),K,0,I,"x1",0,H,1,P),P=y(n.headerBand,"column",null),A=w(e,T.colheaders,R,H,H,-y(V,"columnHeader"),K,1,I,"y1",0,1,H,P),P=y(n.footerBand,"row",null),w(e,T.rowfooters,R,H,G,y(V,"rowFooter"),Z,0,I,"x2",H-1,H,1,P),P=y(n.footerBand,"column",null),w(e,T.colfooters,R,H,H,y(V,"columnFooter"),Z,1,I,"y2",W-H,1,H,P),T.rowtitle&&(D=N-y(V,"rowTitle"),P=y(n.titleBand,"row",.5),O(e,T.rowtitle,D,0,F,P));T.coltitle&&(D=A-y(V,"columnTitle"),P=y(n.titleBand,"column",.5),O(e,T.coltitle,D,1,F,P))};var r=n(0),i=n(19),a="axis",o="legend",s="row-header",u="row-footer",c="row-title",l="column-header",f="column-footer",d="column-title";function p(e,t){for(var n=0,r=e.length;n<r;++n)t.push(e[n])}function h(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function m(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function g(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function v(e,t){return e.bounds[t]}function y(e,t,n){var i=Object(r.isObject)(e)?e[t]:e;return null!=i?i:void 0!==n?n:0}function b(e){return e<0?Math.ceil(-e):0}function w(e,t,n,r,i,a,o,s,u,c,l,f,d,p){var h,m,g,v,y,b,w,O,x,j=n.length,_=0,S=0;if(!j)return _;for(h=l;h<j;h+=f)n[h]&&(_=o(_,u(n[h],c)));if(!t.length)return _;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),_+=a,m=0,v=t.length;m<v;++m)e.dirty(t[m]),t[m].mark.bounds.clear();for(h=l,m=0,v=t.length;m<v;++m,h+=f){for(y=(b=t[m]).mark.bounds,g=h;g>=0&&null==(w=n[g]);g-=d);s?(O=null==p?w.x:Math.round(w.bounds.x1+p*w.bounds.width()),x=_):(O=_,x=null==p?w.y:Math.round(w.bounds.y1+p*w.bounds.height())),y.union(b.bounds.translate(O-(b.x||0),x-(b.y||0))),b.x=O,b.y=x,e.dirty(b),S=o(S,y[c])}return S}function O(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,s=n;r?o=Math.round(i.x1+a*i.width()):s=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=s,e.dirty(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(987);n.d(t,"axisticks",function(){return r.a});var i=n(998);n.d(t,"datajoin",function(){return i.a});var a=n(999);n.d(t,"encode",function(){return a.a});var o=n(1e3);n.d(t,"legendentries",function(){return o.a});var s=n(1002);n.d(t,"linkpath",function(){return s.a});var u=n(1003);n.d(t,"pie",function(){return u.a});var c=n(1004);n.d(t,"scale",function(){return c.a});var l=n(1005);n.d(t,"sortitems",function(){return l.a});var f=n(1006);n.d(t,"stack",function(){return f.a});var d=n(94);n.d(t,"validTicks",function(){return d.d})},function(e,t,n){"use strict";t.a=o;var r=n(94),i=n(1),a=n(0);function o(e){i.g.call(this,null,e)}Object(a.inherits)(o,i.g).transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=this.value,o=e.scale,s=null==e.count?e.values?e.values.length:10:Object(r.a)(o,e.count),u=e.format||Object(r.b)(o,s,e.formatSpecifier),c=e.values?Object(r.d)(o,e.values,s):Object(r.c)(o,s);return a&&(n.rem=a),a=c.map(function(e,t){return Object(i.k)({index:t/(c.length-1),value:e,label:u(e)})}),e.extra&&a.push(Object(i.k)({index:-1,extra:{value:a[0].value},label:""})),n.source=a,n.add=a,this.value=a,n}},function(e,t,n){"use strict";t.a=c;var r=n(989),i=n(990),a=n(991),o=n(992),s=n(993),u=n(80);function c(e,t){return arguments.length>1?(l[e]=function(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?Object(r.a)(n):n.invertExtent?Object(i.a)(n):void 0),n.type=e,n}}(e,t),this):l.hasOwnProperty(e)?l[e]:void 0}var l={identity:u.a,linear:u.b,log:u.c,ordinal:u.d,pow:u.e,sqrt:u.h,quantile:u.f,quantize:u.g,threshold:u.i,time:u.j,utc:u.k,band:a.a,point:a.b,sequential:s.a,"bin-linear":o.a,"bin-ordinal":o.b};for(var f in l)c(f,l[f])},function(e,t,n){"use strict";t.a=function(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}},function(e,t,n){"use strict";t.a=function(e){return function(t){var n,r,i,a,o=e.range(),s=t[0],u=t[1],c=-1;for(u<s&&(r=s,s=u,u=r),i=0,a=o.length;i<a;++i)o[i]>=s&&o[i]<=u&&(c<0&&(c=i),n=i);if(!(c<0))return s=e.invertExtent(o[c]),u=e.invertExtent(o[n]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}},function(e,t,n){"use strict";t.a=o,t.b=function(){return function e(t){var n=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;t.copy=function(){return e(n())};return t}(o().paddingInner(1))};var r=n(412),i=n(8),a=n(80);function o(){var e,t,n=Object(a.d)().unknown(void 0),s=n.domain,u=n.range,c=[0,1],l=!1,f=0,d=0,p=.5;function h(){var n=s().length,a=c[1]<c[0],o=c[a-0],h=c[1-a],m=Object(r.a)(n,f,d);e=(h-o)/(m||1),l&&(e=Math.floor(e)),o+=(h-o-e*(n-f))*p,t=e*(1-f),l&&(o=Math.round(o),t=Math.round(t));var g=Object(i.n)(n).map(function(t){return o+e*t});return u(a?g.reverse():g)}return delete n.unknown,n.domain=function(e){return arguments.length?(s(e),h()):s()},n.range=function(e){return arguments.length?(c=[+e[0],+e[1]],h()):c.slice()},n.rangeRound=function(e){return c=[+e[0],+e[1]],l=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(l=!!e,h()):l},n.padding=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),f=d,h()):f},n.paddingInner=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),h()):f},n.paddingOuter=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),h()):d},n.align=function(e){return arguments.length?(p=Math.max(0,Math.min(1,e)),h()):p},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,r,a,o=+e[0],l=+e[1],f=c[1]<c[0],d=f?u().reverse():u(),p=d.length-1;if(o==o&&l==l&&(l<o&&(a=o,o=l,l=a),!(l<d[0]||o>c[1-f])))return n=Math.max(0,Object(i.d)(d,o)-1),r=o===l?n:Object(i.d)(d,l)-1,o-d[n]>t+1e-10&&++n,f&&(a=n,n=p-r,r=p-a),n>r?void 0:s().slice(n,r+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return o().domain(s()).range(c).round(l).paddingInner(f).paddingOuter(d).align(p)},h()}},function(e,t,n){"use strict";t.a=function e(){var t=Object(i.b)(),n=[];function r(e){return t(e)}r.domain=function(e){return arguments.length?(function(e){n=u(e),t.domain([n[0],Object(a.peek)(n)])}(e),r):n.slice()};r.range=function(e){return arguments.length?(t.range(e),r):t.range()};r.rangeRound=function(e){return arguments.length?(t.rangeRound(e),r):t.rangeRound()};r.interpolate=function(e){return arguments.length?(t.interpolate(e),r):t.interpolate()};r.invert=function(e){return t.invert(e)};r.ticks=function(e){var t=n.length,i=~~(t/(e||t));return i<2?r.domain():n.filter(function(e,t){return!(t%i)})};r.tickFormat=function(){return t.tickFormat.apply(t,arguments)};r.copy=function(){return e().domain(r.domain()).range(r.range())};return r},t.b=function e(){var t=[],n=[];function i(e){return null==e||e!=e?void 0:n[(Object(r.b)(t,e)-1)%n.length]}i.domain=function(e){return arguments.length?(t=u(e),i):t.slice()};i.range=function(e){return arguments.length?(n=s.call(e),i):n.slice()};i.copy=function(){return e().domain(i.domain()).range(i.range())};return i};var r=n(8),i=n(80),a=n(0),o=Array.prototype.map,s=Array.prototype.slice;function u(e){return o.call(e,function(e){return+e})}},function(e,t,n){"use strict";t.a=function e(t){var n=Object(i.b)(),a=0,o=1,s=!1;function u(){var e=n.domain();a=e[0],o=Object(r.peek)(e)-a}function c(e){var n=(e-a)/o;return t(s?Math.max(0,Math.min(1,n)):n)}c.clamp=function(e){return arguments.length?(s=!!e,c):s};c.domain=function(e){return arguments.length?(n.domain(e),u(),c):n.domain()};c.interpolator=function(e){return arguments.length?(t=e,c):t};c.copy=function(){return e().domain(n.domain()).clamp(s).interpolator(t)};c.ticks=function(e){return n.ticks(e)};c.tickFormat=function(e,t){return n.tickFormat(e,t)};c.nice=function(e){return n.nice(e),u(),c};return c};var r=n(0),i=n(80)},function(e,t,n){"use strict";var r=n(995),i=n(311),a=n(17),o=n(0),s={blueorange:r.a},u={category10:i.schemeCategory10,accent:i.schemeAccent,dark2:i.schemeDark2,paired:i.schemePaired,pastel1:i.schemePastel1,pastel2:i.schemePastel2,set1:i.schemeSet1,set2:i.schemeSet2,set3:i.schemeSet3,category20:r.b,category20b:r.c,category20c:r.d,tableau10:r.e,tableau20:r.f,viridis:i.interpolateViridis,magma:i.interpolateMagma,inferno:i.interpolateInferno,plasma:i.interpolatePlasma,blueorange:Object(a.interpolateRgbBasis)(Object(o.peek)(r.a))};function c(e,t){u[e]=i["interpolate"+t],s[e]=i["scheme"+t]}c("blues","Blues"),c("greens","Greens"),c("greys","Greys"),c("purples","Purples"),c("reds","Reds"),c("oranges","Oranges"),c("brownbluegreen","BrBG"),c("purplegreen","PRGn"),c("pinkyellowgreen","PiYG"),c("purpleorange","PuOr"),c("redblue","RdBu"),c("redgrey","RdGy"),c("redyellowblue","RdYlBu"),c("redyellowgreen","RdYlGn"),c("spectral","Spectral"),c("bluegreen","BuGn"),c("bluepurple","BuPu"),c("greenblue","GnBu"),c("orangered","OrRd"),c("purplebluegreen","PuBuGn"),c("purpleblue","PuBu"),c("purplered","PuRd"),c("redpurple","RdPu"),c("yellowgreenblue","YlGnBu"),c("yellowgreen","YlGn"),c("yelloworangebrown","YlOrBr"),c("yelloworangered","YlOrRd"),t.a=function(e,t){if(arguments.length>1)return u[e]=t,this;var n=e.split("-");return e=n[0],(n=+n[1]+1)&&s.hasOwnProperty(e)?s[e][n-1]:!n&&u.hasOwnProperty(e)?u[e]:void 0}},function(e,t,n){"use strict";function r(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"a",function(){return c});var i=r("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),a=r("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),o=r("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),s=r("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),u=r("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),c=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(r)},function(e,t,n){"use strict";t.b=function(e,t){var n=t[0],i=Object(r.peek)(t)-n;return function(t){return e(n+t*i)}},t.c=function(e,t,n){var i=n-t;return i?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/i}:e.copy().domain([t,n]).range([0,1]).interpolate(a):Object(r.constant)(0)},t.a=function(e,t){var n=i[function(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n};var r=n(0),i=n(17);function a(e,t){var n=t-e;return function(t){return e+t*n}}},function(e,t,n){"use strict";t.a=function(e){return i.hasOwnProperty(e)&&i[e]},t.b=function(e){return a.hasOwnProperty(e)&&a[e]};var r=n(82),i={millisecond:r.c,second:r.g,minute:r.d,hour:r.b,day:r.a,week:r.j,month:r.f,year:r.k},a={millisecond:r.n,second:r.r,minute:r.o,hour:r.m,day:r.l,week:r.u,month:r.q,year:r.v}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}function o(){return Object(r.k)({})}function s(e){return e.exit}Object(i.inherits)(a,r.g).transform=function(e,t){var n=t.dataflow,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=e.item||o,c=e.key||r.r,l=this.value;return Object(i.isArray)(a.encode)&&(a.encode=null),l&&(e.modified("key")||t.modified(c))&&Object(i.error)("DataJoin does not support modified key function or fields."),l||(t=t.addAll(),this.value=l=Object(i.fastmap)().test(s),l.lookup=function(e){return l.get(c(e))}),t.visit(t.ADD,function(e){var t=c(e),n=l.get(t);n?n.exit?(l.empty--,a.add.push(n)):a.mod.push(n):(l.set(t,n=u(e)),a.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=c(e),n=l.get(t);n&&(n.datum=e,a.mod.push(n))}),t.visit(t.REM,function(e){var t=c(e),n=l.get(t);e!==n.datum||n.exit||(a.rem.push(n),n.exit=!0,++l.empty)}),t.changed(t.ADD_MOD)&&a.modifies("datum"),e.clean&&l.empty>n.cleanThreshold&&n.runAfter(l.clean),a}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}Object(i.inherits)(a,r.g).transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,a=t.encode;if(Object(i.isArray)(a)){if(!n.changed()&&!a.every(function(e){return r[e]}))return t.StopPropagation;a=a[0]}var o="enter"===a,s=r.update||i.falsy,u=r.enter||i.falsy,c=r.exit||i.falsy,l=(a&&!o?r[a]:s)||i.falsy;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(t){u(t,e),s(t,e),l!==i.falsy&&l!==s&&l(t,e)}),n.modifies(u.output),n.modifies(s.output),l!==i.falsy&&l!==s&&n.modifies(l.output)),t.changed(t.REM)&&c!==i.falsy&&(t.visit(t.REM,function(t){c(t,e)}),n.modifies(c.output)),o||l!==i.falsy){var f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,function(t){var r=u(t,e);(l(t,e)||r)&&n.mod.push(t)}),n.mod.length&&n.modifies(u.output)):t.visit(f,function(t){l(t,e)&&n.mod.push(t)}),n.mod.length&&n.modifies(l.output)}return n.changed()?n:t.StopPropagation}},function(e,t,n){"use strict";t.a=u;var r=n(1001),i=n(94),a=n(1),o=n(60),s=n(0);function u(e){a.g.call(this,[],e)}Object(s.inherits)(u,a.g).transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=0,c=this.value,l="gradient"===e.type,f=e.scale,d=null==e.count?5:Object(i.a)(f,e.count),p=e.format||Object(i.b)(f,d,e.formatSpecifier),h=e.values||Object(r.b)(f,d,l);if(p=Object(r.a)(f,p),c&&(n.rem=c),l)var m=e.values?f.domain():h,g=Object(o.e)(f,m[0],Object(s.peek)(m));else{var v,y=e.size;Object(s.isFunction)(y)?(e.values||0!==f(h[0])||(h=h.slice(1)),v=h.reduce(function(t,n){return Math.max(t,y(n,e))},0)):y=Object(s.constant)(v=y||8)}return c=h.map(function(t,n){var r=Object(a.k)({index:n,label:p(t,n,h),value:t});return l?r.perc=g(t):(r.offset=v,r.size=y(t,e),r.total=Math.round(u),u+=r.size),r}),n.source=c,n.add=c,this.value=c,n}},function(e,t,n){"use strict";t.b=function(e,t,n){if(n)return e.domain();var r=o[e.type];return r?r(e):Object(i.c)(e,t)},t.a=function(e,t){return o[e.type]?function(e){return function(t,n,r){var i=r[n+1]||r.max||1/0,a=u(t,e),o=u(i,e);return a&&o?a+""+o:o?"< "+o:" "+a}}(t):function(e){return function(t){return e(t)}}(t)};var r=n(224),i=n(94),a=n(0),o={};function s(e){var t=e.domain();return t.max=t.pop(),t}function u(e,t){return isFinite(e)?t(e):null}o[r.i]=function(e){var t=[-1/0].concat(e.quantiles());return t.max=1/0,t},o[r.j]=function(e){var t=e.domain(),n=t[0],r=Object(a.peek)(t),i=e.range().length,o=new Array(i),s=0;o[0]=-1/0;for(;++s<i;)o[s]=(s*r-(s-i)*n)/i;return o.max=1/0,o},o[r.m]=function(e){var t=[-1/0].concat(e.domain());return t.max=1/0,t},o[r.b]=s,o[r.c]=s},function(e,t,n){"use strict";t.a=l;var r=n(1),i=n(0),a=Object(i.fastmap)({line:f,"line-radial":function(e,t,n,r){return f(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:d,"arc-radial":function(e,t,n,r){return d(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:p,"curve-radial":function(e,t,n,r){return p(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*s+"L"+r*o+","+r*s},"diagonal-horizontal":function(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*a+"C"+u*i+","+u*a+" "+u*o+","+u*s+" "+r*o+","+r*s}});function o(e){return e.source.x}function s(e){return e.source.y}function u(e){return e.target.x}function c(e){return e.target.y}function l(e){r.g.call(this,{},e)}function f(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function d(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r}function p(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),s=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+s)+" "+(n+s)+","+(r-o)+" "+n+","+r}l.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]},Object(i.inherits)(l,r.g).transform=function(e,t){var n=e.sourceX||o,r=e.sourceY||s,l=e.targetX||u,f=e.targetY||c,d=e.as||"path",p=e.orient||"vertical",h=e.shape||"line",m=a.get(h+"-"+p)||a.get(h);return m||Object(i.error)("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[d]=m(n(e),r(e),l(e),f(e))}),t.reflow(e.modified()).modifies(d)}},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(0),a=n(8);function o(e){r.g.call(this,null,e)}o.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(i.inherits)(o,r.g).transform=function(e,t){var n,r,o,s=e.as||["startAngle","endAngle"],u=s[0],c=s[1],l=e.field||i.one,f=e.startAngle||0,d=null!=e.endAngle?e.endAngle:2*Math.PI,p=t.source,h=p.map(l),m=h.length,g=f,v=(d-f)/Object(a.o)(h),y=Object(a.n)(m);for(e.sort&&y.sort(function(e,t){return h[e]-h[t]}),n=0;n<m;++n)o=h[y[n]],(r=p[y[n]])[u]=g,r[c]=g+=o*v;return this.value=h,t.reflow(e.modified()).modifies(s)}},function(e,t,n){"use strict";t.a=p;var r=n(94),i=n(1),a=n(0),o=n(224),s=n(60),u=n(17),c=5,l=Object(a.toSet)([o.d,o.h,o.l]),f=Object(a.toSet)([o.d,o.e,o.h,o.l,o.n,o.o]),d=Object(a.toSet)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function p(e){i.g.call(this,null,e),this.modified(!0)}function h(e,t,n){return Object(a.isFunction)(e)&&(t||n)?Object(s.c)(e,m(t||[0,1],n)):e}function m(e,t){return t?e.slice().reverse():e}Object(a.inherits)(p,i.g).transform=function(e,t){var n,i=t.dataflow,p=this.value;for(n in p&&!e.modified("type")||(this.value=p=Object(s.d)((e.type||o.d).toLowerCase())()),e)if(!d[n]){if("padding"===n&&f[p.type])continue;Object(a.isFunction)(p[n])?p[n](e[n]):i.warn("Unsupported scale property: "+n)}return function(e,t,n){var r=t.round||!1,i=t.range;if(null!=t.rangeStep)i=function(e,t,n){e!==o.a&&e!==o.g&&Object(a.error)("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===o.g?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Object(s.a)(n,i,r)]}(e.type,t,n);else if(t.scheme){if(i=function(e,t,n){var r,i=t.scheme.toLowerCase(),u=Object(s.f)(i),l=t.schemeExtent;u||Object(a.error)("Unrecognized scheme name: "+t.scheme);return n=e===o.m?n+1:e===o.c?n-1:e===o.i||e===o.j?+t.schemeCount||c:n,e===o.k?h(u,l,t.reverse):!l&&(r=Object(s.f)(i+"-"+n))?r:Object(a.isFunction)(u)?function(e,t){for(var n=new Array(t),r=t-1||1,i=0;i<t;++i)n[i]=e(i/r);return n}(h(u,l),n):e===o.f?u:u.slice(0,n)}(e.type,t,n),Object(a.isFunction)(i))return e.interpolator(i)}else if(i&&e.type===o.k)return e.interpolator(Object(u.interpolateRgbBasis)(m(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate(Object(s.b)(t.interpolate,t.interpolateGamma)):Object(a.isFunction)(e.round)?e.round(r):Object(a.isFunction)(e.rangeRound)&&e.interpolate(r?u.interpolateRound:u.interpolate);i&&e.range(m(i,t.reverse))}(p,e,function(e,t,n){var i=function(e,t){return t?(e.domain(t),t.length):-1}(e,t.domainRaw);if(i>-1)return i;var s,u,c=t.domain,d=e.type,p=t.zero||void 0===t.zero&&l[d];if(!c)return 0;f[d]&&t.padding&&c[0]!==Object(a.peek)(c)&&(c=function(e,t,n,r,i){var s=Math.abs(Object(a.peek)(n)-n[0]),u=s/(s-2*r),c=e===o.e?Object(a.zoomLog)(t,null,u):e===o.l?Object(a.zoomPow)(t,null,u,.5):e===o.h?Object(a.zoomPow)(t,null,u,i):Object(a.zoomLinear)(t,null,u);return(t=t.slice())[0]=c[0],t[t.length-1]=c[1],t}(d,c,t.range,t.padding,t.exponent));(p||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(s=(c=c.slice()).length-1||1,p&&(c[0]>0&&(c[0]=0),c[s]<0&&(c[s]=0)),null!=t.domainMin&&(c[0]=t.domainMin),null!=t.domainMax&&(c[s]=t.domainMax),null!=t.domainMid&&(((u=t.domainMid)<c[0]||u>c[s])&&n.warn("Scale domainMid exceeds domain min or max.",u),c.splice(s,0,u)));e.domain(c),t.nice&&e.nice&&e.nice(!0!==t.nice&&Object(r.a)(e,t.nice)||null);return c.length}(p,e,i)),t.fork(t.NO_SOURCE|t.NO_FIELDS)}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}Object(i.inherits)(a,r.g).transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t}},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}function o(e,t,n,r,i){for(var a,o=(t-e.sum)/2,s=e.length,u=0;u<s;++u)(a=e[u])[r]=o,a[i]=o+=Math.abs(n(a))}function s(e,t,n,r,i){for(var a,o=1/e.sum,s=0,u=e.length,c=0,l=0;c<u;++c)(a=e[c])[r]=s,a[i]=s=o*(l+=Math.abs(n(a)))}function u(e,t,n,r,i){for(var a,o,s=0,u=0,c=e.length,l=0;l<c;++l)(a=n(o=e[l]))<0?(o[r]=u,o[i]=u+=a):(o[r]=s,o[i]=s+=a)}a.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]},Object(i.inherits)(a,r.g).transform=function(e,t){var n,r,a,c,l=e.as||["y0","y1"],f=l[0],d=l[1],p=e.field||i.one,h="center"===e.offset?o:"normalize"===e.offset?s:u;for(n=function(e,t,n,r){var i,a,o,s,u,c,l,f,d,p=[],h=function(e){return e(u)};if(null==t)p.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)u=e[a],c=t.map(h),(l=i[c])||(i[c]=l=[],p.push(l)),l.push(u);for(c=0,d=0,s=p.length;c<s;++c){for(l=p[c],a=0,f=0,o=l.length;a<o;++a)f+=Math.abs(r(l[a]));l.sum=f,f>d&&(d=f),n&&l.sort(n)}return p.max=d,p}(t.source,e.groupby,e.sort,p),r=0,a=n.length,c=n.max;r<a;++r)h(n[r],c,p,f,d);return t.reflow(e.modified()).modifies(l)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1008);n.d(t,"contour",function(){return r.a});var i=n(1009);n.d(t,"geojson",function(){return i.a});var a=n(1010);n.d(t,"geopath",function(){return a.a});var o=n(1012);n.d(t,"geopoint",function(){return o.a});var s=n(1013);n.d(t,"geoshape",function(){return s.a});var u=n(1014);n.d(t,"graticule",function(){return u.a});var c=n(1015);n.d(t,"projection",function(){return c.a})},function(e,t,n){"use strict";t.a=c;var r=n(1),i=n(0),a=n(8),o=n(274),s=["values","size"],u=["x","y","size","cellSize","bandwidth"];function c(e){r.g.call(this,null,e)}c.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"number",default:!1},{name:"thresholds",type:"number",array:!0}]},Object(i.inherits)(c,r.g).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,i,c,l,f=t.fork(t.NO_SOURCE|t.NO_FIELDS),d=e.count||10;return e.values?(n=Object(o.b)(),i=s,c=e.values):(n=Object(o.a)(),i=u,c=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?d:(l=d,function(e){for(var t=Object(a.f)(e),n=t[0],r=t[1]-n,i=[],o=1;o<=l;++o)i.push(n+r*o/(l+1));return i}))),i.forEach(function(t){null!=e[t]&&n[t](e[t])}),this.value&&(f.rem=this.value),c=c&&c.length?n(c).map(r.k):[],this.value=f.source=f.add=c,f}},function(e,t,n){"use strict";t.a=o;var r=n(413),i=n(1),a=n(0);function o(e){i.g.call(this,null,e)}o.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(a.inherits)(o,i.g).transform=function(e,t){var n,i=this._features,o=this._points,s=e.fields,u=s&&s[0],c=s&&s[1],l=e.geojson,f=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(Object(a.accessorFields)(l))||u&&t.modified(Object(a.accessorFields)(u))||c&&t.modified(Object(a.accessorFields)(c)),this.value&&!n||(f=t.SOURCE,this._features=i=[],this._points=o=[]),l&&t.visit(f,function(e){i.push(l(e))}),u&&c&&(t.visit(f,function(e){var t=u(e),n=c(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&o.push([t,n])}),i=i.concat({type:r.a,geometry:{type:r.c,coordinates:o}})),this.value={type:r.b,features:i}}},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(140),a=n(0);function o(e){r.g.call(this,null,e)}o.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(a.inherits)(o,r.g).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,o=e.field||a.identity,s=e.as||"path",u=n.SOURCE;!r||e.modified()?(this.value=r=Object(i.a)(e.projection),n.materialize().reflow()):u=o===a.identity||t.modified(o.fields)?n.ADD_MOD:n.ADD;var c=function(e,t){var n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(u,function(e){e[s]=r(o(e))}),r.pointRadius(c),n.modifies(s)}},function(e,t,n){"use strict";n.d(t,"c",function(){return a}),t.b=o,t.a=function(e){return e&&e.path||i};var r=n(110),i=Object(r.p)(),a=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function o(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(s[e]=function(e,t){return function n(){var i=t();return i.type=e,i.path=Object(r.p)().projection(i),i.copy=i.copy||function(){var e=n();return a.forEach(function(t){i.hasOwnProperty(t)&&e[t](i[t]())}),e.path.pointRadius(i.path.pointRadius()),e},i}}(e,t),this):s.hasOwnProperty(e)?s[e]:null}var s={albers:r.a,albersusa:r.b,azimuthalequalarea:r.d,azimuthalequidistant:r.e,conicconformal:r.h,conicequalarea:r.i,conicequidistant:r.j,equirectangular:r.k,gnomonic:r.l,mercator:r.n,orthographic:r.o,stereographic:r.q,transversemercator:r.r};for(var u in s)o(u,s[u])},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}a.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(i.inherits)(a,r.g).transform=function(e,t){var n,r=e.projection,i=e.fields[0],a=e.fields[1],o=e.as||["x","y"],s=o[0],u=o[1];function c(e){var t=r([i(e),a(e)]);t?(e[s]=t[0],e[u]=t[1]):(e[s]=void 0,e[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(n=t.modified(i.fields)||t.modified(a.fields),t.visit(n?t.ADD_MOD:t.ADD,c)),t.modifies(o)}},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(140),a=n(0);function o(e){r.g.call(this,null,e)}o.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(a.inherits)(o,r.g).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,o=e.field||Object(a.field)("datum"),s=e.as||"shape",u=n.ADD_MOD;return r&&!e.modified()||(this.value=r=function(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var i=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(i),a};return r.context=function(t){return e.context(t),r},r}(Object(i.a)(e.projection),o,e.pointRadius),n.materialize().reflow(),u=n.SOURCE),n.visit(u,function(e){e[s]=r}),n.modifies(s)}},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(0),a=n(110);function o(e){r.g.call(this,[],e),this.generator=Object(a.m)()}o.Definition={type:"Graticule",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(i.inherits)(o,r.g).transform=function(e,t){var n,a=t.fork(),o=this.value,s=this.generator;if(!o.length||e.modified())for(var u in e)Object(i.isFunction)(s[u])&&s[u](e[u]);return n=s(),o.length?a.mod.push(Object(r.o)(o[0],n)):a.add.push(Object(r.k)(n)),o[0]=n,a.source=o,a}},function(e,t,n){"use strict";t.a=s;var r=n(413),i=n(1),a=n(140),o=n(0);function s(e){i.g.call(this,null,e),this.modified(!0)}function u(e,t,n){Object(o.isFunction)(e[t])&&e[t](n)}Object(o.inherits)(s,i.g).transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=function(e){var t=Object(a.b)((e||"mercator").toLowerCase());t||Object(o.error)("Unrecognized projection type: "+e);return t()}(e.type),a.c.forEach(function(t){null!=e[t]&&u(n,t,e[t])})):a.c.forEach(function(t){e.modified(t)&&u(n,t,e[t])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){var n=(i=t.fit,1===(i=Object(o.array)(i)).length?i[0]:{type:r.b,features:i.reduce(function(e,t){return t&&t.type===r.b?e.push.apply(e,t.features):Object(o.isArray)(t)?e.push.apply(e,t):e.push(t),e},[])});var i;t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1017);n.d(t,"force",function(){return r.a})},function(e,t,n){"use strict";t.a=f;var r=n(1),i=n(0),a=n(278),o={center:a.a,collide:a.b,nbody:a.d,link:a.c,x:a.f,y:a.g},s="forces",u=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],c=["static","iterations"],l=["x","y","vx","vy"];function f(e){r.g.call(this,null,e)}f.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:l}]};var d=Object(i.inherits)(f,r.g);function p(e,t,n,r){var a,o,c,l,f=Object(i.array)(t.forces);for(a=0,o=u.length;a<o;++a)(c=u[a])!==s&&t.modified(c)&&e[c](t[c]);for(a=0,o=f.length;a<o;++a)l=s+a,(c=n||t.modified(s,a)?m(f[a]):r&&h(f[a],r)?e.force(l):null)&&e.force(l,c);for(o=e.numForces||0;a<o;++a)e.force(s+a,null);return e.numForces=f.length,e}function h(e,t){var n,r;for(n in e)if(Object(i.isFunction)(r=e[n])&&t.modified(Object(i.accessorFields)(r)))return 1;return 0}function m(e){var t,n;for(n in o.hasOwnProperty(e.force)||Object(i.error)("Unrecognized force: "+e.force),t=o[e.force](),e)Object(i.isFunction)(t[n])&&g(t[n],e[n],e);return t}function g(e,t,n){e(Object(i.isFunction)(t)?function(e){return t(e,n)}:t)}d.transform=function(e,t){var n,r,i=this.value,o=t.changed(t.ADD_REM),s=e.modified(u),l=e.iterations||300;if(i?(o&&(t.modifies("index"),i.nodes(t.source)),(s||t.changed(t.MOD))&&p(i,e,0,t)):(this.value=i=function(e,t){var n=Object(a.e)(e),r=!1,i=n.stop,o=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,o()},n.stop=function(){return r=!0,i()},p(n,t,!0).on("end",function(){r=!0})}(t.source,e),i.on("tick",(n=t.dataflow,r=this,function(){n.touch(r).run()})),e.static||(o=!0,i.tick()),t.modifies("index")),s||o||e.modified(c)||t.changed()&&e.restart)if(i.alpha(Math.max(i.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/l)),e.static)for(i.stop();--l>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return t.StopPropagation;return this.finish(e,t)},d.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===s&&"link"===n.op._argval.force)for(var u,c=n.op._argops,f=0,d=c.length;f<d;++f)if("links"===c[f].name&&(u=c[f].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(l)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1019);n.d(t,"nest",function(){return r.a});var i=n(1020);n.d(t,"pack",function(){return i.a});var a=n(1021);n.d(t,"partition",function(){return a.a});var o=n(1022);n.d(t,"stratify",function(){return o.a});var s=n(1023);n.d(t,"tree",function(){return s.a});var u=n(1024);n.d(t,"treelinks",function(){return u.a});var c=n(1025);n.d(t,"treemap",function(){return c.a})},function(e,t,n){"use strict";t.a=s;var r=n(1),i=n(0),a=n(65),o=n(50);function s(e){r.g.call(this,null,e)}function u(e){return e.values}s.Definition={type:"Nest",metadata:{treesource:!0,generates:!0},params:[{name:"keys",type:"field",array:!0},{name:"key",type:"field"},{name:"generate",type:"boolean"}]},Object(i.inherits)(s,r.g).transform=function(e,t){t.source||Object(i.error)("Nest transform requires an upstream data source.");var n,s,c,l=e.key||r.r,f=e.generate,d=e.modified(),p=f||d?t.fork(t.ALL):t;return(!this.value||d||t.changed())&&(f&&this.value&&(p.materialize(p.REM),this.value.each(function(e){e.children&&p.rem.push(e)})),n=Object(i.array)(e.keys).reduce(function(e,t){return e.key(t),e},Object(a.b)()).entries(p.materialize(p.SOURCE).source),this.value=s=Object(o.b)({values:n},u),f&&(p.materialize(p.ADD),p.source=p.source.slice(),s.each(function(e){e.children&&(e=Object(r.k)(e.data),p.add.push(e),p.source.push(e))})),c=s.lookup={},s.each(function(e){null!=Object(r.r)(e.data)&&(c[l(e.data)]=e)})),p.source.root=this.value,p}},function(e,t,n){"use strict";t.a=s;var r=n(141),i=n(0),a=n(50),o=["x","y","r","depth","children"];function s(e){r.a.call(this,e)}s.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:o}]};var u=Object(i.inherits)(s,r.a);u.layout=a.c,u.params=["size","padding"],u.fields=o},function(e,t,n){"use strict";t.a=s;var r=n(141),i=n(0),a=n(50),o=["x0","y0","x1","y1","depth","children"];function s(e){r.a.call(this,e)}s.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:o}]};var u=Object(i.inherits)(s,r.a);u.layout=a.d,u.params=["size","round","padding"],u.fields=o},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(0),a=n(50);function o(e){r.g.call(this,null,e)}o.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(i.inherits)(o,r.g).transform=function(e,t){t.source||Object(i.error)("Stratify transform requires an upstream data source.");var n,r,o=e.modified();return(!this.value||o||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields))&&(n=Object(a.e)().id(e.key).parentId(e.parentKey)(t.source),r=n.lookup={},n.each(function(t){r[e.key(t.data)]=t}),this.value=n),t.source.root=this.value,o?t.fork(t.ALL):t}},function(e,t,n){"use strict";t.a=u;var r=n(141),i=n(0),a=n(50),o={tidy:a.f,cluster:a.a},s=["x","y","depth","children"];function u(e){r.a.call(this,e)}u.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:s}]};var c=Object(i.inherits)(u,r.a);c.layout=function(e){var t=e||"tidy";if(o.hasOwnProperty(t))return o[t]();Object(i.error)("Unrecognized Tree layout method: "+t)},c.params=["size","nodeSize","separation"],c.fields=s},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,{},e)}a.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[{name:"key",type:"field"}]},Object(i.inherits)(a,r.g).transform=function(e,t){t.source&&t.source.root||Object(i.error)("TreeLinks transform requires a backing tree data source.");var n=t.source.root.lookup,a=this.value,o=e.key||r.r,s={},u=t.fork();function c(e){var t=a[e];t&&(s[e]=1,u.mod.push(t))}return t.visit(t.REM,function(e){var t=o(e),n=a[t];n&&(delete a[t],u.rem.push(n))}),t.visit(t.ADD,function(e){var t,i=o(e);(t=function(e){var t;return e.parent&&(t=e.parent.data)&&null!=Object(r.r)(t)&&t}(n[i]))&&(u.add.push(a[i]=Object(r.k)({source:t,target:e})),s[i]=1)}),t.visit(t.MOD,function(e){var t=o(e),r=n[t].children;if(c(t),r)for(var i=0,a=r.length;i<a;++i)s[t=o(r[i].data)]||c(t)}),u}},function(e,t,n){"use strict";t.a=u;var r=n(141),i=n(0),a=n(50),o={binary:a.h,dice:a.i,slice:a.k,slicedice:a.l,squarify:a.m,resquarify:a.j},s=["x0","y0","x1","y1","depth","children"];function u(e){r.a.call(this,e)}u.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:s}]};var c=Object(i.inherits)(u,r.a);c.layout=function(){var e=Object(a.g)();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){o.hasOwnProperty(t)?e.tile(o[t]):Object(i.error)("Unrecognized Treemap layout method: "+t)},e},c.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],c.fields=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1027);n.d(t,"voronoi",function(){return r.a})},function(e,t,n){"use strict";t.a=o;var r=n(1),i=n(0),a=n(326);function o(e){r.g.call(this,null,e)}o.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var s=Object(i.inherits)(o,r.g),u=[[-1e5,-1e5],[1e5,1e5]];s.transform=function(e,t){var n,r,i,o,s=e.as||"path",c=t.source;for(n=Object(a.a)().x(e.x).y(e.y),e.size?n.size(e.size):n.extent(e.extent||u),this.value=n=n(c),r=n.polygons(),i=0,o=c.length;i<o;++i)c[i][s]=r[i]?"M"+r[i].join("L")+"Z":null;return t.reflow(e.modified()).modifies(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1029);n.d(t,"wordcloud",function(){return r.a})},function(e,t,n){"use strict";t.a=l;var r=n(1030),i=n(1),a=n(0),o=n(60),s=n(54),u=["x","y","font","fontSize","fontStyle","fontWeight","angle"],c=["text","font","rotate","fontSize","fontStyle","fontWeight"];function l(e){i.g.call(this,Object(r.a)(),e)}l.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:u}]},Object(a.inherits)(l,i.g).transform=function(e,t){var n=e.modified();if(n||t.changed(t.ADD_REM)||c.some(function(n){var r=e[n];return Object(a.isFunction)(r)&&t.modified(r.fields)})){var r,i=t.materialize(t.SOURCE).source,l=this.value,f=e.as||u,d=e.fontSize||14;if(Object(a.isFunction)(d)?r=e.fontSizeRange:d=Object(a.constant)(d),r){var p=d,h=Object(o.d)("sqrt")().domain(function(e,t){for(var n,r=1/0,i=-1/0,a=0,o=t.length;a<o;++a)(n=e(t[a]))<r&&(r=n),n>i&&(i=n);return[r,i]}(p,i)).range(r);d=function(e){return h(p(e))}}i.forEach(function(e){e[f[0]]=NaN,e[f[1]]=NaN,e[f[3]]=0});for(var m,g,v=l.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(d).random(s.d).layout(),y=l.size(),b=y[0]>>1,w=y[1]>>1,O=0,x=v.length;O<x;++O)(g=(m=v[O]).datum)[f[0]]=m.x+b,g[f[1]]=m.y+w,g[f[2]]=m.font,g[f[3]]=m.size,g[f[4]]=m.style,g[f[5]]=m.weight,g[f[6]]=m.rotate;return t.reflow(n).modifies(f)}}},function(e,t,n){"use strict";var r=n(132),i=Math.PI/180,a=64,o=2048;function s(e,t,n,r){if(!t.sprite){var s=e.context,u=e.ratio;s.clearRect(0,0,(a<<5)/u,o/u);var c,l,f,d,p,h=0,m=0,g=0,v=n.length;for(--r;++r<v;){if(t=n[r],s.save(),s.font=t.style+" "+t.weight+" "+~~((t.size+1)/u)+"px "+t.font,c=s.measureText(t.text+"m").width*u,f=t.size<<1,t.rotate){var y=Math.sin(t.rotate*i),b=Math.cos(t.rotate*i),w=c*b,O=c*y,x=f*b,j=f*y;c=Math.max(Math.abs(w+j),Math.abs(w-j))+31>>5<<5,f=~~Math.max(Math.abs(O+x),Math.abs(O-x))}else c=c+31>>5<<5;if(f>g&&(g=f),h+c>=a<<5&&(h=0,m+=g,g=0),m+f>=o)break;s.translate((h+(c>>1))/u,(m+(f>>1))/u),t.rotate&&s.rotate(t.rotate*i),s.fillText(t.text,0,0),t.padding&&(s.lineWidth=2*t.padding,s.strokeText(t.text,0,0)),s.restore(),t.width=c,t.height=f,t.xoff=h,t.yoff=m,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,h+=c}for(var _=s.getImageData(0,0,(a<<5)/u,o/u).data,S=[];--r>=0;)if((t=n[r]).hasText){for(l=(c=t.width)>>5,f=t.y1-t.y0,d=0;d<f*l;d++)S[d]=0;if(null==(h=t.xoff))return;m=t.yoff;var M=0,E=-1;for(p=0;p<f;p++){for(d=0;d<c;d++){var k=l*p+(d>>5),N=_[(m+p)*(a<<5)+(h+d)<<2]?1<<31-d%32:0;S[k]|=N,M|=N}M?E=p:(t.y0++,f--,p--,m++)}t.y1=t.y0+E,t.sprite=S.slice(0,(t.y1-t.y0)*l)}}}function u(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,u=32-s,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),f=0;f<c;f++){r=0;for(var d=0;d<=a;d++)if((r<<u|(d<a?(r=i[f*a+d])>>>s:0))&t[l+d])return!0;l+=n}return!1}function c(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function l(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function f(e){return"function"==typeof e?e:function(){return e}}t.a=function(){var e,t,n,i,p,h,m,g=[256,256],v=l,y=[],b=Math.random,w={};function O(e,t,n){for(var r,i,a,o,s,c=t.x,l=t.y,f=Math.sqrt(g[0]*g[0]+g[1]*g[1]),d=v(g),p=b()<.5?1:-1,h=-p;(r=d(h+=p))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=f));)if(t.x=c+i,t.y=l+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>g[0]||t.y+t.y1>g[1]||n&&u(t,e,g[0])||n&&(s=n,!((o=t).x+o.x1>s[0].x&&o.x+o.x0<s[1].x&&o.y+o.y1>s[0].y&&o.y+o.y0<s[1].y)))){for(var m,y=t.sprite,w=t.width>>5,O=g[0]>>5,x=t.x-(w<<4),j=127&x,_=32-j,S=t.y1-t.y0,M=(t.y+t.y0)*O+(x>>5),E=0;E<S;E++){m=0;for(var k=0;k<=w;k++)e[M+k]|=m<<_|(k<w?(m=y[E*w+k])>>>j:0);M+=O}return t.sprite=null,!0}return!1}return w.layout=function(){for(var u=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(a<<5)/t,e.height=o/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(Object(r.a)()),l=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((g[0]>>5)*g[1]),f=null,d=y.length,v=-1,w=[],x=y.map(function(r){return{text:e(r),font:t(r),style:i(r),weight:p(r),rotate:h(r),size:~~n(r),padding:m(r),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:r}}).sort(function(e,t){return t.size-e.size});++v<d;){var j=x[v];j.x=g[0]*(b()+.5)>>1,j.y=g[1]*(b()+.5)>>1,s(u,j,x,v),j.hasText&&O(l,j,f)&&(w.push(j),f?c(f,j):f=[{x:j.x+j.x0,y:j.y+j.y0},{x:j.x+j.x1,y:j.y+j.y1}],j.x-=g[0]>>1,j.y-=g[1]>>1)}return w},w.words=function(e){return arguments.length?(y=e,w):y},w.size=function(e){return arguments.length?(g=[+e[0],+e[1]],w):g},w.font=function(e){return arguments.length?(t=f(e),w):t},w.fontStyle=function(e){return arguments.length?(i=f(e),w):i},w.fontWeight=function(e){return arguments.length?(p=f(e),w):p},w.rotate=function(e){return arguments.length?(h=f(e),w):h},w.text=function(t){return arguments.length?(e=f(t),w):e},w.spiral=function(e){return arguments.length?(v=d[e]||e,w):v},w.fontSize=function(e){return arguments.length?(n=f(e),w):n},w.padding=function(e){return arguments.length?(m=f(e),w):m},w.random=function(e){return arguments.length?(b=e,w):b},w};var d={archimedean:l,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1032);n.d(t,"crossfilter",function(){return r.a});var i=n(1036);n.d(t,"resolvefilter",function(){return i.a})},function(e,t,n){"use strict";t.a=u;var r=n(1033),i=n(1034),a=n(1035),o=n(1),s=n(0);function u(e){o.g.call(this,Object(r.a)(),e),this._indices=null,this._dims=null}u.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var c=Object(s.inherits)(u,o.g);c.transform=function(e,t){return this._dims?e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)})?this.reinit(e,t):this.eval(e,t):this.init(e,t)},c.init=function(e,t){for(var n,r,o=e.fields,s=e.query,u=this._indices={},c=this._dims=[],l=s.length,f=0;f<l;++f)r=u[n=o[f].fname]||(u[n]=Object(a.a)()),c.push(Object(i.a)(r,f,s[f]));return this.eval(e,t)},c.reinit=function(e,t){var n,r,o,s,u,c,l,f,d,p=t.materialize().fork(),h=e.fields,m=e.query,g=this._indices,v=this._dims,y=this.value,b=y.curr(),w=y.prev(),O=y.all(),x=p.rem=p.add,j=p.mod,_=m.length,S={};if(w.set(b),t.rem.length&&(u=this.remove(e,t,p)),t.add.length&&y.add(t.add),t.mod.length)for(c={},l=0,f=(s=t.mod).length;l<f;++l)c[s[l]._index]=1;for(l=0;l<_;++l)d=h[l],(!v[l]||e.modified("fields",l)||t.modified(d.fields))&&((n=S[o=d.fname])||(g[o]=r=Object(a.a)(),S[o]=n=r.insert(d,t.source,0)),v[l]=Object(i.a)(r,l,m[l]).onAdd(n,b));for(l=0,f=y.data().length;l<f;++l)u[l]||(w[l]!==b[l]?x.push(l):c[l]&&b[l]!==O&&j.push(l));return y.mask=(1<<_)-1,p},c.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},c.insert=function(e,t,n){var r,i,a,o=t.add,s=this.value,u=this._dims,c=this._indices,l=e.fields,f={},d=n.add,p=s.size(),h=p+o.length,m=u.length;s.resize(h,m),s.add(o);var g=s.curr(),v=s.prev(),y=s.all();for(r=0;r<m;++r)a=f[i=l[r].fname]||(f[i]=c[i].insert(l[r],o,p)),u[r].onAdd(a,g);for(;p<h;++p)v[p]=y,g[p]!==y&&d.push(p)},c.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,s=o.curr(),u=o.all(),c=e.mod;for(n=0,r=c.length;n<r;++n)s[i=c[n]._index]!==u&&a.push(i)},c.remove=function(e,t,n){var r,i,a,o,s=this._indices,u=this.value,c=u.curr(),l=u.prev(),f=u.all(),d={},p=n.rem,h=t.rem;for(r=0,i=h.length;r<i;++r)d[a=h[r]._index]=1,l[a]=o=c[a],c[a]=f,o!==f&&p.push(a);for(a in s)s[a].remove(i,d);return this.reindex(t,i,d),d},c.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)})},c.update=function(e,t,n){var r,i,a=this._dims,o=e.query,s=t.stamp,u=a.length,c=0;for(n.filters=0,i=0;i<u;++i)e.modified("query",i)&&(r=i,++c);if(1===c)c=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,c=0;i<u;++i)e.modified("query",i)&&(c|=a[i].one,this.incrementAll(a[i],o[i],s,n.add),n.rem=n.add);return c},c.incrementAll=function(e,t,n,r){var i,a,o,s=this.value,u=s.seen(),c=s.curr(),l=s.prev(),f=e.index(),d=e.bisect(e.range),p=e.bisect(t),h=p[0],m=p[1],g=d[0],v=d[1],y=e.one;if(h<g)for(i=h,a=Math.min(g,m);i<a;++i)u[o=f[i]]!==n&&(l[o]=c[o],u[o]=n,r.push(o)),c[o]^=y;else if(h>g)for(i=g,a=Math.min(h,v);i<a;++i)u[o=f[i]]!==n&&(l[o]=c[o],u[o]=n,r.push(o)),c[o]^=y;if(m>v)for(i=Math.max(h,v),a=m;i<a;++i)u[o=f[i]]!==n&&(l[o]=c[o],u[o]=n,r.push(o)),c[o]^=y;else if(m<v)for(i=Math.max(g,m),a=v;i<a;++i)u[o=f[i]]!==n&&(l[o]=c[o],u[o]=n,r.push(o)),c[o]^=y;e.range=t.slice()},c.incrementOne=function(e,t,n,r){var i,a,o,s=this.value.curr(),u=e.index(),c=e.bisect(e.range),l=e.bisect(t),f=l[0],d=l[1],p=c[0],h=c[1],m=e.one;if(f<p)for(i=f,a=Math.min(p,d);i<a;++i)s[o=u[i]]^=m,n.push(o);else if(f>p)for(i=p,a=Math.min(f,h);i<a;++i)s[o=u[i]]^=m,r.push(o);if(d>h)for(i=Math.max(f,h),a=d;i<a;++i)s[o=u[i]]^=m,n.push(o);else if(d<h)for(i=Math.max(p,d),a=h;i<a;++i)s[o=u[i]]^=m,r.push(o);e.range=t.slice()}},function(e,t,n){"use strict";t.a=function(){var e=8,t=[],n=Object(r.b)(0),a=i(0,e),o=i(0,e);return{data:function(){return t},seen:function(){return e=n,r=t.length,n=e.length>=r?e:((i=i||new e.constructor(r)).set(e),i);var e,r,i},add:function(e){for(var n,r=0,i=t.length,a=e.length;r<a;++r)(n=e[r])._index=i++,t.push(n)},remove:function(e,n){var r,i,s,u=t.length,c=Array(u-e),l=t;for(i=0;!n[i]&&i<u;++i)c[i]=t[i],l[i]=i;for(s=i;i<u;++i)r=t[i],n[i]?l[i]=-1:(l[i]=s,a[s]=a[i],o[s]=o[i],c[s]=r,r._index=s++),a[i]=0;return t=c,l},size:function(){return t.length},curr:function(){return a},prev:function(){return o},reset:function(e){o[e]=a[e]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(e,t){a[e]|=t},clear:function(e,t){a[e]&=~t},resize:function(t,n){var r=a.length;(t>r||n>e)&&(e=Math.max(n,e),a=i(t,e,a),o=i(t,e))}}};var r=n(414);function i(e,t,n){var i=(t<257?r.c:t<65537?r.a:r.b)(e);return n&&i.set(n),i}},function(e,t,n){"use strict";t.a=function(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this.bisect(this.range,e.value),a=e.index,o=i[0],s=i[1],u=a.length;for(n=0;n<o;++n)t[a[n]]|=r;for(n=s;n<u;++n)t[a[n]]|=r;return this}}}},function(e,t,n){"use strict";t.a=function(){var e=Object(r.b)(0),t=[],n=0;return{insert:function(a,o,s){if(!o.length)return[];var u,c,l,f=n,d=o.length,p=Array(d),h=Object(r.b)(d);for(l=0;l<d;++l)p[l]=a(o[l]),h[l]=l;if(p=function(e,t){return e.sort.call(t,function(t,n){var r=e[t],i=e[n];return r<i?-1:r>i?1:0}),Object(i.l)(e,t)}(p,h),f)u=t,c=e,t=Array(f+d),e=Object(r.b)(f+d),function(e,t,n,r,i,a,o,s,u){var c,l=0,f=0;for(c=0;l<r&&f<o;++c)t[l]<i[f]?(s[c]=t[l],u[c]=n[l++]):(s[c]=i[f],u[c]=a[f++]+e);for(;l<r;++l,++c)s[c]=t[l],u[c]=n[l];for(;f<o;++f,++c)s[c]=i[f],u[c]=a[f]+e}(s,u,c,f,p,h,d,t,e);else{if(s>0)for(l=0;l<d;++l)h[l]+=s;t=p,e=h}return n=f+d,{index:h,value:p}},remove:function(r,i){var a,o,s,u=n;for(o=0;!i[e[o]]&&o<u;++o);for(s=o;o<u;++o)i[a=e[o]]||(e[s]=a,t[s]=t[o],++s);n=u-r},bisect:function(e,r){var a;r?a=r.length:(r=t,a=n);return[Object(i.c)(r,e[0],0,a),Object(i.d)(r,e[1],0,a)]},reindex:function(t){for(var r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}};var r=n(414),i=n(8)},function(e,t,n){"use strict";t.a=a;var r=n(1),i=n(0);function a(e){r.g.call(this,null,e)}a.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(i.inherits)(a,r.g).transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),s=r.curr(),u=r.prev(),c=function(e){return s[e]&n?null:o[e]};return a.filter(a.MOD,c),i&i-1?(a.filter(a.ADD,function(e){var t=s[e]&n;return!t&&t^u[e]&n?o[e]:null}),a.filter(a.REM,function(e){var t=s[e]&n;return t&&!(t^t^u[e]&n)?o[e]:null})):(a.filter(a.ADD,c),a.filter(a.REM,function(e){return(s[e]&n)===i?o[e]:null})),a.filter(a.SOURCE,function(e){return c(e._index)})}},function(e,t){e.exports={name:"vega-lib",version:"3.1.0",description:"Include Vega in projeccts using minimal dependencies.",keywords:["vega","visualization","interaction","dataflow","library","data","d3"],license:"BSD-3-Clause",author:{name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},contributors:[{name:"Jeffrey Heer",url:"http://idl.cs.washington.edu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Ryan Russell",url:"https://github.com/RussellSprouts"},{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"},{name:"Yuri Astrakhan",url:"https://github.com/nyurik"}],main:"build/vega.js",module:"index","jsnext:main":"index",repository:{type:"git",url:"https://github.com/vega/vega-lib.git"},scripts:{rollup:"bin/rollup && bin/schema > build/vega-schema.json",prebuild:"rm -rf build && mkdir build",build:"npm run rollup && bin/rollup -e",postbuild:"uglifyjs build/vega.js -c -m -o build/vega.min.js && uglifyjs build/vega-core.js -c -m -o build/vega-core.min.js",test:"eslint index.js",prepublish:"npm run test && npm run build",__postpublish:"git push && git push --tags"},dependencies:{"vega-crossfilter":"2.0.0","vega-dataflow":"3.0.5","vega-encode":"2.0.6","vega-expression":"2.3.1","vega-force":"2.0.0","vega-geo":"2.2.0","vega-hierarchy":"2.1.1","vega-loader":"2.0.4","vega-parser":"2.5.1","vega-projection":"1.0.1","vega-runtime":"2.0.1","vega-scale":"2.1.1","vega-scenegraph":"2.3.1","vega-statistics":"1.2.1","vega-transforms":"1.2.0","vega-util":"1.7.0","vega-view":"2.2.0","vega-view-transforms":"1.2.0","vega-voronoi":"2.0.0","vega-wordcloud":"2.1.0"},devDependencies:{eslint:"4",rollup:"0.43","rollup-plugin-json":"2","rollup-plugin-node-resolve":"3",tape:"4",tv4:"1","uglify-js":"3"},browser:{buffer:!1,canvas:!1,"canvas-prebuilt":!1,fs:!1}}},function(e,t,n){"use strict";var r=n(1039);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";t.a=b;var r=n(1040),i=n(1041),a=n(1042),o=n(1044),s=n(1045),u=n(1046),c=n(1049),l=n(1050),f=n(1051),d=n(142),p=n(1052),h=n(1111),m=n(1112),g=n(1),v=n(0),y=n(19);function b(e,t){t=t||{},g.a.call(this),this.loader(t.loader||this._loader),this.logLevel(t.logLevel||0),this._el=null,this._renderType=t.renderer||y.i.Canvas,this._scenegraph=new y.o;var n=this._scenegraph.root;this._renderer=null,this._redraw=!0,this._handler=(new y.b).scene(n),this._preventDefault=!1,this._eventListeners=[],this._resizeListeners=[];var i=Object(p.a)(this,e,t.functions);this._runtime=i,this._signals=i.signals,this._bind=(e.bindings||[]).map(function(e){return{state:null,param:Object(v.extend)({},e)}}),i.root&&i.root.set(n),n.source=i.data.root.input,this.pulse(i.data.root.input,this.changeset().insert(n.items)),this._background=i.background||null,this._eventConfig=Object(a.b)(i.eventConfig),this._width=this.width(),this._height=this.height(),this._viewWidth=Object(h.d)(this,this._width),this._viewHeight=Object(h.c)(this,this._height),this._origin=[0,0],this._resize=0,this._autosize=1,Object(h.a)(this),Object(r.a)(this)}var w=Object(v.inherits)(b,g.a);function O(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:Object(v.error)("Unrecognized signal name: "+Object(v.stringValue)(t))}function x(e,t){var n=(e._targets||[]).filter(function(e){var n=e._update;return n&&n.handler===t});return n.length?n[0]:null}w.run=function(e){if(g.a.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(e){this.error(e)}return this},w.render=function(){return this._renderer&&(this._resize&&(this._resize=0,Object(d.c)(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},w.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},w.container=function(){return this._el},w.scenegraph=function(){return this._scenegraph},w.signal=function(e,t,n){var r=O(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},w.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},w.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},w.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},w.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},w.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},w.renderer=function(e){return arguments.length?(Object(y.J)(e)||Object(v.error)("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._renderType},w.loader=function(e){return arguments.length?(e!==this._loader&&(g.a.prototype.loader.call(this,e),this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._loader},w.resize=function(){return this._autosize=1,this},w._resizeView=h.b,w.addEventListener=function(e,t){return this._handler.on(e,t),this},w.removeEventListener=function(e,t){return this._handler.off(e,t),this},w.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},w.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},w.addSignalListener=function(e,t){var n=O(this,e),r=x(n,t);return r||((r=function(){t(e,n.value)}).handler=t,this.on(n,null,r)),this},w.removeSignalListener=function(e,t){var n=O(this,e),r=x(n,t);return r&&n._targets.remove(r),this},w.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},w.tooltipHandler=function(e){var t=this._handler;return arguments.length?(t.handleTooltip=e||y.f.prototype.handleTooltip,this):t.handleTooltip},w.events=a.a,w.finalize=s.a,w.hover=o.a,w.data=i.b,w.change=i.a,w.insert=i.c,w.remove=i.d,w.initialize=u.a,w.toImageURL=c.a,w.toCanvas=l.a,w.toSVG=f.a,w.getState=m.a,w.setState=m.b},function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:"default",item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var i=t.value,a=i?Object(r.isString)(i)?i:i.user:"default",o=n.item&&n.item.cursor||null;return i&&a===i.user&&o==i.item?i:{user:a,item:o}}),e.add(null,function(e){var t,n=e.cursor,i=this.value;return Object(r.isString)(n)||(i=n.item,n=n.user),t=n&&"default"!==n?n:i||n,"undefined"!=typeof document&&document.body&&(document.body.style.cursor=t),i},{cursor:t})}},function(e,t,n){"use strict";t.b=function(e){return a(this,e).values.value},t.a=o,t.c=function(e,t){return o.call(this,e,Object(r.h)().insert(t))},t.d=function(e,t){return o.call(this,e,Object(r.h)().remove(t))};var r=n(1),i=n(0);function a(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||Object(i.error)("Unrecognized data set: "+t),n[t]}function o(e,t){Object(r.l)(t)||Object(i.error)("Second argument to changes must be a changeset.");var n=a(this,e);return n.modified=!0,this.pulse(n.input,t)}},function(e,t,n){"use strict";t.b=function(e){var t=(e=Object(a.extend)({},e)).defaults;t&&(Object(a.isArray)(t.prevent)&&(t.prevent=Object(a.toSet)(t.prevent)),Object(a.isArray)(t.allow)&&(t.allow=Object(a.toSet)(t.allow)));return e},t.a=function(e,t,n){var a,u=this,c=new i.b(n),l=function(n,i){e===o&&function(e,t){var n=e._eventConfig.defaults,r=n&&n.prevent,i=n&&n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(u,t)&&n.preventDefault();try{c.receive(Object(r.a)(u,n,i))}catch(e){u.error(e)}finally{u.run()}};if(e===o)return u.addEventListener(t,l),c;e===s?"undefined"!=typeof window&&(a=[window]):"undefined"!=typeof document&&(a=document.querySelectorAll(e));if(!a)return u.warn("Can not resolve event source: "+e),c;for(var f=0,d=a.length;f<d;++f)a[f].addEventListener(t,l);return u._eventListeners.push({type:t,sources:a,handler:l}),c};var r=n(1043),i=n(1),a=n(0),o="view",s="window"},function(e,t,n){"use strict";var r=n(142),i=n(0),a=n(19);t.a=function(e,t,n){var o,s,u,c=e._renderer.scene();return c&&(u=Object(r.b)(e),s=t.changedTouches?t.changedTouches[0]:t,(o=Object(a.I)(s,c))[0]-=u[0],o[1]-=u[1]),t.dataflow=e,t.vega=function(e,t,n){var r=t?"group"===t.mark.marktype?t:t.mark.group:null;function a(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(e){if(!e)return n;Object(i.isString)(e)&&(e=a(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:Object(i.constant)(e),item:Object(i.constant)(t||{}),group:a,xy:o,x:function(e){return o(e)[0]},y:function(e){return o(e)[1]}}}(e,n,o),t.item=n,t}},function(e,t,n){"use strict";function r(e){return e.item}function i(e){var t=e.item.mark.source;return t.source||t}function a(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}t.a=function(e,t){return t=[t||"update",e=[e||"hover"]],this.on(this.events("view","mouseover",r),i,a(e)),this.on(this.events("view","mouseout",r),i,a(t)),this}},function(e,t,n){"use strict";t.a=function(){for(var e,t,n=this._eventListeners,r=n.length;--r>=0;)for(e=(t=n[r]).sources.length;--e>=0;)t.sources[e].removeEventListener(t.type,t.handler)}},function(e,t,n){"use strict";var r=n(1047),i=n(415),a=n(416),o=n(1048),s=n(19);function u(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}t.a=function(e,t){var n,c,l=this,f=l._renderType,d=Object(s.J)(f);return e=l._el=e?u(l,e):null,d||l.error("Unrecognized renderer type: "+f),n=d.handler||s.b,c=e?d.renderer:d.headless,l._renderer=c?Object(a.a)(l,l._renderer,e,c):null,l._handler=Object(o.a)(l,l._handler,e,n),l._redraw=!0,e&&(t=t?u(l,t):e.appendChild(Object(i.a)("div",{class:"vega-bindings"})),l._bind.forEach(function(e){e.param.element&&(e.element=u(l,e.param.element))}),l._bind.forEach(function(e){Object(r.a)(l,e.element||t,e)})),l}},function(e,t,n){"use strict";var r=n(415),i=n(0),a=n(8),o="vega-bind",s="vega-bind-name",u="vega-bind-radio",c="vega-option-";function l(e,t,n,i){var a=Object(r.a)("input");for(var o in n)"signal"!==o&&"element"!==o&&a.setAttribute("input"===o?"type":o,n[o]);a.setAttribute("name",n.signal),a.value=i,t.appendChild(a),a.addEventListener("input",function(){e.update(a.value)}),e.elements=[a],e.set=function(e){a.value=e}}function f(e,t,n,i){var a={type:"checkbox",name:n.signal};i&&(a.checked=!0);var o=Object(r.a)("input",a);t.appendChild(o),o.addEventListener("change",function(){e.update(o.checked)}),e.elements=[o],e.set=function(e){o.checked=!!e||null}}function d(e,t,n,i){var a=Object(r.a)("select",{name:n.signal});n.options.forEach(function(e){var t={value:e};m(e,i)&&(t.selected=!0),a.appendChild(Object(r.a)("option",t,e+""))}),t.appendChild(a),a.addEventListener("change",function(){e.update(n.options[a.selectedIndex])}),e.elements=[a],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(m(n.options[t],e))return void(a.selectedIndex=t)}}function p(e,t,n,i){var a=Object(r.a)("span",{class:u});t.appendChild(a),e.elements=n.options.map(function(t){var o=c+n.signal+"-"+t,s={id:o,type:"radio",name:n.signal,value:t};m(t,i)&&(s.checked=!0);var u=Object(r.a)("input",s);return u.addEventListener("change",function(){e.update(t)}),a.appendChild(u),a.appendChild(Object(r.a)("label",{for:o},t+"")),u}),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)m(n[r].value,t)&&(n[r].checked=!0)}}function h(e,t,n,i){i=void 0!==i?i:(+n.max+ +n.min)/2;var o=n.min||Math.min(0,+i)||0,s=n.max||Math.max(100,+i)||100,u=n.step||Object(a.r)(o,s,100),c=Object(r.a)("input",{type:"range",name:n.signal,min:o,max:s,step:u});c.value=i;var l=Object(r.a)("label",{},+i);function f(){l.textContent=c.value,e.update(+c.value)}t.appendChild(c),t.appendChild(l),c.addEventListener("input",f),c.addEventListener("change",f),e.elements=[c],e.set=function(e){c.value=e,l.textContent=e}}function m(e,t){return e===t||e+""==t+""}t.a=function(e,t,n){if(t){var a=n.param,u=n.state;return u||(u=n.state={elements:null,active:!1,set:null,update:function(t){u.source=!0,e.signal(a.signal,t).run()}},a.debounce&&(u.update=Object(i.debounce)(a.debounce,u.update))),function(e,t,n,i){var a=Object(r.a)("div",{class:o});a.appendChild(Object(r.a)("span",{class:s},n.name||n.signal)),t.appendChild(a);var u=l;switch(n.input){case"checkbox":u=f;break;case"select":u=d;break;case"radio":u=p;break;case"range":u=h}u(e,a,n,i)}(u,t,a,e.signal(a.signal)),u.active||(e.on(e._signals[a.signal],null,function(){u.source?u.source=!1:u.set(e.signal(a.signal))}),u.active=!0),u}}},function(e,t,n){"use strict";var r=n(142);t.a=function(e,t,n,i){var a=(new i).scene(e.scenegraph().root).initialize(n,Object(r.b)(e),e);return t&&(a.handleTooltip=t.handleTooltip,t.handlers().forEach(function(e){a.on(e.type,e.handler)})),a}},function(e,t,n){"use strict";var r=n(225),i=n(19);t.a=function(e,t){return e!==i.i.Canvas&&e!==i.i.SVG&&e!==i.i.PNG?Promise.reject("Unrecognized image type: "+e):Object(r.a)(this,e,t).then(function(t){return e===i.i.SVG?(n=t.svg(),r=new Blob([n],{type:"image/svg+xml"}),window.URL.createObjectURL(r)):t.canvas().toDataURL("image/png");var n,r})}},function(e,t,n){"use strict";var r=n(225),i=n(19);t.a=function(e){return Object(r.a)(this,i.i.Canvas,e).then(function(e){return e.canvas()})}},function(e,t,n){"use strict";var r=n(225),i=n(19);t.a=function(e){return Object(r.a)(this,i.i.SVG,e).then(function(e){return e.svg()})}},function(e,t,n){"use strict";var r=n(1),i=n(417),a=n(434);t.a=function(e,t,n){var o=n||i.c;return Object(a.b)(t,Object(a.a)(e,r.q,o))}},function(e,t,n){"use strict";var r=n(1054),i=n(432),a=n(433),o=n(0);t.a=function(e,t){return Object(o.isObject)(e)||Object(o.error)("Input Vega specification must be an object."),Object(r.a)(e,new i.a(Object(a.a)([t,e.config]))).toRuntime()}},function(e,t,n){"use strict";t.a=function(e,t){var n,m,g,v,y,b=t.config;return t.background=e.background||b.background,t.eventConfig=b.events,y=Object(l.k)(t.root=t.add(Object(l.j)())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",Object(i.a)(e.padding,b)),t.addSignal("autosize",Object(r.a)(e.autosize,b)),Object(p.array)(e.signals).forEach(function(e){h[e.name]||Object(a.a)(e,t)}),m=t.add(Object(d.d)()),g=Object(s.d)({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),g=t.add(Object(d.g)(Object(s.c)(g,u.a,c.g,e.style,t,{pulse:Object(l.k)(m)}))),v=t.add(Object(d.z)({layout:t.objectProperty(e.layout),legendMargin:b.legendMargin,autosize:t.signalRef("autosize"),mark:y,pulse:Object(l.k)(g)})),t.operators.pop(),t.pushState(Object(l.k)(g),Object(l.k)(v),null),Object(o.a)(e,t,!0),t.operators.push(v),n=t.add(Object(d.c)({mark:y,pulse:Object(l.k)(v)})),n=t.add(Object(d.u)({pulse:Object(l.k)(n)})),n=t.add(Object(d.w)({pulse:Object(l.k)(n)})),t.addData("root",new f.a(t,m,m,n)),t};var r=n(1055),i=n(1056),a=n(226),o=n(143),s=n(15),u=n(21),c=n(12),l=n(20),f=n(95),d=n(27),p=n(0),h=Object(p.toSet)(["width","height","padding","autosize"])},function(e,t,n){"use strict";var r=n(0);t.a=function(e,t){return e=e||t.autosize,Object(r.isObject)(e)?e:{type:e=e||"pad"}}},function(e,t,n){"use strict";var r=n(0);function i(e){return+e||0}t.a=function(e,t){return e=e||t.padding,Object(r.isObject)(e)?{top:i(e.top),bottom:i(e.bottom),left:i(e.left),right:i(e.right)}:{top:n=i(e),bottom:n,left:n,right:n};var n}},function(e,t,n){"use strict";var r,i,a,o,s,u=n(421),c=1,l=2,f=3,d=4,p=5,h=6,m=7,g=8;(r={})[c]="Boolean",r[l]="<end>",r[f]="Identifier",r[d]="Keyword",r[p]="Null",r[h]="Numeric",r[m]="Punctuator",r[g]="String",r[9]="RegularExpression";var v="ArrayExpression",y="BinaryExpression",b="CallExpression",w="ConditionalExpression",O="Identifier",x="Literal",j="LogicalExpression",_="MemberExpression",S="ObjectExpression",M="Property",E="UnaryExpression",k="Unexpected token %0",N="Unexpected number",A="Unexpected string",P="Unexpected identifier",C="Unexpected reserved word",D="Unexpected end of input",T="Invalid regular expression",R="Invalid regular expression: missing /",L="Octal literals are not allowed in strict mode.",I="Duplicate data property in object literal not allowed in strict mode",F="ILLEGAL",q="Disabled.",U=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),z=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]");function B(e,t){if(!e)throw new Error("ASSERT: "+t)}function V(e){return e>=48&&e<=57}function H(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function G(e){return"01234567".indexOf(e)>=0}function W(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function X(e){return 10===e||13===e||8232===e||8233===e}function Y(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&U.test(String.fromCharCode(e))}function $(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&z.test(String.fromCharCode(e))}var J={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Q(){for(var e;a<o&&(W(e=i.charCodeAt(a))||X(e));)++a}function K(e){var t,n,r,s=0;for(n="u"===e?4:2,t=0;t<n;++t)a<o&&H(i[a])?(r=i[a++],s=16*s+"0123456789abcdef".indexOf(r.toLowerCase())):he({},k,F);return String.fromCharCode(s)}function Z(){var e,t,n,r;for(t=0,"}"===(e=i[a])&&he({},k,F);a<o&&H(e=i[a++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&he({},k,F),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function ee(){var e,t;for(e=i.charCodeAt(a++),t=String.fromCharCode(e),92===e&&(117!==i.charCodeAt(a)&&he({},k,F),++a,(e=K("u"))&&"\\"!==e&&Y(e.charCodeAt(0))||he({},k,F),t=e);a<o&&$(e=i.charCodeAt(a));)++a,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==i.charCodeAt(a)&&he({},k,F),++a,(e=K("u"))&&"\\"!==e&&$(e.charCodeAt(0))||he({},k,F),t+=e);return t}function te(){var e,t;return e=a,{type:1===(t=92===i.charCodeAt(a)?ee():function(){var e,t;for(e=a++;a<o;){if(92===(t=i.charCodeAt(a)))return a=e,ee();if(!$(t))break;++a}return i.slice(e,a)}()).length?f:J.hasOwnProperty(t)?d:"null"===t?p:"true"===t||"false"===t?c:f,value:t,start:e,end:a}}function ne(){var e,t,n,r,o=a,s=i.charCodeAt(a),u=i[a];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++a,{type:m,value:String.fromCharCode(s),start:o,end:a};default:if(61===(e=i.charCodeAt(a+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return a+=2,{type:m,value:String.fromCharCode(s)+String.fromCharCode(e),start:o,end:a};case 33:case 61:return a+=2,61===i.charCodeAt(a)&&++a,{type:m,value:i.slice(o,a),start:o,end:a}}}return">>>="===(r=i.substr(a,4))?{type:m,value:r,start:o,end:a+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:m,value:n,start:o,end:a+=3}:u===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(u)>=0||"=>"===t?{type:m,value:t,start:o,end:a+=2}:"<>=!+-*%&|^/".indexOf(u)>=0?{type:m,value:u,start:o,end:++a}:void he({},k,F)}function re(){var e,t,n;if(B(V((n=i[a]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=a,e="","."!==n){if(e=i[a++],n=i[a],"0"===e){if("x"===n||"X"===n)return++a,function(e){for(var t="";a<o&&H(i[a]);)t+=i[a++];return 0===t.length&&he({},k,F),Y(i.charCodeAt(a))&&he({},k,F),{type:h,value:parseInt("0x"+t,16),start:e,end:a}}(t);if(G(n))return function(e){for(var t="0"+i[a++];a<o&&G(i[a]);)t+=i[a++];return(Y(i.charCodeAt(a))||V(i.charCodeAt(a)))&&he({},k,F),{type:h,value:parseInt(t,8),octal:!0,start:e,end:a}}(t);n&&V(n.charCodeAt(0))&&he({},k,F)}for(;V(i.charCodeAt(a));)e+=i[a++];n=i[a]}if("."===n){for(e+=i[a++];V(i.charCodeAt(a));)e+=i[a++];n=i[a]}if("e"===n||"E"===n)if(e+=i[a++],"+"!==(n=i[a])&&"-"!==n||(e+=i[a++]),V(i.charCodeAt(a)))for(;V(i.charCodeAt(a));)e+=i[a++];else he({},k,F);return Y(i.charCodeAt(a))&&he({},k,F),{type:h,value:parseFloat(e),start:t,end:a}}function ie(){var e,t,n,r;return s=null,Q(),e=a,t=function(){var e,t,n,r;for(B("/"===(e=i[a]),"Regular expression literal must start with a slash"),t=i[a++],n=!1,r=!1;a<o;)if(t+=e=i[a++],"\\"===e)X((e=i[a++]).charCodeAt(0))&&he({},R),t+=e;else if(X(e.charCodeAt(0)))he({},R);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||he({},R),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";a<o&&$((e=i[a]).charCodeAt(0));)++a,"\\"===e&&a<o?he({},k,F):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&he({},T,n),{value:n,literal:t}}(),r=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){if(parseInt(t,16)<=1114111)return"x";he({},T)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){he({},T)}try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:a}}function ae(){var e;return Q(),a>=o?{type:l,start:a,end:a}:Y(e=i.charCodeAt(a))?te():40===e||41===e||59===e?ne():39===e||34===e?function(){var e,t,n,r,s="",u=!1;for(B("'"===(e=i[a])||'"'===e,"String literal must starts with a quote"),t=a,++a;a<o;){if((n=i[a++])===e){e="";break}if("\\"===n)if((n=i[a++])&&X(n.charCodeAt(0)))"\r"===n&&"\n"===i[a]&&++a;else switch(n){case"u":case"x":"{"===i[a]?(++a,s+=Z()):s+=K(n);break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="\v";break;default:G(n)?(0!==(r="01234567".indexOf(n))&&(u=!0),a<o&&G(i[a])&&(u=!0,r=8*r+"01234567".indexOf(i[a++]),"0123".indexOf(n)>=0&&a<o&&G(i[a])&&(r=8*r+"01234567".indexOf(i[a++]))),s+=String.fromCharCode(r)):s+=n}else{if(X(n.charCodeAt(0)))break;s+=n}}return""!==e&&he({},k,F),{type:g,value:s,octal:u,start:t,end:a}}():46===e?V(i.charCodeAt(a+1))?re():ne():V(e)?re():ne()}function oe(){var e;return a=(e=s).end,s=ae(),a=e.end,e}function se(){var e;e=a,s=ae(),a=e}function ue(e,t,n){var r=new u.a("||"===e||"&&"===e?j:y);return r.operator=e,r.left=t,r.right=n,r}function ce(e,t){var n=new u.a(b);return n.callee=e,n.arguments=t,n}function le(e){var t=new u.a(O);return t.name=e,t}function fe(e){var t=new u.a(x);return t.value=e.value,t.raw=i.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function de(e,t,n){var r=new u.a(_);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function pe(e,t,n){var r=new u.a(M);return r.key=t,r.value=n,r.kind=e,r}function he(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return B(t<r.length,"Message reference must be in range"),r[t]});throw(n=new Error(i)).index=a,n.description=i,n}function me(e){e.type===l&&he(e,D),e.type===h&&he(e,N),e.type===g&&he(e,A),e.type===f&&he(e,P),e.type===d&&he(e,C),he(e,k,e.value)}function ge(e){var t=oe();t.type===m&&t.value===e||me(t)}function ve(e){return s.type===m&&s.value===e}function ye(e){return s.type===d&&s.value===e}function be(){var e=[];for(a=s.start,ge("[");!ve("]");)ve(",")?(oe(),e.push(null)):(e.push(Pe()),ve("]")||ge(","));return oe(),function(e){var t=new u.a(v);return t.elements=e,t}(e)}function we(){var e;return a=s.start,(e=oe()).type===g||e.type===h?(e.octal&&he(e,L),fe(e)):le(e.value)}function Oe(){var e,t,n;return a=s.start,(e=s).type===f?(n=we(),ge(":"),pe("init",n,Pe())):e.type!==l&&e.type!==m?(t=we(),ge(":"),pe("init",t,Pe())):void me(e)}function xe(){var e,t,n=[],r={},i=String;for(a=s.start,ge("{");!ve("}");)t="$"+((e=Oe()).key.type===O?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?he({},I):r[t]=!0,n.push(e),ve("}")||ge(",");return ge("}"),function(e){var t=new u.a(S);return t.properties=e,t}(n)}var je={if:1,this:1};function _e(){var e,t,n;if(ve("("))return function(){var e;return ge("("),e=Ce(),ge(")"),e}();if(ve("["))return be();if(ve("{"))return xe();if(e=s.type,a=s.start,e===f||je[s.value])n=le(oe().value);else if(e===g||e===h)s.octal&&he(s,L),n=fe(oe());else{if(e===d)throw new Error(q);e===c?((t=oe()).value="true"===t.value,n=fe(t)):e===p?((t=oe()).value=null,n=fe(t)):ve("/")||ve("/=")?(n=fe(ie()),se()):me(oe())}return n}function Se(){var e=[];if(ge("("),!ve(")"))for(;a<o&&(e.push(Pe()),!ve(")"));)ge(",");return ge(")"),e}function Me(){var e;return a=s.start,function(e){return e.type===f||e.type===d||e.type===c||e.type===p}(e=oe())||me(e),le(e.value)}function Ee(){var e;return ge("["),e=Ce(),ge("]"),e}function ke(){var e=function(){var e;for(e=_e();;)if(ve("."))ge("."),e=de(".",e,Me());else if(ve("("))e=ce(e,Se());else{if(!ve("["))break;e=de("[",e,Ee())}return e}();if(s.type===m&&(ve("++")||ve("--")))throw new Error(q);return e}function Ne(){var e,t,n,r,i;if(s.type!==m&&s.type!==d)t=ke();else{if(ve("++")||ve("--"))throw new Error(q);if(ve("+")||ve("-")||ve("~")||ve("!"))e=oe(),t=Ne(),n=e.value,r=t,(i=new u.a(E)).operator=n,i.argument=r,i.prefix=!0,t=i;else{if(ye("delete")||ye("void")||ye("typeof"))throw new Error(q);t=ke()}}return t}function Ae(e){var t=0;if(e.type!==m&&e.type!==d)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Pe(){var e,t;return e=function(){var e,t,n,r,i,a,o,u,c,l;if(e=s,c=Ne(),0===(i=Ae(r=s)))return c;for(r.prec=i,oe(),t=[e,s],a=[c,r,o=Ne()];(i=Ae(s))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,c=a.pop(),t.pop(),n=ue(u,c,o),a.push(n);(r=oe()).prec=i,a.push(r),t.push(s),n=Ne(),a.push(n)}for(n=a[l=a.length-1],t.pop();l>1;)t.pop(),n=ue(a[l-1].value,a[l-2],n),l-=2;return n}(),ve("?")&&(oe(),t=Pe(),ge(":"),e=function(e,t,n){var r=new u.a(w);return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,Pe())),e}function Ce(){var e=Pe();if(ve(","))throw new Error(q);return e}t.a=function(e){a=0,o=(i=e).length,s=null,se();var t=Ce();if(s.type!==l)throw new Error("Unexpect token after expression.");return t}},function(e,t,n){"use strict";var r=n(422),i=n(423),a=n(0);t.a=function(e){var t=(e=e||{}).whitelist?Object(a.toSet)(e.whitelist):{},n=e.blacklist?Object(a.toSet)(e.blacklist):{},o=e.constants||r.a,s=(e.functions||i.a)(h),u=e.globalvar,c=e.fieldvar,l={},f={},d=0,p=Object(a.isFunction)(u)?u:function(e){return u+'["'+e+'"]'};function h(e){if(Object(a.isString)(e))return e;var t=m[e.type];return null==t&&Object(a.error)("Unsupported type: "+e.type),t(e)}var m={Literal:function(e){return e.raw},Identifier:function(e){var r=e.name;return d>0?r:n.hasOwnProperty(r)?Object(a.error)("Illegal identifier: "+r):o.hasOwnProperty(r)?o[r]:t.hasOwnProperty(r)?r:(l[r]=1,p(r))},MemberExpression:function(e){var t=!e.computed,n=h(e.object);t&&(d+=1);var r=h(e.property);return n===c&&(f[r]=1),t&&(d-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&Object(a.error)("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=s.hasOwnProperty(t)&&s[t];return r||Object(a.error)("Unrecognized function: "+t),Object(a.isFunction)(r)?r(n):r+"("+n.map(h).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(h).join(",")+"]"},BinaryExpression:function(e){return"("+h(e.left)+e.operator+h(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+h(e.argument)+")"},ConditionalExpression:function(e){return"("+h(e.test)+"?"+h(e.consequent)+":"+h(e.alternate)+")"},LogicalExpression:function(e){return"("+h(e.left)+e.operator+h(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(h).join(",")+"}"},Property:function(e){d+=1;var t=h(e.key);return d-=1,t+":"+h(e.value)}};function g(e){var t={code:h(e),globals:Object.keys(l),fields:Object.keys(f)};return l={},f={},t}return g.functions=s,g.constants=o,g}},function(e,t,n){"use strict";t.c=function(e,t){return o("format",r.a,t)(e)},t.f=s,t.h=function(e,t){return o("utcFormat",i.d,t)(e)},t.g=function(e,t){return o("timeParse",i.c,t)(e)},t.i=function(e,t){return o("utcParse",i.e,t)(e)},t.e=function(e){return c(e,1,"%B")},t.d=function(e){return c(e,1,"%b")},t.b=function(e){return c(0,2+e,"%A")},t.a=function(e){return c(0,2+e,"%a")};var r=n(67),i=n(70),a={};function o(e,t,n){var r=e+":"+n,i=a[r];return i&&i[0]===t||(a[r]=i=[t,t(n)]),i[1]}function s(e,t){return o("timeFormat",i.a,t)(e)}var u=new Date(2e3,0,1);function c(e,t,n){return u.setMonth(e),u.setDate(t),s(u,n)}},function(e,t,n){"use strict";t.a=function(e){return 1+~~(new Date(e).getMonth()/3)},t.b=function(e){return 1+~~(new Date(e).getUTCMonth()/3)}},function(e,t,n){"use strict";function r(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}t.c=function(){return r(this.context.dataflow,"warn",arguments)},t.b=function(){return r(this.context.dataflow,"info",arguments)},t.a=function(){return r(this.context.dataflow,"debug",arguments)}},function(e,t,n){"use strict";t.a=function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}},function(e,t,n){"use strict";t.a=function(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),(r=a-i)>=n-t?[t,n]:[Math.min(Math.max(i,t),n-r),Math.min(Math.max(a,r),n)]}},function(e,t,n){"use strict";t.b=function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},t.a=function(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}},function(e,t,n){"use strict";t.b=function(){return r?r.screen:{}},t.c=function(){return r?[r.innerWidth,r.innerHeight]:[void 0,void 0]},t.a=function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]};var r="undefined"!=typeof window&&window||null},function(e,t,n){"use strict";var r=n(0);t.a=function(e,t,n,i,a,o){var s=Math.abs(t-e[0]),u=Math.abs(Object(r.peek)(e)-t);return s<u&&s<=n?i:u<=n?a:o}},function(e,t,n){"use strict";t.a=function(e){return e[e.length-1]-e[0]||0}},function(e,t,n){"use strict";var r=n(144),i=n(19),a=n(60);t.a=function(e,t,n,o,s){e=Object(r.e)(e,(s||this).context);var u=Object(i.d)(t,n),c=e.domain(),l=c[0],f=c[c.length-1],d=Object(a.e)(e,l,f);e.ticks&&(l!==(c=e.ticks(+o||15))[0]&&c.unshift(l),f!==c[c.length-1]&&c.push(f));for(var p=0,h=c.length;p<h;++p)u.stop(d(c[p]),e(c[p]));return u}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return u});var r=n(110),i=n(144);function a(e,t){return function(n,r,a){if(n){var o=Object(i.e)(n,(a||this).context);return o&&o.path[e](r)}return t(r)}}var o=a("area",r.c),s=a("bounds",r.f),u=a("centroid",r.g)},function(e,t,n){"use strict";t.a=function(e,t,n){var i=Object(r.e)(e,(n||this).context);return function(e){return i?i.path.context(e)(t):""}},t.b=function(e){var t=null;return function(n){return n?Object(i.F)(n,t=t||Object(i.D)(e)):e}};var r=n(144),i=n(19)},function(e,t,n){"use strict";t.b=function(e,t,n){var r=o(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(a):void 0},t.a=function(e,t){var n=o(e,this)[t];return n?n.ancestors().map(a):void 0};var r=n(228),i={};function a(e){return e.data}function o(e,t){var n=r.a.call(t,e);return n.root&&n.root.lookup||i}},function(e,t,n){"use strict";t.a=function(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e}},function(e,t,n){"use strict";var r=n(1),i=n(0);function a(e,t){return e===t||e!=e&&t!=t||!(!Object(i.isArray)(e)||!Object(i.isArray)(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!a(e[n],t[n]))return!1;return!0}(e,t)}function o(e){return function(t){for(var n in e)if(!a(t[n],e[n]))return!1;return!0}}t.a=function(e,t,n,a,s,u){var c,l,f=this.context.dataflow,d=this.context.data[e],p=d.input,h=d.changes,m=f.stamp();if(!1===f._trigger||!(p.value.length||t||a))return 0;if((!h||h.stamp<m)&&(d.changes=h=f.changeset(),h.stamp=m,f.runAfter(function(){d.modified=!0,f.pulse(p,h).run()},!0,1)),n&&(c=!0===n?i.truthy:Object(i.isArray)(n)||Object(r.m)(n)?n:o(n),h.remove(c)),t&&h.insert(t),a&&(c=o(a),p.value.some(c)?h.remove(c):h.insert(a)),s)for(l in u)h.modify(s,l,u[l]);return 1}},function(e,t,n){"use strict";t.d=function(e,t,n){return h.call(this,e,t,n,d)},t.a=function(e,t,n){return h.call(this,e,t,n,p)},t.c=function(e,t,n,a){t[0].type!==r.b&&Object(s.error)("First argument to indata must be a string literal.");var u=t[0].value,l=t.length>=2&&t[t.length-1].value,f=o.b+"unit";l!==c||a.hasOwnProperty(f)||(a[f]=n.getData(u).indataRef(n,"unit"));Object(i.b)(e,t,n,a)},t.e=function(e,t,n,r){var i,a,o,s,d,p=this.context.data[e],h=p?p.values.value:[],v=p?p[f]&&p[f].value:void 0,y=h[0],b=0;if(!y)return;for(i=t?y.encodings.length:y.fields.length;b<i;++b)if(t&&y.encodings[b]===t||n&&y.fields[b]===n){a=b,s=y[u+y.fields[b]];break}v&&1===v.size&&(r=l);v&&r===c?(d=h.reduce(function(e,t){var n=e[t.unit]||(e[t.unit]=[]);return n.push({unit:t.unit,value:t.values[a]}),e},{}),o=Object.keys(d).map(function(e){return{unit:e,value:s?g(d[e],l):m(d[e],l)}})):o=h.map(function(e){return{unit:e.unit,value:e.values[a]}});return s?g(o,r):m(o,r)},t.b=function(e,t,n,r){var i,a,o,s,u,c=this.context.data[e],l=c?c.values.value:[],f=l[0],d=0;if(!f)return;for(i=f.intervals.length;d<i;++d)if(a=f.intervals[d],t&&a.encoding===t||n&&a.field===n){if(!a.extent)return;o=d,u=a.extent.length>2;break}return s=l.reduce(function(e,t){var n=t.intervals[o].extent,r=u?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return u?e.push.apply(e,r):e.push(r),e},[]),u?m(s,r):g(s,r)};var r=n(227),i=n(228),a=n(424),o=n(145),s=n(0),u="bin_",c="intersect",l="union",f="index:unit";function d(e,t){for(var n,r=t.fields,i=t.values,o=t.getter||(t.getter=[]),c=r.length,l=0;l<c;++l)if(o[l]=o[l]||Object(s.field)(r[l]),n=o[l](e),Object(s.isDate)(n)&&(n=Object(s.toNumber)(n)),Object(s.isDate)(i[l])&&(i[l]=Object(s.toNumber)(i[l])),t[u+r[l]]){if(Object(s.isDate)(i[l][0])&&(i[l]=i[l].map(s.toNumber)),!Object(a.a)(n,i[l],!0,!1))return!1}else if(n!==i[l])return!1;return!0}function p(e,t){for(var n,r,i=t.intervals,o=i.length,u=0;u<o;++u){if(n=i[u].extent,r=(i[u].getter||(i[u].getter=Object(s.field)(i[u].field)))(e),!n||n[0]===n[1])return!1;if(Object(s.isDate)(r)&&(r=Object(s.toNumber)(r)),Object(s.isDate)(n[0])&&(n=i[u].extent=n.map(s.toNumber)),Object(s.isNumber)(n[0])&&!Object(a.a)(r,n))return!1;if(Object(s.isString)(n[0])&&n.indexOf(r)<0)return!1}return!0}function h(e,t,n,r){for(var i,a,o,s,u,l=this.context.data[e],d=l?l.values.value:[],p=l?l[f]&&l[f].value:void 0,h=n===c,m=d.length,g=0;g<m;++g)if(i=d[g],p&&h){if(-1===(o=(a=a||{})[s=i.unit]||0))continue;if(u=r(t,i),a[s]=u?-1:++o,u&&1===p.size)return!0;if(!u&&o===p.get(s).count)return!1}else if(h^(u=r(t,i)))return u;return m&&h}function m(e,t){for(var n,r,i,a,o={},s=0,u={},l=[],f=0,d=e.length;f<d;++f)r=(n=e[f]).unit,a=n.value,o[r]||(o[r]=++s),(i=u[a])||(u[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in u)i=u[a],t===c&&i.count!==s||l.push(i.value);return l.length?l:void 0}function g(e,t){for(var n,r,i,a,o=t===c?y:v,u=0,l=e.length;u<l;++u)n=e[u].value,Object(s.isDate)(n[0])&&(n=n.map(s.toNumber)),(i=n[0])>(a=n[1])&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function v(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function y(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}},function(e,t,n){"use strict";var r=n(61),i=n(425),a=n(146),o=n(0),s="var datum=event.item&&event.item.datum;";t.a=function(e,t,n){var u,c,l=e.events,f=e.update,d=e.encode,p=[];l||Object(o.error)("Signal update missing events specification."),Object(o.isString)(l)&&(l=Object(a.selector)(l)),(l=Object(o.array)(l).filter(function(e){return e.signal||e.scale?(p.push(e),0):1})).length&&p.push(l.length>1?{merge:l}:l[0]),null!=d&&(f&&Object(o.error)("Signal encode and update are mutually exclusive."),f="encode(item(),"+Object(o.stringValue)(d)+")"),u=Object(o.isString)(f)?Object(r.a)(f,t,s):null!=f.expr?Object(r.a)(f.expr,t,s):null!=f.value?f.value:null!=f.signal?{$expr:"_.value",$params:{value:t.signalRef(f.signal)}}:Object(o.error)("Invalid signal update specification."),c={target:n,update:u},e.force&&(c.options={force:!0}),p.forEach(function(e){e={source:Object(i.a)(e,t)},t.addUpdate(Object(o.extend)(e,c))})}},function(e,t,n){"use strict";t.a=function(e,t,n){return r=t||a,i=n||m,v(e.trim()).map(y)};var r,i,a="view",o="[",s="]",u="{",c="}",l=":",f=",",d="@",p=">",h=/[[\]{}]/,m={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function g(e,t,n,r,i){for(var a,o=0,s=e.length;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function v(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=g(e,i,f,o+u,s+c),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function y(e){return"["===e[0]?function(e){var t,n,r=e.length,i=1;if((i=g(e,i,s,o,s))===r)throw"Empty between selector: "+e;if(2!==(t=v(e.substring(1,i))).length)throw"Between selector must have two elements: "+e;if((e=e.slice(i+1).trim())[0]!==p)throw"Expected '>' after between selector: "+e;if(t=t.map(y),(n=y(e.slice(1).trim())).between)return{between:t,stream:n};n.between=t;return n}(e):function(e){var t,n,a={source:r},p=[],m=[0,0],v=0,y=0,b=e.length,w=0;if(e[b-1]===c){if(!((w=e.lastIndexOf(u))>=0))throw"Unmatched right brace: "+e;try{m=function(e){var t=e.split(f);if(!e.length||t.length>2)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}(e.substring(w+1,b-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,w).trim(),b=e.length,w=0}if(!b)throw e;e[0]===d&&(v=++w);(t=g(e,w,l))<b&&(p.push(e.substring(y,t).trim()),y=w=++t);if((w=g(e,w,o))===b)p.push(e.substring(y,b).trim());else if(p.push(e.substring(y,w).trim()),n=[],(y=++w)===b)throw"Unmatched left bracket: "+e;for(;w<b;){if((w=g(e,w,s))===b)throw"Unmatched left bracket: "+e;if(n.push(e.substring(y,w).trim()),w<b-1&&e[++w]!==o)throw"Expected left bracket: "+e;y=++w}if(!(b=p.length)||h.test(p[b-1]))throw"Invalid event selector: "+e;b>1?(a.type=p[1],v?a.markname=p[0].slice(1):(O=p[0],i.hasOwnProperty(O)?a.marktype=p[0]:a.source=p[0])):a.type=p[0];var O;"!"===a.type.slice(-1)&&(a.consume=!0,a.type=a.type.slice(0,-1));null!=n&&(a.filter=n);m[0]&&(a.throttle=m[0]);m[1]&&(a.debounce=m[1]);return a}(e)}},function(e,t,n){"use strict";t.a=function(e,t){var n=e.type||"linear";u.hasOwnProperty(n)||Object(a.error)("Unrecognized scale type: "+Object(a.stringValue)(n));t.addScale(e.name,{type:n,domain:void 0})},t.b=function(e,t){var n,r=t.getScale(e.name).params;r.domain=h(e.domain,e,t),null!=e.range&&(r.range=function e(t,n,r){var i=t.range,o=n.config.range;if(i.signal)return n.signalRef(i.signal);if(Object(a.isString)(i)){if(o&&o.hasOwnProperty(i))return t=Object(a.extend)({},t,{range:o[i]}),e(t,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=l(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(a.error)("Unrecognized scale range value: "+Object(a.stringValue)(i))}else{if(i.scheme)return r.scheme=d(i.scheme,n),i.extent&&(r.schemeExtent=function(e,t){return e.signal?t.signalRef(e.signal):e.map(function(e){return d(e,t)})}(i.extent,n)),void(i.count&&(r.schemeCount=d(i.count,n)));if(i.step)return void(r.rangeStep=d(i.step,n));if(l(t.type)&&!Object(a.isArray)(i))return h(i,t,n);Object(a.isArray)(i)||Object(a.error)("Unsupported range type: "+Object(a.stringValue)(i))}return i.map(function(e){return d(e,n)})}(e,t,r));null!=e.interpolate&&function(e,t){t.interpolate=d(e.type||e),null!=e.gamma&&(t.interpolateGamma=d(e.gamma))}(e.interpolate,r);null!=e.nice&&function(e,t){t.nice=Object(a.isObject)(e)?{interval:d(e.interval),step:d(e.step)}:d(e)}(e.nice,r);for(n in e)r.hasOwnProperty(n)||"name"===n||(r[n]=d(e[n],t))};var r=n(20),i=n(27),a=n(0),o=0,s=["identity","ordinal","band","point","bin-linear","bin-ordinal","linear","pow","sqrt","log","sequential","time","utc","quantize","quantile","threshold"],u=Object(a.toSet)(s),c=Object(a.toSet)(s.slice(1,6));function l(e){return c.hasOwnProperty(e)}function f(e){return"quantile"===e}function d(e,t){return Object(a.isObject)(e)?e.signal?t.signalRef(e.signal):Object(a.error)("Unsupported object: "+Object(a.stringValue)(e)):e}function p(e){Object(a.error)("Can not find data set: "+Object(a.stringValue)(e))}function h(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(Object(a.isArray)(e)?function(e,t,n){return e.map(function(e){return d(e,n)})}:e.fields?function(e,t,n){var s=e.data,u=e.fields.reduce(function(e,t){return t=Object(a.isString)(t)?{data:s,field:t}:Object(a.isArray)(t)||t.signal?function(e,t){var n="_:vega:_"+o++,r=Object(i.d)({});if(Object(a.isArray)(e))r.value={$ingest:e};else if(e.signal){var s="setdata("+Object(a.stringValue)(n)+","+e.signal+")";r.params.input=t.signalRef(s)}return t.addDataPipeline(n,[r,Object(i.w)({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e},[]);return(l(t.type)?function(e,t,n){var a,o,s,u;return a=n.map(function(e){var n=t.getData(e.data);return n||p(e.data),n.countsRef(t,e.field)}),o=t.add(Object(i.a)({groupby:r.h,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:a})),s=t.add(Object(i.d)({pulse:Object(r.k)(o)})),u=t.add(Object(i.y)({field:r.h,sort:t.sortRef(m(e.sort,!0)),pulse:Object(r.k)(s)})),Object(r.k)(u)}:f(t.type)?function(e,t,n){var a=n.map(function(e){var n=t.getData(e.data);return n||p(e.data),n.domainRef(t,e.field)});return Object(r.k)(t.add(Object(i.n)({values:a})))}:function(e,t,n){var a=n.map(function(e){var n=t.getData(e.data);return n||p(e.data),n.extentRef(t,e.field)});return Object(r.k)(t.add(Object(i.m)({extents:a})))})(e,n,u)}:function(e,t,n){var r=n.getData(e.data);r||p(e.data);return l(t.type)?r.valuesRef(n,e.field,m(e.sort,!1)):f(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)})(e,t,n);null==t.domainMin&&null==t.domainMax||Object(a.error)("No scale domain defined for domainMin/domainMax to override.")}function m(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?Object(a.error)("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&Object(a.error)("Multiple domain scales support op count only."):Object(a.error)("No field provided for sort aggregate op: "+e.op):Object(a.isObject)(e)?e.field="key":e={field:"key"}),e}},function(e,t,n){"use strict";var r=n(0);function i(e,t){return Object(r.isArray)(e)?e.map(function(e){return i(e,t)}):Object(r.isObject)(e)?e.signal?t.signalRef(e.signal):Object(r.error)("Unsupported parameter object: "+Object(r.stringValue)(e)):e}t.a=function(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=i(e[r],t));t.addProjection(e.name,n)}},function(e,t,n){"use strict";var r=n(1080),i=n(1087),a=n(1088),o=n(1089),s=n(1090),u=n(429),c=n(149),l=n(12),f=n(15),d=n(25),p=n(20),h=n(27),m=n(0);function g(e,t,n,r){var i=t&&(t.update&&t.update[n]||t.enter&&t.enter[n]);return+(i?i.value:r&&(i=e.config.style[r])&&i[n])}t.a=function(e,t){var n,v,y,b,w,O,x,j,_=e.type||"symbol",S=t.config.legend,M=e.encode||{},E=M.legend||{},k=E.name||void 0,N=E.interactive,A=E.style,P=e.size||e.shape||e.fill||e.stroke||e.strokeDash||e.opacity;return P||Object(m.error)("Missing valid scale for legend."),n={orient:Object(p.n)(e.orient,S.orient),title:null!=e.title},v=Object(p.k)(t.add(Object(h.d)(null,[n]))),E=Object(f.d)({enter:function(e){var t={};return Object(f.a)(t,"fill",e.fillColor)+Object(f.a)(t,"stroke",e.strokeColor)+Object(f.a)(t,"strokeWidth",e.strokeWidth)+Object(f.a)(t,"strokeDash",e.strokeDash)+Object(f.a)(t,"cornerRadius",e.cornerRadius)?t:void 0}(S),update:{offset:Object(f.b)(Object(p.n)(e.offset,S.offset)),padding:Object(f.b)(Object(p.n)(e.padding,S.padding)),titlePadding:Object(f.b)(Object(p.n)(e.titlePadding,S.titlePadding))}},E,d.m),O={update:{x:{field:{group:"padding"}},y:{field:{group:"padding"}},entryPadding:Object(f.b)(Object(p.n)(e.entryPadding,S.entryPadding))}},"gradient"===_?(y=Object(p.k)(t.add(Object(h.k)({type:"gradient",scale:t.scaleRef(P),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),j=[Object(r.a)(e,P,S,M.gradient),Object(i.a)(e,S,M.labels,y)]):(y=Object(p.k)(t.add(Object(h.k)(x={scale:t.scaleRef(P),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),j=[Object(o.a)(e,S,M.symbols,y),Object(a.a)(e,S,M.labels,y)],x.size=function(e,t,n){var r=g(t,n[1].encode,"fontSize",d.c);if(e.size)return{$expr:"Math.max(Math.ceil(Math.sqrt(_.scale(datum))),"+r+")"};var i=g(t,n[0].encode,"size");return Math.max(Math.ceil(Math.sqrt(i)),r)}(e,t,j)),j=[Object(u.a)(l.h,null,null,v,N,O,j)],n.title&&(w=Object(s.a)(e,S,M.title,v),O.update.y.offset={field:{group:"titlePadding"},offset:g(t,w.encode,"fontSize",d.d)},j.push(w)),b=Object(u.a)(l.k,A,k,v,N,E,j),e.zindex&&(b.zindex=e.zindex),Object(c.a)(b,t)}},function(e,t,n){"use strict";var r=n(36),i=n(21),a=n(12),o=n(15);t.a=function(e,t,n,s){var u,c,l={value:0},f={};return f.enter=u={opacity:l,x:l,y:l},Object(o.a)(u,"width",n.gradientWidth),Object(o.a)(u,"height",n.gradientHeight),Object(o.a)(u,"stroke",n.gradientStrokeColor),Object(o.a)(u,"strokeWidth",n.gradientStrokeWidth),f.exit={opacity:l},f.update=c={x:l,y:l,fill:{gradient:t},opacity:{value:1}},Object(o.a)(c,"width",n.gradientWidth),Object(o.a)(c,"height",n.gradientHeight),Object(r.a)(i.b,a.i,null,void 0,void 0,f,s)}},function(e,t,n){"use strict";t.a=function(e,t,n,u){var c,l,f,d={},p="var o=item,datum=o.datum,$;";for(c in e)l=e[c],Object(s.isArray)(l)?p+=Object(a.a)(c,l,u,n,d):(f=Object(i.a)(c,l,u,n,d),p+=Object(o.a)("o",c,f));return p+=Object(r.a)(e,t),{$expr:p+="return 1;",$fields:Object.keys(d),$output:Object.keys(e)}};var r=n(1082),i=n(147),a=n(1086),o=n(428),s=n(0)},function(e,t,n){"use strict";var r=n(0),i=Object(r.toSet)(["rule"]),a=Object(r.toSet)(["group","image","rect"]);t.a=function(e,t){var n="";return i[t]?n:(e.x2&&(e.x?(a[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(a[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)}},function(e,t,n){"use strict";var r=n(147);t.a=function(e,t,n,i){function a(e,a,o,s){return"this."+e+"("+[Object(r.a)(null,a,t,n,i),Object(r.a)(null,o,t,n,i),Object(r.a)(null,s,t,n,i)].join(",")+").toString()"}return e.c?a("hcl",e.h,e.c,e.l):e.h||e.s?a("hsl",e.h,e.s,e.l):e.l||e.a?a("lab",e.l,e.a,e.b):e.r||e.g||e.b?a("rgb",e.r,e.g,e.b):null}},function(e,t,n){"use strict";var r=n(427),i=n(0);t.a=function(e,t,n,a){return"this.gradient("+Object(r.b)(e.gradient,t,n,a)+","+Object(i.stringValue)(e.start)+","+Object(i.stringValue)(e.stop)+","+Object(i.stringValue)(e.count)+")"}},function(e,t,n){"use strict";var r=n(147),i=n(0);t.a=function(e,t,n,a){return Object(i.isObject)(e)?"("+Object(r.a)(null,e,t,n,a)+")":e}},function(e,t,n){"use strict";var r=n(147),i=n(428),a=n(148);t.a=function(e,t,n,o,s){var u="";return t.forEach(function(t){var i=Object(r.a)(e,t,n,o,s);u+=t.test?Object(a.a)(t.test,n,o,s)+"?"+i+":":i}),Object(i.a)("o",e,u)}},function(e,t,n){"use strict";var r=n(25),i=n(36),a=n(21),o=n(12),s=n(15),u="datum."+r.j+'<=0?"left":datum.'+r.j+'>=1?"right":"center"';t.a=function(e,t,n,c){var l,f,d={value:0},p={};return p.enter=l={opacity:d},Object(s.a)(l,"fill",t.labelColor),Object(s.a)(l,"font",t.labelFont),Object(s.a)(l,"fontSize",t.labelFontSize),Object(s.a)(l,"fontWeight",t.labelFontWeight),Object(s.a)(l,"baseline",t.gradientLabelBaseline),Object(s.a)(l,"limit",t.gradientLabelLimit),p.exit={opacity:d},p.update=f={opacity:{value:1},text:{field:r.f}},l.x=f.x={field:r.j,mult:t.gradientWidth},l.y=f.y={value:t.gradientHeight,offset:t.gradientLabelOffset},l.align=f.align={signal:u},Object(i.a)(a.e,o.j,r.c,r.j,c,p,n)}},function(e,t,n){"use strict";var r=n(25),i=n(36),a=n(21),o=n(12),s=n(15);t.a=function(e,t,n,u){var c,l,f={value:0},d={};return d.enter=c={opacity:f},Object(s.a)(c,"align",t.labelAlign),Object(s.a)(c,"baseline",t.labelBaseline),Object(s.a)(c,"fill",t.labelColor),Object(s.a)(c,"font",t.labelFont),Object(s.a)(c,"fontSize",t.labelFontSize),Object(s.a)(c,"fontWeight",t.labelFontWeight),Object(s.a)(c,"limit",t.labelLimit),d.exit={opacity:f},d.update=l={opacity:{value:1},text:{field:r.f}},c.x=l.x={field:r.i,offset:t.labelOffset},c.y=l.y={field:r.l,mult:.5,offset:{field:r.o,offset:{field:{group:"entryPadding"},mult:{field:r.e}}}},Object(i.a)(a.e,o.j,r.c,r.p,u,d,n)}},function(e,t,n){"use strict";var r=n(25),i=n(36),a=n(21),o=n(12),s=n(15);t.a=function(e,t,n,u){var c,l,f={value:0},d={};return d.enter=c={opacity:f},Object(s.a)(c,"shape",t.symbolType),Object(s.a)(c,"size",t.symbolSize),Object(s.a)(c,"strokeWidth",t.symbolStrokeWidth),e.fill||(Object(s.a)(c,"fill",t.symbolFillColor),Object(s.a)(c,"stroke",t.symbolStrokeColor)),d.exit={opacity:f},d.update=l={opacity:{value:1}},c.x=l.x={field:r.i,mult:.5},c.y=l.y={field:r.l,mult:.5,offset:{field:r.o,offset:{field:{group:"entryPadding"},mult:{field:r.e}}}},r.h.forEach(function(t){e[t]&&(l[t]=c[t]={scale:e[t],field:r.p})}),Object(i.a)(a.d,o.l,null,r.p,u,d,n)}},function(e,t,n){"use strict";var r=n(25),i=n(36),a=n(21),o=n(12),s=n(15);t.a=function(e,t,n,u){var c,l={value:0},f=e.title,d={};return d.enter=c={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:l},Object(s.a)(c,"align",t.titleAlign),Object(s.a)(c,"baseline",t.titleBaseline),Object(s.a)(c,"fill",t.titleColor),Object(s.a)(c,"font",t.titleFont),Object(s.a)(c,"fontSize",t.titleFontSize),Object(s.a)(c,"fontWeight",t.titleFontWeight),Object(s.a)(c,"limit",t.titleLimit),d.exit={opacity:l},d.update={opacity:{value:1},text:f&&f.signal?{signal:f.signal}:{value:f+""}},Object(i.a)(a.e,o.m,r.d,null,u,d,n)}},function(e,t,n){"use strict";var r=n(0);function i(e){return Object(r.isObject)(e)&&e.signal?e.signal:Object(r.stringValue)(e)}t.a=function(e,t){var n;return Object(r.isObject)(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+i(e.path)+")":e.sphere&&(n="geoShape("+i(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}},function(e,t,n){"use strict";var r=n(430);t.a=function(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Object(r.a)(e),zindex:+e.zindex||void 0}}},function(e,t,n){"use strict";t.a=function(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}},function(e,t,n){"use strict";var r=n(229),i=n(20),a=n(27),o=n(0);t.a=function(e,t,n){var s,u,c,l,f;return e?(s=e.facet)&&(t||Object(o.error)("Only group marks can be faceted."),null!=s.field?l=f=Object(i.k)(n.getData(s.data).output):(e.data?f=Object(i.k)(n.getData(e.data).aggregate):((c=Object(r.a)(Object(o.extend)({type:"aggregate",groupby:Object(o.array)(s.groupby)},s.aggregate),n)).params.key=n.keyRef(s.groupby),c.params.pulse=Object(i.k)(n.getData(s.data).output),l=f=Object(i.k)(n.add(c))),u=n.keyRef(s.groupby,!0))):l=Object(i.k)(n.add(Object(a.d)(null,[{}]))),l||(l=e.$ref?e:Object(i.k)(n.getData(e.data).output)),{key:u,pulse:l,parent:f}}},function(e,t,n){"use strict";var r=n(143),i=n(95),a=n(20),o=n(27),s=n(0);t.a=function(e,t,n){var u,c,l,f,d=e.from.facet,p=d.name,h=Object(a.k)(t.getData(d.data).output);d.name||Object(s.error)("Facet must have a name: "+Object(s.stringValue)(d)),d.data||Object(s.error)("Facet must reference a data set: "+Object(s.stringValue)(d)),d.field?f=t.add(Object(o.q)({field:t.fieldRef(d.field),pulse:h})):d.groupby?f=t.add(Object(o.h)({key:t.keyRef(d.groupby),group:Object(a.k)(t.proxy(n.parent)),pulse:h})):Object(s.error)("Facet must specify groupby or field: "+Object(s.stringValue)(d)),c=(u=t.fork()).add(Object(o.d)()),l=u.add(Object(o.w)({pulse:Object(a.k)(c)})),u.addData(p,new i.a(u,c,c,l)),u.addSignal("parent",null),f.params.subflow={$subflow:Object(r.a)(e,u).toRuntime()}}},function(e,t,n){"use strict";var r=n(143),i=n(27);t.a=function(e,t,n){var a=t.add(Object(i.q)({pulse:n.pulse})),o=t.fork();o.add(Object(i.w)()),o.addSignal("parent",null),a.params.subflow={$subflow:Object(r.a)(e,o).toRuntime()}}},function(e,t,n){"use strict";var r=n(25),i=n(36),a=n(149),o=n(21),s=n(12),u=n(15),c=n(20),l=n(27),f=n(0);t.a=function(e,t){e=Object(f.isString)(e)?{text:e}:e;var n,d,p,h=t.config.title,m=Object(f.extend)({},e.encode);return n={orient:null!=e.orient?e.orient:h.orient},d=Object(c.k)(t.add(Object(l.d)(null,[n]))),m.name=e.name,m.interactive=e.interactive,p=function(e,t,n,a){var c,l,d,p,h,m,g=e.text,v=e.orient||t.orient,y=e.anchor||t.anchor,b=v===r.g||v===r.n?-1:1,w=v===r.n||v===r.a,O={group:w?"width":"height"},x={};x.enter=c={opacity:{value:0}},Object(u.a)(c,"fill",t.color),Object(u.a)(c,"font",t.font),Object(u.a)(c,"fontSize",t.fontSize),Object(u.a)(c,"fontWeight",t.fontWeight),x.exit={opacity:{value:0}},x.update=l={opacity:{value:1},text:Object(f.isObject)(g)?g:{value:g+""},offset:Object(u.b)((null!=e.offset?e.offset:t.offset)||0)},"start"===y?(h=0,m="left"):"end"===y?(h=1,m="right"):(h=.5,m="center");d={field:O,mult:h},p=b<0?{value:0}:w?{field:{group:"height"}}:{field:{group:"width"}},w?(l.x=d,l.y=p,l.angle={value:0},l.baseline={value:v===r.n?"bottom":"top"}):(l.x=p,l.y=d,l.angle={value:90*b},l.baseline={value:"bottom"});return l.align={value:m},l.limit={field:O},Object(u.a)(l,"angle",t.angle),Object(u.a)(l,"baseline",t.baseline),Object(u.a)(l,"limit",t.limit),Object(i.a)(o.e,s.p,e.style||r.b,null,a,x,n)}(e,h,m,d),e.zindex&&(p.zindex=e.zindex),Object(a.a)(p,t)}},function(e,t,n){"use strict";t.a=function(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(Object(r.a)(e,t))});e.on&&e.on.forEach(function(n){Object(i.a)(n,t,e.name)});t.addDataPipeline(e.name,function(e,t,n){var r,i,c,l,f,d=[],p=null,h=!1,m=!1;e.values?d.push(p=u({$ingest:e.values,$format:e.format})):e.url?d.push(p=u({$request:e.url,$format:e.format})):e.source&&(p=r=Object(s.array)(e.source).map(function(e){return Object(a.k)(t.getData(e).output)}),d.push(null));for(i=0,c=n.length;i<c;++i)l=n[i],f=l.metadata,p||f.source||d.push(p=u()),d.push(l),f.generates&&(m=!0),f.modifies&&!m&&(h=!0),f.source?p=l:f.changes&&(p=null);r&&(c=r.length-1,d[0]=Object(o.t)({derive:h,pulse:c?r:r[0]}),(h||c)&&d.splice(1,0,u()));p||d.push(u());return d.push(Object(o.w)({})),d}(e,t,n))};var r=n(229),i=n(431),a=n(20),o=n(27),s=n(0);function u(e){var t=Object(o.d)({},e);return t.metadata={source:!0},t}},function(e,t,n){"use strict";var r=n(1100),i=n(1101),a=n(1102),o=n(1103),s=n(1104),u=n(1105),c=n(429),l=n(12),f=n(149),d=n(15),p=n(25),h=n(20),m=n(27);t.a=function(e,t){var n,g,v,y,b,w,O=Object(r.a)(e,t),x=e.encode||{},j=x.axis||{},_=j.name||void 0,S=j.interactive,M=j.style;return n={orient:e.orient,ticks:!!Object(h.n)(e.ticks,O.ticks),labels:!!Object(h.n)(e.labels,O.labels),grid:!!Object(h.n)(e.grid,O.grid),domain:!!Object(h.n)(e.domain,O.domain),title:!!Object(h.n)(e.title,!1)},g=Object(h.k)(t.add(Object(m.d)({},[n]))),j=Object(d.d)({update:{range:{signal:'abs(span(range("'+e.scale+'")))'},offset:Object(d.b)(Object(h.n)(e.offset,0)),position:Object(d.b)(Object(h.n)(e.position,0)),titlePadding:Object(d.b)(Object(h.n)(e.titlePadding,O.titlePadding)),minExtent:Object(d.b)(Object(h.n)(e.minExtent,O.minExtent)),maxExtent:Object(d.b)(Object(h.n)(e.maxExtent,O.maxExtent))}},x.axis,p.m),v=Object(h.k)(t.add(Object(m.b)({scale:t.scaleRef(e.scale),extra:O.tickExtra,count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),w=[],n.grid&&w.push(Object(a.a)(e,O,x.grid,v)),n.ticks&&(y=Object(h.n)(e.tickSize,O.tickSize),w.push(Object(o.a)(e,O,x.ticks,v,y))),n.labels&&(y=n.ticks?y:0,w.push(Object(s.a)(e,O,x.labels,v,y))),n.domain&&w.push(Object(i.a)(e,O,x.domain,g)),n.title&&w.push(Object(u.a)(e,O,x.title,g)),b=Object(c.a)(l.d,M,_,g,S,j,w),e.zindex&&(b.zindex=e.zindex),Object(f.a)(b,t)}},function(e,t,n){"use strict";var r=n(25),i=n(0);t.a=function(e,t){var n=t.config,a=e.orient,o=a===r.n||a===r.a?n.axisX:n.axisY,s=n["axis"+a[0].toUpperCase()+a.slice(1)],u="band"===t.scaleType(e.scale)&&n.axisBand;return o||s||u?Object(i.extend)({},n.axis,o,s,u):n.axis}},function(e,t,n){"use strict";var r=n(25),i=n(36),a=n(21),o=n(12),s=n(15);function u(e,t){return{scale:e.scale,range:t}}t.a=function(e,t,n,c){var l,f,d,p,h,m=e.orient,g={value:0},v={};return v.enter=l={opacity:g},Object(s.a)(l,"stroke",t.domainColor),Object(s.a)(l,"strokeWidth",t.domainWidth),v.exit={opacity:g},v.update=f={opacity:{value:1}},m===r.n||m===r.a?(d="x",h="y"):(d="y",h="x"),p=d+"2",l[h]=g,f[d]=l[d]=u(e,0),f[p]=l[p]=u(e,1),Object(i.a)(a.c,o.a,null,null,c,v,n)}},function(e,t,n){"use strict";var r=n(25),i=n(36),a=n(21),o=n(12),s=n(15);t.a=function(e,t,n,u){var c,l,f,d,p,h,m,g,v=e.orient,y=e.gridScale,b=v===r.g||v===r.n?1:-1,w=b*e.offset||0,O={value:0},x={};return x.enter=c={opacity:O},Object(s.a)(c,"stroke",t.gridColor),Object(s.a)(c,"strokeWidth",t.gridWidth),Object(s.a)(c,"strokeDash",t.gridDash),x.exit=l={opacity:O},x.update=f={},Object(s.a)(f,"opacity",t.gridOpacity),d={scale:e.scale,field:r.p,band:t.bandPosition,round:t.tickRound,extra:t.tickExtra,offset:t.tickOffset},v===r.n||v===r.a?(p="x",h="y",g="height"):(p="y",h="x",g="width"),m=h+"2",f[p]=c[p]=l[p]=d,y?(c[h]={scale:y,range:0,mult:b,offset:w},f[m]=c[m]={scale:y,range:1,mult:b,offset:w}):(c[h]={value:w},f[m]=c[m]={signal:g,mult:b,offset:w}),Object(i.a)(a.c,o.b,null,r.p,u,x,n)}},function(e,t,n){"use strict";var r=n(25),i=n(36),a=n(21),o=n(12),s=n(15);t.a=function(e,t,n,u,c){var l,f,d,p,h,m=e.orient,g=m===r.g||m===r.n?-1:1,v={value:0},y={};return y.enter=l={opacity:v},Object(s.a)(l,"stroke",t.tickColor),Object(s.a)(l,"strokeWidth",t.tickWidth),y.exit=f={opacity:v},y.update=d={opacity:{value:1}},(p=Object(s.b)(c)).mult=g,h={scale:e.scale,field:r.p,band:t.bandPosition,round:t.tickRound,extra:t.tickExtra,offset:t.tickOffset},m===r.n||m===r.a?(d.y=l.y=v,d.y2=l.y2=p,d.x=l.x=f.x=h):(d.x=l.x=v,d.x2=l.x2=p,d.y=l.y=f.y=h),Object(i.a)(a.c,o.e,null,r.p,u,y,n)}},function(e,t,n){"use strict";var r=n(25),i=n(36),a=n(21),o=n(12),s=n(15),u=n(20);function c(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}t.a=function(e,t,n,l,f){var d,p,h,m,g,v=e.orient,y=v===r.g||v===r.n?-1:1,b=e.scale,w=Object(u.n)(e.labelPadding,t.labelPadding),O=Object(u.n)(e.labelBound,t.labelBound),x=Object(u.n)(e.labelFlush,t.labelFlush),j=null!=x&&!1!==x&&(x=+x)===x,_=+Object(u.n)(e.labelFlushOffset,t.labelFlushOffset),S=Object(u.n)(e.labelOverlap,t.labelOverlap),M={value:0},E={};return E.enter=d={opacity:M},Object(s.a)(d,"angle",t.labelAngle),Object(s.a)(d,"fill",t.labelColor),Object(s.a)(d,"font",t.labelFont),Object(s.a)(d,"fontSize",t.labelFontSize),Object(s.a)(d,"fontWeight",t.labelFontWeight),Object(s.a)(d,"limit",t.labelLimit),E.exit=p={opacity:M},E.update=h={opacity:{value:1},text:{field:r.f}},(m=Object(s.b)(f)).mult=y,m.offset=Object(s.b)(w),m.offset.mult=y,g={scale:b,field:r.p,band:.5,offset:t.tickOffset},v===r.n||v===r.a?(h.y=d.y=m,h.x=d.x=p.x=g,Object(s.a)(h,"align",j?c(b,x,'"left"','"right"','"center"'):"center"),j&&_&&Object(s.a)(h,"dx",c(b,x,-_,_,0)),Object(s.a)(h,"baseline",v===r.n?"bottom":"top")):(h.x=d.x=m,h.y=d.y=p.y=g,Object(s.a)(h,"align",v===r.k?"left":"right"),Object(s.a)(h,"baseline",j?c(b,x,'"bottom"','"top"','"middle"'):"middle"),j&&_&&Object(s.a)(h,"dy",c(b,x,_,-_,0))),e=Object(i.a)(a.e,o.c,r.c,r.p,l,E,n),(S||O)&&(e.overlap={method:S,order:"datum.index",bound:O?{scale:b,orient:v,tolerance:+O}:null}),e}},function(e,t,n){"use strict";var r=n(25),i=n(36),a=n(15),o=n(21),s=n(12);t.a=function(e,t,n,u){var c,l,f,d=e.orient,p=e.title,h=d===r.g||d===r.n?-1:1,m=d===r.n||d===r.a,g={};return g.enter=c={opacity:{value:0}},Object(a.a)(c,"align",t.titleAlign),Object(a.a)(c,"fill",t.titleColor),Object(a.a)(c,"font",t.titleFont),Object(a.a)(c,"fontSize",t.titleFontSize),Object(a.a)(c,"fontWeight",t.titleFontWeight),Object(a.a)(c,"limit",t.titleLimit),g.exit={opacity:{value:0}},g.update=l={opacity:{value:1},text:p&&p.signal?{signal:p.signal}:{value:p+""}},f={scale:e.scale,range:.5},m?(l.x=f,l.angle={value:0},l.baseline={value:d===r.n?"bottom":"top"}):(l.y=f,l.angle={value:90*h},l.baseline={value:"bottom"}),Object(a.a)(l,"angle",t.titleAngle),Object(a.a)(l,"baseline",t.titleBaseline),!Object(a.a)(l,"x",t.titleX)&&m&&!Object(a.e)("x",n)&&(g.enter.auto={value:!0}),!Object(a.a)(l,"y",t.titleY)&&!m&&!Object(a.e)("y",n)&&(g.enter.auto={value:!0}),Object(i.a)(o.e,s.f,r.d,null,u,g,n)}},function(e,t,n){"use strict";t.b=function(e,t){var n,r;e.params&&((n=t.get(e.id))||Object(o.error)("Invalid operator id: "+e.id),r=Object(i.a)(e.params,t),t.dataflow.connect(n,n.parameters(r)))};var r=n(96),i=n(436),a=n(437),o=n(0);t.a=function(e,t){Object(a.c)(e.type)||!e.type?t.operator(e,e.update?Object(r.d)(e.update,t):null):t.transform(e,e.type)}},function(e,t,n){"use strict";var r=n(96),i=n(0);t.a=function(e,t){var n,a=null!=e.filter?Object(r.b)(e.filter,t):void 0,o=null!=e.stream?t.get(e.stream):void 0;e.source?o=t.events(e.source,e.type,a):e.merge&&(o=(n=e.merge.map(t.get.bind(t)))[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(t.get.bind(t)),o=o.between(n[0],n[1])),e.filter&&(o=o.filter(a)),null!=e.throttle&&(o=o.throttle(+e.throttle)),null!=e.debounce&&(o=o.debounce(+e.debounce)),null==o&&Object(i.error)("Invalid stream definition: "+JSON.stringify(e)),e.consume&&o.consume(!0),t.stream(e,o)}},function(e,t,n){"use strict";var r=n(96),i=n(436),a=n(0);t.a=function(e,t){var n=t.get(e.source),o=null,s=e.update,u=void 0;n||Object(a.error)("Source not defined: "+e.source),o=e.target&&e.target.$expr?Object(r.b)(e.target.$expr,t):t.get(e.target),s&&s.$expr&&(s.$params&&(u=Object(i.a)(s.$params,t)),s=Object(r.c)(s.$expr,t)),t.update(e,n,o,s,u)}},function(e,t,n){"use strict";var r=n(1110),i=n(437);function a(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function o(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}t.a=function(e,t,n){return new a(e,t,n)},a.prototype=o.prototype={fork:function(){var e=new o(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,a=r.dataflow;if(r.set(e.id,t),Object(i.b)(e.type)&&(n=e.value)&&(n.$ingest?a.ingest(t,n.$ingest,n.$format):n.$request?a.request(t,n.$request,n.$format):a.pulse(t,a.changeset().insert(n))),e.root&&(r.root=t),e.parent){var o=r.get(e.parent.$ref);o?(a.connect(o,[t]),t.targets().add(o)):(r.unresolved=r.unresolved||[]).push(function(){o=r.get(e.parent.$ref),a.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var s in e.data)n=r.data[s]||(r.data[s]={}),e.data[s].forEach(function(e){n[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[Object(i.a)(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:r.a,setState:r.b}},function(e,t,n){"use strict";t.a=function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)})}t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)}));return n},t.b=function(e){var t=this,n=t.dataflow,a=e.data,o=e.signals;Object.keys(o||{}).forEach(function(e){n.update(t.signals[e],o[e],i)}),Object.keys(a||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(r.truthy).insert(a[e]))}),(e.subcontext||[]).forEach(function(e,n){var r=t.subcontext[n];r&&r.setState(e)})};var r=n(0),i={skip:!0}},function(e,t,n){"use strict";t.d=i,t.c=a,t.a=function(e){var t=e._signals,n=t.width,r=t.height,o=t.padding;function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,function(t){e._width=t.size,e._viewWidth=i(e,t.size),s()},{size:n}),e._resizeHeight=e.add(null,function(t){e._height=t.size,e._viewHeight=a(e,t.size),s()},{size:r});var u=e.add(null,s,{pad:o});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,u.rank=o.rank+1},t.b=function(e,t,n,r,i,a){this.runAfter(function(o){var s=0;o._autosize=0,o.width()!==n&&(s=1,o.width(n),o._resizeWidth.skip(!0)),o.height()!==r&&(s=1,o.height(r),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),s&&o.run("enter"),a&&o.runAfter(function(){o.resize()})},!1,1)};var r="padding";function i(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===r?i.left+i.right:0)}function a(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===r?i.top+i.bottom:0)}},function(e,t,n){"use strict";t.a=function(e){return this._runtime.getState(e||{data:a,signals:o,recurse:!0})},t.b=function(e){var t=this;return t.runAfter(function(){t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0})}),this};var r=n(1),i=n(0);function a(e,t){return t.modified&&Object(i.isArray)(t.input.value)&&e.indexOf("_:vega:_")}function o(e,t){return!("parent"===e||t instanceof r.q.proxy)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1114),i=n(11),a=n(357),o=n(1115),s=n(1169);t.vega=a,t.vl=o;var u=n(1170),c={vega:"Vega","vega-lite":"Vega-Lite"},l={vega:t.vega.version,"vega-lite":t.vl?t.vl.version:"not available"},f={vega:function(e){return e},"vega-lite":function(e){return t.vl.compile(e).spec}};t.default=function e(n,a,o){try{var d=void 0===(o=o||{}).actions||o.actions,p=o.loader||t.vega.loader(),h=o.renderer||"canvas",m=o.logLevel||t.vega.Warn;if(t.vega.isString(a))return p.load(a).then(function(t){return e(n,JSON.parse(t),o)}).catch(Promise.reject);var g=o.config;if(t.vega.isString(g))return p.load(g).then(function(t){return o.config=JSON.parse(t),e(n,a,o)}).catch(Promise.reject);var v,y=void 0;a.$schema?(y=s.default(a.$schema),o.mode&&o.mode!==y.library&&console.warn("The given visualization spec is written in "+c[y.library]+", but mode argument sets "+c[o.mode]+"."),v=y.library,r(y.version,l[v])>0&&console.warn("The input spec uses "+v+" "+y.version+", but the current version of "+c[v]+" is "+l[v]+".")):v=o.mode||"vega";var b=f[v](a);"vega-lite"===v&&b.$schema&&(y=s.default(b.$schema),r(y.version,l.vega)>0&&console.warn("The compiled spec uses Vega "+y.version+", but current version is "+l.vega+"."));var w=i.select(n).classed("vega-embed",!0).html("");o.onBeforeParse&&(b=o.onBeforeParse(b));var O=t.vega.parse(b,o.config),x=new t.vega.View(O,{loader:p,logLevel:m,renderer:h}).initialize(n);if("vega-lite"!==v&&x.hover(),o&&(o.width&&x.width(o.width),o.height&&x.height(o.height),o.padding&&x.padding(o.padding)),x.run(),!1!==d){var j=w.append("div").attr("class","vega-actions");if(!0===d||!1!==d.export){var _="canvas"===h?"png":"svg";j.append("a").text("Export as "+_.toUpperCase()).attr("href","#").attr("target","_blank").attr("download",(a.name||"vega")+"."+_).on("mousedown",function(){var e=this;x.toImageURL(_).then(function(t){e.href=t}).catch(function(e){throw e}),i.event.preventDefault()})}if(!0!==d&&!1===d.source||j.append("a").text("View Source").attr("href","#").on("click",function(){var e,t,n,r,s,u;e=JSON.stringify(a,null,2),t=o.sourceHeader||"",n=o.sourceFooter||"",r="<html><head>"+t+'</head><body><pre><code class="json">',s="</code></pre>"+n+"</body></html>",(u=window.open("")).document.write(r+e+s),u.document.title="Vega JSON Source",i.event.preventDefault()}),!0===d||!1!==d.editor){var S=o.editorUrl||"https://vega.github.io/editor/";j.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){u.post(window,S,{mode:v,spec:JSON.stringify(a,null,2)}),i.event.preventDefault()})}}return Promise.resolve({view:x,spec:a})}catch(e){return Promise.reject(e)}}},function(e,t,n){var r,i,a;i=[],void 0===(a="function"==typeof(r=function(){var e=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,t=/-([0-9A-Za-z-.]+)/;function n(e){var t=e.replace(/^v/,"").split("."),n=t.splice(0,2);return n.push(t.join(".")),n}function r(e){return isNaN(Number(e))?e:Number(e)}function i(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");if(!e.test(t))throw new Error("Invalid argument not valid semver")}return function(e,a){[e,a].forEach(i);for(var o=n(e),s=n(a),u=0;u<3;u++){var c=parseInt(o[u]||0,10),l=parseInt(s[u]||0,10);if(c>l)return 1;if(l>c)return-1}if([o[2],s[2]].every(t.test.bind(t))){var f=t.exec(o[2])[1].split(".").map(r),d=t.exec(s[2])[1].split(".").map(r);for(u=0;u<Math.max(f.length,d.length);u++){if(void 0===f[u]||"string"==typeof d[u]&&"number"==typeof f[u])return-1;if(void 0===d[u]||"string"==typeof f[u]&&"number"==typeof d[u])return 1;if(f[u]>d[u])return 1;if(d[u]>f[u])return-1}}else if([o[2],s[2]].some(t.test.bind(t)))return t.test(o[2])?-1:1;return 0}})?r.apply(t,i):r)||(e.exports=a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aggregate=n(97),t.axis=n(439),t.bin=n(98),t.channel=n(6),t.compositeMark=n(150);var r=n(1122);t.compile=r.compile,t.config=n(440),t.data=n(47),t.datetime=n(62),t.encoding=n(28),t.facet=n(1166),t.fieldDef=n(7),t.legend=n(231),t.mark=n(22),t.scale=n(10),t.sort=n(156),t.spec=n(73),t.stack=n(233),t.timeUnit=n(99),t.transform=n(153),t.type=n(23),t.util=n(2),t.validate=n(1167),t.version=n(1168).version},function(e,t,n){t.parse=n(1117),t.stringify=n(1118)},function(e,t){var n,r,i,a,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},s=function(e){throw{name:"SyntaxError",message:e,at:n,text:i}},u=function(e){return e&&e!==r&&s("Expected '"+e+"' instead of '"+r+"'"),r=i.charAt(n),n+=1,r},c=function(){var e,t="";for("-"===r&&(t="-",u("-"));r>="0"&&r<="9";)t+=r,u();if("."===r)for(t+=".";u()&&r>="0"&&r<="9";)t+=r;if("e"===r||"E"===r)for(t+=r,u(),"-"!==r&&"+"!==r||(t+=r,u());r>="0"&&r<="9";)t+=r,u();if(e=+t,isFinite(e))return e;s("Bad number")},l=function(){var e,t,n,i="";if('"'===r)for(;u();){if('"'===r)return u(),i;if("\\"===r)if(u(),"u"===r){for(n=0,t=0;t<4&&(e=parseInt(u(),16),isFinite(e));t+=1)n=16*n+e;i+=String.fromCharCode(n)}else{if("string"!=typeof o[r])break;i+=o[r]}else i+=r}s("Bad string")},f=function(){for(;r&&r<=" ";)u()};a=function(){switch(f(),r){case"{":return function(){var e,t={};if("{"===r){if(u("{"),f(),"}"===r)return u("}"),t;for(;r;){if(e=l(),f(),u(":"),Object.hasOwnProperty.call(t,e)&&s('Duplicate key "'+e+'"'),t[e]=a(),f(),"}"===r)return u("}"),t;u(","),f()}}s("Bad object")}();case"[":return function(){var e=[];if("["===r){if(u("["),f(),"]"===r)return u("]"),e;for(;r;){if(e.push(a()),f(),"]"===r)return u("]"),e;u(","),f()}}s("Bad array")}();case'"':return l();case"-":return c();default:return r>="0"&&r<="9"?c():function(){switch(r){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}s("Unexpected '"+r+"'")}()}},e.exports=function(e,t){var o;return i=e,n=0,r=" ",o=a(),f(),r&&s("Syntax error"),"function"==typeof t?function e(n,r){var i,a,o=n[r];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(void 0!==(a=e(o,i))?o[i]=a:delete o[i]);return t.call(n,r,o)}({"":o},""):o}},function(e,t){var n,r,i,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function s(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}e.exports=function(e,t,a){var o;if(n="",r="","number"==typeof a)for(o=0;o<a;o+=1)r+=" ";else"string"==typeof a&&(r=a);if(i=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,a){var o,u,c,l,f,d=n,p=a[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof i&&(p=i.call(a,t,p)),typeof p){case"string":return s(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(n+=r,f=[],"[object Array]"===Object.prototype.toString.apply(p)){for(l=p.length,o=0;o<l;o+=1)f[o]=e(o,p)||"null";return c=0===f.length?"[]":n?"[\n"+n+f.join(",\n"+n)+"\n"+d+"]":"["+f.join(",")+"]",n=d,c}if(i&&"object"==typeof i)for(l=i.length,o=0;o<l;o+=1)"string"==typeof(u=i[o])&&(c=e(u,p))&&f.push(s(u)+(n?": ":":")+c);else for(u in p)Object.prototype.hasOwnProperty.call(p,u)&&(c=e(u,p))&&f.push(s(u)+(n?": ":":")+c);return c=0===f.length?"{}":n?"{\n"+n+f.join(",\n"+n)+"\n"+d+"}":"{"+f.join(",")+"}",n=d,c}}("",{"":e})}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(28),s=n(28),u=n(7),c=n(3),l=n(1120);function f(e){return!!e.type}t.BOXPLOT="box-plot",t.isBoxPlotDef=f,t.BOXPLOT_STYLES=["boxWhisker","box","boxMid"],t.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX={box:["size","color"],boxWhisker:["color"],boxMid:["color"]};var d=["x","y","color","detail","opacity","size"];function p(e){return r({},e,{encoding:o.reduce(e.encoding,function(e,n,r){return d.indexOf(r)>-1?e[r]=n:c.warn(c.message.incompatibleChannel(r,t.BOXPLOT)),e},{})})}t.filterUnsupportedChannels=p,t.normalizeBoxPlot=function(e,n){var o=(e=p(e)).mark,d=(e.encoding,e.selection),h=(e.projection,i(e,["mark","encoding","selection","projection"])),m=void 0;f(o)&&o.extent&&a.isNumber(o.extent)&&(m=o.extent);var g,v,y,b,w=function(e,n,r){var a=function(e,n){e.mark;var r,a,o=e.encoding;if(e.projection,i(e,["mark","encoding","projection"]),"vertical"===n?(a="y",r=o.y):(a="x",r=o.x),r&&r.aggregate){var s=r.aggregate,u=i(r,["aggregate"]);s!==t.BOXPLOT&&c.warn("Continuous axis should not have customized aggregation function "+s),r=u}return{continuousAxisChannelDef:r,continuousAxis:a}}(e,n),o=a.continuousAxisChannelDef,l=a.continuousAxis,f=e.encoding,d=void 0===r,p=[{op:"q1",field:o.field,as:"lower_box_"+o.field},{op:"q3",field:o.field,as:"upper_box_"+o.field},{op:"median",field:o.field,as:"mid_box_"+o.field}],h=[];p.push({op:"min",field:o.field,as:(d?"lower_whisker_":"min_")+o.field}),p.push({op:"max",field:o.field,as:(d?"upper_whisker_":"max_")+o.field}),d||(h=[{calculate:"datum.upper_box_"+o.field+" - datum.lower_box_"+o.field,as:"iqr_"+o.field},{calculate:"min(datum.upper_box_"+o.field+" + datum.iqr_"+o.field+" * "+r+", datum.max_"+o.field+")",as:"upper_whisker_"+o.field},{calculate:"max(datum.lower_box_"+o.field+" - datum.iqr_"+o.field+" * "+r+", datum.min_"+o.field+")",as:"lower_whisker_"+o.field}]);var m=[],g=[],v=[],y={};return s.forEach(f,function(e,n){if(n!==l)if(u.isFieldDef(e)){if(e.aggregate&&e.aggregate!==t.BOXPLOT)p.push({op:e.aggregate,field:e.field,as:u.vgField(e)});else if(void 0===e.aggregate){var r=u.vgField(e),i=e.bin;if(i){var a=e.field;g.push({bin:i,field:a,as:r})}else if(e.timeUnit){var o=e.timeUnit;a=e.field,v.push({timeUnit:o,field:a,as:r})}m.push(r)}y[n]={field:u.vgField(e),type:e.type}}else y[n]=f[n]}),{transform:[].concat(g,v,[{aggregate:p,groupby:m}],h),continuousAxisChannelDef:o,continuousAxis:l,encodingWithoutContinuousAxis:y}}(e,function(e){var n=e.mark,r=e.encoding;if(e.projection,i(e,["mark","encoding","projection"]),u.isFieldDef(r.x)&&u.isContinuous(r.x)){if(u.isFieldDef(r.y)&&u.isContinuous(r.y)){if(void 0===r.x.aggregate&&r.y.aggregate===t.BOXPLOT)return"vertical";if(void 0===r.y.aggregate&&r.x.aggregate===t.BOXPLOT)return"horizontal";if(r.x.aggregate===t.BOXPLOT&&r.y.aggregate===t.BOXPLOT)throw new Error("Both x and y cannot have aggregate");return f(n)&&n.orient?n.orient:"vertical"}return"horizontal"}if(u.isFieldDef(r.y)&&u.isContinuous(r.y))return"vertical";throw new Error("Need a valid continuous axis for boxplots")}(e),m),O=w.transform,x=w.continuousAxisChannelDef,j=w.continuousAxis,_=w.encodingWithoutContinuousAxis,S=(_.color,_.size),M=i(_,["color","size"]),E=S?{size:S}:l.getMarkSpecificConfigMixins(n.box,"size"),k={};return x.scale&&(k.scale=x.scale),x.axis&&(k.axis=x.axis),r({},h,{transform:O,layer:[{mark:{type:"rule",style:"boxWhisker"},encoding:r((g={},g[j]=r({field:"lower_whisker_"+x.field,type:x.type},k),g[j+"2"]={field:"lower_box_"+x.field,type:x.type},g),M,l.getMarkSpecificConfigMixins(n.boxWhisker,"color"))},{mark:{type:"rule",style:"boxWhisker"},encoding:r((v={},v[j]={field:"upper_box_"+x.field,type:x.type},v[j+"2"]={field:"upper_whisker_"+x.field,type:x.type},v),M,l.getMarkSpecificConfigMixins(n.boxWhisker,"color"))},r({},d?{selection:d}:{},{mark:{type:"bar",style:"box"},encoding:r((y={},y[j]={field:"lower_box_"+x.field,type:x.type},y[j+"2"]={field:"upper_box_"+x.field,type:x.type},y),_,_.color?{}:l.getMarkSpecificConfigMixins(n.box,"color"),E)}),{mark:{type:"tick",style:"boxMid"},encoding:r((b={},b[j]={field:"mid_box_"+x.field,type:x.type},b),M,l.getMarkSpecificConfigMixins(n.boxMid,"color"),E)}]})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMarkSpecificConfigMixins=function(e,t){var n,r=e[t];return void 0!==r?((n={})[t]={value:r},n):{}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.ERRORBAR="error-bar",t.normalizeErrorBar=function(e){e.mark,e.selection,e.projection;var t=e.encoding,n=i(e,["mark","selection","projection","encoding"]),a=(t.size,i(t,["size"])),o=(t.x2,t.y2,i(t,["x2","y2"])),s=(o.x,o.y,i(o,["x","y"]));if(!t.x2&&!t.y2)throw new Error("Neither x2 or y2 provided");return r({},n,{layer:[{mark:"rule",encoding:a},{mark:"tick",encoding:o},{mark:"tick",encoding:t.x2?r({x:t.x2,y:t.y},s):r({x:t.x,y:t.y2},s)}]})}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(440),a=n(7),o=n(3),s=n(73),u=n(1124),c=n(2),l=n(151),f=n(458),d=n(447);t.compile=function(e,t){void 0===t&&(t={}),t.logger&&o.set(t.logger),t.fieldTitle&&a.setTitleFormatter(t.fieldTitle);try{var n=i.initConfig(c.mergeDeep({},t.config,e.config)),p=s.normalize(e,n),h=u.normalizeAutoSize(e.autosize,n.autosize,s.isLayerSpec(p)||s.isUnitSpec(p)),m=l.buildModel(p,null,"",void 0,void 0,n,"fit"===h.type);return m.parse(),d.optimizeDataflow(m.component.data),function(e,t){var n=e.config?i.stripAndRedirectConfig(e.config):void 0,a=[].concat(e.assembleSelectionData([]),f.assembleRootData(e.component.data)),o=e.assembleProjections(),s=e.assembleTitle(),u=e.assembleGroupStyle(),c=e.assembleLayoutSignals();return c=c.filter(function(e){return"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)}),{spec:r({$schema:"https://vega.github.io/schema/vega/v3.0.json"},e.description?{description:e.description}:{},t,s?{title:s}:{},u?{style:u}:{},{data:a},o.length>0?{projections:o}:{},e.assembleGroup(c.concat(e.assembleSelectionTopLevelSignals([]))),n?{config:n}:{})}}(m,function(e,t,n){return r({autosize:1===c.keys(n).length&&n.type?n.type:n},u.extractTopLevelProperties(t),u.extractTopLevelProperties(e))}(e,n,h))}finally{t.logger&&o.reset(),t.fieldTitle&&a.resetTitleFormatter()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VL_ONLY_GUIDE_CONFIG=["shortTimeLabels"]},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(442),a=n(3);function o(e){return i.isString(e)?{type:e}:e||{}}t.normalizeAutoSize=function(e,t,n){void 0===n&&(n=!0);var i=r({type:"pad"},o(t),o(e));return"fit"===i.type&&(n||(a.warn(a.message.FIT_NON_SINGLE),i.type="pad")),i};var s=["background","padding"];t.extractTopLevelProperties=function(e){return s.reduce(function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t},{})}},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=n(73),u=n(443),c=n(151),l=n(102),f=function(e){function t(t,n,r,i,a){var u=e.call(this,t,n,r,a,t.resolve)||this;return u.type="concat",t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&o.warn(o.message.CONCAT_CANNOT_SHARE_AXIS),u.isVConcat=s.isVConcatSpec(t),u.children=(s.isVConcatSpec(t)?t.vconcat:t.hconcat).map(function(e,t){return c.buildModel(e,u,u.getName("concat_"+t),void 0,i,a,!1)}),u}return i(t,e),t.prototype.parseLayoutSize=function(){l.parseConcatLayoutSize(this)},t.prototype.parseAxisGroup=function(){return null},t.prototype.assembleLayout=function(){return a({padding:{row:10,column:10},offset:10},this.isVConcat?{columns:1}:{},{bounds:"full",align:"each"})},t}(u.BaseConcatModel);t.ConcatModel=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("main"),i=a("grid");function a(e){return function(t,n){return n[e]&&t.push(n[e].combine()),t}}t.assembleAxes=function(e){return[].concat(e.x?[].concat(e.x.reduce(r,[]),e.x.reduce(i,[])):[],e.y?[].concat(e.y.reduce(r,[]),e.y.reduce(i,[])):[])}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(30).Split);t.LegendComponent=a},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(6),o=n(7),s=n(22),u=n(10),c=n(2),l=n(24),f=n(38);function d(e){if(o.isValueDef(e)){if(o.hasConditionalValueDef(e)){var t=i.isArray(e.condition)?e.condition.map(function(e){return e.value}):[e.condition.value];return Math.max.apply(null,[e.value].concat(t))}return e.value}}t.symbols=function(e,t,n,i,u){if("gradient"!==u){var p={},h=n.mark();switch(h){case s.BAR:case s.TICK:case s.TEXT:p.shape={value:"square"};break;case s.CIRCLE:case s.SQUARE:p.shape={value:h};break;case s.POINT:case s.LINE:case s.GEOSHAPE:case s.AREA:}var m=n.markDef.filled,g=i===a.COLOR?c.without(s.FILL_STROKE_CONFIG,[m?"fill":"stroke","strokeDash","strokeDashOffset"]):s.FILL_STROKE_CONFIG;if(g=c.without(g,["strokeDash","strokeDashOffset"]),l.applyMarkConfig(p,n,g),i!==a.COLOR){var v=f.color(n);v.fill&&(v.fill.field||"transparent"===v.fill.value)&&delete v.fill,v.stroke&&(v.stroke.field||"transparent"===v.stroke.value)&&delete v.stroke,p=r({},p,v)}if(i!==a.SHAPE){var y=n.encoding.shape;o.isValueDef(y)&&(p.shape={value:y.value})}if(i!==a.OPACITY){var b=d(n.encoding.opacity)||n.markDef.opacity;b&&(p.opacity={value:b})}return p=r({},p,t),c.keys(p).length>0?p:void 0}},t.gradient=function(e,t,n,i,a){var o={};if("gradient"===a){var s=d(n.encoding.opacity)||n.markDef.opacity;s&&(o.opacity={value:s})}return o=r({},o,t),c.keys(o).length>0?o:void 0},t.labels=function(e,t,n,i,a){var s=n.legend(i),f=n.config,d={};if(o.isTimeFieldDef(e)){var p=n.getScaleComponent(i).get("type")===u.ScaleType.UTC;t=r({text:{signal:l.timeFormatExpression("datum.value",e.timeUnit,s.format,f.legend.shortTimeLabels,f.timeFormat,p)}},t)}return d=r({},d,t),c.keys(d).length>0?d:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(62),a=n(10),o=n(2);t.values=function(e){var t=e.values;return t&&i.isDateTime(t[0])?t.map(function(e){return{signal:i.dateTimeExpr(e,!0)}}):t},t.type=function(e,t,n){if(t===r.COLOR&&("quantitative"===e&&!a.isBinScale(n)||"temporal"===e&&o.contains(["time","utc"],n)))return"gradient"}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(442),o=n(2),s=n(29),u=n(13);function c(e){return e.children.reduce(function(e,t){return e.concat(t.assembleProjections())},l(e))}function l(e){var t=e.component.projection;if(!t||t.merged)return[];var n=t.combine(),u=n.name,c=i(n,["name"]),l={signal:"["+t.size.map(function(e){return e.signal}).join(", ")+"]"},f=t.data.reduce(function(t,n){var r=s.isVgSignalRef(n)?n.signal:"data('"+e.lookupDataSource(n)+"')";return o.contains(t,r)||t.push(r),t},[]);return f.length<=0&&a.error("Projection's fit didn't find any data sources"),[r({name:u,size:l,fit:{signal:f.length>1?"["+f.join(", ")+"]":f[0]}},c)]}t.assembleProjections=function(e){return u.isLayerModel(e)||u.isConcatModel(e)||u.isRepeatModel(e)?c(e):l(e)},t.assembleProjectionsForModelAndChildren=c,t.assembleProjectionForModel=l},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(47),o=n(7),s=n(22),u=n(1135),c=n(23),l=n(2),f=n(13),d=n(1136);function p(e){f.isUnitModel(e)?e.component.projection=function(e){var t=e.specifiedProjection,n=e.markDef,u=e.config,f=e.encoding,p=n&&n.type===s.GEOSHAPE,h=f&&[i.X,i.Y,i.X2,i.Y2].some(function(e){var t=f[e];return o.isFieldDef(t)&&l.contains([c.LATITUDE,c.LONGITUDE],t.type)});if(p||h){var m=[];return[[i.X,i.Y],[i.X2,i.Y2]].forEach(function(t){(e.channelHasField(t[0])||e.channelHasField(t[1]))&&m.push({signal:e.getName("geojson_"+m.length)})}),e.channelHasField(i.SHAPE)&&e.fieldDef(i.SHAPE).type===c.GEOJSON&&m.push({signal:e.getName("geojson_"+m.length)}),0===m.length&&m.push(e.requestDataName(a.MAIN)),new d.ProjectionComponent(e.projectionName(!0),r({},u.projection||{},t||{}),[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")],m)}return}(e):e.component.projection=function(e){if(0===e.children.length)return;var t,n=l.every(e.children,function(e){p(e);var n=e.component.projection;if(n){if(t){var r=function(e,t){var n=l.every(u.PROJECTION_PROPERTIES,function(n){return!e.explicit.hasOwnProperty(n)&&!t.explicit.hasOwnProperty(n)||!(!e.explicit.hasOwnProperty(n)||!t.explicit.hasOwnProperty(n)||l.stringify(e.get(n))!==l.stringify(t.get(n)))});if(l.stringify(e.size)===l.stringify(t.size)){if(n)return e;if(l.stringify(e.explicit)===l.stringify({}))return t;if(l.stringify(t.explicit)===l.stringify({}))return e}return null}(t,n);return r&&(t=r),!!r}return t=n,!0}return!0});if(t&&n){var r=e.projectionName(!0),i=new d.ProjectionComponent(r,t.specifiedProjection,t.size,l.duplicate(t.data));return e.children.forEach(function(e){e.component.projection&&(i.data=i.data.concat(e.component.projection.data),e.renameProjection(e.component.projection.get("name"),r),e.component.projection.merged=!0)}),i}return}(e)}t.parseProjection=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROJECTION_PROPERTIES=["type","clipAngle","clipExtent","center","rotate","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"]},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n,r,i){var o=e.call(this,a({},n),{name:t})||this;return o.specifiedProjection=n,o.size=r,o.data=i,o.merged=!1,o}return i(t,e),t}(n(30).Split);t.ProjectionComponent=o},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(2),s=n(29),u=n(13),c=n(16),l=n(101);function f(e){return o.keys(e.component.scales).reduce(function(t,n){var a=e.component.scales[n];if(a.merged)return t;var o=a.combine(),s=o.domainRaw,u=o.range,f=o.name,p=o.type,h=(o.domainRaw,o.range,i(o,["name","type","domainRaw","range"]));return u=d(u,f,e,n),s&&c.isRawSelectionDomain(s)&&(s=c.selectionScaleDomain(e,s)),t.push(r({name:f,type:p,domain:l.assembleDomain(e,n)},s?{domainRaw:s}:{},{range:u},h)),t},[])}function d(e,t,n,r){if("x"===r||"y"===r){if(s.isVgRangeStep(e))return{step:{signal:t+"_step"}};if(a.isArray(e)&&2===e.length){var i=e[0],o=e[1];if(0===i&&s.isVgSignalRef(o))return[0,{signal:n.getSizeName(o.signal)}];if(s.isVgSignalRef(i)&&0===o)return[{signal:n.getSizeName(i.signal)},0]}}return e}t.assembleScales=function e(t){return u.isLayerModel(t)||u.isConcatModel(t)||u.isRepeatModel(t)?t.children.reduce(function(t,n){return t.concat(e(n))},f(t)):f(t)},t.assembleScalesForModel=f,t.assembleScaleRange=d},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=n(14),o=n(157),s=n(236),u=n(158),c=n(159);function l(e){return function t(n){if(!(n instanceof u.SourceNode)){var r=n.parent;e(n)&&t(r)}}}t.iterateFromLeaves=l,t.moveParseUp=function(e){var t=e.parent;if(e instanceof s.ParseNode){if(t instanceof u.SourceNode)return!1;if(t.numChildren()>1)return!0;if(t instanceof s.ParseNode)t.merge(e);else{if(i.hasIntersection(t.producedFields(),e.dependentFields()))return!0;e.swapWithParent()}}return!0},t.removeUnusedSubtrees=function(e){return!(e instanceof a.OutputNode||e.numChildren()>0||e instanceof o.FacetNode||(e.remove(),0))},t.removeDuplicateTimeUnits=function(e){var t={};return l(function(e){if(e instanceof c.TimeUnitNode){var n=e.producedFields();i.keys(n).every(function(e){return!!t[e]})?e.remove():t=r({},t,n)}return!0})(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(7),a=n(22),o=n(10),s=n(23),u=n(2),c=n(13),l=n(155),f=n(30),d=n(1140),p=n(101),h=n(448),m=n(449),g=n(1141);function v(e){c.isUnitModel(e)?e.component.scales=function(e){var t=e.encoding,n=e.config,o=e.mark();return r.SCALE_CHANNELS.reduce(function(c,l){var f,p={},h=t[l];if(i.isFieldDef(h)&&(o===a.GEOSHAPE&&i.isFieldDef(h)&&l===r.SHAPE&&h.type===s.GEOJSON||u.contains([r.X,r.Y,r.X2,r.Y2],l)&&u.contains([s.LATITUDE,s.LONGITUDE],h.type)))return c;if(i.isFieldDef(h)?(f=h,p=h.scale||{}):i.hasConditionalFieldDef(h)?(f=h.condition,p=h.condition.scale||{}):l===r.X?f=i.getFieldDef(t.x2):l===r.Y&&(f=i.getFieldDef(t.y2)),f){var m=p.type,v=g.scaleType(p.type,l,f,o,n.scale);c[l]=new d.ScaleComponent(e.scaleName(l+"",!0),{value:v,explicit:m===v})}return c},{})}(e):e.component.scales=function(e){for(var t=e.component.scales={},n={},r=e.component.resolve,i=function(t){v(t),u.keys(t.component.scales).forEach(function(i){if(r.scale[i]=r.scale[i]||l.defaultScaleResolve(i,e),"shared"===r.scale[i]){var a=n[i],s=t.component.scales[i].getWithExplicit("type");a?o.scaleCompatible(a.value,s.value)?n[i]=f.mergeValuesWithExplicit(a,s,"type","scale",y):(r.scale[i]="independent",delete n[i]):n[i]=s}})},a=0,s=e.children;a<s.length;a++){var c=s[a];i(c)}return u.keys(n).forEach(function(r){var i=e.scaleName(r,!0),a=n[r];t[r]=new d.ScaleComponent(i,a);for(var o=0,s=e.children;o<s.length;o++){var u=s[o],c=u.component.scales[r];c&&(u.renameScale(c.get("name"),i),c.merged=!0)}}),t}(e)}t.parseScale=function(e){v(e),p.parseScaleDomain(e);for(var t=0,n=o.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES;t<n.length;t++){var r=n[t];h.parseScaleProperty(e,r)}m.parseScaleRange(e)},t.parseScaleCore=v;var y=f.tieBreakByComparing(function(e,t){return o.scaleTypePrecedence(e)-o.scaleTypePrecedence(t)})},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,n){var r=e.call(this,{},{name:t})||this;return r.merged=!1,r.domains=[],r.setWithExplicit("type",n),r}return i(t,e),t}(n(30).Split);t.ScaleComponent=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(3),a=n(10),o=n(10),s=n(23),u=n(2),c=n(2);function l(e,t){var n=t.type;return c.contains([s.Type.ORDINAL,s.Type.NOMINAL],n)?void 0===e||o.hasDiscreteDomain(e):n===s.Type.TEMPORAL?c.contains([a.ScaleType.TIME,a.ScaleType.UTC,a.ScaleType.SEQUENTIAL,void 0],e):n!==s.Type.QUANTITATIVE||(t.bin?c.contains([a.ScaleType.BIN_LINEAR,a.ScaleType.BIN_ORDINAL,a.ScaleType.LINEAR],e):c.contains([a.ScaleType.LOG,a.ScaleType.POW,a.ScaleType.SQRT,a.ScaleType.QUANTILE,a.ScaleType.QUANTIZE,a.ScaleType.LINEAR,a.ScaleType.SEQUENTIAL,void 0],e))}t.scaleType=function(e,t,n,o,s){var c=function(e,t,n,a){switch(t.type){case"nominal":case"ordinal":if("color"===e||"discrete"===r.rangeType(e))return"shape"===e&&"ordinal"===t.type&&i.warn(i.message.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(u.contains(["x","y"],e)){if("rect"===n)return"band";if("bar"===n)return"band"}return"point";case"temporal":return"color"===e?"sequential":"discrete"===r.rangeType(e)?(i.warn(i.message.discreteChannelCannotEncode(e,"temporal")),"ordinal"):"time";case"quantitative":return"color"===e?t.bin?"bin-ordinal":"sequential":"discrete"===r.rangeType(e)?(i.warn(i.message.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):t.bin&&"x"!==e&&"y"!==e?"bin-linear":"linear";case"latitude":case"longitude":case"geojson":return}throw new Error(i.message.invalidFieldType(t.type))}(t,n,o);return r.isScaleChannel(t)?void 0!==e?a.channelSupportScaleType(t,e)?l(e,n)?e:(i.warn(i.message.scaleTypeNotWorkWithFieldDef(e,c)),c):(i.warn(i.message.scaleTypeNotWorkWithChannel(t,e,c)),c):c:null},t.fieldDefMatchScaleType=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(450),a=n(16),o={predicate:"vlSingle",scaleDomain:"vlSingleDomain",signals:i.default.signals,topLevelSignals:function(e,t,n){var i=n.filter(function(e){return e.name===t.name}),o="data("+r.stringValue(t.name+a.STORE)+")",s=o+"[0].values";return i.length?n:n.concat({name:t.name,update:o+".length && {"+t.project.map(function(e,t){return e.field+": "+s+"["+t+"]"}).join(", ")+"}"})},modifyExpr:function(e,t){return t.name+a.TUPLE+", "+("global"===t.resolve?"true":"{unit: "+a.unitName(e)+"}")}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1144),i=n(239),a=n(1145),o=n(160),s=n(1146),u=n(1147),c=n(1148),l={project:a.default,toggle:s.default,scales:o.default,translate:u.default,zoom:c.default,inputs:r.default,nearest:i.default};t.forEachTransform=function(e,t){for(var n in l)l[n].has(e)&&t(l[n])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(16),a=n(239),o={has:function(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind},topLevelSignals:function(e,t,n){var i=t.name,o=t.project,s=t.bind,u=a.default.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return o.forEach(function(e){var a=r.varName(i+"_"+e.field);n.filter(function(e){return e.name===a}).length||n.unshift({name:a,value:"",on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? "+u+r.accessPath(e.field)+" : null"}],bind:s[e.field]||s[e.channel]||s})}),n},signals:function(e,t,n){var a=t.name,o=t.project,s=n.filter(function(e){return e.name===a+i.TUPLE})[0],u=o.map(function(e){return r.stringValue(e.field)}).join(", "),c=o.map(function(e){return r.varName(a+"_"+e.field)});return s.update=c.join(" && ")+" ? {fields: ["+u+"], values: ["+c.join(", ")+"]} : null",delete s.value,delete s.on,n}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(2),a=n(159),o={has:function(e){var t=e;return void 0!==t.fields||void 0!==t.encodings},parse:function(e,t,n){var o={},s={};(t.fields||[]).forEach(function(e){return o[e]=null}),(t.encodings||[]).forEach(function(t){var n=e.fieldDef(t);if(n)if(n.timeUnit){var i=e.vgField(t);o[i]=t,s[i]={as:i,field:n.field,timeUnit:n.timeUnit}}else o[n.field]=t;else r.warn(r.message.cannotProjectOnChannelWithoutField(t))});var u=n.project||(n.project=[]);for(var c in o)o.hasOwnProperty(c)&&u.push({field:c,channel:o[c]});var l=n.fields||(n.fields={});u.filter(function(e){return e.channel}).forEach(function(e){return l[e.channel]=e.field}),i.keys(s).length&&(n.timeUnit=new a.TimeUnitNode(s))}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),i={has:function(e){return"multi"===e.type&&e.toggle},signals:function(e,t,n){return n.concat({name:t.name+"_toggle",value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t,n){var i=t.name+r.TUPLE,a=t.name+"_toggle";return a+" ? null : "+i+", "+("global"===t.resolve?a+" ? null : true, ":a+" ? null : {unit: "+r.unitName(e)+"}, ")+a+" ? "+i+" : null"}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(146),i=n(6),a=n(238),o=n(16),s=n(160),u="_translate_anchor",c="_translate_delta",l={has:function(e){return"interval"===e.type&&e.translate},signals:function(e,t,n){var l=t.name,d=s.default.has(t),p=l+u,h=o.positionalProjections(t),m=h.x,g=h.y,v=r.selector(t.translate,"scope");return d||(v=v.map(function(e){return e.between[0].markname=l+a.BRUSH,e})),n.push({name:p,value:{},on:[{events:v.map(function(e){return e.between[0]}),update:"{x: x(unit), y: y(unit)"+(null!==m?", extent_x: "+(d?s.domain(e,i.X):"slice("+o.channelSignalName(t,"x","visual")+")"):"")+(null!==g?", extent_y: "+(d?s.domain(e,i.Y):"slice("+o.channelSignalName(t,"y","visual")+")"):"")+"}"}]},{name:l+c,value:{},on:[{events:v,update:"{x: "+p+".x - x(unit), y: "+p+".y - y(unit)}"}]}),null!==m&&f(e,t,i.X,"width",n),null!==g&&f(e,t,i.Y,"height",n),n}};function f(e,t,n,r,a){var l=t.name,f=s.default.has(t),d=a.filter(function(e){return e.name===o.channelSignalName(t,n,f?"data":"visual")})[0],p=l+u,h=l+c,m=e.getSizeSignalRef(r).signal,g=e.getScaleComponent(n),v=g.get("type"),y=f&&n===i.X?"-":"",b=p+".extent_"+n,w=(f?"log"===v?"panLog":"pow"===v?"panPow":"panLinear":"panLinear")+"("+b+", "+(""+y+h+"."+n+" / "+(f?""+m:"span("+b+")"))+(f&&"pow"===v?", "+(g.get("exponent")||1):"")+")";d.on.push({events:{signal:h},update:f?w:"clampRange("+w+", 0, "+m+")"})}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(146),i=n(6),a=n(2),o=n(238),s=n(16),u=n(160),c="_zoom_anchor",l="_zoom_delta",f={has:function(e){return"interval"===e.type&&e.zoom},signals:function(e,t,n){var f=t.name,p=u.default.has(t),h=f+l,m=s.positionalProjections(t),g=m.x,v=m.y,y=a.stringValue(e.scaleName(i.X)),b=a.stringValue(e.scaleName(i.Y)),w=r.selector(t.zoom,"scope");return p||(w=w.map(function(e){return e.markname=f+o.BRUSH,e})),n.push({name:f+c,on:[{events:w,update:p?"{"+[y?"x: invert("+y+", x(unit))":"",b?"y: invert("+b+", y(unit))":""].filter(function(e){return!!e}).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:h,on:[{events:w,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),null!==g&&d(e,t,"x","width",n),null!==v&&d(e,t,"y","height",n),n}};function d(e,t,n,r,i){var a=t.name,o=u.default.has(t),f=i.filter(function(e){return e.name===s.channelSignalName(t,n,o?"data":"visual")})[0],d=e.getSizeSignalRef(r).signal,p=e.getScaleComponent(n),h=p.get("type"),m=o?u.domain(e,n):f.name,g=a+l,v=(o?"log"===h?"zoomLog":"pow"===h?"zoomPow":"zoomLinear":"zoomLinear")+"("+m+", "+(""+a+c+"."+n)+", "+g+(o&&"pow"===h?", "+(p.get("exponent")||1):"")+")";f.on.push({events:{signal:g},update:o?v:"clampRange("+v+", 0, "+d+")"})}t.default=f},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),s=n(28),u=n(7),c=n(3),l=n(10),f=n(2),d=n(29),p=n(151),h=n(458),m=n(152),g=n(444),v=n(102),y=n(13),b=n(459),w=n(155),O=n(101),x=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,a,t.resolve)||this;o.type="facet",o.child=p.buildModel(t.spec,o,o.getName("child"),void 0,i,a,!1),o.children=[o.child];var s=b.replaceRepeaterInFacet(t.facet,i);return o.facet=o.initFacet(s),o}return i(t,e),t.prototype.initFacet=function(e){return s.reduce(e,function(e,t,n){return f.contains([o.ROW,o.COLUMN],n)?void 0===t.field?(c.warn(c.message.emptyFieldDef(t,n)),e):(e[n]=u.normalize(t,n),e):(c.warn(c.message.incompatibleChannel(n,"facet")),e)},{})},t.prototype.channelHasField=function(e){return!!this.facet[e]},t.prototype.fieldDef=function(e){return this.facet[e]},t.prototype.parseData=function(){this.component.data=m.parseData(this),this.child.parseData()},t.prototype.parseLayoutSize=function(){v.parseChildrenLayoutSize(this)},t.prototype.parseSelection=function(){this.child.parseSelection(),this.component.selection=this.child.component.selection},t.prototype.parseMarkGroup=function(){this.child.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){this.child.parseAxisAndHeader(),this.parseHeader("column"),this.parseHeader("row"),this.mergeChildAxis("x"),this.mergeChildAxis("y")},t.prototype.parseHeader=function(e){if(this.channelHasField(e)){var t=this.facet[e],n=t.header||{},r=void 0!==n.title?n.title:u.title(t,this.config);this.child.component.layoutHeaders[e].title&&(r+=" / "+this.child.component.layoutHeaders[e].title,this.child.component.layoutHeaders[e].title=null),this.component.layoutHeaders[e]={title:r,facetFieldDef:t,header:[this.makeHeaderComponent(e,!0)]}}},t.prototype.makeHeaderComponent=function(e,t){var n="row"===e?"height":"width";return{labels:t,sizeSignal:this.child.component.layoutSize.get(n)?this.child.getSizeSignalRef(n):void 0,axes:[]}},t.prototype.mergeChildAxis=function(e){var t=this.child;if(t.component.axes[e]){var n=this.component,r=n.layoutHeaders,i=n.resolve;if(i.axis[e]=w.parseGuideResolve(i,e),"shared"===i.axis[e])for(var a="x"===e?"column":"row",o=r[a],s=0,u=t.component.axes[e];s<u.length;s++){var c=u[s],l=c.main,f=g.getHeaderType(l.get("orient"));o[f]=o[f]||[this.makeHeaderComponent(a,!1)],o[f][0].axes.push(l.combine()),delete c.main}}},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.child.assembleSelectionTopLevelSignals(e)},t.prototype.assembleSelectionSignals=function(){return this.child.assembleSelectionSignals(),[]},t.prototype.assembleSelectionData=function(e){return this.child.assembleSelectionData(e)},t.prototype.getLayoutBandMixins=function(e){for(var t={},n="header"===e?"headerBand":"footerBand",r=0,i=["row","column"];r<i.length;r++){var a=i[r],o=this.component.layoutHeaders[a][e];if(o&&o[0]){var s="row"===a?"height":"width";this.child.component.layoutSize.get(s)||(t[n]=t[n]||{},t[n][a]=.5)}}return t},t.prototype.assembleLayout=function(){var e=this.channelHasField("column")?this.columnDistinctSignal():1;return a({padding:{row:10,column:10}},this.getLayoutBandMixins("header"),this.getLayoutBandMixins("footer"),{offset:10,columns:e,bounds:"full",align:"all"})},t.prototype.assembleLayoutSignals=function(){return this.child.assembleLayoutSignals()},t.prototype.columnDistinctSignal=function(){if(!(this.parent&&this.parent instanceof t))return{signal:"length(data('"+this.getName("column_domain")+"'))"}},t.prototype.assembleGroup=function(n){return this.parent&&this.parent instanceof t?a({},this.channelHasField("column")?{encode:{update:{columns:{field:u.vgField(this.facet.column,{prefix:"distinct"})}}}}:{},e.prototype.assembleGroup.call(this,n)):e.prototype.assembleGroup.call(this,n)},t.prototype.getCardinalityAggregateForChild=function(){var e=[],n=[];if(this.child instanceof t)this.child.channelHasField("column")&&(e.push(u.vgField(this.child.facet.column)),n.push("distinct"));else for(var r=0,i=["x","y"];r<i.length;r++){var a=i[r],o=this.child.component.scales[a];if(o&&!o.merged){var s=o.get("type"),f=o.get("range");if(l.hasDiscreteDomain(s)&&d.isVgRangeStep(f)){var p=O.assembleDomain(this.child,a),h=O.getFieldFromDomain(p);h?(e.push(h),n.push("distinct")):c.warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e.length?{fields:e,ops:n}:void 0},t.prototype.assembleMarks=function(){var e=this.child,t=this.facet,n=this.component.data.facetRoot,r=h.assembleFacetData(n),i=this.channelHasField(o.ROW),s=this.channelHasField(o.COLUMN),u=e.assembleLayoutSize(),c={};i&&s&&(c.aggregate={cross:!0});var l=this.getCardinalityAggregateForChild();l&&(c.aggregate=a({},c.aggregate,l));var f=e.assembleTitle(),d=e.assembleGroupStyle();return[a({name:this.getName("cell"),type:"group"},f?{title:f}:{},d?{style:d}:{},{from:{facet:a({name:n.name,data:n.data,groupby:[].concat(i?[this.vgField(o.ROW)]:[],s?[this.vgField(o.COLUMN)]:[])},c)},sort:{field:[].concat(i?[this.vgField(o.ROW,{expr:"datum"})]:[],s?[this.vgField(o.COLUMN,{expr:"datum"})]:[]),order:[].concat(i?[t.row.sort||"ascending"]:[],s?[t.column.sort||"ascending"]:[])}},r.length>0?{data:r}:{},u?{encode:{update:u}}:{},e.assembleGroup())]},t.prototype.getMapping=function(){return this.facet},t}(y.ModelWithField);t.FacetModel=x},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=n(73),u=n(2),c=n(460),l=n(152),f=n(154),d=n(102),p=n(445),h=n(13),m=n(16),g=n(462),v=function(e){function t(n,r,i,u,c,l,f){var d=e.call(this,n,r,i,l,n.resolve)||this;d.type="layer";var p=a({},u,n.width?{width:n.width}:{},n.height?{height:n.height}:{});return d.initSize(p),d.children=n.layer.map(function(e,n){if(s.isLayerSpec(e))return new t(e,d,d.getName("layer_"+n),p,c,l,f);if(s.isUnitSpec(e))return new g.UnitModel(e,d,d.getName("layer_"+n),p,c,l,f);throw new Error(o.message.INVALID_SPEC)}),d}return i(t,e),t.prototype.parseData=function(){this.component.data=l.parseData(this);for(var e=0,t=this.children;e<t.length;e++){t[e].parseData()}},t.prototype.parseLayoutSize=function(){d.parseLayerLayoutSize(this)},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),u.keys(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})},n=0,r=this.children;n<r.length;n++){t(r[n])}},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children;e<t.length;e++){t[e].parseMarkGroup()}},t.prototype.parseAxisAndHeader=function(){c.parseLayerAxis(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleSelectionSignals())},[])},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},f.assembleLayoutSignals(this))},t.prototype.assembleSelectionData=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},[])},t.prototype.assembleTitle=function(){var t=e.prototype.assembleTitle.call(this);if(t)return t;for(var n=0,r=this.children;n<r.length;n++){if(t=r[n].assembleTitle())return t}},t.prototype.assembleLayout=function(){return null},t.prototype.assembleMarks=function(){return m.assembleLayerSelectionMarks(this,u.flatten(this.children.map(function(e){return e.assembleMarks()})))},t.prototype.assembleLegends=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLegends())},p.assembleLegends(this))},t}(h.Model);t.LayerModel=v},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(30).Split);t.AxisComponentPart=a},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(7),o=n(10),s=n(23),u=n(2),c=n(24),l=n(461);function f(e,t,n){return void 0!==e.labelAngle?(e.labelAngle%360+360)%360:t===i.X&&u.contains([s.NOMINAL,s.ORDINAL],n.type)?270:void 0}function d(e,t){if(e>0){if(e%360>180)return"top"===t?"left":"right";if(e%360<180)return"top"===t?"right":"left"}else if(e<0)return d(e%360+360,t)}t.labels=function(e,t,n,i){var s=e.fieldDef(t)||("x"===t?e.fieldDef("x2"):"y"===t?e.fieldDef("y2"):void 0),p=e.axis(t),h=e.config,m={};if(a.isTimeFieldDef(s)){var g=e.getScaleComponent(t).get("type")===o.ScaleType.UTC;m.text={signal:c.timeFormatExpression("datum.value",s.timeUnit,p.format,h.axis.shortTimeLabels,h.timeFormat,g)}}var v=l.getAxisConfig("labelAngle",e.config,t,i,e.getScaleComponent(t).get("type"));if(void 0===v&&(v=f(p,t,s))&&(m.angle={value:v}),void 0!==v&&"x"===t){var y=d(v,i);y&&(m.align={value:y}),u.contains([90,270],v)&&(m.baseline={value:"middle"})}return m=r({},m,n),0===u.keys(m).length?void 0:m},t.labelAngle=f,t.labelAlign=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(98),i=n(6),a=n(62),o=n(7),s=n(3),u=n(10),c=n(23),l=n(2);function f(e,t,n,r){return!n&&t[e]}t.domainAndTicks=f,t.domain=f,t.ticks=f,t.grid=function(e,t){return!u.hasDiscreteDomain(e)&&!t.bin},t.gridScale=function(e,t,n){if(n){var r="x"===t?"y":"x";if(e.getScaleComponent(r))return e.scaleName(r)}},t.labelFlush=function(e,t,n,r){if(!r)return void 0!==n.labelFlush?n.labelFlush:!("x"!==t||!l.contains(["quantitative","temporal"],e.type))||void 0},t.labelOverlap=function(e,t,n,r){return void 0!==t.labelOverlap?t.labelOverlap:"nominal"!==e.type?"log"!==r||"greedy":void 0},t.minMaxExtent=function(e,t){return t?0:e},t.orient=function(e){switch(e){case i.X:return"bottom";case i.Y:return"left"}throw new Error(s.message.INVALID_CHANNEL_FOR_AXIS)},t.tickCount=function(e,t,n,r){if(!u.hasDiscreteDomain(n)&&"log"!==n&&!l.contains(["month","hours","day","quarter"],t.timeUnit))return t.bin?{signal:"ceil("+r.signal+"/20)"}:{signal:"ceil("+r.signal+"/40)"}},t.title=function(e,t,n){var r=o.title(t,n);return e?l.truncate(r,e):r},t.values=function(e,t,n){var i=e.values;if(e.values&&a.isDateTime(i[0]))return i.map(function(e){return{signal:a.dateTimeExpr(e,!0)}});if(!i&&n.bin&&n.type===c.QUANTITATIVE){var o=t.getName(r.binToString(n.bin)+"_"+n.field+"_bins");return{signal:"sequence("+o+".start, "+o+".stop + "+o+".step, "+o+".step)"}}return i},t.zindex=function(e){return e?0:1}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(28),a=n(7),o=n(3),s=n(22),u=n(23),c=n(2),l=n(24);t.normalizeMarkDef=function(e,t,n){var f=s.isMarkDef(e)?r({},e):{type:e},d=f.orient||l.getMarkConfig("orient",f,n);return f.orient=function(e,t,n){switch(e){case s.POINT:case s.CIRCLE:case s.SQUARE:case s.TEXT:case s.RECT:return}var r=t.y2,i=t.x2;switch(e){case s.RULE:if(i&&r)return;case s.BAR:case s.AREA:if(r)return"vertical";if(i)return"horizontal";if(e===s.RULE){if(t.x&&!t.y)return"vertical";if(t.y&&!t.x)return"horizontal"}case s.LINE:case s.TICK:var c=a.isFieldDef(t.x)&&a.isContinuous(t.x),l=a.isFieldDef(t.y)&&a.isContinuous(t.y);if(c&&!l)return"tick"!==e?"horizontal":"vertical";if(!c&&l)return"tick"!==e?"vertical":"horizontal";if(c&&l){var f=t.x,d=t.y,p=f.type===u.TEMPORAL,h=d.type===u.TEMPORAL;return p&&!h?"tick"!==e?"vertical":"horizontal":!p&&h?"tick"!==e?"horizontal":"vertical":!f.aggregate&&d.aggregate?"tick"!==e?"vertical":"horizontal":f.aggregate&&!d.aggregate?"tick"!==e?"horizontal":"vertical":n||(e===s.LINE&&t.order||o.warn(o.message.unclearOrientContinuous(e)),"vertical")}return void o.warn(o.message.unclearOrientDiscreteOrEmpty(e))}return"vertical"}(f.type,t,d),void 0!==d&&d!==f.orient&&o.warn(o.message.orientOverridden(f.orient,d)),void 0===(f.opacity||l.getMarkConfig("opacity",f,n))&&(f.opacity=function(e,t){if(c.contains([s.POINT,s.TICK,s.CIRCLE,s.SQUARE],e)&&!i.isAggregate(t))return.7}(f.type,t)),void 0===f.filled&&(f.filled=function(e,t){var n=l.getMarkConfig("filled",e,t),r=e.type;return void 0!==n?n:r!==s.POINT&&r!==s.LINE&&r!==s.RULE}(f,n)),f}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(47),o=n(28),s=n(7),u=n(22),c=n(156),l=n(2),f=n(24),d=n(1156),p=n(1157),h=n(1158),m=n(1159),g=n(1160),v=n(1161),y=n(1162),b=n(1163),w=n(1164),O={area:d.area,bar:p.bar,line:m.line,point:g.point,text:b.text,tick:w.tick,rect:v.rect,rule:y.rule,circle:g.circle,square:g.square,geoshape:h.geoshape};t.parseMarkGroup=function(e){return l.contains([u.LINE,u.AREA],e.mark())?function(e){var t=e.mark(),n=_(e.encoding),i=O[t].postEncodingTransform?O[t].postEncodingTransform(e):null,o=void 0!==e.markDef.clip?!!e.markDef.clip:S(e),s=f.getStyles(e.markDef),u=j(e),c=[r({name:e.getName("marks"),type:O[t].vgMark},o?{clip:!0}:{},s?{style:s}:{},u?{sort:u}:{},{from:{data:(n.length>0?x:"")+e.requestDataName(a.MAIN)},encode:{update:O[t].encodeEntry(e)}},i?{transform:i}:{})];return n.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:x+e.requestDataName(a.MAIN),data:e.requestDataName(a.MAIN),groupby:n}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:c}]:c}(e):function(e){var t=e.mark(),n=f.getStyles(e.markDef),i=void 0!==e.markDef.clip?!!e.markDef.clip:S(e),o=O[t].postEncodingTransform?O[t].postEncodingTransform(e):null,s=[];return s.push(r({name:e.getName("marks"),type:O[t].vgMark},i?{clip:!0}:{},n?{style:n}:{},{from:{data:e.requestDataName(a.MAIN)},encode:{update:O[t].encodeEntry(e)}},o?{transform:o}:{})),s}(e)};var x="faceted_path_";function j(e){if("line"===e.mark()&&e.channelHasField("order"))return f.sortParams(e.encoding.order,{expr:"datum"});var t="horizontal"===e.markDef.orient?"y":"x",n=e.sort(t),r=c.isSortField(n)?s.vgField({aggregate:o.isAggregate(e.encoding)?n.op:void 0,field:n.field},{expr:"datum"}):e.vgField(t,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"});return r?{field:r,order:"descending"}:void 0}function _(e){return l.keys(e).reduce(function(t,n){switch(n){case"x":case"y":case"order":case"tooltip":case"href":case"x2":case"y2":case"text":case"shape":return t;case"detail":var r=e[n];return r&&(i.isArray(r)?r:[r]).forEach(function(e){e.aggregate||t.push(s.vgField(e,{}))}),t;case"color":case"size":case"opacity":var a=s.getFieldDef(e[n]);return a&&!a.aggregate&&t.push(s.vgField(a,{})),t;default:throw new Error("Bug: Channel "+n+" unimplemented for line mark")}},[])}function S(e){var t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("domainRaw")||n&&n.get("domainRaw"))}t.getPathSort=j,t.pathGroupingFields=_},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(38);t.area={vgMark:"area",encodeEntry:function(e){return r({},i.baseEncodeEntry(e,!1),i.pointPosition("x",e,"zeroOrMin"),i.pointPosition("y",e,"zeroOrMin"),i.pointPosition2(e,"zeroOrMin"))}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(6),o=n(7),s=n(3),u=n(10),c=n(29),l=n(38),f=n(63);function d(e,t,n){if(n.bar.discreteBandSize)return{value:n.bar.discreteBandSize};if(t){var r=t.get("type");if(r!==u.ScaleType.POINT)return r===u.ScaleType.BAND?f.bandRef(e):{value:n.bar.continuousBandSize};var a=t.get("range");if(c.isVgRangeStep(a)&&i.isNumber(a.step))return{value:a.step-1};s.warn(s.message.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}return n.scale.rangeStep&&null!==n.scale.rangeStep?{value:n.scale.rangeStep-1}:{value:20}}t.bar={vgMark:"rect",encodeEntry:function(e){e.stack;return r({},l.baseEncodeEntry(e,!0),function(e,t){var n=e.config,i=e.width,s=e.markDef.orient,c=e.encoding.size,p=e.encoding.x,h=e.scaleName(a.X),m=e.getScaleComponent(a.X);if("horizontal"===s)return r({},l.pointPosition("x",e,"zeroOrMin"),l.pointPosition2(e,"zeroOrMin"));if(o.isFieldDef(p)){var g=m.get("type");if(p.bin&&!c&&!u.hasDiscreteDomain(g))return l.binnedPosition(p,"x",e.scaleName("x"),n.bar.binSpacing,m.get("reverse"));if(g===u.ScaleType.BAND)return l.bandPosition(p,"x",e)}return l.centeredBandPosition("x",e,r({},f.mid(i)),d(h,m,n))}(e),function(e,t){var n=e.config,i=e.encoding,s=e.height,c=e.markDef.orient,p=i.size,h=i.y,m=e.scaleName(a.Y),g=e.getScaleComponent(a.Y);if("vertical"===c)return r({},l.pointPosition("y",e,"zeroOrMin"),l.pointPosition2(e,"zeroOrMin"));if(o.isFieldDef(h)){var v=g.get("type");if(h.bin&&!p&&!u.hasDiscreteDomain(v))return l.binnedPosition(h,"y",e.scaleName("y"),n.bar.binSpacing,g.get("reverse"));if(v===u.ScaleType.BAND)return l.bandPosition(h,"y",e)}return l.centeredBandPosition("y",e,f.mid(s),d(m,g,n))}(e))}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(38),a=n(7),o=n(23);t.geoshape={vgMark:"shape",encodeEntry:function(e){return r({},i.baseEncodeEntry(e,!0))},postEncodingTransform:function(e){var t=e.encoding.shape;return[r({type:"geoshape",projection:e.projectionName()},t&&a.isFieldDef(t)&&t.type===o.GEOJSON?{field:a.vgField(t,{expr:"datum"})}:{})]}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(38),a=n(63);t.line={vgMark:"line",encodeEntry:function(e){var t=e.width,n=e.height;return r({},i.baseEncodeEntry(e,!0),i.pointPosition("x",e,a.mid(t)),i.pointPosition("y",e,a.mid(n)),i.nonPosition("size",e,{vgChannel:"strokeWidth"}))}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),a=n(38),o=n(63);function s(e,t){var n=e.config,i=e.width,s=e.height;return r({},a.baseEncodeEntry(e,!0),a.pointPosition("x",e,o.mid(i)),a.pointPosition("y",e,o.mid(s)),a.nonPosition("size",e),u(e,n,t))}function u(e,t,n){return n?{shape:{value:n}}:a.nonPosition("shape",e,{defaultValue:i.getMarkConfig("shape",e.markDef,t)})}t.shapeMixins=u,t.point={vgMark:"symbol",encodeEntry:function(e){return s(e)}},t.circle={vgMark:"symbol",encodeEntry:function(e){return s(e,"circle")}},t.square={vgMark:"symbol",encodeEntry:function(e){return s(e,"square")}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(7),o=n(3),s=n(22),u=n(10),c=n(38);t.rect={vgMark:"rect",encodeEntry:function(e){return r({},c.baseEncodeEntry(e,!0),function(e){var t=e.encoding.x,n=e.encoding.x2,l=e.getScaleComponent(i.X),f=l?l.get("type"):void 0;if(a.isFieldDef(t)&&t.bin&&!n)return c.binnedPosition(t,"x",e.scaleName("x"),0,l.get("reverse"));if(a.isFieldDef(t)&&l&&u.hasDiscreteDomain(f)){if(f===u.ScaleType.BAND)return c.bandPosition(t,"x",e);throw new Error(o.message.scaleTypeNotWorkWithMark(s.RECT,f))}return r({},c.pointPosition("x",e,"zeroOrMax"),c.pointPosition2(e,"zeroOrMin","x2"))}(e),function(e){var t=e.encoding.y,n=e.encoding.y2,l=e.getScaleComponent(i.Y),f=l?l.get("type"):void 0;if(a.isFieldDef(t)&&t.bin&&!n)return c.binnedPosition(t,"y",e.scaleName("y"),0,l.get("reverse"));if(a.isFieldDef(t)&&l&&u.hasDiscreteDomain(f)){if(f===u.ScaleType.BAND)return c.bandPosition(t,"y",e);throw new Error(o.message.scaleTypeNotWorkWithMark(s.RECT,f))}return r({},c.pointPosition("y",e,"zeroOrMax"),c.pointPosition2(e,"zeroOrMin","y2"))}(e))}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(38),a=n(63);t.rule={vgMark:"rule",encodeEntry:function(e){e.config;var t=e.markDef,n=e.width,o=e.height,s=t.orient;return e.encoding.x||e.encoding.y?r({},i.baseEncodeEntry(e,!0),i.pointPosition("x",e,"horizontal"===s?"zeroOrMin":a.mid(n)),i.pointPosition("y",e,"vertical"===s?"zeroOrMin":a.mid(o)),"vertical"!==s?i.pointPosition2(e,"zeroOrMax","x2"):{},"horizontal"!==s?i.pointPosition2(e,"zeroOrMax","y2"):{},i.nonPosition("size",e,{vgChannel:"strokeWidth"})):{}}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(28),o=n(7),s=n(23),u=n(24),c=n(38),l=n(63);t.text={vgMark:"text",encodeEntry:function(e){var t=e.config,n=e.encoding,f=e.height,d=n.text;return r({},c.baseEncodeEntry(e,!0),c.pointPosition("x",e,function(e,t){if(o.isFieldDef(t)&&t.type===s.QUANTITATIVE)return{field:{group:"width"},offset:-5};return{value:e.scale.textXRangeStep/2}}(t,d)),c.pointPosition("y",e,l.mid(f)),c.text(e),c.nonPosition("size",e,{vgChannel:"fontSize"}),c.valueIfDefined("align",function(e,t,n){if(void 0===(e.align||u.getMarkConfig("align",e,n)))return a.channelHasField(t,i.X)?"center":"right";return}(e.markDef,n,t)))}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(29),a=n(38),o=n(63);t.tick={vgMark:"rect",encodeEntry:function(e){var t,n=e.config,s=e.markDef,u=e.width,c=e.height,l=s.orient,f="horizontal"===l?"width":"height",d="horizontal"===l?"height":"width";return r({},a.baseEncodeEntry(e,!0),a.pointPosition("x",e,o.mid(u),"xc"),a.pointPosition("y",e,o.mid(c),"yc"),a.nonPosition("size",e,{defaultValue:function(e){var t=e.config,n=e.markDef.orient,r=e.getScaleComponent("horizontal"===n?"x":"y");if(void 0!==t.tick.bandSize)return t.tick.bandSize;var a=r?r.get("range"):void 0,o=a&&i.isVgRangeStep(a)?a.step:t.scale.rangeStep;if("number"!=typeof o)throw new Error("Function does not handle non-numeric rangeStep");return o/1.5}(e),vgChannel:f}),((t={})[d]={value:n.tick.thickness},t))}}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=n(443),s=n(151),u=n(102),c=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,o,t.resolve)||this;return s.type="repeat",t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&a.warn(a.message.REPEAT_CANNOT_SHARE_AXIS),s.repeat=t.repeat,s.children=s._initChildren(t,s.repeat,i,o),s}return i(t,e),t.prototype._initChildren=function(e,t,n,r){for(var i=[],a=t.row||[n?n.row:null],o=t.column||[n?n.column:null],u=0,c=a;u<c.length;u++)for(var l=c[u],f=0,d=o;f<d.length;f++){var p=d[f],h=(l?"_"+l:"")+(p?"_"+p:""),m={row:l,column:p};i.push(s.buildModel(e.spec,this,this.getName("child"+h),void 0,m,r,!1))}return i},t.prototype.parseLayoutSize=function(){u.parseRepeatLayoutSize(this)},t.prototype.assembleLayout=function(){return{padding:{row:10,column:10},offset:10,columns:this.repeat&&this.repeat.column?this.repeat.column.length:1,bounds:"full",align:"all"}},t}(o.BaseConcatModel);t.RepeatModel=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),i=n(22),a=n(2);t.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]},t.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:a.toSet(["row","column","x","y","size","color","detail"]),line:a.toSet(["row","column","x","y","color","detail"]),area:a.toSet(["row","column","x","y","color","detail"]),tick:a.toSet(["row","column","x","y","color","detail"]),circle:a.toSet(["row","column","x","y","color","size","detail"]),square:a.toSet(["row","column","x","y","color","size","detail"]),point:a.toSet(["row","column","x","y","color","size","detail","shape"]),geoshape:a.toSet(["row","column","color","detail","shape"]),text:a.toSet(["row","column","size","color","text"])},t.getEncodingMappingError=function(e,n,a){void 0===n&&(n=t.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===a&&(a=t.DEFAULT_SUPPORTED_CHANNEL_TYPE);var o=r.isMarkDef(e.mark)?e.mark.type:e.mark,s=e.encoding,u=n[o],c=a[o];for(var l in u)if(!(u[l]in s))return'Missing encoding channel "'+u[l]+'" for mark "'+o+'"';for(var f in s)if(!c[f])return'Encoding channel "'+f+'" is not supported by mark type "'+o+'"';return o!==i.BAR||s.x||s.y?null:"Missing both x and y for bar"}},function(e,t){e.exports={name:"vega-lite",author:'Jeffrey Heer, Dominik Moritz, Kanit "Ham" Wongsuphasawat',version:"2.1.3",collaborators:["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (https://www.domoritz.de)","Jeffrey Heer <jheer@uw.edu> (http://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications.",main:"build/src/index.js",unpkg:"build/vega-lite.min.js",jsdelivr:"build/vega-lite.min.js",types:"typings/vega-lite.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},directories:{test:"test"},scripts:{pretsc:"mkdir -p build && rm -rf build/*/** && cp package.json build/",tsc:"tsc",prebuild:"mkdir -p build/site build/test-gallery",build:"npm run build:only","build:only":"npm run tsc && cp package.json build && browserify src/index.ts -p tsify -d -s vl | exorcist build/vega-lite.js.map > build/vega-lite.js",postbuild:"node node_modules/uglify-js/bin/uglifyjs build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && npm run schema","build:examples":"npm run data && npm run build:only && npm run build:examples-only","build:examples-only":"npm run build:example && npm run build:examples-normalized","build:examples-normalized":"rm -f examples/specs/normalized/*.vl.json && scripts/build-normalized-examples","build:example":"TZ=America/Los_Angeles scripts/build-examples.sh","build:toc":"bundle exec jekyll build -q && scripts/generate-toc","build:site":"browserify site/static/main.ts -p [tsify -p site] -d | exorcist build/site/main.js.map > build/site/main.js","build:versions":"scripts/update-version.sh","build:test-gallery":"browserify test-gallery/main.ts -p [tsify -p test-gallery] -d > build/test-gallery/main.js","check:examples":"scripts/check-examples.sh","check:schema":"scripts/check-schema.sh",clean:"rm -rf build && rm -f vega-lite.* & find -E src test site examples -regex '.*\\.(js|js.map|d.ts)' -delete && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' -type f -exec rm -f {} +",data:"rsync -r node_modules/vega-datasets/data/* data",link:"npm link && npm link vega-lite",deploy:"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh","deploy:schema":"scripts/deploy-schema.sh",prestart:"npm run data && npm run build && scripts/index-examples",start:"nodemon -x 'npm run build:test-gallery' & browser-sync start --server --files 'build/test-gallery/main.js' --index 'test-gallery/index.html'",poststart:"rm examples/all-examples.json",preschema:"npm run prebuild",schema:"ts-json-schema-generator --path tsconfig.json --type TopLevelExtendedSpec > build/vega-lite-schema.json && npm run renameschema && cp build/vega-lite-schema.json _data/",renameschema:"scripts/rename-schema.sh",presite:"npm run prebuild && npm run data && npm run build:site && npm run build:toc && npm run build:versions && scripts/create-example-pages",site:"bundle exec jekyll serve --incremental",lint:"tslint -p .",test:"npm run build:only && npm run test:only && npm run test:runtime && npm run lint",posttest:"npm run schema && npm run data && npm run mocha:examples","test:nocompile":"npm run test:only && npm run test:runtime && npm run lint && npm run mocha:examples","test:only":"nyc --reporter=html --reporter=text-summary npm run mocha:test","test:runtime":"TZ=America/Los_Angeles wdio wdio.conf.js","test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true npm run test:runtime","test:debug":"npm run tsc && mocha --recursive --debug-brk --inspect build/test","test:debug-examples":"npm run tsc && npm run schema && mocha --recursive --debug-brk --inspect build/examples","mocha:test":"mocha --require source-map-support/register --reporter dot --recursive build/test","mocha:examples":"mocha --require source-map-support/register --reporter dot --recursive build/examples",codecov:"nyc report --reporter=json && codecov -f coverage/*.json","watch:build":"watchify src/index.ts -p tsify -v -d -s vl -o 'exorcist build/vega-lite.js.map > build/vega-lite.js'","watch:tsc":"npm run tsc -- -w","watch:test":"nodemon -x 'npm test'",watch:"nodemon -x 'npm run build && npm run test:nocompile' # already ran schema in build"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@types/chai":"^4.1.2","@types/d3":"^4.12.0","@types/highlight.js":"^9.12.2","@types/mkdirp":"^0.5.2","@types/mocha":"^2.2.48","@types/node":"^9.4.0","@types/webdriverio":"^4.8.8",ajv:"^6.1.1","browser-sync":"^2.23.6","browserify-shim":"^3.8.14",browserify:"^15.2.0",chai:"^4.1.2",cheerio:"^1.0.0-rc.2",chromedriver:"^2.35.0",codecov:"^3.0.0",d3:"^4.13.0",exorcist:"^1.0.0","highlight.js":"^9.12.0",mkdirp:"^0.5.1",mocha:"^5.0.0",nodemon:"^1.14.12",nyc:"^11.4.1","source-map-support":"^0.5.3","svg2png-many":"^0.0.7","ts-json-schema-generator":"^0.19.0","ts-node":"^4.1.0",tsify:"^3.0.4","tslint-eslint-rules":"^4.1.1",tslint:"5.9.1",typescript:"^2.7.1","uglify-js":"^3.3.9","vega-datasets":"^1.14.0","vega-embed":"^3.0.0","vega-tooltip":"^0.5.1",vega:"^3.0.10",watchify:"^3.10.0","wdio-chromedriver-service":"^0.1.2","wdio-dot-reporter":"0.0.9","wdio-mocha-framework":"^0.5.12","wdio-static-server-service":"^1.0.1",webdriverio:"^4.10.2","yaml-front-matter":"^3.4.0"},dependencies:{"@types/json-stable-stringify":"^1.0.32","json-stable-stringify":"^1.0.1",tslib:"^1.9.0","vega-event-selector":"^2.0.0","vega-util":"^1.7.0",yargs:"^11.0.0"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t[0],version:t[1]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post=function(e,t,n){var r=e.open(t),i=250,a=~~(1e4/i);e.addEventListener("message",function t(n){n.source===r&&(a=0,e.removeEventListener("message",t,!1))},!1),setTimeout(function e(){a<=0||(r.postMessage(n,"*"),setTimeout(e,i),a-=1)},i)}}],[849]);
//# sourceMappingURL=util-egal.js.map